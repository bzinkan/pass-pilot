var v0=t=>{throw TypeError(t)};var Sm=(t,e,n)=>e.has(t)||v0("Cannot "+n);var O=(t,e,n)=>(Sm(t,e,"read from private field"),n?n.call(t):e.get(t)),ge=(t,e,n)=>e.has(t)?v0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),re=(t,e,n,r)=>(Sm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),be=(t,e,n)=>(Sm(t,e,"access private method"),n);var Mu=(t,e,n,r)=>({set _(s){re(t,e,s,n)},get _(){return O(t,e,r)}});function pk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function gS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yS={exports:{}},Zh={},vS={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),gk=Symbol.for("react.portal"),yk=Symbol.for("react.fragment"),vk=Symbol.for("react.strict_mode"),xk=Symbol.for("react.profiler"),wk=Symbol.for("react.provider"),_k=Symbol.for("react.context"),Ek=Symbol.for("react.forward_ref"),Sk=Symbol.for("react.suspense"),Tk=Symbol.for("react.memo"),bk=Symbol.for("react.lazy"),x0=Symbol.iterator;function Nk(t){return t===null||typeof t!="object"?null:(t=x0&&t[x0]||t["@@iterator"],typeof t=="function"?t:null)}var xS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wS=Object.assign,_S={};function qa(t,e,n){this.props=t,this.context=e,this.refs=_S,this.updater=n||xS}qa.prototype.isReactComponent={};qa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ES(){}ES.prototype=qa.prototype;function ky(t,e,n){this.props=t,this.context=e,this.refs=_S,this.updater=n||xS}var Dy=ky.prototype=new ES;Dy.constructor=ky;wS(Dy,qa.prototype);Dy.isPureReactComponent=!0;var w0=Array.isArray,SS=Object.prototype.hasOwnProperty,Oy={current:null},TS={key:!0,ref:!0,__self:!0,__source:!0};function bS(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)SS.call(e,r)&&!TS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Wc,type:t,key:i,ref:a,props:s,_owner:Oy.current}}function Ck(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function My(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function Ik(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function Tm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ik(""+t.key):e.toString(36)}function gd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Wc:case gk:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Tm(a,0):r,w0(s)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),gd(s,e,n,"",function(d){return d})):s!=null&&(My(s)&&(s=Ck(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(_0,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",w0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Tm(i,l);a+=gd(i,e,n,c,s)}else if(c=Nk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Tm(i,l++),a+=gd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Lu(t,e,n){if(t==null)return t;var r=[],s=0;return gd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Pk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},yd={transition:null},Rk={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:yd,ReactCurrentOwner:Oy};function NS(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Lu,forEach:function(t,e,n){Lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lu(t,function(){e++}),e},toArray:function(t){return Lu(t,function(e){return e})||[]},only:function(t){if(!My(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=qa;Pe.Fragment=yk;Pe.Profiler=xk;Pe.PureComponent=ky;Pe.StrictMode=vk;Pe.Suspense=Sk;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rk;Pe.act=NS;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wS({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Oy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)SS.call(e,c)&&!TS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Wc,type:t.type,key:s,ref:i,props:r,_owner:a}};Pe.createContext=function(t){return t={$$typeof:_k,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wk,_context:t},t.Consumer=t};Pe.createElement=bS;Pe.createFactory=function(t){var e=bS.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:Ek,render:t}};Pe.isValidElement=My;Pe.lazy=function(t){return{$$typeof:bk,_payload:{_status:-1,_result:t},_init:Pk}};Pe.memo=function(t,e){return{$$typeof:Tk,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};Pe.unstable_act=NS;Pe.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Pe.useContext=function(t){return Zt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Pe.useId=function(){return Zt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Zt.current.useRef(t)};Pe.useState=function(t){return Zt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Zt.current.useTransition()};Pe.version="18.3.1";vS.exports=Pe;var g=vS.exports;const pr=gS(g),CS=pk({__proto__:null,default:pr},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk=g,Ak=Symbol.for("react.element"),kk=Symbol.for("react.fragment"),Dk=Object.prototype.hasOwnProperty,Ok=jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mk={key:!0,ref:!0,__self:!0,__source:!0};function IS(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Dk.call(e,r)&&!Mk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ak,type:t,key:i,ref:a,props:s,_owner:Ok.current}}Zh.Fragment=kk;Zh.jsx=IS;Zh.jsxs=IS;yS.exports=Zh;var o=yS.exports,PS={exports:{}},Sn={},RS={exports:{}},jS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,z){var Y=U.length;U.push(z);e:for(;0<Y;){var F=Y-1>>>1,V=U[F];if(0<s(V,z))U[F]=z,U[Y]=V,Y=F;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],Y=U.pop();if(Y!==z){U[0]=Y;e:for(var F=0,V=U.length,K=V>>>1;F<K;){var pe=2*(F+1)-1,Be=U[pe],qe=pe+1,oe=U[qe];if(0>s(Be,Y))qe<V&&0>s(oe,Be)?(U[F]=oe,U[qe]=Y,F=qe):(U[F]=Be,U[pe]=Y,F=pe);else if(qe<V&&0>s(oe,Y))U[F]=oe,U[qe]=Y,F=qe;else break e}}return z}function s(U,z){var Y=U.sortIndex-z.sortIndex;return Y!==0?Y:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,x=!1,N=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var z=n(d);z!==null;){if(z.callback===null)r(d);else if(z.startTime<=U)r(d),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(d)}}function P(U){if(v=!1,T(U),!N)if(n(c)!==null)N=!0,Z(D);else{var z=n(d);z!==null&&se(P,z.startTime-U)}}function D(U,z){N=!1,v&&(v=!1,E(S),S=-1),x=!0;var Y=m;try{for(T(z),f=n(c);f!==null&&(!(f.expirationTime>z)||U&&!k());){var F=f.callback;if(typeof F=="function"){f.callback=null,m=f.priorityLevel;var V=F(f.expirationTime<=z);z=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(c)&&r(c),T(z)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var pe=n(d);pe!==null&&se(P,pe.startTime-z),K=!1}return K}finally{f=null,m=Y,x=!1}}var M=!1,b=null,S=-1,C=5,R=-1;function k(){return!(t.unstable_now()-R<C)}function A(){if(b!==null){var U=t.unstable_now();R=U;var z=!0;try{z=b(!0,U)}finally{z?j():(M=!1,b=null)}}else M=!1}var j;if(typeof _=="function")j=function(){_(A)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ue=W.port2;W.port1.onmessage=A,j=function(){ue.postMessage(null)}}else j=function(){y(A,0)};function Z(U){b=U,M||(M=!0,j())}function se(U,z){S=y(function(){U(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,Z(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var Y=m;m=z;try{return U()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=m;m=U;try{return z()}finally{m=Y}},t.unstable_scheduleCallback=function(U,z,Y){var F=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Y+V,U={id:h++,callback:z,priorityLevel:U,startTime:Y,expirationTime:V,sortIndex:-1},Y>F?(U.sortIndex=Y,e(d,U),n(c)===null&&U===n(d)&&(v?(E(S),S=-1):v=!0,se(P,Y-F))):(U.sortIndex=V,e(c,U),N||x||(N=!0,Z(D))),U},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(U){var z=m;return function(){var Y=m;m=z;try{return U.apply(this,arguments)}finally{m=Y}}}})(jS);RS.exports=jS;var Lk=RS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=g,En=Lk;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AS=new Set,cc={};function mo(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(cc[t]=e,t=0;t<e.length;t++)AS.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rp=Object.prototype.hasOwnProperty,Fk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},S0={};function Uk(t){return Rp.call(S0,t)?!0:Rp.call(E0,t)?!1:Fk.test(t)?S0[t]=!0:(E0[t]=!0,!1)}function $k(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zk(t,e,n,r){if(e===null||typeof e>"u"||$k(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ly=/[\-:]([a-z])/g;function Vy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ly,Vy);Pt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ly,Vy);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ly,Vy);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fy(t,e,n,r){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zk(e,n,s,r)&&(n=null),r||s===null?Uk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hs=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),Uy=Symbol.for("react.strict_mode"),jp=Symbol.for("react.profiler"),kS=Symbol.for("react.provider"),DS=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Ap=Symbol.for("react.suspense"),kp=Symbol.for("react.suspense_list"),zy=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),OS=Symbol.for("react.offscreen"),T0=Symbol.iterator;function _l(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,bm;function kl(t){if(bm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bm=e&&e[1]||""}return`
`+bm+t}var Nm=!1;function Cm(t,e){if(!t||Nm)return"";Nm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Nm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kl(t):""}function Bk(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=Cm(t.type,!1),t;case 11:return t=Cm(t.type.render,!1),t;case 1:return t=Cm(t.type,!0),t;default:return""}}function Dp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case jp:return"Profiler";case Uy:return"StrictMode";case Ap:return"Suspense";case kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case DS:return(t.displayName||"Context")+".Consumer";case kS:return(t._context.displayName||"Context")+".Provider";case $y:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zy:return e=t.displayName||null,e!==null?e:Dp(t.type)||"Memo";case Ns:e=t._payload,t=t._init;try{return Dp(t(e))}catch{}}return null}function qk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dp(e);case 8:return e===Uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function MS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gk(t){var e=MS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fu(t){t._valueTracker||(t._valueTracker=Gk(t))}function LS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=MS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Op(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function b0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function VS(t,e){e=e.checked,e!=null&&Fy(t,"checked",e,!1)}function Mp(t,e){VS(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lp(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lp(t,e,n){(e!=="number"||Jd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dl=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Vp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Dl(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function FS(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function US(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?US(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,$S=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hk=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){Hk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function zS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function BS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Wk=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(t,e){if(e){if(Wk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function $p(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zp=null;function By(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bp=null,Xo=null,Jo=null;function P0(t){if(t=Yc(t)){if(typeof Bp!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=sf(e),Bp(t.stateNode,t.type,e))}}function qS(t){Xo?Jo?Jo.push(t):Jo=[t]:Xo=t}function GS(){if(Xo){var t=Xo,e=Jo;if(Jo=Xo=null,P0(t),e)for(t=0;t<e.length;t++)P0(e[t])}}function HS(t,e){return t(e)}function WS(){}var Im=!1;function KS(t,e,n){if(Im)return t(e,n);Im=!0;try{return HS(t,e,n)}finally{Im=!1,(Xo!==null||Jo!==null)&&(WS(),GS())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var r=sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var qp=!1;if(ts)try{var El={};Object.defineProperty(El,"passive",{get:function(){qp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{qp=!1}function Kk(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Kl=!1,Zd=null,eh=!1,Gp=null,Qk={onError:function(t){Kl=!0,Zd=t}};function Yk(t,e,n,r,s,i,a,l,c){Kl=!1,Zd=null,Kk.apply(Qk,arguments)}function Xk(t,e,n,r,s,i,a,l,c){if(Yk.apply(this,arguments),Kl){if(Kl){var d=Zd;Kl=!1,Zd=null}else throw Error(Q(198));eh||(eh=!0,Gp=d)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function QS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R0(t){if(po(t)!==t)throw Error(Q(188))}function Jk(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return R0(s),t;if(i===r)return R0(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function YS(t){return t=Jk(t),t!==null?XS(t):null}function XS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=XS(t);if(e!==null)return e;t=t.sibling}return null}var JS=En.unstable_scheduleCallback,j0=En.unstable_cancelCallback,Zk=En.unstable_shouldYield,e2=En.unstable_requestPaint,ct=En.unstable_now,t2=En.unstable_getCurrentPriorityLevel,qy=En.unstable_ImmediatePriority,ZS=En.unstable_UserBlockingPriority,th=En.unstable_NormalPriority,n2=En.unstable_LowPriority,eT=En.unstable_IdlePriority,ef=null,Sr=null;function r2(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(ef,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:o2,s2=Math.log,i2=Math.LN2;function o2(t){return t>>>=0,t===0?32:31-(s2(t)/i2|0)|0}var $u=64,zu=4194304;function Ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ol(l):(i&=a,i!==0&&(r=Ol(i)))}else a=n&~s,a!==0?r=Ol(a):i!==0&&(r=Ol(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rr(e),s=1<<n,r|=t[n],e&=~s;return r}function a2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-rr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=a2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tT(){var t=$u;return $u<<=1,!($u&4194240)&&($u=64),t}function Pm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function c2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function nT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rT,Hy,sT,iT,oT,Wp=!1,Bu=[],Gs=null,Hs=null,Ws=null,hc=new Map,fc=new Map,Is=[],u2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A0(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function Sl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yc(e),e!==null&&Hy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function d2(t,e,n,r,s){switch(e){case"focusin":return Gs=Sl(Gs,t,e,n,r,s),!0;case"dragenter":return Hs=Sl(Hs,t,e,n,r,s),!0;case"mouseover":return Ws=Sl(Ws,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return hc.set(i,Sl(hc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fc.set(i,Sl(fc.get(i)||null,t,e,n,r,s)),!0}return!1}function aT(t){var e=Oi(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=QS(n),e!==null){t.blockedOn=e,oT(t.priority,function(){sT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zp=r,n.target.dispatchEvent(r),zp=null}else return e=Yc(n),e!==null&&Hy(e),t.blockedOn=n,!1;e.shift()}return!0}function k0(t,e,n){vd(t)&&n.delete(e)}function h2(){Wp=!1,Gs!==null&&vd(Gs)&&(Gs=null),Hs!==null&&vd(Hs)&&(Hs=null),Ws!==null&&vd(Ws)&&(Ws=null),hc.forEach(k0),fc.forEach(k0)}function Tl(t,e){t.blockedOn===e&&(t.blockedOn=null,Wp||(Wp=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,h2)))}function mc(t){function e(s){return Tl(s,t)}if(0<Bu.length){Tl(Bu[0],t);for(var n=1;n<Bu.length;n++){var r=Bu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gs!==null&&Tl(Gs,t),Hs!==null&&Tl(Hs,t),Ws!==null&&Tl(Ws,t),hc.forEach(e),fc.forEach(e),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)aT(n),n.blockedOn===null&&Is.shift()}var Zo=hs.ReactCurrentBatchConfig,rh=!0;function f2(t,e,n,r){var s=Ge,i=Zo.transition;Zo.transition=null;try{Ge=1,Wy(t,e,n,r)}finally{Ge=s,Zo.transition=i}}function m2(t,e,n,r){var s=Ge,i=Zo.transition;Zo.transition=null;try{Ge=4,Wy(t,e,n,r)}finally{Ge=s,Zo.transition=i}}function Wy(t,e,n,r){if(rh){var s=Kp(t,e,n,r);if(s===null)Fm(t,e,r,sh,n),A0(t,r);else if(d2(s,t,e,n,r))r.stopPropagation();else if(A0(t,r),e&4&&-1<u2.indexOf(t)){for(;s!==null;){var i=Yc(s);if(i!==null&&rT(i),i=Kp(t,e,n,r),i===null&&Fm(t,e,r,sh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fm(t,e,r,null,n)}}var sh=null;function Kp(t,e,n,r){if(sh=null,t=By(r),t=Oi(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=QS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sh=t,null}function lT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t2()){case qy:return 1;case ZS:return 4;case th:case n2:return 16;case eT:return 536870912;default:return 16}default:return 16}}var zs=null,Ky=null,xd=null;function cT(){if(xd)return xd;var t,e=Ky,n=e.length,r,s="value"in zs?zs.value:zs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return xd=s.slice(t,1<r?1-r:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qu(){return!0}function D0(){return!1}function Tn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qu:D0,this.isPropagationStopped=D0,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qu)},persist:function(){},isPersistent:qu}),e}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qy=Tn(Ga),Qc=rt({},Ga,{view:0,detail:0}),p2=Tn(Qc),Rm,jm,bl,tf=rt({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bl&&(bl&&t.type==="mousemove"?(Rm=t.screenX-bl.screenX,jm=t.screenY-bl.screenY):jm=Rm=0,bl=t),Rm)},movementY:function(t){return"movementY"in t?t.movementY:jm}}),O0=Tn(tf),g2=rt({},tf,{dataTransfer:0}),y2=Tn(g2),v2=rt({},Qc,{relatedTarget:0}),Am=Tn(v2),x2=rt({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),w2=Tn(x2),_2=rt({},Ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E2=Tn(_2),S2=rt({},Ga,{data:0}),M0=Tn(S2),T2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N2[t])?!!e[t]:!1}function Yy(){return C2}var I2=rt({},Qc,{key:function(t){if(t.key){var e=T2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P2=Tn(I2),R2=rt({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L0=Tn(R2),j2=rt({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),A2=Tn(j2),k2=rt({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),D2=Tn(k2),O2=rt({},tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M2=Tn(O2),L2=[9,13,27,32],Xy=ts&&"CompositionEvent"in window,Ql=null;ts&&"documentMode"in document&&(Ql=document.documentMode);var V2=ts&&"TextEvent"in window&&!Ql,uT=ts&&(!Xy||Ql&&8<Ql&&11>=Ql),V0=" ",F0=!1;function dT(t,e){switch(t){case"keyup":return L2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function F2(t,e){switch(t){case"compositionend":return hT(e);case"keypress":return e.which!==32?null:(F0=!0,V0);case"textInput":return t=e.data,t===V0&&F0?null:t;default:return null}}function U2(t,e){if(Lo)return t==="compositionend"||!Xy&&dT(t,e)?(t=cT(),xd=Ky=zs=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uT&&e.locale!=="ko"?null:e.data;default:return null}}var $2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$2[t.type]:e==="textarea"}function fT(t,e,n,r){qS(r),e=ih(e,"onChange"),0<e.length&&(n=new Qy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yl=null,pc=null;function z2(t){TT(t,0)}function nf(t){var e=Uo(t);if(LS(e))return t}function B2(t,e){if(t==="change")return e}var mT=!1;if(ts){var km;if(ts){var Dm="oninput"in document;if(!Dm){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),Dm=typeof $0.oninput=="function"}km=Dm}else km=!1;mT=km&&(!document.documentMode||9<document.documentMode)}function z0(){Yl&&(Yl.detachEvent("onpropertychange",pT),pc=Yl=null)}function pT(t){if(t.propertyName==="value"&&nf(pc)){var e=[];fT(e,pc,t,By(t)),KS(z2,e)}}function q2(t,e,n){t==="focusin"?(z0(),Yl=e,pc=n,Yl.attachEvent("onpropertychange",pT)):t==="focusout"&&z0()}function G2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nf(pc)}function H2(t,e){if(t==="click")return nf(e)}function W2(t,e){if(t==="input"||t==="change")return nf(e)}function K2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:K2;function gc(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rp.call(e,s)||!or(t[s],e[s]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q0(t,e){var n=B0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function gT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yT(){for(var t=window,e=Jd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jd(t.document)}return e}function Jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q2(t){var e=yT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&gT(n.ownerDocument.documentElement,n)){if(r!==null&&Jy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=q0(n,i);var a=q0(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y2=ts&&"documentMode"in document&&11>=document.documentMode,Vo=null,Qp=null,Xl=null,Yp=!1;function G0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yp||Vo==null||Vo!==Jd(r)||(r=Vo,"selectionStart"in r&&Jy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xl&&gc(Xl,r)||(Xl=r,r=ih(Qp,"onSelect"),0<r.length&&(e=new Qy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Om={},vT={};ts&&(vT=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function rf(t){if(Om[t])return Om[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vT)return Om[t]=e[n];return t}var xT=rf("animationend"),wT=rf("animationiteration"),_T=rf("animationstart"),ET=rf("transitionend"),ST=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,e){ST.set(t,e),mo(e,[t])}for(var Mm=0;Mm<H0.length;Mm++){var Lm=H0[Mm],X2=Lm.toLowerCase(),J2=Lm[0].toUpperCase()+Lm.slice(1);yi(X2,"on"+J2)}yi(xT,"onAnimationEnd");yi(wT,"onAnimationIteration");yi(_T,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(ET,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function W0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Xk(r,e,void 0,t),t.currentTarget=null}function TT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;W0(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;W0(s,l,d),i=c}}}if(eh)throw t=Gp,eh=!1,Gp=null,t}function Xe(t,e){var n=e[tg];n===void 0&&(n=e[tg]=new Set);var r=t+"__bubble";n.has(r)||(bT(e,t,2,!1),n.add(r))}function Vm(t,e,n){var r=0;e&&(r|=4),bT(n,t,r,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[Hu]){t[Hu]=!0,AS.forEach(function(n){n!=="selectionchange"&&(Z2.has(n)||Vm(n,!1,t),Vm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,Vm("selectionchange",!1,e))}}function bT(t,e,n,r){switch(lT(e)){case 1:var s=f2;break;case 4:s=m2;break;default:s=Wy}n=s.bind(null,e,n,t),s=void 0,!qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Oi(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}KS(function(){var d=i,h=By(n),f=[];e:{var m=ST.get(t);if(m!==void 0){var x=Qy,N=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":x=P2;break;case"focusin":N="focus",x=Am;break;case"focusout":N="blur",x=Am;break;case"beforeblur":case"afterblur":x=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=O0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=A2;break;case xT:case wT:case _T:x=w2;break;case ET:x=D2;break;case"scroll":x=p2;break;case"wheel":x=M2;break;case"copy":case"cut":case"paste":x=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=L0}var v=(e&4)!==0,y=!v&&t==="scroll",E=v?m!==null?m+"Capture":null:m;v=[];for(var _=d,T;_!==null;){T=_;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,E!==null&&(P=dc(_,E),P!=null&&v.push(vc(_,P,T)))),y)break;_=_.return}0<v.length&&(m=new x(m,N,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==zp&&(N=n.relatedTarget||n.fromElement)&&(Oi(N)||N[ns]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=d,N=N?Oi(N):null,N!==null&&(y=po(N),N!==y||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=d),x!==N)){if(v=O0,P="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=L0,P="onPointerLeave",E="onPointerEnter",_="pointer"),y=x==null?m:Uo(x),T=N==null?m:Uo(N),m=new v(P,_+"leave",x,n,h),m.target=y,m.relatedTarget=T,P=null,Oi(h)===d&&(v=new v(E,_+"enter",N,n,h),v.target=T,v.relatedTarget=y,P=v),y=P,x&&N)t:{for(v=x,E=N,_=0,T=v;T;T=No(T))_++;for(T=0,P=E;P;P=No(P))T++;for(;0<_-T;)v=No(v),_--;for(;0<T-_;)E=No(E),T--;for(;_--;){if(v===E||E!==null&&v===E.alternate)break t;v=No(v),E=No(E)}v=null}else v=null;x!==null&&K0(f,m,x,v,!1),N!==null&&y!==null&&K0(f,y,N,v,!0)}}e:{if(m=d?Uo(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var D=B2;else if(U0(m))if(mT)D=W2;else{D=G2;var M=q2}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=H2);if(D&&(D=D(t,d))){fT(f,D,n,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Lp(m,"number",m.value)}switch(M=d?Uo(d):window,t){case"focusin":(U0(M)||M.contentEditable==="true")&&(Vo=M,Qp=d,Xl=null);break;case"focusout":Xl=Qp=Vo=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,G0(f,n,h);break;case"selectionchange":if(Y2)break;case"keydown":case"keyup":G0(f,n,h)}var b;if(Xy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Lo?dT(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(uT&&n.locale!=="ko"&&(Lo||S!=="onCompositionStart"?S==="onCompositionEnd"&&Lo&&(b=cT()):(zs=h,Ky="value"in zs?zs.value:zs.textContent,Lo=!0)),M=ih(d,S),0<M.length&&(S=new M0(S,t,null,n,h),f.push({event:S,listeners:M}),b?S.data=b:(b=hT(n),b!==null&&(S.data=b)))),(b=V2?F2(t,n):U2(t,n))&&(d=ih(d,"onBeforeInput"),0<d.length&&(h=new M0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=b))}TT(f,e)})}function vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=dc(t,n),i!=null&&r.unshift(vc(t,i,s)),i=dc(t,e),i!=null&&r.push(vc(t,i,s))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function K0(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=dc(n,i),c!=null&&a.unshift(vc(n,c,l))):s||(c=dc(n,i),c!=null&&a.push(vc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var eD=/\r\n?/g,tD=/\u0000|\uFFFD/g;function Q0(t){return(typeof t=="string"?t:""+t).replace(eD,`
`).replace(tD,"")}function Wu(t,e,n){if(e=Q0(e),Q0(t)!==e&&n)throw Error(Q(425))}function oh(){}var Xp=null,Jp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eg=typeof setTimeout=="function"?setTimeout:void 0,nD=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,rD=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(t){return Y0.resolve(null).then(t).catch(sD)}:eg;function sD(t){setTimeout(function(){throw t})}function Um(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mc(e)}function Ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function X0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),_r="__reactFiber$"+Ha,xc="__reactProps$"+Ha,ns="__reactContainer$"+Ha,tg="__reactEvents$"+Ha,iD="__reactListeners$"+Ha,oD="__reactHandles$"+Ha;function Oi(t){var e=t[_r];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[_r]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=X0(t);t!==null;){if(n=t[_r])return n;t=X0(t)}return e}t=n,n=t.parentNode}return null}function Yc(t){return t=t[_r]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function sf(t){return t[xc]||null}var ng=[],$o=-1;function vi(t){return{current:t}}function Ze(t){0>$o||(t.current=ng[$o],ng[$o]=null,$o--)}function Ke(t,e){$o++,ng[$o]=t.current,t.current=e}var oi={},Bt=vi(oi),un=vi(!1),Yi=oi;function Ca(t,e){var n=t.type.contextTypes;if(!n)return oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function ah(){Ze(un),Ze(Bt)}function J0(t,e,n){if(Bt.current!==oi)throw Error(Q(168));Ke(Bt,e),Ke(un,n)}function NT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,qk(t)||"Unknown",s));return rt({},n,r)}function lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,Yi=Bt.current,Ke(Bt,t),Ke(un,un.current),!0}function Z0(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=NT(t,e,Yi),r.__reactInternalMemoizedMergedChildContext=t,Ze(un),Ze(Bt),Ke(Bt,t)):Ze(un),Ke(un,n)}var zr=null,of=!1,$m=!1;function CT(t){zr===null?zr=[t]:zr.push(t)}function aD(t){of=!0,CT(t)}function xi(){if(!$m&&zr!==null){$m=!0;var t=0,e=Ge;try{var n=zr;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zr=null,of=!1}catch(s){throw zr!==null&&(zr=zr.slice(t+1)),JS(qy,xi),s}finally{Ge=e,$m=!1}}return null}var zo=[],Bo=0,ch=null,uh=0,In=[],Pn=0,Xi=null,Gr=1,Hr="";function Ai(t,e){zo[Bo++]=uh,zo[Bo++]=ch,ch=t,uh=e}function IT(t,e,n){In[Pn++]=Gr,In[Pn++]=Hr,In[Pn++]=Xi,Xi=t;var r=Gr;t=Hr;var s=32-rr(r)-1;r&=~(1<<s),n+=1;var i=32-rr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gr=1<<32-rr(e)+s|n<<s|r,Hr=i+t}else Gr=1<<i|n<<s|r,Hr=t}function Zy(t){t.return!==null&&(Ai(t,1),IT(t,1,0))}function ev(t){for(;t===ch;)ch=zo[--Bo],zo[Bo]=null,uh=zo[--Bo],zo[Bo]=null;for(;t===Xi;)Xi=In[--Pn],In[Pn]=null,Hr=In[--Pn],In[Pn]=null,Gr=In[--Pn],In[Pn]=null}var wn=null,vn=null,et=!1,Xn=null;function PT(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=Ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:Gr,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function rg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sg(t){if(et){var e=vn;if(e){var n=e;if(!e_(t,e)){if(rg(t))throw Error(Q(418));e=Ks(n.nextSibling);var r=wn;e&&e_(t,e)?PT(r,n):(t.flags=t.flags&-4097|2,et=!1,wn=t)}}else{if(rg(t))throw Error(Q(418));t.flags=t.flags&-4097|2,et=!1,wn=t}}}function t_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Ku(t){if(t!==wn)return!1;if(!et)return t_(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=vn)){if(rg(t))throw RT(),Error(Q(418));for(;e;)PT(t,e),e=Ks(e.nextSibling)}if(t_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?Ks(t.stateNode.nextSibling):null;return!0}function RT(){for(var t=vn;t;)t=Ks(t.nextSibling)}function Ia(){vn=wn=null,et=!1}function tv(t){Xn===null?Xn=[t]:Xn.push(t)}var lD=hs.ReactCurrentBatchConfig;function Nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Qu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n_(t){var e=t._init;return e(t._payload)}function jT(t){function e(E,_){if(t){var T=E.deletions;T===null?(E.deletions=[_],E.flags|=16):T.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=Js(E,_),E.index=0,E.sibling=null,E}function i(E,_,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<_?(E.flags|=2,_):T):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,T,P){return _===null||_.tag!==6?(_=Km(T,E.mode,P),_.return=E,_):(_=s(_,T),_.return=E,_)}function c(E,_,T,P){var D=T.type;return D===Mo?h(E,_,T.props.children,P,T.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ns&&n_(D)===_.type)?(P=s(_,T.props),P.ref=Nl(E,_,T),P.return=E,P):(P=Cd(T.type,T.key,T.props,null,E.mode,P),P.ref=Nl(E,_,T),P.return=E,P)}function d(E,_,T,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Qm(T,E.mode,P),_.return=E,_):(_=s(_,T.children||[]),_.return=E,_)}function h(E,_,T,P,D){return _===null||_.tag!==7?(_=Wi(T,E.mode,P,D),_.return=E,_):(_=s(_,T),_.return=E,_)}function f(E,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Km(""+_,E.mode,T),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vu:return T=Cd(_.type,_.key,_.props,null,E.mode,T),T.ref=Nl(E,null,_),T.return=E,T;case Oo:return _=Qm(_,E.mode,T),_.return=E,_;case Ns:var P=_._init;return f(E,P(_._payload),T)}if(Dl(_)||_l(_))return _=Wi(_,E.mode,T,null),_.return=E,_;Qu(E,_)}return null}function m(E,_,T,P){var D=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:l(E,_,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Vu:return T.key===D?c(E,_,T,P):null;case Oo:return T.key===D?d(E,_,T,P):null;case Ns:return D=T._init,m(E,_,D(T._payload),P)}if(Dl(T)||_l(T))return D!==null?null:h(E,_,T,P,null);Qu(E,T)}return null}function x(E,_,T,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(T)||null,l(_,E,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Vu:return E=E.get(P.key===null?T:P.key)||null,c(_,E,P,D);case Oo:return E=E.get(P.key===null?T:P.key)||null,d(_,E,P,D);case Ns:var M=P._init;return x(E,_,T,M(P._payload),D)}if(Dl(P)||_l(P))return E=E.get(T)||null,h(_,E,P,D,null);Qu(_,P)}return null}function N(E,_,T,P){for(var D=null,M=null,b=_,S=_=0,C=null;b!==null&&S<T.length;S++){b.index>S?(C=b,b=null):C=b.sibling;var R=m(E,b,T[S],P);if(R===null){b===null&&(b=C);break}t&&b&&R.alternate===null&&e(E,b),_=i(R,_,S),M===null?D=R:M.sibling=R,M=R,b=C}if(S===T.length)return n(E,b),et&&Ai(E,S),D;if(b===null){for(;S<T.length;S++)b=f(E,T[S],P),b!==null&&(_=i(b,_,S),M===null?D=b:M.sibling=b,M=b);return et&&Ai(E,S),D}for(b=r(E,b);S<T.length;S++)C=x(b,E,S,T[S],P),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?S:C.key),_=i(C,_,S),M===null?D=C:M.sibling=C,M=C);return t&&b.forEach(function(k){return e(E,k)}),et&&Ai(E,S),D}function v(E,_,T,P){var D=_l(T);if(typeof D!="function")throw Error(Q(150));if(T=D.call(T),T==null)throw Error(Q(151));for(var M=D=null,b=_,S=_=0,C=null,R=T.next();b!==null&&!R.done;S++,R=T.next()){b.index>S?(C=b,b=null):C=b.sibling;var k=m(E,b,R.value,P);if(k===null){b===null&&(b=C);break}t&&b&&k.alternate===null&&e(E,b),_=i(k,_,S),M===null?D=k:M.sibling=k,M=k,b=C}if(R.done)return n(E,b),et&&Ai(E,S),D;if(b===null){for(;!R.done;S++,R=T.next())R=f(E,R.value,P),R!==null&&(_=i(R,_,S),M===null?D=R:M.sibling=R,M=R);return et&&Ai(E,S),D}for(b=r(E,b);!R.done;S++,R=T.next())R=x(b,E,S,R.value,P),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?S:R.key),_=i(R,_,S),M===null?D=R:M.sibling=R,M=R);return t&&b.forEach(function(A){return e(E,A)}),et&&Ai(E,S),D}function y(E,_,T,P){if(typeof T=="object"&&T!==null&&T.type===Mo&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Vu:e:{for(var D=T.key,M=_;M!==null;){if(M.key===D){if(D=T.type,D===Mo){if(M.tag===7){n(E,M.sibling),_=s(M,T.props.children),_.return=E,E=_;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ns&&n_(D)===M.type){n(E,M.sibling),_=s(M,T.props),_.ref=Nl(E,M,T),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}T.type===Mo?(_=Wi(T.props.children,E.mode,P,T.key),_.return=E,E=_):(P=Cd(T.type,T.key,T.props,null,E.mode,P),P.ref=Nl(E,_,T),P.return=E,E=P)}return a(E);case Oo:e:{for(M=T.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(E,_.sibling),_=s(_,T.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Qm(T,E.mode,P),_.return=E,E=_}return a(E);case Ns:return M=T._init,y(E,_,M(T._payload),P)}if(Dl(T))return N(E,_,T,P);if(_l(T))return v(E,_,T,P);Qu(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,T),_.return=E,E=_):(n(E,_),_=Km(T,E.mode,P),_.return=E,E=_),a(E)):n(E,_)}return y}var Pa=jT(!0),AT=jT(!1),dh=vi(null),hh=null,qo=null,nv=null;function rv(){nv=qo=hh=null}function sv(t){var e=dh.current;Ze(dh),t._currentValue=e}function ig(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ea(t,e){hh=t,nv=qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(nv!==t)if(t={context:t,memoizedValue:e,next:null},qo===null){if(hh===null)throw Error(Q(308));qo=t,hh.dependencies={lanes:0,firstContext:t}}else qo=qo.next=t;return e}var Mi=null;function iv(t){Mi===null?Mi=[t]:Mi.push(t)}function kT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,iv(e)):(n.next=s.next,s.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cs=!1;function ov(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rs(t,n)}return s=r.interleaved,s===null?(e.next=e,iv(r)):(e.next=s.next,s.next=e),r.interleaved=e,rs(t,n)}function _d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}function r_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fh(t,e,n,r){var s=t.updateQueue;Cs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,v=l;switch(m=e,x=n,v.tag){case 1:if(N=v.payload,typeof N=="function"){f=N.call(x,f,m);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=v.payload,m=typeof N=="function"?N.call(x,f,m):N,m==null)break e;f=rt({},f,m);break e;case 2:Cs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=f):h=h.next=x,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zi|=a,t.lanes=a,t.memoizedState=f}}function s_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Xc={},Tr=vi(Xc),wc=vi(Xc),_c=vi(Xc);function Li(t){if(t===Xc)throw Error(Q(174));return t}function av(t,e){switch(Ke(_c,e),Ke(wc,t),Ke(Tr,Xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fp(e,t)}Ze(Tr),Ke(Tr,e)}function Ra(){Ze(Tr),Ze(wc),Ze(_c)}function OT(t){Li(_c.current);var e=Li(Tr.current),n=Fp(e,t.type);e!==n&&(Ke(wc,t),Ke(Tr,n))}function lv(t){wc.current===t&&(Ze(Tr),Ze(wc))}var tt=vi(0);function mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zm=[];function cv(){for(var t=0;t<zm.length;t++)zm[t]._workInProgressVersionPrimary=null;zm.length=0}var Ed=hs.ReactCurrentDispatcher,Bm=hs.ReactCurrentBatchConfig,Ji=0,nt=null,pt=null,wt=null,ph=!1,Jl=!1,Ec=0,cD=0;function Ot(){throw Error(Q(321))}function uv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function dv(t,e,n,r,s,i){if(Ji=i,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?fD:mD,t=n(r,s),Jl){i=0;do{if(Jl=!1,Ec=0,25<=i)throw Error(Q(301));i+=1,wt=pt=null,e.updateQueue=null,Ed.current=pD,t=n(r,s)}while(Jl)}if(Ed.current=gh,e=pt!==null&&pt.next!==null,Ji=0,wt=pt=nt=null,ph=!1,e)throw Error(Q(300));return t}function hv(){var t=Ec!==0;return Ec=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?nt.memoizedState=wt=t:wt=wt.next=t,wt}function zn(){if(pt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?nt.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(Q(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?nt.memoizedState=wt=t:wt=wt.next=t}return wt}function Sc(t,e){return typeof e=="function"?e(t):e}function qm(t){var e=zn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Ji&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,nt.lanes|=h,Zi|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,or(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,nt.lanes|=i,Zi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gm(t){var e=zn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);or(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function MT(){}function LT(t,e){var n=nt,r=zn(),s=e(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,fv(UT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Tc(9,FT.bind(null,n,r,s,e),void 0,null),_t===null)throw Error(Q(349));Ji&30||VT(n,e,s)}return s}function VT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FT(t,e,n,r){e.value=n,e.getSnapshot=r,$T(e)&&zT(t)}function UT(t,e,n){return n(function(){$T(e)&&zT(t)})}function $T(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch{return!0}}function zT(t){var e=rs(t,1);e!==null&&sr(e,t,1,-1)}function i_(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:t},e.queue=t,t=t.dispatch=hD.bind(null,nt,t),[e.memoizedState,t]}function Tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BT(){return zn().memoizedState}function Sd(t,e,n,r){var s=mr();nt.flags|=t,s.memoizedState=Tc(1|e,n,void 0,r===void 0?null:r)}function af(t,e,n,r){var s=zn();r=r===void 0?null:r;var i=void 0;if(pt!==null){var a=pt.memoizedState;if(i=a.destroy,r!==null&&uv(r,a.deps)){s.memoizedState=Tc(e,n,i,r);return}}nt.flags|=t,s.memoizedState=Tc(1|e,n,i,r)}function o_(t,e){return Sd(8390656,8,t,e)}function fv(t,e){return af(2048,8,t,e)}function qT(t,e){return af(4,2,t,e)}function GT(t,e){return af(4,4,t,e)}function HT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WT(t,e,n){return n=n!=null?n.concat([t]):null,af(4,4,HT.bind(null,e,t),n)}function mv(){}function KT(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QT(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YT(t,e,n){return Ji&21?(or(n,e)||(n=tT(),nt.lanes|=n,Zi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function uD(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Bm.transition;Bm.transition={};try{t(!1),e()}finally{Ge=n,Bm.transition=r}}function XT(){return zn().memoizedState}function dD(t,e,n){var r=Xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JT(t))ZT(e,n);else if(n=kT(t,e,n,r),n!==null){var s=Jt();sr(n,t,r,s),eb(n,e,r)}}function hD(t,e,n){var r=Xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JT(t))ZT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,or(l,a)){var c=e.interleaved;c===null?(s.next=s,iv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=kT(t,e,s,r),n!==null&&(s=Jt(),sr(n,t,r,s),eb(n,e,r))}}function JT(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function ZT(t,e){Jl=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}var gh={readContext:$n,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},fD={readContext:$n,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:o_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sd(4194308,4,HT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dD.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:i_,useDebugValue:mv,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=i_(!1),e=t[0];return t=uD.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,s=mr();if(et){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),_t===null)throw Error(Q(349));Ji&30||VT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,o_(UT.bind(null,r,i,t),[t]),r.flags|=2048,Tc(9,FT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mr(),e=_t.identifierPrefix;if(et){var n=Hr,r=Gr;n=(r&~(1<<32-rr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ec++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mD={readContext:$n,useCallback:KT,useContext:$n,useEffect:fv,useImperativeHandle:WT,useInsertionEffect:qT,useLayoutEffect:GT,useMemo:QT,useReducer:qm,useRef:BT,useState:function(){return qm(Sc)},useDebugValue:mv,useDeferredValue:function(t){var e=zn();return YT(e,pt.memoizedState,t)},useTransition:function(){var t=qm(Sc)[0],e=zn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:LT,useId:XT,unstable_isNewReconciler:!1},pD={readContext:$n,useCallback:KT,useContext:$n,useEffect:fv,useImperativeHandle:WT,useInsertionEffect:qT,useLayoutEffect:GT,useMemo:QT,useReducer:Gm,useRef:BT,useState:function(){return Gm(Sc)},useDebugValue:mv,useDeferredValue:function(t){var e=zn();return pt===null?e.memoizedState=t:YT(e,pt.memoizedState,t)},useTransition:function(){var t=Gm(Sc)[0],e=zn().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:LT,useId:XT,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function og(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lf={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Xs(t),i=Yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(sr(e,t,s,r),_d(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Xs(t),i=Yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(sr(e,t,s,r),_d(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Xs(t),s=Yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qs(t,s,r),e!==null&&(sr(e,t,r,n),_d(e,t,r))}};function a_(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!gc(n,r)||!gc(s,i):!0}function tb(t,e,n){var r=!1,s=oi,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=dn(e)?Yi:Bt.current,r=e.contextTypes,i=(r=r!=null)?Ca(t,s):oi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lf.enqueueReplaceState(e,e.state,null)}function ag(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ov(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=dn(e)?Yi:Bt.current,s.context=Ca(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(og(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lf.enqueueReplaceState(s,s.state,null),fh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",r=e;do n+=Bk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gD=typeof WeakMap=="function"?WeakMap:Map;function nb(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vh||(vh=!0,vg=r),lg(t,e)},n}function rb(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lg(t,e),typeof r!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function c_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=RD.bind(null,t,e,n),e.then(t,t))}function u_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,Qs(n,e,1))),n.lanes|=1),t)}var yD=hs.ReactCurrentOwner,cn=!1;function Xt(t,e,n,r){e.child=t===null?AT(e,null,n,r):Pa(e,t.child,n,r)}function h_(t,e,n,r,s){n=n.render;var i=e.ref;return ea(e,s),r=dv(t,e,n,r,i,s),n=hv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(et&&n&&Zy(e),e.flags|=1,Xt(t,e,r,s),e.child)}function f_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ev(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sb(t,e,i,r,s)):(t=Cd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:gc,n(a,r)&&t.ref===e.ref)return ss(t,e,s)}return e.flags|=1,t=Js(i,r),t.ref=e.ref,t.return=e,e.child=t}function sb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(gc(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,ss(t,e,s)}return cg(t,e,n,r,s)}function ib(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Ho,pn),pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Ho,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Ho,pn),pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Ho,pn),pn|=r;return Xt(t,e,s,n),e.child}function ob(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cg(t,e,n,r,s){var i=dn(n)?Yi:Bt.current;return i=Ca(e,i),ea(e,s),n=dv(t,e,n,r,i,s),r=hv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(et&&r&&Zy(e),e.flags|=1,Xt(t,e,n,s),e.child)}function m_(t,e,n,r,s){if(dn(n)){var i=!0;lh(e)}else i=!1;if(ea(e,s),e.stateNode===null)Td(t,e),tb(e,n,r),ag(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=$n(d):(d=dn(n)?Yi:Bt.current,d=Ca(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&l_(e,a,r,d),Cs=!1;var m=e.memoizedState;a.state=m,fh(e,r,a,s),c=e.memoizedState,l!==r||m!==c||un.current||Cs?(typeof h=="function"&&(og(e,n,h,r),c=e.memoizedState),(l=Cs||a_(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,DT(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=$n(c):(c=dn(n)?Yi:Bt.current,c=Ca(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&l_(e,a,r,c),Cs=!1,m=e.memoizedState,a.state=m,fh(e,r,a,s);var N=e.memoizedState;l!==f||m!==N||un.current||Cs?(typeof x=="function"&&(og(e,n,x,r),N=e.memoizedState),(d=Cs||a_(e,n,d,r,m,N,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ug(t,e,n,r,i,s)}function ug(t,e,n,r,s,i){ob(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Z0(e,n,!1),ss(t,e,i);r=e.stateNode,yD.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pa(e,t.child,null,i),e.child=Pa(e,null,l,i)):Xt(t,e,l,i),e.memoizedState=r.state,s&&Z0(e,n,!0),e.child}function ab(t){var e=t.stateNode;e.pendingContext?J0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J0(t,e.context,!1),av(t,e.containerInfo)}function p_(t,e,n,r,s){return Ia(),tv(s),e.flags|=256,Xt(t,e,n,r),e.child}var dg={dehydrated:null,treeContext:null,retryLane:0};function hg(t){return{baseLanes:t,cachePool:null,transitions:null}}function lb(t,e,n){var r=e.pendingProps,s=tt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(tt,s&1),t===null)return sg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=df(a,r,0,null),t=Wi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hg(n),e.memoizedState=dg,t):pv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vD(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Js(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Js(l,i):(i=Wi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?hg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=dg,r}return i=t.child,t=i.sibling,r=Js(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pv(t,e){return e=df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yu(t,e,n,r){return r!==null&&tv(r),Pa(e,t.child,null,n),t=pv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vD(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Hm(Error(Q(422))),Yu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=df({mode:"visible",children:r.children},s,0,null),i=Wi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pa(e,t.child,null,a),e.child.memoizedState=hg(a),e.memoizedState=dg,i);if(!(e.mode&1))return Yu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Q(419)),r=Hm(i,r,void 0),Yu(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=_t,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rs(t,s),sr(r,t,s,-1))}return _v(),r=Hm(Error(Q(421))),Yu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vn=Ks(s.nextSibling),wn=e,et=!0,Xn=null,t!==null&&(In[Pn++]=Gr,In[Pn++]=Hr,In[Pn++]=Xi,Gr=t.id,Hr=t.overflow,Xi=e),e=pv(e,r.children),e.flags|=4096,e)}function g_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ig(t.return,e,n)}function Wm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cb(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xt(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g_(t,n,e);else if(t.tag===19)g_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(tt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wm(e,!0,n,null,i);break;case"together":Wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xD(t,e,n){switch(e.tag){case 3:ab(e),Ia();break;case 5:OT(e);break;case 1:dn(e.type)&&lh(e);break;case 4:av(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(dh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?lb(t,e,n):(Ke(tt,tt.current&1),t=ss(t,e,n),t!==null?t.sibling:null);Ke(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,ib(t,e,n)}return ss(t,e,n)}var ub,fg,db,hb;ub=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fg=function(){};db=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Li(Tr.current);var i=null;switch(n){case"input":s=Op(t,s),r=Op(t,r),i=[];break;case"select":s=rt({},s,{value:void 0}),r=rt({},r,{value:void 0}),i=[];break;case"textarea":s=Vp(t,s),r=Vp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oh)}Up(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(cc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(cc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};hb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wD(t,e,n){var r=e.pendingProps;switch(ev(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return dn(e.type)&&ah(),Mt(e),null;case 3:return r=e.stateNode,Ra(),Ze(un),Ze(Bt),cv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(_g(Xn),Xn=null))),fg(t,e),Mt(e),null;case 5:lv(e);var s=Li(_c.current);if(n=e.type,t!==null&&e.stateNode!=null)db(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Mt(e),null}if(t=Li(Tr.current),Ku(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_r]=e,r[xc]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<Ml.length;s++)Xe(Ml[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":b0(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":C0(r,i),Xe("invalid",r)}Up(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wu(r.textContent,l,t),s=["children",""+l]):cc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Xe("scroll",r)}switch(n){case"input":Fu(r),N0(r,i,!0);break;case"textarea":Fu(r),I0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=oh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=US(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_r]=e,t[xc]=r,ub(t,e,!1,!1),e.stateNode=t;e:{switch(a=$p(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ml.length;s++)Xe(Ml[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":b0(t,r),s=Op(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=rt({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":C0(t,r),s=Vp(t,r),Xe("invalid",t);break;default:s=r}Up(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?BS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$S(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uc(t,c):typeof c=="number"&&uc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",t):c!=null&&Fy(t,i,c,a))}switch(n){case"input":Fu(t),N0(t,r,!1);break;case"textarea":Fu(t),I0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)hb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Li(_c.current),Li(Tr.current),Ku(e)){if(r=e.stateNode,n=e.memoizedProps,r[_r]=e,(i=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Wu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ze(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&vn!==null&&e.mode&1&&!(e.flags&128))RT(),Ia(),e.flags|=98560,i=!1;else if(i=Ku(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[_r]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Xn!==null&&(_g(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?yt===0&&(yt=3):_v())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Ra(),fg(t,e),t===null&&yc(e.stateNode.containerInfo),Mt(e),null;case 10:return sv(e.type._context),Mt(e),null;case 17:return dn(e.type)&&ah(),Mt(e),null;case 19:if(Ze(tt),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Cl(i,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mh(t),a!==null){for(e.flags|=128,Cl(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(tt,tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Aa&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304)}else{if(!r)if(t=mh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!et)return Mt(e),null}else 2*ct()-i.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=tt.current,Ke(tt,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return wv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function _D(t,e){switch(ev(e),e.tag){case 1:return dn(e.type)&&ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ra(),Ze(un),Ze(Bt),cv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lv(e),null;case 13:if(Ze(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(tt),null;case 4:return Ra(),null;case 10:return sv(e.type._context),null;case 22:case 23:return wv(),null;case 24:return null;default:return null}}var Xu=!1,Ut=!1,ED=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function mg(t,e,n){try{n()}catch(r){at(t,e,r)}}var y_=!1;function SD(t,e){if(Xp=rh,t=yT(),Jy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)m=f,f=x;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(x=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jp={focusedElem:t,selectionRange:n},rh=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var v=N.memoizedProps,y=N.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Kn(e.type,v),y);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(P){at(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return N=y_,y_=!1,N}function Zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mg(e,n,i)}s=s.next}while(s!==r)}}function cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fb(t){var e=t.alternate;e!==null&&(t.alternate=null,fb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_r],delete e[xc],delete e[tg],delete e[iD],delete e[oD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mb(t){return t.tag===5||t.tag===3||t.tag===4}function v_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oh));else if(r!==4&&(t=t.child,t!==null))for(gg(t,e,n),t=t.sibling;t!==null;)gg(t,e,n),t=t.sibling}function yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yg(t,e,n),t=t.sibling;t!==null;)yg(t,e,n),t=t.sibling}var bt=null,Yn=!1;function ws(t,e,n){for(n=n.child;n!==null;)pb(t,e,n),n=n.sibling}function pb(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(ef,n)}catch{}switch(n.tag){case 5:Ut||Go(n,e);case 6:var r=bt,s=Yn;bt=null,ws(t,e,n),bt=r,Yn=s,bt!==null&&(Yn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Yn?(t=bt,n=n.stateNode,t.nodeType===8?Um(t.parentNode,n):t.nodeType===1&&Um(t,n),mc(t)):Um(bt,n.stateNode));break;case 4:r=bt,s=Yn,bt=n.stateNode.containerInfo,Yn=!0,ws(t,e,n),bt=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&mg(n,e,a),s=s.next}while(s!==r)}ws(t,e,n);break;case 1:if(!Ut&&(Go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){at(n,e,l)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,ws(t,e,n),Ut=r):ws(t,e,n);break;default:ws(t,e,n)}}function x_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ED),e.forEach(function(r){var s=AD.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:bt=l.stateNode,Yn=!1;break e;case 3:bt=l.stateNode.containerInfo,Yn=!0;break e;case 4:bt=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(bt===null)throw Error(Q(160));pb(i,a,s),bt=null,Yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){at(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gb(e,t),e=e.sibling}function gb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),fr(t),r&4){try{Zl(3,t,t.return),cf(3,t)}catch(v){at(t,t.return,v)}try{Zl(5,t,t.return)}catch(v){at(t,t.return,v)}}break;case 1:Hn(e,t),fr(t),r&512&&n!==null&&Go(n,n.return);break;case 5:if(Hn(e,t),fr(t),r&512&&n!==null&&Go(n,n.return),t.flags&32){var s=t.stateNode;try{uc(s,"")}catch(v){at(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&VS(s,i),$p(l,a);var d=$p(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?BS(s,f):h==="dangerouslySetInnerHTML"?$S(s,f):h==="children"?uc(s,f):Fy(s,h,f,d)}switch(l){case"input":Mp(s,i);break;case"textarea":FS(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Yo(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Yo(s,!!i.multiple,i.defaultValue,!0):Yo(s,!!i.multiple,i.multiple?[]:"",!1))}s[xc]=i}catch(v){at(t,t.return,v)}}break;case 6:if(Hn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){at(t,t.return,v)}}break;case 3:if(Hn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(v){at(t,t.return,v)}break;case 4:Hn(e,t),fr(t);break;case 13:Hn(e,t),fr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vv=ct())),r&4&&x_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,Hn(e,t),Ut=d):Hn(e,t),fr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,x=m.child,m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return);break;case 1:Go(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(v){at(r,n,v)}}break;case 5:Go(m,m.return);break;case 22:if(m.memoizedState!==null){__(f);continue}}x!==null?(x.return=m,ae=x):__(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=zS("display",a))}catch(v){at(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){at(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hn(e,t),fr(t),r&4&&x_(t);break;case 21:break;default:Hn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mb(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uc(s,""),r.flags&=-33);var i=v_(t);yg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=v_(t);gg(t,l,a);break;default:throw Error(Q(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TD(t,e,n){ae=t,yb(t)}function yb(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Xu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=Xu;var d=Ut;if(Xu=a,(Ut=c)&&!d)for(ae=s;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?E_(s):c!==null?(c.return=a,ae=c):E_(s);for(;i!==null;)ae=i,yb(i),i=i.sibling;ae=s,Xu=l,Ut=d}w_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):w_(t)}}function w_(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&s_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}s_(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&mc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ut||e.flags&512&&pg(e)}catch(m){at(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function __(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function E_(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cf(4,e)}catch(c){at(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){at(e,s,c)}}var i=e.return;try{pg(e)}catch(c){at(e,i,c)}break;case 5:var a=e.return;try{pg(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var bD=Math.ceil,yh=hs.ReactCurrentDispatcher,gv=hs.ReactCurrentOwner,Vn=hs.ReactCurrentBatchConfig,Le=0,_t=null,ht=null,It=0,pn=0,Ho=vi(0),yt=0,bc=null,Zi=0,uf=0,yv=0,ec=null,an=null,vv=0,Aa=1/0,$r=null,vh=!1,vg=null,Ys=null,Ju=!1,Bs=null,xh=0,tc=0,xg=null,bd=-1,Nd=0;function Jt(){return Le&6?ct():bd!==-1?bd:bd=ct()}function Xs(t){return t.mode&1?Le&2&&It!==0?It&-It:lD.transition!==null?(Nd===0&&(Nd=tT()),Nd):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:lT(t.type)),t):1}function sr(t,e,n,r){if(50<tc)throw tc=0,xg=null,Error(Q(185));Kc(t,n,r),(!(Le&2)||t!==_t)&&(t===_t&&(!(Le&2)&&(uf|=n),yt===4&&Ps(t,It)),hn(t,r),n===1&&Le===0&&!(e.mode&1)&&(Aa=ct()+500,of&&xi()))}function hn(t,e){var n=t.callbackNode;l2(t,e);var r=nh(t,t===_t?It:0);if(r===0)n!==null&&j0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&j0(n),e===1)t.tag===0?aD(S_.bind(null,t)):CT(S_.bind(null,t)),rD(function(){!(Le&6)&&xi()}),n=null;else{switch(nT(r)){case 1:n=qy;break;case 4:n=ZS;break;case 16:n=th;break;case 536870912:n=eT;break;default:n=th}n=bb(n,vb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vb(t,e){if(bd=-1,Nd=0,Le&6)throw Error(Q(327));var n=t.callbackNode;if(ta()&&t.callbackNode!==n)return null;var r=nh(t,t===_t?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wh(t,r);else{e=r;var s=Le;Le|=2;var i=wb();(_t!==t||It!==e)&&($r=null,Aa=ct()+500,Hi(t,e));do try{ID();break}catch(l){xb(t,l)}while(!0);rv(),yh.current=i,Le=s,ht!==null?e=0:(_t=null,It=0,e=yt)}if(e!==0){if(e===2&&(s=Hp(t),s!==0&&(r=s,e=wg(t,s))),e===1)throw n=bc,Hi(t,0),Ps(t,r),hn(t,ct()),n;if(e===6)Ps(t,r);else{if(s=t.current.alternate,!(r&30)&&!ND(s)&&(e=wh(t,r),e===2&&(i=Hp(t),i!==0&&(r=i,e=wg(t,i))),e===1))throw n=bc,Hi(t,0),Ps(t,r),hn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:ki(t,an,$r);break;case 3:if(Ps(t,r),(r&130023424)===r&&(e=vv+500-ct(),10<e)){if(nh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=eg(ki.bind(null,t,an,$r),e);break}ki(t,an,$r);break;case 4:if(Ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-rr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bD(r/1960))-r,10<r){t.timeoutHandle=eg(ki.bind(null,t,an,$r),r);break}ki(t,an,$r);break;case 5:ki(t,an,$r);break;default:throw Error(Q(329))}}}return hn(t,ct()),t.callbackNode===n?vb.bind(null,t):null}function wg(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=wh(t,e),t!==2&&(e=an,an=n,e!==null&&_g(e)),t}function _g(t){an===null?an=t:an.push.apply(an,t)}function ND(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(t,e){for(e&=~yv,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),r=1<<n;t[n]=-1,e&=~r}}function S_(t){if(Le&6)throw Error(Q(327));ta();var e=nh(t,0);if(!(e&1))return hn(t,ct()),null;var n=wh(t,e);if(t.tag!==0&&n===2){var r=Hp(t);r!==0&&(e=r,n=wg(t,r))}if(n===1)throw n=bc,Hi(t,0),Ps(t,e),hn(t,ct()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,an,$r),hn(t,ct()),null}function xv(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Aa=ct()+500,of&&xi())}}function eo(t){Bs!==null&&Bs.tag===0&&!(Le&6)&&ta();var e=Le;Le|=1;var n=Vn.transition,r=Ge;try{if(Vn.transition=null,Ge=1,t)return t()}finally{Ge=r,Vn.transition=n,Le=e,!(Le&6)&&xi()}}function wv(){pn=Ho.current,Ze(Ho)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nD(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(ev(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ah();break;case 3:Ra(),Ze(un),Ze(Bt),cv();break;case 5:lv(r);break;case 4:Ra();break;case 13:Ze(tt);break;case 19:Ze(tt);break;case 10:sv(r.type._context);break;case 22:case 23:wv()}n=n.return}if(_t=t,ht=t=Js(t.current,null),It=pn=e,yt=0,bc=null,yv=uf=Zi=0,an=ec=null,Mi!==null){for(e=0;e<Mi.length;e++)if(n=Mi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Mi=null}return t}function xb(t,e){do{var n=ht;try{if(rv(),Ed.current=gh,ph){for(var r=nt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ph=!1}if(Ji=0,wt=pt=nt=null,Jl=!1,Ec=0,gv.current=null,n===null||n.return===null){yt=1,bc=e,ht=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=It,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=u_(a);if(x!==null){x.flags&=-257,d_(x,a,l,i,e),x.mode&1&&c_(i,d,e),e=x,c=d;var N=e.updateQueue;if(N===null){var v=new Set;v.add(c),e.updateQueue=v}else N.add(c);break e}else{if(!(e&1)){c_(i,d,e),_v();break e}c=Error(Q(426))}}else if(et&&l.mode&1){var y=u_(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),d_(y,a,l,i,e),tv(ja(c,l));break e}}i=c=ja(c,l),yt!==4&&(yt=2),ec===null?ec=[i]:ec.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=nb(i,c,e);r_(i,E);break e;case 1:l=c;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ys===null||!Ys.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=rb(i,l,e);r_(i,P);break e}}i=i.return}while(i!==null)}Eb(n)}catch(D){e=D,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function wb(){var t=yh.current;return yh.current=gh,t===null?gh:t}function _v(){(yt===0||yt===3||yt===2)&&(yt=4),_t===null||!(Zi&268435455)&&!(uf&268435455)||Ps(_t,It)}function wh(t,e){var n=Le;Le|=2;var r=wb();(_t!==t||It!==e)&&($r=null,Hi(t,e));do try{CD();break}catch(s){xb(t,s)}while(!0);if(rv(),Le=n,yh.current=r,ht!==null)throw Error(Q(261));return _t=null,It=0,yt}function CD(){for(;ht!==null;)_b(ht)}function ID(){for(;ht!==null&&!Zk();)_b(ht)}function _b(t){var e=Tb(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?Eb(t):ht=e,gv.current=null}function Eb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_D(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ht=null;return}}else if(n=wD(n,e,pn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);yt===0&&(yt=5)}function ki(t,e,n){var r=Ge,s=Vn.transition;try{Vn.transition=null,Ge=1,PD(t,e,n,r)}finally{Vn.transition=s,Ge=r}return null}function PD(t,e,n,r){do ta();while(Bs!==null);if(Le&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(c2(t,i),t===_t&&(ht=_t=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,bb(th,function(){return ta(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vn.transition,Vn.transition=null;var a=Ge;Ge=1;var l=Le;Le|=4,gv.current=null,SD(t,n),gb(n,t),Q2(Jp),rh=!!Xp,Jp=Xp=null,t.current=n,TD(n),e2(),Le=l,Ge=a,Vn.transition=i}else t.current=n;if(Ju&&(Ju=!1,Bs=t,xh=s),i=t.pendingLanes,i===0&&(Ys=null),r2(n.stateNode),hn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vh)throw vh=!1,t=vg,vg=null,t;return xh&1&&t.tag!==0&&ta(),i=t.pendingLanes,i&1?t===xg?tc++:(tc=0,xg=t):tc=0,xi(),null}function ta(){if(Bs!==null){var t=nT(xh),e=Vn.transition,n=Ge;try{if(Vn.transition=null,Ge=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,xh=0,Le&6)throw Error(Q(331));var s=Le;for(Le|=4,ae=t.current;ae!==null;){var i=ae,a=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Zl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,x=h.return;if(fb(h),h===d){ae=null;break}if(m!==null){m.return=x,ae=m;break}ae=x}}}var N=i.alternate;if(N!==null){var v=N.child;if(v!==null){N.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ae=a;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ae=E;break e}ae=i.return}}var _=t.current;for(ae=_;ae!==null;){a=ae;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,ae=T;else e:for(a=_;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cf(9,l)}}catch(D){at(l,l.return,D)}if(l===a){ae=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ae=P;break e}ae=l.return}}if(Le=s,xi(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(ef,t)}catch{}r=!0}return r}finally{Ge=n,Vn.transition=e}}return!1}function T_(t,e,n){e=ja(n,e),e=nb(t,e,1),t=Qs(t,e,1),e=Jt(),t!==null&&(Kc(t,1,e),hn(t,e))}function at(t,e,n){if(t.tag===3)T_(t,t,n);else for(;e!==null;){if(e.tag===3){T_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ys===null||!Ys.has(r))){t=ja(n,t),t=rb(e,t,1),e=Qs(e,t,1),t=Jt(),e!==null&&(Kc(e,1,t),hn(e,t));break}}e=e.return}}function RD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(It&n)===n&&(yt===4||yt===3&&(It&130023424)===It&&500>ct()-vv?Hi(t,0):yv|=n),hn(t,e)}function Sb(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var n=Jt();t=rs(t,e),t!==null&&(Kc(t,e,n),hn(t,n))}function jD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sb(t,n)}function AD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Sb(t,n)}var Tb;Tb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,xD(t,e,n);cn=!!(t.flags&131072)}else cn=!1,et&&e.flags&1048576&&IT(e,uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Td(t,e),t=e.pendingProps;var s=Ca(e,Bt.current);ea(e,n),s=dv(null,e,r,t,s,n);var i=hv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,lh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ov(e),s.updater=lf,e.stateNode=s,s._reactInternals=e,ag(e,r,t,n),e=ug(null,e,r,!0,i,n)):(e.tag=0,et&&i&&Zy(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=DD(r),t=Kn(r,t),s){case 0:e=cg(null,e,r,t,n);break e;case 1:e=m_(null,e,r,t,n);break e;case 11:e=h_(null,e,r,t,n);break e;case 14:e=f_(null,e,r,Kn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),cg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),m_(t,e,r,s,n);case 3:e:{if(ab(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,DT(t,e),fh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ja(Error(Q(423)),e),e=p_(t,e,r,n,s);break e}else if(r!==s){s=ja(Error(Q(424)),e),e=p_(t,e,r,n,s);break e}else for(vn=Ks(e.stateNode.containerInfo.firstChild),wn=e,et=!0,Xn=null,n=AT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ia(),r===s){e=ss(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return OT(e),t===null&&sg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Zp(r,s)?a=null:i!==null&&Zp(r,i)&&(e.flags|=32),ob(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&sg(e),null;case 13:return lb(t,e,n);case 4:return av(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pa(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),h_(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ke(dh,r._currentValue),r._currentValue=a,i!==null)if(or(i.value,a)){if(i.children===s.children&&!un.current){e=ss(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Yr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ig(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ig(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ea(e,n),s=$n(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),f_(t,e,r,s,n);case 15:return sb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Td(t,e),e.tag=1,dn(r)?(t=!0,lh(e)):t=!1,ea(e,n),tb(e,r,s),ag(e,r,s,n),ug(null,e,r,!0,t,n);case 19:return cb(t,e,n);case 22:return ib(t,e,n)}throw Error(Q(156,e.tag))};function bb(t,e){return JS(t,e)}function kD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new kD(t,e,n,r)}function Ev(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DD(t){if(typeof t=="function")return Ev(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$y)return 11;if(t===zy)return 14}return 2}function Js(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cd(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ev(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Mo:return Wi(n.children,s,i,e);case Uy:a=8,s|=8;break;case jp:return t=Dn(12,n,e,s|2),t.elementType=jp,t.lanes=i,t;case Ap:return t=Dn(13,n,e,s),t.elementType=Ap,t.lanes=i,t;case kp:return t=Dn(19,n,e,s),t.elementType=kp,t.lanes=i,t;case OS:return df(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kS:a=10;break e;case DS:a=9;break e;case $y:a=11;break e;case zy:a=14;break e;case Ns:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Dn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wi(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function df(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=OS,t.lanes=n,t.stateNode={isHidden:!1},t}function Km(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Qm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OD(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pm(0),this.expirationTimes=Pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sv(t,e,n,r,s,i,a,l,c){return t=new OD(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ov(i),t}function MD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Nb(t){if(!t)return oi;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(dn(n))return NT(t,n,e)}return e}function Cb(t,e,n,r,s,i,a,l,c){return t=Sv(n,r,!0,t,s,i,a,l,c),t.context=Nb(null),n=t.current,r=Jt(),s=Xs(n),i=Yr(r,s),i.callback=e??null,Qs(n,i,s),t.current.lanes=s,Kc(t,s,r),hn(t,r),t}function hf(t,e,n,r){var s=e.current,i=Jt(),a=Xs(s);return n=Nb(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qs(s,e,a),t!==null&&(sr(t,s,a,i),_d(t,s,a)),a}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tv(t,e){b_(t,e),(t=t.alternate)&&b_(t,e)}function LD(){return null}var Ib=typeof reportError=="function"?reportError:function(t){console.error(t)};function bv(t){this._internalRoot=t}ff.prototype.render=bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));hf(t,e,null,null)};ff.prototype.unmount=bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;eo(function(){hf(null,t,null,null)}),e[ns]=null}};function ff(t){this._internalRoot=t}ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=iT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Is.length&&e!==0&&e<Is[n].priority;n++);Is.splice(n,0,t),n===0&&aT(t)}};function Nv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N_(){}function VD(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=_h(a);i.call(d)}}var a=Cb(e,r,t,0,null,!1,!1,"",N_);return t._reactRootContainer=a,t[ns]=a.current,yc(t.nodeType===8?t.parentNode:t),eo(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=_h(c);l.call(d)}}var c=Sv(t,0,!1,null,null,!1,!1,"",N_);return t._reactRootContainer=c,t[ns]=c.current,yc(t.nodeType===8?t.parentNode:t),eo(function(){hf(e,c,n,r)}),c}function pf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=_h(a);l.call(c)}}hf(e,a,t,s)}else a=VD(n,e,t,s,r);return _h(a)}rT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ol(e.pendingLanes);n!==0&&(Gy(e,n|1),hn(e,ct()),!(Le&6)&&(Aa=ct()+500,xi()))}break;case 13:eo(function(){var r=rs(t,1);if(r!==null){var s=Jt();sr(r,t,1,s)}}),Tv(t,1)}};Hy=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=Jt();sr(e,t,134217728,n)}Tv(t,134217728)}};sT=function(t){if(t.tag===13){var e=Xs(t),n=rs(t,e);if(n!==null){var r=Jt();sr(n,t,e,r)}Tv(t,e)}};iT=function(){return Ge};oT=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Bp=function(t,e,n){switch(e){case"input":if(Mp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sf(r);if(!s)throw Error(Q(90));LS(r),Mp(r,s)}}}break;case"textarea":FS(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};HS=xv;WS=eo;var FD={usingClientEntryPoint:!1,Events:[Yc,Uo,sf,qS,GS,xv]},Il={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UD={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=YS(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||LD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{ef=Zu.inject(UD),Sr=Zu}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FD;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nv(e))throw Error(Q(200));return MD(t,e,null,n)};Sn.createRoot=function(t,e){if(!Nv(t))throw Error(Q(299));var n=!1,r="",s=Ib;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sv(t,1,!1,null,null,n,!1,r,s),t[ns]=e.current,yc(t.nodeType===8?t.parentNode:t),new bv(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=YS(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return eo(t)};Sn.hydrate=function(t,e,n){if(!mf(e))throw Error(Q(200));return pf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Nv(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Ib;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Cb(e,null,t,1,n??null,s,!1,i,a),t[ns]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ff(e)};Sn.render=function(t,e,n){if(!mf(e))throw Error(Q(200));return pf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!mf(t))throw Error(Q(40));return t._reactRootContainer?(eo(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};Sn.unstable_batchedUpdates=xv;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mf(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return pf(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function Pb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pb)}catch(t){console.error(t)}}Pb(),PS.exports=Sn;var go=PS.exports;const $D=gS(go);var Rb,C_=go;Rb=C_.createRoot,C_.hydrateRoot;function zD(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var jb={exports:{}},Ab={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=g;function BD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qD=typeof Object.is=="function"?Object.is:BD,GD=ka.useState,HD=ka.useEffect,WD=ka.useLayoutEffect,KD=ka.useDebugValue;function QD(t,e){var n=e(),r=GD({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return WD(function(){s.value=n,s.getSnapshot=e,Ym(s)&&i({inst:s})},[t,n,e]),HD(function(){return Ym(s)&&i({inst:s}),t(function(){Ym(s)&&i({inst:s})})},[t]),KD(n),n}function Ym(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qD(t,n)}catch{return!0}}function YD(t,e){return e()}var XD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YD:QD;Ab.useSyncExternalStore=ka.useSyncExternalStore!==void 0?ka.useSyncExternalStore:XD;jb.exports=Ab;var JD=jb.exports;const ZD=CS.useInsertionEffect,eO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tO=eO?g.useLayoutEffect:g.useEffect,nO=ZD||tO,kb=t=>{const e=g.useRef([t,(...n)=>e[0](...n)]).current;return nO(()=>{e[0]=t}),e[1]},rO="popstate",Cv="pushState",Iv="replaceState",sO="hashchange",I_=[rO,Cv,Iv,sO],iO=t=>{for(const e of I_)addEventListener(e,t);return()=>{for(const e of I_)removeEventListener(e,t)}},Db=(t,e)=>JD.useSyncExternalStore(iO,t,e),oO=()=>location.search,aO=({ssrSearch:t=""}={})=>Db(oO,()=>t),P_=()=>location.pathname,lO=({ssrPath:t}={})=>Db(P_,t?()=>t:P_),cO=(t,{replace:e=!1,state:n=null}={})=>history[e?Iv:Cv](n,"",t),uO=(t={})=>[lO(t),cO],R_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[R_]>"u"){for(const t of[Cv,Iv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,R_,{value:!0})}const dO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Ob=(t="")=>t==="/"?"":t,hO=(t,e)=>t[0]==="~"?t.slice(1):Ob(e)+t,fO=(t="",e)=>dO(j_(Ob(t)),j_(e)),j_=t=>{try{return decodeURI(t)}catch{return t}},Mb={hook:uO,searchHook:aO,parser:zD,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Lb=g.createContext(Mb),Jc=()=>g.useContext(Lb),Vb={},Fb=g.createContext(Vb),mO=()=>g.useContext(Fb),gf=t=>{const[e,n]=t.hook(t);return[fO(t.base,e),kb((r,s)=>n(hO(r,t.base),s))]},ur=()=>gf(Jc()),Ub=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):a.groups;let h={...c};return d&&Object.assign(h,d),h})(),...r?[l]:[]]:[!1,null]},pO=({children:t,...e})=>{var h,f;const n=Jc(),r=e.hook?Mb:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=g.useRef({}),c=l.current,d=c;for(let m in r){const x=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===d&&x!==d[m]&&(l.current=d={...d}),d[m]=x,x!==r[m]&&(s=d)}return g.createElement(Lb.Provider,{value:s,children:t})},A_=({children:t,component:e},n)=>e?g.createElement(e,{params:n}):typeof t=="function"?t(n):t,gO=t=>{let e=g.useRef(Vb),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},bn=({path:t,nest:e,match:n,...r})=>{const s=Jc(),[i]=gf(s),[a,l,c]=n??Ub(s.parser,t,i,e),d=gO({...mO(),...l});if(!a)return null;const h=c?g.createElement(pO,{base:c},A_(r,d)):A_(r,d);return g.createElement(Fb.Provider,{value:d,children:h})};g.forwardRef((t,e)=>{const n=Jc(),[r,s]=gf(n),{to:i="",href:a=i,onClick:l,asChild:c,children:d,className:h,replace:f,state:m,...x}=t,N=kb(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),s(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&g.isValidElement(d)?g.cloneElement(d,{onClick:N,href:v}):g.createElement("a",{...x,onClick:N,href:v,className:h!=null&&h.call?h(r===a):h,children:d,ref:e})});const $b=t=>Array.isArray(t)?t.flatMap(e=>$b(e&&e.type===g.Fragment?e.props.children:e)):[t],yO=({children:t,location:e})=>{const n=Jc(),[r]=gf(n);for(const s of $b(t)){let i=0;if(g.isValidElement(s)&&(i=Ub(n.parser,s.props.path,e||r,s.props.nest))[0])return g.cloneElement(s,{match:i})}return null};var Wa=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},to=typeof window>"u"||"Deno"in globalThis;function Cn(){}function vO(t,e){return typeof t=="function"?t(e):t}function Eg(t){return typeof t=="number"&&t>=0&&t!==1/0}function zb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function na(t,e){return typeof t=="function"?t(e):t}function Jn(t,e){return typeof t=="function"?t(e):t}function k_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==Pv(a,e.options))return!1}else if(!Nc(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function D_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(no(e.options.mutationKey)!==no(i))return!1}else if(!Nc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Pv(t,e){return((e==null?void 0:e.queryKeyHashFn)||no)(t)}function no(t){return JSON.stringify(t,(e,n)=>Sg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Nc(t[n],e[n])):!1}function Bb(t,e){if(t===e)return t;const n=O_(t)&&O_(e);if(n||Sg(t)&&Sg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let d=0;d<a;d++){const h=n?d:i[d];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=Bb(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function Eh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function O_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sg(t){if(!M_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!M_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function M_(t){return Object.prototype.toString.call(t)==="[object Object]"}function xO(t){return new Promise(e=>{setTimeout(e,t)})}function Tg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Bb(t,e):e}function wO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _O(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Rv=Symbol();function qb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Rv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Fi,ks,fa,oS,EO=(oS=class extends Wa{constructor(){super();ge(this,Fi);ge(this,ks);ge(this,fa);re(this,fa,e=>{if(!to&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,ks)||this.setEventListener(O(this,fa))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,ks))==null||e.call(this),re(this,ks,void 0))}setEventListener(e){var n;re(this,fa,e),(n=O(this,ks))==null||n.call(this),re(this,ks,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,Fi)!==e&&(re(this,Fi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,Fi)=="boolean"?O(this,Fi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Fi=new WeakMap,ks=new WeakMap,fa=new WeakMap,oS),jv=new EO,ma,Ds,pa,aS,SO=(aS=class extends Wa{constructor(){super();ge(this,ma,!0);ge(this,Ds);ge(this,pa);re(this,pa,e=>{if(!to&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,Ds)||this.setEventListener(O(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Ds))==null||e.call(this),re(this,Ds,void 0))}setEventListener(e){var n;re(this,pa,e),(n=O(this,Ds))==null||n.call(this),re(this,Ds,e(this.setOnline.bind(this)))}setOnline(e){O(this,ma)!==e&&(re(this,ma,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,ma)}},ma=new WeakMap,Ds=new WeakMap,pa=new WeakMap,aS),Sh=new SO;function bg(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function TO(t){return Math.min(1e3*2**t,3e4)}function Gb(t){return(t??"online")==="online"?Sh.isOnline():!0}var Hb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Xm(t){return t instanceof Hb}function Wb(t){let e=!1,n=0,r=!1,s;const i=bg(),a=v=>{var y;r||(m(new Hb(v)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>jv.isFocused()&&(t.networkMode==="always"||Sh.isOnline())&&t.canRun(),h=()=>Gb(t.networkMode)&&t.canRun(),f=v=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,v),s==null||s(),i.reject(v))},x=()=>new Promise(v=>{var y;s=E=>{(r||d())&&v(E)},(y=t.onPause)==null||y.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),N=()=>{if(r)return;let v;const y=n===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(f).catch(E=>{var M;if(r)return;const _=t.retry??(to?0:3),T=t.retryDelay??TO,P=typeof T=="function"?T(n,E):T,D=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,E);if(e||!D){m(E);return}n++,(M=t.onFail)==null||M.call(t,n,E),xO(P).then(()=>d()?void 0:x()).then(()=>{e?m(E):N()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?N():x().then(N),i)}}function bO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var gt=bO(),Ui,lS,Kb=(lS=class{constructor(){ge(this,Ui)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Eg(this.gcTime)&&re(this,Ui,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(to?1/0:5*60*1e3))}clearGcTimeout(){O(this,Ui)&&(clearTimeout(O(this,Ui)),re(this,Ui,void 0))}},Ui=new WeakMap,lS),ga,ya,Nn,Vt,Bc,$i,Qn,Ur,cS,NO=(cS=class extends Kb{constructor(n){super();ge(this,Qn);ge(this,ga);ge(this,ya);ge(this,Nn);ge(this,Vt);ge(this,Bc);ge(this,$i);re(this,$i,!1),re(this,Bc,n.defaultOptions),this.setOptions(n.options),this.observers=[],re(this,Nn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,re(this,ga,CO(this.options)),this.state=n.state??O(this,ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=O(this,Vt))==null?void 0:n.promise}setOptions(n){this.options={...O(this,Bc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Nn).remove(this)}setData(n,r){const s=Tg(this.state.data,n,this.options);return be(this,Qn,Ur).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){be(this,Qn,Ur).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=O(this,Vt))==null?void 0:s.promise;return(i=O(this,Vt))==null||i.cancel(n),r?r.then(Cn).catch(Cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,ga))}isActive(){return this.observers.some(n=>Jn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!zb(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Vt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Vt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),O(this,Nn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(O(this,Vt)&&(O(this,$i)?O(this,Vt).cancel({revert:!0}):O(this,Vt).cancelRetry()),this.scheduleGc()),O(this,Nn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,Qn,Ur).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(O(this,Vt))return O(this,Vt).continueRetry(),O(this,Vt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(re(this,$i,!0),s.signal)})},a=()=>{const m=qb(this.options,r),x={queryKey:this.queryKey,meta:this.meta};return i(x),re(this,$i,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(d=this.options.behavior)==null||d.onFetch(l,this),re(this,ya,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&be(this,Qn,Ur).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var x,N,v,y;Xm(m)&&m.silent||be(this,Qn,Ur).call(this,{type:"error",error:m}),Xm(m)||((N=(x=O(this,Nn).config).onError)==null||N.call(x,m,this),(y=(v=O(this,Nn).config).onSettled)==null||y.call(v,this.state.data,m,this)),this.scheduleGc()};return re(this,Vt,Wb({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var x,N,v,y;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){c(E);return}(N=(x=O(this,Nn).config).onSuccess)==null||N.call(x,m,this),(y=(v=O(this,Nn).config).onSettled)==null||y.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,x)=>{be(this,Qn,Ur).call(this,{type:"failed",failureCount:m,error:x})},onPause:()=>{be(this,Qn,Ur).call(this,{type:"pause"})},onContinue:()=>{be(this,Qn,Ur).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Vt).start()}},ga=new WeakMap,ya=new WeakMap,Nn=new WeakMap,Vt=new WeakMap,Bc=new WeakMap,$i=new WeakMap,Qn=new WeakSet,Ur=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Qb(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Xm(i)&&i.revert&&O(this,ya)?{...O(this,ya),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),gt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),O(this,Nn).notify({query:this,type:"updated",action:n})})},cS);function Qb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yr,uS,IO=(uS=class extends Wa{constructor(e={}){super();ge(this,yr);this.config=e,re(this,yr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Pv(s,n);let a=this.get(i);return a||(a=new NO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){O(this,yr).has(e.queryHash)||(O(this,yr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,yr).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,yr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,yr).get(e)}getAll(){return[...O(this,yr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>k_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>k_(e,r)):n}notify(e){gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){gt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){gt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},yr=new WeakMap,uS),vr,Qt,zi,xr,Ts,dS,PO=(dS=class extends Kb{constructor(n){super();ge(this,xr);ge(this,vr);ge(this,Qt);ge(this,zi);this.mutationId=n.mutationId,re(this,Qt,n.mutationCache),re(this,vr,[]),this.state=n.state||Yb(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){O(this,vr).includes(n)||(O(this,vr).push(n),this.clearGcTimeout(),O(this,Qt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){re(this,vr,O(this,vr).filter(r=>r!==n)),this.scheduleGc(),O(this,Qt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){O(this,vr).length||(this.state.status==="pending"?this.scheduleGc():O(this,Qt).remove(this))}continue(){var n;return((n=O(this,zi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,d,h,f,m,x,N,v,y,E,_,T,P,D,M,b,S;re(this,zi,Wb({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,R)=>{be(this,xr,Ts).call(this,{type:"failed",failureCount:C,error:R})},onPause:()=>{be(this,xr,Ts).call(this,{type:"pause"})},onContinue:()=>{be(this,xr,Ts).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Qt).canRun(this)}));const r=this.state.status==="pending",s=!O(this,zi).canStart();try{if(!r){be(this,xr,Ts).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=O(this,Qt).config).onMutate)==null?void 0:a.call(i,n,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));R!==this.state.context&&be(this,xr,Ts).call(this,{type:"pending",context:R,variables:n,isPaused:s})}const C=await O(this,zi).start();return await((h=(d=O(this,Qt).config).onSuccess)==null?void 0:h.call(d,C,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,C,n,this.state.context)),await((N=(x=O(this,Qt).config).onSettled)==null?void 0:N.call(x,C,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,C,null,n,this.state.context)),be(this,xr,Ts).call(this,{type:"success",data:C}),C}catch(C){try{throw await((_=(E=O(this,Qt).config).onError)==null?void 0:_.call(E,C,n,this.state.context,this)),await((P=(T=this.options).onError)==null?void 0:P.call(T,C,n,this.state.context)),await((M=(D=O(this,Qt).config).onSettled)==null?void 0:M.call(D,void 0,C,this.state.variables,this.state.context,this)),await((S=(b=this.options).onSettled)==null?void 0:S.call(b,void 0,C,n,this.state.context)),C}finally{be(this,xr,Ts).call(this,{type:"error",error:C})}}finally{O(this,Qt).runNext(this)}}},vr=new WeakMap,Qt=new WeakMap,zi=new WeakMap,xr=new WeakSet,Ts=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),gt.batch(()=>{O(this,vr).forEach(s=>{s.onMutationUpdate(n)}),O(this,Qt).notify({mutation:this,type:"updated",action:n})})},dS);function Yb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mn,qc,hS,RO=(hS=class extends Wa{constructor(e={}){super();ge(this,mn);ge(this,qc);this.config=e,re(this,mn,new Map),re(this,qc,Date.now())}build(e,n,r){const s=new PO({mutationCache:this,mutationId:++Mu(this,qc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=ed(e),r=O(this,mn).get(n)??[];r.push(e),O(this,mn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=ed(e);if(O(this,mn).has(n)){const s=(r=O(this,mn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?O(this,mn).delete(n):O(this,mn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=O(this,mn).get(ed(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=O(this,mn).get(ed(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...O(this,mn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D_(n,r))}findAll(e={}){return this.getAll().filter(n=>D_(e,n))}notify(e){gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return gt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Cn))))}},mn=new WeakMap,qc=new WeakMap,hS);function ed(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function L_(t){return{onFetch:(e,n)=>{var h,f,m,x,N;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((x=e.state.data)==null?void 0:x.pages)||[],a=((N=e.state.data)==null?void 0:N.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const y=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=qb(e.options,e.fetchOptions),_=async(T,P,D)=>{if(v)return Promise.reject();if(P==null&&T.pages.length)return Promise.resolve(T);const M={queryKey:e.queryKey,pageParam:P,direction:D?"backward":"forward",meta:e.options.meta};y(M);const b=await E(M),{maxPages:S}=e.options,C=D?_O:wO;return{pages:C(T.pages,b,S),pageParams:C(T.pageParams,P,S)}};if(s&&i.length){const T=s==="backward",P=T?jO:V_,D={pages:i,pageParams:a},M=P(r,D);l=await _(D,M,T)}else{const T=t??i.length;do{const P=c===0?a[0]??r.initialPageParam:V_(r,l);if(c>0&&P==null)break;l=await _(l,P),c++}while(c<T)}return l};e.options.persister?e.fetchFn=()=>{var v,y;return(y=(v=e.options).persister)==null?void 0:y.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function V_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function jO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ot,Os,Ms,va,xa,Ls,wa,_a,fS,AO=(fS=class{constructor(t={}){ge(this,ot);ge(this,Os);ge(this,Ms);ge(this,va);ge(this,xa);ge(this,Ls);ge(this,wa);ge(this,_a);re(this,ot,t.queryCache||new IO),re(this,Os,t.mutationCache||new RO),re(this,Ms,t.defaultOptions||{}),re(this,va,new Map),re(this,xa,new Map),re(this,Ls,0)}mount(){Mu(this,Ls)._++,O(this,Ls)===1&&(re(this,wa,jv.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,ot).onFocus())})),re(this,_a,Sh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,ot).onOnline())})))}unmount(){var t,e;Mu(this,Ls)._--,O(this,Ls)===0&&((t=O(this,wa))==null||t.call(this),re(this,wa,void 0),(e=O(this,_a))==null||e.call(this),re(this,_a,void 0))}isFetching(t){return O(this,ot).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Os).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,ot).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=O(this,ot).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(na(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return O(this,ot).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,ot).get(r.queryHash),i=s==null?void 0:s.state.data,a=vO(e,i);if(a!==void 0)return O(this,ot).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return gt.batch(()=>O(this,ot).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,ot).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,ot);gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,ot),r={type:"active",...t};return gt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=gt.batch(()=>O(this,ot).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Cn).catch(Cn)}invalidateQueries(t={},e={}){return gt.batch(()=>{if(O(this,ot).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=gt.batch(()=>O(this,ot).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Cn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Cn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,ot).build(this,e);return n.isStaleByTime(na(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Cn).catch(Cn)}fetchInfiniteQuery(t){return t.behavior=L_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Cn).catch(Cn)}ensureInfiniteQueryData(t){return t.behavior=L_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sh.isOnline()?O(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,ot)}getMutationCache(){return O(this,Os)}getDefaultOptions(){return O(this,Ms)}setDefaultOptions(t){re(this,Ms,t)}setQueryDefaults(t,e){O(this,va).set(no(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,va).values()];let n={};return e.forEach(r=>{Nc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){O(this,xa).set(no(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,xa).values()];let n={};return e.forEach(r=>{Nc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Ms).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Pv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Rv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Ms).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,ot).clear(),O(this,Os).clear()}},ot=new WeakMap,Os=new WeakMap,Ms=new WeakMap,va=new WeakMap,xa=new WeakMap,Ls=new WeakMap,wa=new WeakMap,_a=new WeakMap,fS),rn,ke,Gc,Yt,Bi,Ea,Vs,wr,Hc,Sa,Ta,qi,Gi,Fs,ba,$e,Ll,Ng,Cg,Ig,Pg,Rg,jg,Ag,Xb,mS,kO=(mS=class extends Wa{constructor(e,n){super();ge(this,$e);ge(this,rn);ge(this,ke);ge(this,Gc);ge(this,Yt);ge(this,Bi);ge(this,Ea);ge(this,Vs);ge(this,wr);ge(this,Hc);ge(this,Sa);ge(this,Ta);ge(this,qi);ge(this,Gi);ge(this,Fs);ge(this,ba,new Set);this.options=n,re(this,rn,e),re(this,wr,null),re(this,Vs,bg()),this.options.experimental_prefetchInRender||O(this,Vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,ke).addObserver(this),F_(O(this,ke),this.options)?be(this,$e,Ll).call(this):this.updateResult(),be(this,$e,Pg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kg(O(this,ke),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kg(O(this,ke),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,$e,Rg).call(this),be(this,$e,jg).call(this),O(this,ke).removeObserver(this)}setOptions(e,n){const r=this.options,s=O(this,ke);if(this.options=O(this,rn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Jn(this.options.enabled,O(this,ke))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,$e,Ag).call(this),O(this,ke).setOptions(this.options),r._defaulted&&!Eh(this.options,r)&&O(this,rn).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,ke),observer:this});const i=this.hasListeners();i&&U_(O(this,ke),s,this.options,r)&&be(this,$e,Ll).call(this),this.updateResult(n),i&&(O(this,ke)!==s||Jn(this.options.enabled,O(this,ke))!==Jn(r.enabled,O(this,ke))||na(this.options.staleTime,O(this,ke))!==na(r.staleTime,O(this,ke)))&&be(this,$e,Ng).call(this);const a=be(this,$e,Cg).call(this);i&&(O(this,ke)!==s||Jn(this.options.enabled,O(this,ke))!==Jn(r.enabled,O(this,ke))||a!==O(this,Fs))&&be(this,$e,Ig).call(this,a)}getOptimisticResult(e){const n=O(this,rn).getQueryCache().build(O(this,rn),e),r=this.createResult(n,e);return OO(this,r)&&(re(this,Yt,r),re(this,Ea,this.options),re(this,Bi,O(this,ke).state)),r}getCurrentResult(){return O(this,Yt)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){O(this,ba).add(e)}getCurrentQuery(){return O(this,ke)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=O(this,rn).defaultQueryOptions(e),r=O(this,rn).getQueryCache().build(O(this,rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return be(this,$e,Ll).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,Yt)))}createResult(e,n){var S;const r=O(this,ke),s=this.options,i=O(this,Yt),a=O(this,Bi),l=O(this,Ea),d=e!==r?e.state:O(this,Gc),{state:h}=e;let f={...h},m=!1,x;if(n._optimisticResults){const C=this.hasListeners(),R=!C&&F_(e,n),k=C&&U_(e,r,n,s);(R||k)&&(f={...f,...Qb(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:N,errorUpdatedAt:v,status:y}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(a==null?void 0:a.data)&&n.select===O(this,Hc))x=O(this,Sa);else try{re(this,Hc,n.select),x=n.select(f.data),x=Tg(i==null?void 0:i.data,x,n),re(this,Sa,x),re(this,wr,null)}catch(C){re(this,wr,C)}else x=f.data;if(n.placeholderData!==void 0&&x===void 0&&y==="pending"){let C;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))C=i.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=O(this,Ta))==null?void 0:S.state.data,O(this,Ta)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),re(this,wr,null)}catch(R){re(this,wr,R)}C!==void 0&&(y="success",x=Tg(i==null?void 0:i.data,C,n),m=!0)}O(this,wr)&&(N=O(this,wr),x=O(this,Sa),v=Date.now(),y="error");const E=f.fetchStatus==="fetching",_=y==="pending",T=y==="error",P=_&&E,D=x!==void 0,b={status:y,fetchStatus:f.fetchStatus,isPending:_,isSuccess:y==="success",isError:T,isInitialLoading:P,isLoading:P,data:x,dataUpdatedAt:f.dataUpdatedAt,error:N,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:E,isRefetching:E&&!_,isLoadingError:T&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&D,isStale:Av(e,n),refetch:this.refetch,promise:O(this,Vs)};if(this.options.experimental_prefetchInRender){const C=A=>{b.status==="error"?A.reject(b.error):b.data!==void 0&&A.resolve(b.data)},R=()=>{const A=re(this,Vs,b.promise=bg());C(A)},k=O(this,Vs);switch(k.status){case"pending":e.queryHash===r.queryHash&&C(k);break;case"fulfilled":(b.status==="error"||b.data!==k.value)&&R();break;case"rejected":(b.status!=="error"||b.error!==k.reason)&&R();break}}return b}updateResult(e){const n=O(this,Yt),r=this.createResult(O(this,ke),this.options);if(re(this,Bi,O(this,ke).state),re(this,Ea,this.options),O(this,Bi).data!==void 0&&re(this,Ta,O(this,ke)),Eh(r,n))return;re(this,Yt,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!O(this,ba).size)return!0;const c=new Set(l??O(this,ba));return this.options.throwOnError&&c.add("error"),Object.keys(O(this,Yt)).some(d=>{const h=d;return O(this,Yt)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),be(this,$e,Xb).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,$e,Pg).call(this)}},rn=new WeakMap,ke=new WeakMap,Gc=new WeakMap,Yt=new WeakMap,Bi=new WeakMap,Ea=new WeakMap,Vs=new WeakMap,wr=new WeakMap,Hc=new WeakMap,Sa=new WeakMap,Ta=new WeakMap,qi=new WeakMap,Gi=new WeakMap,Fs=new WeakMap,ba=new WeakMap,$e=new WeakSet,Ll=function(e){be(this,$e,Ag).call(this);let n=O(this,ke).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Cn)),n},Ng=function(){be(this,$e,Rg).call(this);const e=na(this.options.staleTime,O(this,ke));if(to||O(this,Yt).isStale||!Eg(e))return;const r=zb(O(this,Yt).dataUpdatedAt,e)+1;re(this,qi,setTimeout(()=>{O(this,Yt).isStale||this.updateResult()},r))},Cg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,ke)):this.options.refetchInterval)??!1},Ig=function(e){be(this,$e,jg).call(this),re(this,Fs,e),!(to||Jn(this.options.enabled,O(this,ke))===!1||!Eg(O(this,Fs))||O(this,Fs)===0)&&re(this,Gi,setInterval(()=>{(this.options.refetchIntervalInBackground||jv.isFocused())&&be(this,$e,Ll).call(this)},O(this,Fs)))},Pg=function(){be(this,$e,Ng).call(this),be(this,$e,Ig).call(this,be(this,$e,Cg).call(this))},Rg=function(){O(this,qi)&&(clearTimeout(O(this,qi)),re(this,qi,void 0))},jg=function(){O(this,Gi)&&(clearInterval(O(this,Gi)),re(this,Gi,void 0))},Ag=function(){const e=O(this,rn).getQueryCache().build(O(this,rn),this.options);if(e===O(this,ke))return;const n=O(this,ke);re(this,ke,e),re(this,Gc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Xb=function(e){gt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(O(this,Yt))}),O(this,rn).getQueryCache().notify({query:O(this,ke),type:"observerResultsUpdated"})})},mS);function DO(t,e){return Jn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function F_(t,e){return DO(t,e)||t.state.data!==void 0&&kg(t,e,e.refetchOnMount)}function kg(t,e,n){if(Jn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Av(t,e)}return!1}function U_(t,e,n,r){return(t!==e||Jn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Av(t,n)}function Av(t,e){return Jn(e.enabled,t)!==!1&&t.isStaleByTime(na(e.staleTime,t))}function OO(t,e){return!Eh(t.getCurrentResult(),e)}var Us,$s,sn,Br,es,Id,Dg,pS,MO=(pS=class extends Wa{constructor(n,r){super();ge(this,es);ge(this,Us);ge(this,$s);ge(this,sn);ge(this,Br);re(this,Us,n),this.setOptions(r),this.bindMethods(),be(this,es,Id).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=O(this,Us).defaultMutationOptions(n),Eh(this.options,r)||O(this,Us).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,sn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&no(r.mutationKey)!==no(this.options.mutationKey)?this.reset():((s=O(this,sn))==null?void 0:s.state.status)==="pending"&&O(this,sn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=O(this,sn))==null||n.removeObserver(this)}onMutationUpdate(n){be(this,es,Id).call(this),be(this,es,Dg).call(this,n)}getCurrentResult(){return O(this,$s)}reset(){var n;(n=O(this,sn))==null||n.removeObserver(this),re(this,sn,void 0),be(this,es,Id).call(this),be(this,es,Dg).call(this)}mutate(n,r){var s;return re(this,Br,r),(s=O(this,sn))==null||s.removeObserver(this),re(this,sn,O(this,Us).getMutationCache().build(O(this,Us),this.options)),O(this,sn).addObserver(this),O(this,sn).execute(n)}},Us=new WeakMap,$s=new WeakMap,sn=new WeakMap,Br=new WeakMap,es=new WeakSet,Id=function(){var r;const n=((r=O(this,sn))==null?void 0:r.state)??Yb();re(this,$s,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Dg=function(n){gt.batch(()=>{var r,s,i,a,l,c,d,h;if(O(this,Br)&&this.hasListeners()){const f=O(this,$s).variables,m=O(this,$s).context;(n==null?void 0:n.type)==="success"?((s=(r=O(this,Br)).onSuccess)==null||s.call(r,n.data,f,m),(a=(i=O(this,Br)).onSettled)==null||a.call(i,n.data,null,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=O(this,Br)).onError)==null||c.call(l,n.error,f,m),(h=(d=O(this,Br)).onSettled)==null||h.call(d,void 0,n.error,f,m))}this.listeners.forEach(f=>{f(O(this,$s))})})},pS),Jb=g.createContext(void 0),kv=t=>{const e=g.useContext(Jb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},LO=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(Jb.Provider,{value:t,children:e})),Zb=g.createContext(!1),VO=()=>g.useContext(Zb);Zb.Provider;function FO(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var UO=g.createContext(FO()),$O=()=>g.useContext(UO);function eN(t,e){return typeof t=="function"?t(...e):!!t}function Og(){}var zO=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},BO=t=>{g.useEffect(()=>{t.clearReset()},[t])},qO=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&eN(n,[t.error,r]),GO=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},HO=(t,e)=>t.isLoading&&t.isFetching&&!e,WO=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,$_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function KO(t,e,n){var h,f,m,x,N;const r=kv(),s=VO(),i=$O(),a=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",GO(a),zO(a,i),BO(i);const l=!r.getQueryCache().get(a.queryHash),[c]=g.useState(()=>new e(r,a)),d=c.getOptimisticResult(a);if(g.useSyncExternalStore(g.useCallback(v=>{const y=s?Og:c.subscribe(gt.batchCalls(v));return c.updateResult(),y},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),WO(a,d))throw $_(a,c,i);if(qO({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw d.error;if((x=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,a,d),a.experimental_prefetchInRender&&!to&&HO(d,s)){const v=l?$_(a,c,i):(N=r.getQueryCache().get(a.queryHash))==null?void 0:N.promise;v==null||v.catch(Og).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?d:c.trackResult(d)}function zt(t,e){return KO(t,kO)}function Wo(t,e){const n=kv(),[r]=g.useState(()=>new MO(n,t));g.useEffect(()=>{r.setOptions(t)},[r,t]);const s=g.useSyncExternalStore(g.useCallback(a=>r.subscribe(gt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((a,l)=>{r.mutate(a,l).catch(Og)},[r]);if(s.error&&eN(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function tN(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Ue(t,e,n){const r=localStorage.getItem("token"),s={};n&&(s["Content-Type"]="application/json"),r&&(s.Authorization=`Bearer ${r}`);const i=await fetch(e,{method:t,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include"});return await tN(i),i}const QO=({on401:t})=>async({queryKey:e})=>{const n=localStorage.getItem("token"),r={};n&&(r.Authorization=`Bearer ${n}`);const s=await fetch(e.join("/"),{headers:r,credentials:"include"});return t==="returnNull"&&s.status===401?null:(await tN(s),await s.json())},De=new AO({defaultOptions:{queries:{queryFn:QO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),YO=1,XO=1e6,JO=4e3;let Jm=0;function ZO(){return Jm=(Jm+1)%Number.MAX_SAFE_INTEGER,Jm.toString()}const Zm=new Map,z_=(t,e)=>{if(Zm.has(t))return;const n=setTimeout(()=>{Zm.delete(t),nc({type:"REMOVE_TOAST",toastId:t})},XO);Zm.set(t,n)},eM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,YO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?z_(n):t.toasts.forEach(r=>{z_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Pd=[];let Rd={toasts:[]};function nc(t){Rd=eM(Rd,t),Pd.forEach(e=>{e(Rd)})}function tM({...t}){const e=ZO(),n=i=>nc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>nc({type:"DISMISS_TOAST",toastId:e}),s=t.variant==="destructive"?1/0:t.duration!==void 0?t.duration:JO;return nc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,duration:s,onOpenChange:i=>{i||r()}}}),t.variant!=="destructive"&&s!==1/0&&setTimeout(()=>{r()},s),{id:e,dismiss:r,update:n}}function jt(){const[t,e]=g.useState(Rd);return g.useEffect(()=>(Pd.push(e),()=>{const n=Pd.indexOf(e);n>-1&&Pd.splice(n,1)}),[t]),{...t,toast:tM,dismiss:n=>nc({type:"DISMISS_TOAST",toastId:n})}}function J(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function B_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function yf(...t){return e=>{let n=!1;const r=t.map(s=>{const i=B_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():B_(t[s],null)}}}}function Oe(...t){return g.useCallback(yf(...t),t)}function nM(t,e){const n=g.createContext(e),r=i=>{const{children:a,...l}=i,c=g.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=g.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function qn(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var E;const{scope:m,children:x,...N}=f,v=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,y=g.useMemo(()=>N,Object.values(N));return o.jsx(v.Provider,{value:y,children:x})};d.displayName=i+"Provider";function h(f,m){var v;const x=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,N=g.useContext(x);if(N)return N;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,rM(s,...e)]}function rM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ro(t){const e=iM(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(oM);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var sM=ro("Slot");function iM(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=lM(s),l=aM(i,s.props);return s.type!==g.Fragment&&(l.ref=r?yf(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nN=Symbol("radix.slottable");function rN(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=nN,e}function oM(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nN}function aM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function lM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vf(t){const e=t+"CollectionProvider",[n,r]=qn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:y,children:E}=v,_=pr.useRef(null),T=pr.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:T,collectionRef:_,children:E})};a.displayName=e;const l=t+"CollectionSlot",c=ro(l),d=pr.forwardRef((v,y)=>{const{scope:E,children:_}=v,T=i(l,E),P=Oe(y,T.collectionRef);return o.jsx(c,{ref:P,children:_})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ro(h),x=pr.forwardRef((v,y)=>{const{scope:E,children:_,...T}=v,P=pr.useRef(null),D=Oe(y,P),M=i(h,E);return pr.useEffect(()=>(M.itemMap.set(P,{ref:P,...T}),()=>void M.itemMap.delete(P))),o.jsx(m,{[f]:"",ref:D,children:_})});x.displayName=h;function N(v){const y=i(t+"CollectionConsumer",v);return pr.useCallback(()=>{const _=y.collectionRef.current;if(!_)return[];const T=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((M,b)=>T.indexOf(M.ref.current)-T.indexOf(b.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},N,r]}var cM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=cM.reduce((t,e)=>{const n=ro(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Dv(t,e){t&&go.flushSync(()=>t.dispatchEvent(e))}function qt(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function uM(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var dM="DismissableLayer",Mg="dismissableLayer.update",hM="dismissableLayer.pointerDownOutside",fM="dismissableLayer.focusOutside",q_,sN=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ka=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(sN),[h,f]=g.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=g.useState({}),N=Oe(e,b=>f(b)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(y),_=h?v.indexOf(h):-1,T=d.layersWithOutsidePointerEventsDisabled.size>0,P=_>=E,D=pM(b=>{const S=b.target,C=[...d.branches].some(R=>R.contains(S));!P||C||(s==null||s(b),a==null||a(b),b.defaultPrevented||l==null||l())},m),M=gM(b=>{const S=b.target;[...d.branches].some(R=>R.contains(S))||(i==null||i(b),a==null||a(b),b.defaultPrevented||l==null||l())},m);return uM(b=>{_===d.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&l&&(b.preventDefault(),l()))},m),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(q_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),G_(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=q_)}},[h,m,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),G_())},[h,d]),g.useEffect(()=>{const b=()=>x({});return document.addEventListener(Mg,b),()=>document.removeEventListener(Mg,b)},[]),o.jsx(_e.div,{...c,ref:N,style:{pointerEvents:T?P?"auto":"none":void 0,...t.style},onFocusCapture:J(t.onFocusCapture,M.onFocusCapture),onBlurCapture:J(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:J(t.onPointerDownCapture,D.onPointerDownCapture)})});Ka.displayName=dM;var mM="DismissableLayerBranch",iN=g.forwardRef((t,e)=>{const n=g.useContext(sN),r=g.useRef(null),s=Oe(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(_e.div,{...t,ref:s})});iN.displayName=mM;function pM(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){oN(hM,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gM(t,e=globalThis==null?void 0:globalThis.document){const n=qt(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&oN(fM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function G_(){const t=new CustomEvent(Mg);document.dispatchEvent(t)}function oN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Dv(s,i):s.dispatchEvent(i)}var yM=Ka,vM=iN,Gt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},xM="Portal",Zc=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);Gt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?$D.createPortal(o.jsx(_e.div,{...r,ref:e}),a):null});Zc.displayName=xM;function wM(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var dr=t=>{const{present:e,children:n}=t,r=_M(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Oe(r.ref,EM(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};dr.displayName="Presence";function _M(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=wM(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=td(r.current);i.current=l==="mounted"?d:"none"},[l]),Gt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,x=td(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Gt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=x=>{const v=td(r.current).includes(x.animationName);if(x.target===e&&v&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},m=x=>{x.target===e&&(i.current=td(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function td(t){return(t==null?void 0:t.animationName)||"none"}function EM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ai({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=SM({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=qt(n),c=g.useCallback(d=>{if(i){const f=typeof d=="function"?d(t):d;f!==t&&l(f)}else s(d)},[i,t,s,l]);return[a,c]}function SM({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),i=qt(e);return g.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var TM="VisuallyHidden",eu=g.forwardRef((t,e)=>o.jsx(_e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));eu.displayName=TM;var bM=eu,Ov="ToastProvider",[Mv,NM,CM]=vf("Toast"),[aN,mq]=qn("Toast",[CM]),[IM,xf]=aN(Ov),lN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=g.useState(null),[d,h]=g.useState(0),f=g.useRef(!1),m=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ov}\`. Expected non-empty \`string\`.`),o.jsx(Mv.Provider,{scope:e,children:o.jsx(IM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>h(x=>x+1),[]),onToastRemove:g.useCallback(()=>h(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};lN.displayName=Ov;var cN="ToastViewport",PM=["F8"],Lg="toast.viewportPause",Vg="toast.viewportResume",uN=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=PM,label:s="Notifications ({hotkey})",...i}=t,a=xf(cN,n),l=NM(n),c=g.useRef(null),d=g.useRef(null),h=g.useRef(null),f=g.useRef(null),m=Oe(e,f,a.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=a.toastCount>0;g.useEffect(()=>{const y=E=>{var T;r.length!==0&&r.every(P=>E[P]||E.code===P)&&((T=f.current)==null||T.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),g.useEffect(()=>{const y=c.current,E=f.current;if(N&&y&&E){const _=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Lg);E.dispatchEvent(M),a.isClosePausedRef.current=!0}},T=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Vg);E.dispatchEvent(M),a.isClosePausedRef.current=!1}},P=M=>{!y.contains(M.relatedTarget)&&T()},D=()=>{y.contains(document.activeElement)||T()};return y.addEventListener("focusin",_),y.addEventListener("focusout",P),y.addEventListener("pointermove",_),y.addEventListener("pointerleave",D),window.addEventListener("blur",_),window.addEventListener("focus",T),()=>{y.removeEventListener("focusin",_),y.removeEventListener("focusout",P),y.removeEventListener("pointermove",_),y.removeEventListener("pointerleave",D),window.removeEventListener("blur",_),window.removeEventListener("focus",T)}}},[N,a.isClosePausedRef]);const v=g.useCallback(({tabbingDirection:y})=>{const _=l().map(T=>{const P=T.ref.current,D=[P,...zM(P)];return y==="forwards"?D:D.reverse()});return(y==="forwards"?_.reverse():_).flat()},[l]);return g.useEffect(()=>{const y=f.current;if(y){const E=_=>{var D,M,b;const T=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!T){const S=document.activeElement,C=_.shiftKey;if(_.target===y&&C){(D=d.current)==null||D.focus();return}const A=v({tabbingDirection:C?"backwards":"forwards"}),j=A.findIndex(W=>W===S);ep(A.slice(j+1))?_.preventDefault():C?(M=d.current)==null||M.focus():(b=h.current)==null||b.focus()}};return y.addEventListener("keydown",E),()=>y.removeEventListener("keydown",E)}},[l,v]),o.jsxs(vM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&o.jsx(Fg,{ref:d,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});ep(y)}}),o.jsx(Mv.Slot,{scope:n,children:o.jsx(_e.ol,{tabIndex:-1,...i,ref:m})}),N&&o.jsx(Fg,{ref:h,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});ep(y)}})]})});uN.displayName=cN;var dN="ToastFocusProxy",Fg=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=xf(dN,n);return o.jsx(eu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Fg.displayName=dN;var wf="Toast",RM="toast.swipeStart",jM="toast.swipeMove",AM="toast.swipeCancel",kM="toast.swipeEnd",hN=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=ai({prop:r,defaultProp:s,onChange:i});return o.jsx(dr,{present:n||l,children:o.jsx(MM,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:qt(t.onPause),onResume:qt(t.onResume),onSwipeStart:J(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:J(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:J(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:J(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});hN.displayName=wf;var[DM,OM]=aN(wf,{onClose(){}}),MM=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:x,...N}=t,v=xf(wf,n),[y,E]=g.useState(null),_=Oe(e,W=>E(W)),T=g.useRef(null),P=g.useRef(null),D=s||v.duration,M=g.useRef(0),b=g.useRef(D),S=g.useRef(0),{onToastAdd:C,onToastRemove:R}=v,k=qt(()=>{var ue;(y==null?void 0:y.contains(document.activeElement))&&((ue=v.viewport)==null||ue.focus()),a()}),A=g.useCallback(W=>{!W||W===1/0||(window.clearTimeout(S.current),M.current=new Date().getTime(),S.current=window.setTimeout(k,W))},[k]);g.useEffect(()=>{const W=v.viewport;if(W){const ue=()=>{A(b.current),d==null||d()},Z=()=>{const se=new Date().getTime()-M.current;b.current=b.current-se,window.clearTimeout(S.current),c==null||c()};return W.addEventListener(Lg,Z),W.addEventListener(Vg,ue),()=>{W.removeEventListener(Lg,Z),W.removeEventListener(Vg,ue)}}},[v.viewport,D,c,d,A]),g.useEffect(()=>{i&&!v.isClosePausedRef.current&&A(D)},[i,D,v.isClosePausedRef,A]),g.useEffect(()=>(C(),()=>R()),[C,R]);const j=g.useMemo(()=>y?xN(y):null,[y]);return v.viewport?o.jsxs(o.Fragment,{children:[j&&o.jsx(LM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),o.jsx(DM,{scope:n,onClose:k,children:go.createPortal(o.jsx(Mv.ItemSlot,{scope:n,children:o.jsx(yM,{asChild:!0,onEscapeKeyDown:J(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||k(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(_e.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...N,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:J(t.onKeyDown,W=>{W.key==="Escape"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:J(t.onPointerDown,W=>{W.button===0&&(T.current={x:W.clientX,y:W.clientY})}),onPointerMove:J(t.onPointerMove,W=>{if(!T.current)return;const ue=W.clientX-T.current.x,Z=W.clientY-T.current.y,se=!!P.current,U=["left","right"].includes(v.swipeDirection),z=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,Y=U?z(0,ue):0,F=U?0:z(0,Z),V=W.pointerType==="touch"?10:2,K={x:Y,y:F},pe={originalEvent:W,delta:K};se?(P.current=K,nd(jM,f,pe,{discrete:!1})):H_(K,v.swipeDirection,V)?(P.current=K,nd(RM,h,pe,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(ue)>V||Math.abs(Z)>V)&&(T.current=null)}),onPointerUp:J(t.onPointerUp,W=>{const ue=P.current,Z=W.target;if(Z.hasPointerCapture(W.pointerId)&&Z.releasePointerCapture(W.pointerId),P.current=null,T.current=null,ue){const se=W.currentTarget,U={originalEvent:W,delta:ue};H_(ue,v.swipeDirection,v.swipeThreshold)?nd(kM,x,U,{discrete:!0}):nd(AM,m,U,{discrete:!0}),se.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),LM=t=>{const{__scopeToast:e,children:n,...r}=t,s=xf(wf,e),[i,a]=g.useState(!1),[l,c]=g.useState(!1);return UM(()=>a(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(Zc,{asChild:!0,children:o.jsx(eu,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},VM="ToastTitle",fN=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(_e.div,{...r,ref:e})});fN.displayName=VM;var FM="ToastDescription",mN=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(_e.div,{...r,ref:e})});mN.displayName=FM;var pN="ToastAction",gN=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(vN,{altText:n,asChild:!0,children:o.jsx(Lv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${pN}\`. Expected non-empty \`string\`.`),null)});gN.displayName=pN;var yN="ToastClose",Lv=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=OM(yN,n);return o.jsx(vN,{asChild:!0,children:o.jsx(_e.button,{type:"button",...r,ref:e,onClick:J(t.onClick,s.onClose)})})});Lv.displayName=yN;var vN=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(_e.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function xN(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),$M(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...xN(r))}}),e}function nd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Dv(s,i):s.dispatchEvent(i)}var H_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function UM(t=()=>{}){const e=qt(t);Gt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function $M(t){return t.nodeType===t.ELEMENT_NODE}function zM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ep(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var BM=lN,wN=uN,_N=hN,EN=fN,SN=mN,TN=gN,bN=Lv;function NN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=NN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function CN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=NN(t))&&(r&&(r+=" "),r+=e);return r}const W_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,K_=CN,tu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return K_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=W_(h)||W_(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...x}=h;return Object.entries(x).every(N=>{let[v,y]=N;return Array.isArray(y)?y.includes({...i,...l}[v]):{...i,...l}[v]===y})?[...d,f,m]:d},[]);return K_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...GM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:IN("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(HM,{ref:i,iconNode:e,className:IN(`lucide-${qM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Se("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Se("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=Se("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=Se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=Se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=Se("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Se("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=Se("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Se("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Vv="-",c4=t=>{const e=d4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Vv);return l[0]===""&&l.length!==1&&l.shift(),DN(l,e)||u4(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},DN=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?DN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Vv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},tE=/^\[(.+)\]$/,u4=t=>{if(tE.test(t)){const e=tE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},d4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return f4(Object.entries(t.classGroups),n).forEach(([i,a])=>{Hg(a,r,i,e)}),r},Hg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:nE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(h4(s)){Hg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Hg(a,nE(e,i),n,r)})})},nE=(t,e)=>{let n=t;return e.split(Vv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},h4=t=>t.isThemeGetter,f4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,m4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},ON="!",p4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let y=0;y<l.length;y++){let E=l[y];if(d===0){if(E===s&&(r||l.slice(y,y+i)===e)){c.push(l.slice(h,y)),h=y+i;continue}if(E==="/"){f=y;continue}}E==="["?d++:E==="]"&&d--}const m=c.length===0?l:l.substring(h),x=m.startsWith(ON),N=x?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:N,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},g4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},y4=t=>({cache:m4(t.cacheSize),parseClassName:p4(t),...c4(t)}),v4=/\s+/,x4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(v4);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:x}=n(d);let N=!!x,v=r(N?m.substring(0,x):m);if(!v){if(!N){l=d+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=d+(l.length>0?" "+l:l);continue}N=!1}const y=g4(h).join(":"),E=f?y+ON:y,_=E+v;if(i.includes(_))continue;i.push(_);const T=s(v,N);for(let P=0;P<T.length;++P){const D=T[P];i.push(E+D)}l=d+(l.length>0?" "+l:l)}return l};function w4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=MN(e))&&(r&&(r+=" "),r+=n);return r}const MN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=MN(t[r]))&&(n&&(n+=" "),n+=e);return n};function _4(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=y4(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=x4(c,n);return s(c,h),h}return function(){return i(w4.apply(null,arguments))}}const Ye=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},LN=/^\[(?:([a-z-]+):)?(.+)\]$/i,E4=/^\d+\/\d+$/,S4=new Set(["px","full","screen"]),T4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,N4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fr=t=>ra(t)||S4.has(t)||E4.test(t),_s=t=>Qa(t,"length",M4),ra=t=>!!t&&!Number.isNaN(Number(t)),rp=t=>Qa(t,"number",ra),Pl=t=>!!t&&Number.isInteger(Number(t)),P4=t=>t.endsWith("%")&&ra(t.slice(0,-1)),Te=t=>LN.test(t),Es=t=>T4.test(t),R4=new Set(["length","size","percentage"]),j4=t=>Qa(t,R4,VN),A4=t=>Qa(t,"position",VN),k4=new Set(["image","url"]),D4=t=>Qa(t,k4,V4),O4=t=>Qa(t,"",L4),Rl=()=>!0,Qa=(t,e,n)=>{const r=LN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},M4=t=>b4.test(t)&&!N4.test(t),VN=()=>!1,L4=t=>C4.test(t),V4=t=>I4.test(t),F4=()=>{const t=Ye("colors"),e=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),s=Ye("borderColor"),i=Ye("borderRadius"),a=Ye("borderSpacing"),l=Ye("borderWidth"),c=Ye("contrast"),d=Ye("grayscale"),h=Ye("hueRotate"),f=Ye("invert"),m=Ye("gap"),x=Ye("gradientColorStops"),N=Ye("gradientColorStopPositions"),v=Ye("inset"),y=Ye("margin"),E=Ye("opacity"),_=Ye("padding"),T=Ye("saturate"),P=Ye("scale"),D=Ye("sepia"),M=Ye("skew"),b=Ye("space"),S=Ye("translate"),C=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Te,e],A=()=>[Te,e],j=()=>["",Fr,_s],W=()=>["auto",ra,Te],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Te],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ra,Te];return{cacheSize:500,separator:":",theme:{colors:[Rl],spacing:[Fr,_s],blur:["none","",Es,Te],brightness:F(),borderColor:[t],borderRadius:["none","","full",Es,Te],borderSpacing:A(),borderWidth:j(),contrast:F(),grayscale:z(),hueRotate:F(),invert:z(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[P4,_s],inset:k(),margin:k(),opacity:F(),padding:A(),saturate:F(),scale:F(),sepia:z(),skew:F(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Es]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Te]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pl,Te]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Pl,Te]}],"grid-cols":[{"grid-cols":[Rl]}],"col-start-end":[{col:["auto",{span:["full",Pl,Te]},Te]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Rl]}],"row-start-end":[{row:["auto",{span:[Pl,Te]},Te]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,e]}],"min-w":[{"min-w":[Te,e,"min","max","fit"]}],"max-w":[{"max-w":[Te,e,"none","full","min","max","fit","prose",{screen:[Es]},Es]}],h:[{h:[Te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Es,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rp]}],"font-family":[{font:[Rl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",ra,rp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fr,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fr,_s]}],"underline-offset":[{"underline-offset":["auto",Fr,Te]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),A4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",j4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Fr,Te]}],"outline-w":[{outline:[Fr,_s]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Fr,_s]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Es,O4]}],"shadow-color":[{shadow:[Rl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Es,Te]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Pl,Te]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Fr,_s,rp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},U4=_4(F4);function me(...t){return U4(CN(t))}const $4=BM,FN=g.forwardRef(({className:t,...e},n)=>o.jsx(wN,{ref:n,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));FN.displayName=wN.displayName;const z4=tu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),UN=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(_N,{ref:r,className:me(z4({variant:e}),t),...n}));UN.displayName=_N.displayName;const B4=g.forwardRef(({className:t,...e},n)=>o.jsx(TN,{ref:n,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));B4.displayName=TN.displayName;const $N=g.forwardRef(({className:t,...e},n)=>o.jsx(bN,{ref:n,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(ru,{className:"h-4 w-4"})}));$N.displayName=bN.displayName;const zN=g.forwardRef(({className:t,...e},n)=>o.jsx(EN,{ref:n,className:me("text-sm font-semibold",t),...e}));zN.displayName=EN.displayName;const BN=g.forwardRef(({className:t,...e},n)=>o.jsx(SN,{ref:n,className:me("text-sm opacity-90",t),...e}));BN.displayName=SN.displayName;function q4(){const{toasts:t}=jt();return o.jsxs($4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(UN,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(zN,{children:n}),r&&o.jsx(BN,{children:r})]}),s,o.jsx($N,{})]},e)}),o.jsx(FN,{})]})}var G4=CS[" useId ".trim().toString()]||(()=>{}),H4=0;function Xr(t){const[e,n]=g.useState(G4());return Gt(()=>{n(r=>r??String(H4++))},[t]),e?`radix-${e}`:""}const W4=["top","right","bottom","left"],li=Math.min,gn=Math.max,Nh=Math.round,rd=Math.floor,br=t=>({x:t,y:t}),K4={left:"right",right:"left",bottom:"top",top:"bottom"},Q4={start:"end",end:"start"};function Wg(t,e,n){return gn(t,li(e,n))}function os(t,e){return typeof t=="function"?t(e):t}function as(t){return t.split("-")[0]}function Ya(t){return t.split("-")[1]}function Fv(t){return t==="x"?"y":"x"}function Uv(t){return t==="y"?"height":"width"}function ci(t){return["top","bottom"].includes(as(t))?"y":"x"}function $v(t){return Fv(ci(t))}function Y4(t,e,n){n===void 0&&(n=!1);const r=Ya(t),s=$v(t),i=Uv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Ch(a)),[a,Ch(a)]}function X4(t){const e=Ch(t);return[Kg(t),e,Kg(e)]}function Kg(t){return t.replace(/start|end/g,e=>Q4[e])}function J4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function Z4(t,e,n,r){const s=Ya(t);let i=J4(as(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Kg)))),i}function Ch(t){return t.replace(/left|right|bottom|top/g,e=>K4[e])}function eL(t){return{top:0,right:0,bottom:0,left:0,...t}}function qN(t){return typeof t!="number"?eL(t):{top:t,right:t,bottom:t,left:t}}function Ih(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function rE(t,e,n){let{reference:r,floating:s}=t;const i=ci(e),a=$v(e),l=Uv(a),c=as(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:h,y:r.y-s.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-s.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Ya(e)){case"start":x[a]-=m*(n&&d?-1:1);break;case"end":x[a]+=m*(n&&d?-1:1);break}return x}const tL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=rE(d,r,c),m=r,x={},N=0;for(let v=0;v<l.length;v++){const{name:y,fn:E}=l[v],{x:_,y:T,data:P,reset:D}=await E({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});h=_??h,f=T??f,x={...x,[y]:{...x[y],...P}},D&&N<=50&&(N++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(d=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=rE(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:x}};async function Cc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:x=0}=os(e,t),N=qN(x),y=l[m?f==="floating"?"reference":"floating":f],E=Ih(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),_=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),P=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},D=Ih(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:T,strategy:c}):_);return{top:(E.top-D.top+N.top)/P.y,bottom:(D.bottom-E.bottom+N.bottom)/P.y,left:(E.left-D.left+N.left)/P.x,right:(D.right-E.right+N.right)/P.x}}const nL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=os(t,e)||{};if(d==null)return{};const f=qN(h),m={x:n,y:r},x=$v(s),N=Uv(x),v=await a.getDimensions(d),y=x==="y",E=y?"top":"left",_=y?"bottom":"right",T=y?"clientHeight":"clientWidth",P=i.reference[N]+i.reference[x]-m[x]-i.floating[N],D=m[x]-i.reference[x],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let b=M?M[T]:0;(!b||!await(a.isElement==null?void 0:a.isElement(M)))&&(b=l.floating[T]||i.floating[N]);const S=P/2-D/2,C=b/2-v[N]/2-1,R=li(f[E],C),k=li(f[_],C),A=R,j=b-v[N]-k,W=b/2-v[N]/2+S,ue=Wg(A,W,j),Z=!c.arrow&&Ya(s)!=null&&W!==ue&&i.reference[N]/2-(W<A?R:k)-v[N]/2<0,se=Z?W<A?W-A:W-j:0;return{[x]:m[x]+se,data:{[x]:ue,centerOffset:W-ue-se,...Z&&{alignmentOffset:se}},reset:Z}}}),rL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:v=!0,...y}=os(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=as(s),_=ci(l),T=as(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(d.floating)),D=m||(T||!v?[Ch(l)]:X4(l)),M=N!=="none";!m&&M&&D.push(...Z4(l,v,N,P));const b=[l,...D],S=await Cc(e,y),C=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(S[E]),f){const W=Y4(s,a,P);C.push(S[W[0]],S[W[1]])}if(R=[...R,{placement:s,overflows:C}],!C.every(W=>W<=0)){var k,A;const W=(((k=i.flip)==null?void 0:k.index)||0)+1,ue=b[W];if(ue)return{data:{index:W,overflows:R},reset:{placement:ue}};let Z=(A=R.filter(se=>se.overflows[0]<=0).sort((se,U)=>se.overflows[1]-U.overflows[1])[0])==null?void 0:A.placement;if(!Z)switch(x){case"bestFit":{var j;const se=(j=R.filter(U=>{if(M){const z=ci(U.placement);return z===_||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,Y)=>z+Y,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:j[0];se&&(Z=se);break}case"initialPlacement":Z=l;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function sE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function iE(t){return W4.some(e=>t[e]>=0)}const sL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=os(t,e);switch(r){case"referenceHidden":{const i=await Cc(e,{...s,elementContext:"reference"}),a=sE(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:iE(a)}}}case"escaped":{const i=await Cc(e,{...s,altBoundary:!0}),a=sE(i,n.floating);return{data:{escapedOffsets:a,escaped:iE(a)}}}default:return{}}}}};async function iL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=as(n),l=Ya(n),c=ci(n)==="y",d=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,f=os(e,t);let{mainAxis:m,crossAxis:x,alignmentAxis:N}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof N=="number"&&(x=l==="end"?N*-1:N),c?{x:x*h,y:m*d}:{x:m*d,y:x*h}}const oL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await iL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},aL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:E,y:_}=y;return{x:E,y:_}}},...c}=os(t,e),d={x:n,y:r},h=await Cc(e,c),f=ci(as(s)),m=Fv(f);let x=d[m],N=d[f];if(i){const y=m==="y"?"top":"left",E=m==="y"?"bottom":"right",_=x+h[y],T=x-h[E];x=Wg(_,x,T)}if(a){const y=f==="y"?"top":"left",E=f==="y"?"bottom":"right",_=N+h[y],T=N-h[E];N=Wg(_,N,T)}const v=l.fn({...e,[m]:x,[f]:N});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:a}}}}}},lL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=os(t,e),h={x:n,y:r},f=ci(s),m=Fv(f);let x=h[m],N=h[f];const v=os(l,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const T=m==="y"?"height":"width",P=i.reference[m]-i.floating[T]+y.mainAxis,D=i.reference[m]+i.reference[T]-y.mainAxis;x<P?x=P:x>D&&(x=D)}if(d){var E,_;const T=m==="y"?"width":"height",P=["top","left"].includes(as(s)),D=i.reference[f]-i.floating[T]+(P&&((E=a.offset)==null?void 0:E[f])||0)+(P?0:y.crossAxis),M=i.reference[f]+i.reference[T]+(P?0:((_=a.offset)==null?void 0:_[f])||0)-(P?y.crossAxis:0);N<D?N=D:N>M&&(N=M)}return{[m]:x,[f]:N}}}},cL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=os(t,e),h=await Cc(e,d),f=as(s),m=Ya(s),x=ci(s)==="y",{width:N,height:v}=i.floating;let y,E;f==="top"||f==="bottom"?(y=f,E=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,y=m==="end"?"top":"bottom");const _=v-h.top-h.bottom,T=N-h.left-h.right,P=li(v-h[y],_),D=li(N-h[E],T),M=!e.middlewareData.shift;let b=P,S=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=_),M&&!m){const R=gn(h.left,0),k=gn(h.right,0),A=gn(h.top,0),j=gn(h.bottom,0);x?S=N-2*(R!==0||k!==0?R+k:gn(h.left,h.right)):b=v-2*(A!==0||j!==0?A+j:gn(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:b});const C=await a.getDimensions(l.floating);return N!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Ef(){return typeof window<"u"}function Xa(t){return GN(t)?(t.nodeName||"").toLowerCase():"#document"}function _n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Or(t){var e;return(e=(GN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GN(t){return Ef()?t instanceof Node||t instanceof _n(t).Node:!1}function ar(t){return Ef()?t instanceof Element||t instanceof _n(t).Element:!1}function kr(t){return Ef()?t instanceof HTMLElement||t instanceof _n(t).HTMLElement:!1}function oE(t){return!Ef()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _n(t).ShadowRoot}function su(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=lr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function uL(t){return["table","td","th"].includes(Xa(t))}function Sf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function zv(t){const e=Bv(),n=ar(t)?lr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dL(t){let e=ui(t);for(;kr(e)&&!Da(e);){if(zv(e))return e;if(Sf(e))return null;e=ui(e)}return null}function Bv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Da(t){return["html","body","#document"].includes(Xa(t))}function lr(t){return _n(t).getComputedStyle(t)}function Tf(t){return ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ui(t){if(Xa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||oE(t)&&t.host||Or(t);return oE(e)?e.host:e}function HN(t){const e=ui(t);return Da(e)?t.ownerDocument?t.ownerDocument.body:t.body:kr(e)&&su(e)?e:HN(e)}function Ic(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=HN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=_n(s);if(i){const l=Qg(a);return e.concat(a,a.visualViewport||[],su(s)?s:[],l&&n?Ic(l):[])}return e.concat(s,Ic(s,[],n))}function Qg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function WN(t){const e=lr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=kr(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Nh(n)!==i||Nh(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function qv(t){return ar(t)?t:t.contextElement}function sa(t){const e=qv(t);if(!kr(e))return br(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=WN(e);let a=(i?Nh(n.width):n.width)/r,l=(i?Nh(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const hL=br(0);function KN(t){const e=_n(t);return!Bv()||!e.visualViewport?hL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==_n(t)?!1:e}function so(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=qv(t);let a=br(1);e&&(r?ar(r)&&(a=sa(r)):a=sa(t));const l=fL(i,n,r)?KN(i):br(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=_n(i),x=r&&ar(r)?_n(r):r;let N=m,v=Qg(N);for(;v&&r&&x!==N;){const y=sa(v),E=v.getBoundingClientRect(),_=lr(v),T=E.left+(v.clientLeft+parseFloat(_.paddingLeft))*y.x,P=E.top+(v.clientTop+parseFloat(_.paddingTop))*y.y;c*=y.x,d*=y.y,h*=y.x,f*=y.y,c+=T,d+=P,N=_n(v),v=Qg(N)}}return Ih({width:h,height:f,x:c,y:d})}function Gv(t,e){const n=Tf(t).scrollLeft;return e?e.left+n:so(Or(t)).left+n}function QN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Gv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function mL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Or(r),l=e?Sf(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=br(1);const h=br(0),f=kr(r);if((f||!f&&!i)&&((Xa(r)!=="body"||su(a))&&(c=Tf(r)),kr(r))){const x=so(r);d=sa(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const m=a&&!f&&!i?QN(a,c,!0):br(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function pL(t){return Array.from(t.getClientRects())}function gL(t){const e=Or(t),n=Tf(t),r=t.ownerDocument.body,s=gn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=gn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Gv(t);const l=-n.scrollTop;return lr(r).direction==="rtl"&&(a+=gn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function yL(t,e){const n=_n(t),r=Or(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const d=Bv();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function vL(t,e){const n=so(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=kr(t)?sa(t):br(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function aE(t,e,n){let r;if(e==="viewport")r=yL(t,n);else if(e==="document")r=gL(Or(t));else if(ar(e))r=vL(e,n);else{const s=KN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ih(r)}function YN(t,e){const n=ui(t);return n===e||!ar(n)||Da(n)?!1:lr(n).position==="fixed"||YN(n,e)}function xL(t,e){const n=e.get(t);if(n)return n;let r=Ic(t,[],!1).filter(l=>ar(l)&&Xa(l)!=="body"),s=null;const i=lr(t).position==="fixed";let a=i?ui(t):t;for(;ar(a)&&!Da(a);){const l=lr(a),c=zv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||su(a)&&!c&&YN(t,a))?r=r.filter(h=>h!==a):s=l,a=ui(a)}return e.set(t,r),r}function wL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Sf(e)?[]:xL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=aE(e,h,s);return d.top=gn(f.top,d.top),d.right=li(f.right,d.right),d.bottom=li(f.bottom,d.bottom),d.left=gn(f.left,d.left),d},aE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _L(t){const{width:e,height:n}=WN(t);return{width:e,height:n}}function EL(t,e,n){const r=kr(e),s=Or(e),i=n==="fixed",a=so(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=br(0);if(r||!r&&!i)if((Xa(e)!=="body"||su(s))&&(l=Tf(e)),r){const m=so(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=Gv(s));const d=s&&!r&&!i?QN(s,l):br(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function sp(t){return lr(t).position==="static"}function lE(t,e){if(!kr(t)||lr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Or(t)===n&&(n=n.ownerDocument.body),n}function XN(t,e){const n=_n(t);if(Sf(t))return n;if(!kr(t)){let s=ui(t);for(;s&&!Da(s);){if(ar(s)&&!sp(s))return s;s=ui(s)}return n}let r=lE(t,e);for(;r&&uL(r)&&sp(r);)r=lE(r,e);return r&&Da(r)&&sp(r)&&!zv(r)?n:r||dL(t)||n}const SL=async function(t){const e=this.getOffsetParent||XN,n=this.getDimensions,r=await n(t.floating);return{reference:EL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function TL(t){return lr(t).direction==="rtl"}const bL={convertOffsetParentRelativeRectToViewportRelativeRect:mL,getDocumentElement:Or,getClippingRect:wL,getOffsetParent:XN,getElementRects:SL,getClientRects:pL,getDimensions:_L,getScale:sa,isElement:ar,isRTL:TL};function JN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function NL(t,e){let n=null,r;const s=Or(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:x}=d;if(l||e(),!m||!x)return;const N=rd(f),v=rd(s.clientWidth-(h+m)),y=rd(s.clientHeight-(f+x)),E=rd(h),T={rootMargin:-N+"px "+-v+"px "+-y+"px "+-E+"px",threshold:gn(0,li(1,c))||1};let P=!0;function D(M){const b=M[0].intersectionRatio;if(b!==c){if(!P)return a();b?a(!1,b):r=setTimeout(()=>{a(!1,1e-7)},1e3)}b===1&&!JN(d,t.getBoundingClientRect())&&a(),P=!1}try{n=new IntersectionObserver(D,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,T)}n.observe(t)}return a(!0),i}function CL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=qv(t),h=s||i?[...d?Ic(d):[],...Ic(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=d&&l?NL(d,n):null;let m=-1,x=null;a&&(x=new ResizeObserver(E=>{let[_]=E;_&&_.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=x)==null||T.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let N,v=c?so(t):null;c&&y();function y(){const E=so(t);v&&!JN(v,E)&&n(),v=E,N=requestAnimationFrame(y)}return n(),()=>{var E;h.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),f==null||f(),(E=x)==null||E.disconnect(),x=null,c&&cancelAnimationFrame(N)}}const IL=oL,PL=aL,RL=rL,jL=cL,AL=sL,cE=nL,kL=lL,DL=(t,e,n)=>{const r=new Map,s={platform:bL,...n},i={...s.platform,_c:r};return tL(t,e,{...s,platform:i})};var Ad=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Ph(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ph(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ph(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ZN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function uE(t,e){const n=ZN(t);return Math.round(e*n)/n}function ip(t){const e=g.useRef(t);return Ad(()=>{e.current=t}),e}function OL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,x]=g.useState(r);Ph(m,r)||x(r);const[N,v]=g.useState(null),[y,E]=g.useState(null),_=g.useCallback(U=>{U!==M.current&&(M.current=U,v(U))},[]),T=g.useCallback(U=>{U!==b.current&&(b.current=U,E(U))},[]),P=i||N,D=a||y,M=g.useRef(null),b=g.useRef(null),S=g.useRef(h),C=c!=null,R=ip(c),k=ip(s),A=ip(d),j=g.useCallback(()=>{if(!M.current||!b.current)return;const U={placement:e,strategy:n,middleware:m};k.current&&(U.platform=k.current),DL(M.current,b.current,U).then(z=>{const Y={...z,isPositioned:A.current!==!1};W.current&&!Ph(S.current,Y)&&(S.current=Y,go.flushSync(()=>{f(Y)}))})},[m,e,n,k,A]);Ad(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[d]);const W=g.useRef(!1);Ad(()=>(W.current=!0,()=>{W.current=!1}),[]),Ad(()=>{if(P&&(M.current=P),D&&(b.current=D),P&&D){if(R.current)return R.current(P,D,j);j()}},[P,D,j,R,C]);const ue=g.useMemo(()=>({reference:M,floating:b,setReference:_,setFloating:T}),[_,T]),Z=g.useMemo(()=>({reference:P,floating:D}),[P,D]),se=g.useMemo(()=>{const U={position:n,left:0,top:0};if(!Z.floating)return U;const z=uE(Z.floating,h.x),Y=uE(Z.floating,h.y);return l?{...U,transform:"translate("+z+"px, "+Y+"px)",...ZN(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:Y}},[n,l,Z.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:j,refs:ue,elements:Z,floatingStyles:se}),[h,j,ue,Z,se])}const ML=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?cE({element:r.current,padding:s}).fn(n):{}:r?cE({element:r,padding:s}).fn(n):{}}}},LL=(t,e)=>({...IL(t),options:[t,e]}),VL=(t,e)=>({...PL(t),options:[t,e]}),FL=(t,e)=>({...kL(t),options:[t,e]}),UL=(t,e)=>({...RL(t),options:[t,e]}),$L=(t,e)=>({...jL(t),options:[t,e]}),zL=(t,e)=>({...AL(t),options:[t,e]}),BL=(t,e)=>({...ML(t),options:[t,e]});var qL="Arrow",eC=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(_e.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});eC.displayName=qL;var GL=eC;function Hv(t){const[e,n]=g.useState(void 0);return Gt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Wv="Popper",[tC,Ja]=qn(Wv),[HL,nC]=tC(Wv),rC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(HL,{scope:e,anchor:r,onAnchorChange:s,children:n})};rC.displayName=Wv;var sC="PopperAnchor",iC=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=nC(sC,n),a=g.useRef(null),l=Oe(e,a);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(_e.div,{...s,ref:l})});iC.displayName=sC;var Kv="PopperContent",[WL,KL]=tC(Kv),oC=g.forwardRef((t,e)=>{var oe,q,ne,he,xe,Ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:N,...v}=t,y=nC(Kv,n),[E,_]=g.useState(null),T=Oe(e,St=>_(St)),[P,D]=g.useState(null),M=Hv(P),b=(M==null?void 0:M.width)??0,S=(M==null?void 0:M.height)??0,C=r+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},k=Array.isArray(d)?d:[d],A=k.length>0,j={padding:R,boundary:k.filter(YL),altBoundary:A},{refs:W,floatingStyles:ue,placement:Z,isPositioned:se,middlewareData:U}=OL({strategy:"fixed",placement:C,whileElementsMounted:(...St)=>CL(...St,{animationFrame:x==="always"}),elements:{reference:y.anchor},middleware:[LL({mainAxis:s+S,alignmentAxis:a}),c&&VL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?FL():void 0,...j}),c&&UL({...j}),$L({...j,apply:({elements:St,rects:nn,availableWidth:Mr,availableHeight:gs})=>{const{width:Ni,height:rm}=nn.reference,Ci=St.floating.style;Ci.setProperty("--radix-popper-available-width",`${Mr}px`),Ci.setProperty("--radix-popper-available-height",`${gs}px`),Ci.setProperty("--radix-popper-anchor-width",`${Ni}px`),Ci.setProperty("--radix-popper-anchor-height",`${rm}px`)}}),P&&BL({element:P,padding:l}),XL({arrowWidth:b,arrowHeight:S}),m&&zL({strategy:"referenceHidden",...j})]}),[z,Y]=cC(Z),F=qt(N);Gt(()=>{se&&(F==null||F())},[se,F]);const V=(oe=U.arrow)==null?void 0:oe.x,K=(q=U.arrow)==null?void 0:q.y,pe=((ne=U.arrow)==null?void 0:ne.centerOffset)!==0,[Be,qe]=g.useState();return Gt(()=>{E&&qe(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:se?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(he=U.transformOrigin)==null?void 0:he.x,(xe=U.transformOrigin)==null?void 0:xe.y].join(" "),...((Ve=U.hide)==null?void 0:Ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(WL,{scope:n,placedSide:z,onArrowChange:D,arrowX:V,arrowY:K,shouldHideArrow:pe,children:o.jsx(_e.div,{"data-side":z,"data-align":Y,...v,ref:T,style:{...v.style,animation:se?void 0:"none"}})})})});oC.displayName=Kv;var aC="PopperArrow",QL={top:"bottom",right:"left",bottom:"top",left:"right"},lC=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=KL(aC,r),a=QL[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(GL,{...s,ref:n,style:{...s.style,display:"block"}})})});lC.displayName=aC;function YL(t){return t!==null}var XL=t=>({name:"transformOrigin",options:t,fn(e){var y,E,_;const{placement:n,rects:r,middlewareData:s}=e,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=cC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,x=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let N="",v="";return d==="bottom"?(N=a?f:`${m}px`,v=`${-c}px`):d==="top"?(N=a?f:`${m}px`,v=`${r.floating.height+c}px`):d==="right"?(N=`${-c}px`,v=a?f:`${x}px`):d==="left"&&(N=`${r.floating.width+c}px`,v=a?f:`${x}px`),{data:{x:N,y:v}}}});function cC(t){const[e,n="center"]=t.split("-");return[e,n]}var uC=rC,Qv=iC,Yv=oC,Xv=lC,[bf,pq]=qn("Tooltip",[Ja]),Jv=Ja(),dC="TooltipProvider",JL=700,dE="tooltip.open",[ZL,hC]=bf(dC),fC=t=>{const{__scopeTooltip:e,delayDuration:n=JL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(ZL,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};fC.displayName=dC;var mC="Tooltip",[gq,Nf]=bf(mC),Yg="TooltipTrigger",eV=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Nf(Yg,n),i=hC(Yg,n),a=Jv(n),l=g.useRef(null),c=Oe(e,l,s.onTriggerChange),d=g.useRef(!1),h=g.useRef(!1),f=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Qv,{asChild:!0,...a,children:o.jsx(_e.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:J(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:J(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:J(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:J(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:J(t.onBlur,s.onClose),onClick:J(t.onClick,s.onClose)})})});eV.displayName=Yg;var tV="TooltipPortal",[yq,nV]=bf(tV,{forceMount:void 0}),Oa="TooltipContent",pC=g.forwardRef((t,e)=>{const n=nV(Oa,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Nf(Oa,t.__scopeTooltip);return o.jsx(dr,{present:r||a.open,children:a.disableHoverableContent?o.jsx(gC,{side:s,...i,ref:e}):o.jsx(rV,{side:s,...i,ref:e})})}),rV=g.forwardRef((t,e)=>{const n=Nf(Oa,t.__scopeTooltip),r=hC(Oa,t.__scopeTooltip),s=g.useRef(null),i=Oe(e,s),[a,l]=g.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,m=g.useCallback(()=>{l(null),f(!1)},[f]),x=g.useCallback((N,v)=>{const y=N.currentTarget,E={x:N.clientX,y:N.clientY},_=lV(E,y.getBoundingClientRect()),T=cV(E,_),P=uV(v.getBoundingClientRect()),D=hV([...T,...P]);l(D),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&h){const N=y=>x(y,h),v=y=>x(y,c);return c.addEventListener("pointerleave",N),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",N),h.removeEventListener("pointerleave",v)}}},[c,h,x,m]),g.useEffect(()=>{if(a){const N=v=>{const y=v.target,E={x:v.clientX,y:v.clientY},_=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),T=!dV(E,a);_?m():T&&(m(),d())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[c,h,a,d,m]),o.jsx(gC,{...t,ref:i})}),[sV,iV]=bf(mC,{isInside:!1}),oV=rN("TooltipContent"),gC=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Nf(Oa,n),d=Jv(n),{onClose:h}=c;return g.useEffect(()=>(document.addEventListener(dE,h),()=>document.removeEventListener(dE,h)),[h]),g.useEffect(()=>{if(c.trigger){const f=m=>{const x=m.target;x!=null&&x.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(Ka,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(Yv,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(oV,{children:r}),o.jsx(sV,{scope:n,isInside:!0,children:o.jsx(bM,{id:c.contentId,role:"tooltip",children:s||r})})]})})});pC.displayName=Oa;var yC="TooltipArrow",aV=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Jv(n);return iV(yC,n).isInside?null:o.jsx(Xv,{...s,...r,ref:e})});aV.displayName=yC;function lV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function cV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function uV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function dV(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,d=e[a].x,h=e[a].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function hV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),fV(e)}function fV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var mV=fC,vC=pC;const pV=mV,gV=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(vC,{ref:r,sideOffset:e,className:me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));gV.displayName=vC.displayName;const xC=g.createContext(void 0);function yV({children:t}){const{data:e,isLoading:n,error:r,refetch:s}=zt({queryKey:["/api/users/me"],queryFn:async()=>{if(!localStorage.getItem("token"))return null;try{return(await Ue("GET","/api/users/me")).json()}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),null}},enabled:!0,retry:!1,refetchOnMount:!0,refetchOnWindowFocus:!1}),c={user:e||null,login:async(d,h)=>{const m=await(await Ue("POST","/api/auth/login",{email:d,password:h})).json();return localStorage.setItem("token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),await s(),m},registerSchool:async d=>{const f=await(await Ue("POST","/api/auth/register-school",d)).json();localStorage.setItem("token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),await s()},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),De.clear(),s()},isLoading:n};return pr.createElement(xC.Provider,{value:c},t)}function Cf(){const t=g.useContext(xC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Zv=tu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?sM:"button";return o.jsx(a,{className:me(Zv({variant:e,size:n,className:t})),ref:i,...s})});H.displayName="Button";var op="focusScope.autoFocusOnMount",ap="focusScope.autoFocusOnUnmount",hE={bubbles:!1,cancelable:!0},vV="FocusScope",If=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=qt(s),h=qt(i),f=g.useRef(null),m=Oe(e,v=>c(v)),x=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(T){if(x.paused||!l)return;const P=T.target;l.contains(P)?f.current=P:bs(f.current,{select:!0})},y=function(T){if(x.paused||!l)return;const P=T.relatedTarget;P!==null&&(l.contains(P)||bs(f.current,{select:!0}))},E=function(T){if(document.activeElement===document.body)for(const D of T)D.removedNodes.length>0&&bs(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const _=new MutationObserver(E);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),_.disconnect()}}},[r,l,x.paused]),g.useEffect(()=>{if(l){mE.add(x);const v=document.activeElement;if(!l.contains(v)){const E=new CustomEvent(op,hE);l.addEventListener(op,d),l.dispatchEvent(E),E.defaultPrevented||(xV(TV(wC(l)),{select:!0}),document.activeElement===v&&bs(l))}return()=>{l.removeEventListener(op,d),setTimeout(()=>{const E=new CustomEvent(ap,hE);l.addEventListener(ap,h),l.dispatchEvent(E),E.defaultPrevented||bs(v??document.body,{select:!0}),l.removeEventListener(ap,h),mE.remove(x)},0)}}},[l,d,h,x]);const N=g.useCallback(v=>{if(!n&&!r||x.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(y&&E){const _=v.currentTarget,[T,P]=wV(_);T&&P?!v.shiftKey&&E===P?(v.preventDefault(),n&&bs(T,{select:!0})):v.shiftKey&&E===T&&(v.preventDefault(),n&&bs(P,{select:!0})):E===_&&v.preventDefault()}},[n,r,x.paused]);return o.jsx(_e.div,{tabIndex:-1,...a,ref:m,onKeyDown:N})});If.displayName=vV;function xV(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(bs(r,{select:e}),document.activeElement!==n)return}function wV(t){const e=wC(t),n=fE(e,t),r=fE(e.reverse(),t);return[n,r]}function wC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fE(t,e){for(const n of t)if(!_V(n,{upTo:e}))return n}function _V(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function EV(t){return t instanceof HTMLInputElement&&"select"in t}function bs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&EV(t)&&e&&t.select()}}var mE=SV();function SV(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=pE(t,e),t.unshift(e)},remove(e){var n;t=pE(t,e),(n=t[0])==null||n.resume()}}}function pE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function TV(t){return t.filter(e=>e.tagName!=="A")}var lp=0;function ex(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gE()),document.body.insertAdjacentElement("beforeend",t[1]??gE()),lp++,()=>{lp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),lp--}},[])}function gE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Er=function(){return Er=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Er.apply(this,arguments)};function _C(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bV(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var kd="right-scroll-bar-position",Dd="width-before-scroll-bar",NV="with-scroll-bars-hidden",CV="--removed-body-scroll-bar-size";function cp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IV(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var PV=typeof window<"u"?g.useLayoutEffect:g.useEffect,yE=new WeakMap;function RV(t,e){var n=IV(null,function(r){return t.forEach(function(s){return cp(s,r)})});return PV(function(){var r=yE.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||cp(l,null)}),i.forEach(function(l){s.has(l)||cp(l,a)})}yE.set(n,t)},[t]),n}function jV(t){return t}function AV(t,e){e===void 0&&(e=jV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function kV(t){t===void 0&&(t={});var e=AV(null);return e.options=Er({async:!0,ssr:!1},t),e}var EC=function(t){var e=t.sideCar,n=_C(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Er({},n))};EC.isSideCarExport=!0;function DV(t,e){return t.useMedium(e),EC}var SC=kV(),up=function(){},Pf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:up,onWheelCapture:up,onTouchMoveCapture:up}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,x=t.noIsolation,N=t.inert,v=t.allowPinchZoom,y=t.as,E=y===void 0?"div":y,_=t.gapMode,T=_C(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=m,D=RV([n,e]),M=Er(Er({},T),s);return g.createElement(g.Fragment,null,h&&g.createElement(P,{sideCar:SC,removeScrollBar:d,shards:f,noIsolation:x,inert:N,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:_}),a?g.cloneElement(g.Children.only(l),Er(Er({},M),{ref:D})):g.createElement(E,Er({},M,{className:c,ref:D}),l))});Pf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pf.classNames={fullWidth:Dd,zeroRight:kd};var OV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=OV();return e&&t.setAttribute("nonce",e),t}function LV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function VV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var FV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=MV())&&(LV(e,n),VV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},UV=function(){var t=FV();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},TC=function(){var t=UV(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},$V={left:0,top:0,right:0,gap:0},dp=function(t){return parseInt(t||"",10)||0},zV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[dp(n),dp(r),dp(s)]},BV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return $V;var e=zV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},qV=TC(),ia="data-scroll-locked",GV=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(NV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kd,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Dd,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(kd," .").concat(kd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dd," .").concat(Dd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(CV,": ").concat(l,`px;
  }
`)},vE=function(){var t=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(t)?t:0},HV=function(){g.useEffect(function(){return document.body.setAttribute(ia,(vE()+1).toString()),function(){var t=vE()-1;t<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,t.toString())}},[])},WV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;HV();var i=g.useMemo(function(){return BV(s)},[s]);return g.createElement(qV,{styles:GV(i,!e,s,n?"":"!important")})},Xg=!1;if(typeof window<"u")try{var sd=Object.defineProperty({},"passive",{get:function(){return Xg=!0,!0}});window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch{Xg=!1}var Co=Xg?{passive:!1}:!1,KV=function(t){return t.tagName==="TEXTAREA"},bC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!KV(t)&&n[e]==="visible")},QV=function(t){return bC(t,"overflowY")},YV=function(t){return bC(t,"overflowX")},xE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=NC(t,r);if(s){var i=CC(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},XV=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},JV=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},NC=function(t,e){return t==="v"?QV(e):YV(e)},CC=function(t,e){return t==="v"?XV(e):JV(e)},ZV=function(t,e){return t==="h"&&e==="rtl"?-1:1},eF=function(t,e,n,r,s){var i=ZV(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{var x=CC(t,l),N=x[0],v=x[1],y=x[2],E=v-y-i*N;(N||E)&&NC(t,l)&&(f+=E,m+=N),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(d=!0),d},id=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},wE=function(t){return[t.deltaX,t.deltaY]},_E=function(t){return t&&"current"in t?t.current:t},tF=function(t,e){return t[0]===e[0]&&t[1]===e[1]},nF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rF=0,Io=[];function sF(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(rF++)[0],i=g.useState(TC)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=bV([t.lockRef.current],(t.shards||[]).map(_E),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var E=id(v),_=n.current,T="deltaX"in v?v.deltaX:_[0]-E[0],P="deltaY"in v?v.deltaY:_[1]-E[1],D,M=v.target,b=Math.abs(T)>Math.abs(P)?"h":"v";if("touches"in v&&b==="h"&&M.type==="range")return!1;var S=xE(b,M);if(!S)return!0;if(S?D=b:(D=b==="v"?"h":"v",S=xE(b,M)),!S)return!1;if(!r.current&&"changedTouches"in v&&(T||P)&&(r.current=D),!D)return!0;var C=r.current||D;return eF(C,y,v,C==="h"?T:P,!0)},[]),c=g.useCallback(function(v){var y=v;if(!(!Io.length||Io[Io.length-1]!==i)){var E="deltaY"in y?wE(y):id(y),_=e.current.filter(function(D){return D.name===y.type&&(D.target===y.target||y.target===D.shadowParent)&&tF(D.delta,E)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var T=(a.current.shards||[]).map(_E).filter(Boolean).filter(function(D){return D.contains(y.target)}),P=T.length>0?l(y,T[0]):!a.current.noIsolation;P&&y.cancelable&&y.preventDefault()}}},[]),d=g.useCallback(function(v,y,E,_){var T={name:v,delta:y,target:E,should:_,shadowParent:iF(E)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(P){return P!==T})},1)},[]),h=g.useCallback(function(v){n.current=id(v),r.current=void 0},[]),f=g.useCallback(function(v){d(v.type,wE(v),v.target,l(v,t.lockRef.current))},[]),m=g.useCallback(function(v){d(v.type,id(v),v.target,l(v,t.lockRef.current))},[]);g.useEffect(function(){return Io.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Co),document.addEventListener("touchmove",c,Co),document.addEventListener("touchstart",h,Co),function(){Io=Io.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Co),document.removeEventListener("touchmove",c,Co),document.removeEventListener("touchstart",h,Co)}},[]);var x=t.removeScrollBar,N=t.inert;return g.createElement(g.Fragment,null,N?g.createElement(i,{styles:nF(s)}):null,x?g.createElement(WV,{gapMode:t.gapMode}):null)}function iF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const oF=DV(SC,sF);var Rf=g.forwardRef(function(t,e){return g.createElement(Pf,Er({},t,{ref:e,sideCar:oF}))});Rf.classNames=Pf.classNames;var aF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Po=new WeakMap,od=new WeakMap,ad={},hp=0,IC=function(t){return t&&(t.host||IC(t.parentNode))},lF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=IC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},cF=function(t,e,n,r){var s=lF(e,Array.isArray(t)?t:[t]);ad[n]||(ad[n]=new WeakMap);var i=ad[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var x=m.getAttribute(r),N=x!==null&&x!=="false",v=(Po.get(m)||0)+1,y=(i.get(m)||0)+1;Po.set(m,v),i.set(m,y),a.push(m),v===1&&N&&od.set(m,!0),y===1&&m.setAttribute(n,"true"),N||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return h(e),l.clear(),hp++,function(){a.forEach(function(f){var m=Po.get(f)-1,x=i.get(f)-1;Po.set(f,m),i.set(f,x),m||(od.has(f)||f.removeAttribute(r),od.delete(f)),x||f.removeAttribute(n)}),hp--,hp||(Po=new WeakMap,Po=new WeakMap,od=new WeakMap,ad={})}},tx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=aF(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),cF(r,s,n,"aria-hidden")):function(){return null}},nx="Dialog",[PC,RC]=qn(nx),[uF,hr]=PC(nx),jC=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=g.useRef(null),c=g.useRef(null),[d=!1,h]=ai({prop:r,defaultProp:s,onChange:i});return o.jsx(uF,{scope:e,triggerRef:l,contentRef:c,contentId:Xr(),titleId:Xr(),descriptionId:Xr(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};jC.displayName=nx;var AC="DialogTrigger",kC=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(AC,n),i=Oe(e,s.triggerRef);return o.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ix(s.open),...r,ref:i,onClick:J(t.onClick,s.onOpenToggle)})});kC.displayName=AC;var rx="DialogPortal",[dF,DC]=PC(rx,{forceMount:void 0}),OC=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=hr(rx,e);return o.jsx(dF,{scope:e,forceMount:n,children:g.Children.map(r,a=>o.jsx(dr,{present:n||i.open,children:o.jsx(Zc,{asChild:!0,container:s,children:a})}))})};OC.displayName=rx;var Rh="DialogOverlay",MC=g.forwardRef((t,e)=>{const n=DC(Rh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(Rh,t.__scopeDialog);return i.modal?o.jsx(dr,{present:r||i.open,children:o.jsx(fF,{...s,ref:e})}):null});MC.displayName=Rh;var hF=ro("DialogOverlay.RemoveScroll"),fF=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(Rh,n);return o.jsx(Rf,{as:hF,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(_e.div,{"data-state":ix(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),io="DialogContent",LC=g.forwardRef((t,e)=>{const n=DC(io,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(io,t.__scopeDialog);return o.jsx(dr,{present:r||i.open,children:i.modal?o.jsx(mF,{...s,ref:e}):o.jsx(pF,{...s,ref:e})})});LC.displayName=io;var mF=g.forwardRef((t,e)=>{const n=hr(io,t.__scopeDialog),r=g.useRef(null),s=Oe(e,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return tx(i)},[]),o.jsx(VC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:J(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:J(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:J(t.onFocusOutside,i=>i.preventDefault())})}),pF=g.forwardRef((t,e)=>{const n=hr(io,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return o.jsx(VC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),VC=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=hr(io,n),c=g.useRef(null),d=Oe(e,c);return ex(),o.jsxs(o.Fragment,{children:[o.jsx(If,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Ka,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ix(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(yF,{titleId:l.titleId}),o.jsx(xF,{contentRef:c,descriptionId:l.descriptionId})]})]})}),sx="DialogTitle",FC=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(sx,n);return o.jsx(_e.h2,{id:s.titleId,...r,ref:e})});FC.displayName=sx;var UC="DialogDescription",$C=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(UC,n);return o.jsx(_e.p,{id:s.descriptionId,...r,ref:e})});$C.displayName=UC;var zC="DialogClose",BC=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(zC,n);return o.jsx(_e.button,{type:"button",...r,ref:e,onClick:J(t.onClick,()=>s.onOpenChange(!1))})});BC.displayName=zC;function ix(t){return t?"open":"closed"}var qC="DialogTitleWarning",[gF,GC]=nM(qC,{contentName:io,titleName:sx,docsSlug:"dialog"}),yF=({titleId:t})=>{const e=GC(qC),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},vF="DialogDescriptionWarning",xF=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GC(vF).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},HC=jC,WC=kC,KC=OC,ox=MC,ax=LC,lx=FC,cx=$C,ux=BC;const Zn=HC,wF=WC,_F=KC,QC=g.forwardRef(({className:t,...e},n)=>o.jsx(ox,{ref:n,className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));QC.displayName=ox.displayName;const Rn=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(_F,{children:[o.jsx(QC,{}),o.jsxs(ax,{ref:r,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(ux,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(ru,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rn.displayName=ax.displayName;const jn=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});jn.displayName="DialogHeader";const An=g.forwardRef(({className:t,...e},n)=>o.jsx(lx,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",t),...e}));An.displayName=lx.displayName;const jf=g.forwardRef(({className:t,...e},n)=>o.jsx(cx,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));jf.displayName=cx.displayName;const de=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));de.displayName="Input";var EF="Label",YC=g.forwardRef((t,e)=>o.jsx(_e.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YC.displayName=EF;var XC=YC;const SF=tu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=g.forwardRef(({className:t,...e},n)=>o.jsx(XC,{ref:n,className:me(SF(),t),...e}));ee.displayName=XC.displayName;function EE(t,[e,n]){return Math.min(n,Math.max(e,t))}var TF=g.createContext(void 0);function dx(t){const e=g.useContext(TF);return t||e||"ltr"}function hx(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bF=[" ","Enter","ArrowUp","ArrowDown"],NF=[" ","Enter"],iu="Select",[Af,kf,CF]=vf(iu),[Za,vq]=qn(iu,[CF,Ja]),Df=Ja(),[IF,wi]=Za(iu),[PF,RF]=Za(iu),JC=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:x,form:N}=t,v=Df(e),[y,E]=g.useState(null),[_,T]=g.useState(null),[P,D]=g.useState(!1),M=dx(d),[b=!1,S]=ai({prop:r,defaultProp:s,onChange:i}),[C,R]=ai({prop:a,defaultProp:l,onChange:c}),k=g.useRef(null),A=y?N||!!y.closest("form"):!0,[j,W]=g.useState(new Set),ue=Array.from(j).map(Z=>Z.props.value).join(";");return o.jsx(uC,{...v,children:o.jsxs(IF,{required:x,scope:e,trigger:y,onTriggerChange:E,valueNode:_,onValueNodeChange:T,valueNodeHasChildren:P,onValueNodeHasChildrenChange:D,contentId:Xr(),value:C,onValueChange:R,open:b,onOpenChange:S,dir:M,triggerPointerDownPosRef:k,disabled:m,children:[o.jsx(Af.Provider,{scope:e,children:o.jsx(PF,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(Z=>{W(se=>new Set(se).add(Z))},[]),onNativeOptionRemove:g.useCallback(Z=>{W(se=>{const U=new Set(se);return U.delete(Z),U})},[]),children:n})}),A?o.jsxs(SI,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:Z=>R(Z.target.value),disabled:m,form:N,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from(j)]},ue):null]})})};JC.displayName=iu;var ZC="SelectTrigger",eI=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Df(n),a=wi(ZC,n),l=a.disabled||r,c=Oe(e,a.onTriggerChange),d=kf(n),h=g.useRef("touch"),[f,m,x]=TI(v=>{const y=d().filter(T=>!T.disabled),E=y.find(T=>T.value===a.value),_=bI(y,v,E);_!==void 0&&a.onValueChange(_.value)}),N=v=>{l||(a.onOpenChange(!0),x()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(Qv,{asChild:!0,...i,children:o.jsx(_e.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":EI(a.value)?"":void 0,...s,ref:c,onClick:J(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&N(v)}),onPointerDown:J(s.onPointerDown,v=>{h.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(N(v),v.preventDefault())}),onKeyDown:J(s.onKeyDown,v=>{const y=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(y&&v.key===" ")&&bF.includes(v.key)&&(N(),v.preventDefault())})})})});eI.displayName=ZC;var tI="SelectValue",nI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=wi(tI,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Oe(e,c.onValueNodeChange);return Gt(()=>{d(h)},[d,h]),o.jsx(_e.span,{...l,ref:f,style:{pointerEvents:"none"},children:EI(c.value)?o.jsx(o.Fragment,{children:a}):i})});nI.displayName=tI;var jF="SelectIcon",rI=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(_e.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});rI.displayName=jF;var AF="SelectPortal",sI=t=>o.jsx(Zc,{asChild:!0,...t});sI.displayName=AF;var oo="SelectContent",iI=g.forwardRef((t,e)=>{const n=wi(oo,t.__scopeSelect),[r,s]=g.useState();if(Gt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?go.createPortal(o.jsx(oI,{scope:t.__scopeSelect,children:o.jsx(Af.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(aI,{...t,ref:e})});iI.displayName=oo;var Wn=10,[oI,_i]=Za(oo),kF="SelectContentImpl",DF=ro("SelectContent.RemoveScroll"),aI=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:N,hideWhenDetached:v,avoidCollisions:y,...E}=t,_=wi(oo,n),[T,P]=g.useState(null),[D,M]=g.useState(null),b=Oe(e,oe=>P(oe)),[S,C]=g.useState(null),[R,k]=g.useState(null),A=kf(n),[j,W]=g.useState(!1),ue=g.useRef(!1);g.useEffect(()=>{if(T)return tx(T)},[T]),ex();const Z=g.useCallback(oe=>{const[q,...ne]=A().map(Ve=>Ve.ref.current),[he]=ne.slice(-1),xe=document.activeElement;for(const Ve of oe)if(Ve===xe||(Ve==null||Ve.scrollIntoView({block:"nearest"}),Ve===q&&D&&(D.scrollTop=0),Ve===he&&D&&(D.scrollTop=D.scrollHeight),Ve==null||Ve.focus(),document.activeElement!==xe))return},[A,D]),se=g.useCallback(()=>Z([S,T]),[Z,S,T]);g.useEffect(()=>{j&&se()},[j,se]);const{onOpenChange:U,triggerPointerDownPosRef:z}=_;g.useEffect(()=>{if(T){let oe={x:0,y:0};const q=he=>{var xe,Ve;oe={x:Math.abs(Math.round(he.pageX)-(((xe=z.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(he.pageY)-(((Ve=z.current)==null?void 0:Ve.y)??0))}},ne=he=>{oe.x<=10&&oe.y<=10?he.preventDefault():T.contains(he.target)||U(!1),document.removeEventListener("pointermove",q),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",ne,{capture:!0})}}},[T,U,z]),g.useEffect(()=>{const oe=()=>U(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[U]);const[Y,F]=TI(oe=>{const q=A().filter(xe=>!xe.disabled),ne=q.find(xe=>xe.ref.current===document.activeElement),he=bI(q,oe,ne);he&&setTimeout(()=>he.ref.current.focus())}),V=g.useCallback((oe,q,ne)=>{const he=!ue.current&&!ne;(_.value!==void 0&&_.value===q||he)&&(C(oe),he&&(ue.current=!0))},[_.value]),K=g.useCallback(()=>T==null?void 0:T.focus(),[T]),pe=g.useCallback((oe,q,ne)=>{const he=!ue.current&&!ne;(_.value!==void 0&&_.value===q||he)&&k(oe)},[_.value]),Be=r==="popper"?Jg:lI,qe=Be===Jg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:N,hideWhenDetached:v,avoidCollisions:y}:{};return o.jsx(oI,{scope:n,content:T,viewport:D,onViewportChange:M,itemRefCallback:V,selectedItem:S,onItemLeave:K,itemTextRefCallback:pe,focusSelectedItem:se,selectedItemText:R,position:r,isPositioned:j,searchRef:Y,children:o.jsx(Rf,{as:DF,allowPinchZoom:!0,children:o.jsx(If,{asChild:!0,trapped:_.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:J(s,oe=>{var q;(q=_.trigger)==null||q.focus({preventScroll:!0}),oe.preventDefault()}),children:o.jsx(Ka,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:o.jsx(Be,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:oe=>oe.preventDefault(),...E,...qe,onPlaced:()=>W(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:J(E.onKeyDown,oe=>{const q=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!q&&oe.key.length===1&&F(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let he=A().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const xe=oe.target,Ve=he.indexOf(xe);he=he.slice(Ve+1)}setTimeout(()=>Z(he)),oe.preventDefault()}})})})})})})});aI.displayName=kF;var OF="SelectItemAlignedPosition",lI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=wi(oo,n),a=_i(oo,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=Oe(e,b=>h(b)),m=kf(n),x=g.useRef(!1),N=g.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:E,focusSelectedItem:_}=a,T=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&y&&E){const b=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),R=E.getBoundingClientRect();if(i.dir!=="rtl"){const xe=R.left-S.left,Ve=C.left-xe,St=b.left-Ve,nn=b.width+St,Mr=Math.max(nn,S.width),gs=window.innerWidth-Wn,Ni=EE(Ve,[Wn,Math.max(Wn,gs-Mr)]);l.style.minWidth=nn+"px",l.style.left=Ni+"px"}else{const xe=S.right-R.right,Ve=window.innerWidth-C.right-xe,St=window.innerWidth-b.right-Ve,nn=b.width+St,Mr=Math.max(nn,S.width),gs=window.innerWidth-Wn,Ni=EE(Ve,[Wn,Math.max(Wn,gs-Mr)]);l.style.minWidth=nn+"px",l.style.right=Ni+"px"}const k=m(),A=window.innerHeight-Wn*2,j=v.scrollHeight,W=window.getComputedStyle(d),ue=parseInt(W.borderTopWidth,10),Z=parseInt(W.paddingTop,10),se=parseInt(W.borderBottomWidth,10),U=parseInt(W.paddingBottom,10),z=ue+Z+j+U+se,Y=Math.min(y.offsetHeight*5,z),F=window.getComputedStyle(v),V=parseInt(F.paddingTop,10),K=parseInt(F.paddingBottom,10),pe=b.top+b.height/2-Wn,Be=A-pe,qe=y.offsetHeight/2,oe=y.offsetTop+qe,q=ue+Z+oe,ne=z-q;if(q<=pe){const xe=k.length>0&&y===k[k.length-1].ref.current;l.style.bottom="0px";const Ve=d.clientHeight-v.offsetTop-v.offsetHeight,St=Math.max(Be,qe+(xe?K:0)+Ve+se),nn=q+St;l.style.height=nn+"px"}else{const xe=k.length>0&&y===k[0].ref.current;l.style.top="0px";const St=Math.max(pe,ue+v.offsetTop+(xe?V:0)+qe)+ne;l.style.height=St+"px",v.scrollTop=q-pe+v.offsetTop}l.style.margin=`${Wn}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,y,E,i.dir,r]);Gt(()=>T(),[T]);const[P,D]=g.useState();Gt(()=>{d&&D(window.getComputedStyle(d).zIndex)},[d]);const M=g.useCallback(b=>{b&&N.current===!0&&(T(),_==null||_(),N.current=!1)},[T,_]);return o.jsx(LF,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:o.jsx(_e.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});lI.displayName=OF;var MF="SelectPopperPosition",Jg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wn,...i}=t,a=Df(n);return o.jsx(Yv,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jg.displayName=MF;var[LF,fx]=Za(oo,{}),Zg="SelectViewport",cI=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=_i(Zg,n),a=fx(Zg,n),l=Oe(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Af.Slot,{scope:n,children:o.jsx(_e.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:J(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const x=Math.abs(c.current-h.scrollTop);if(x>0){const N=window.innerHeight-Wn*2,v=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),E=Math.max(v,y);if(E<N){const _=E+x,T=Math.min(N,_),P=_-T;f.style.height=T+"px",f.style.bottom==="0px"&&(h.scrollTop=P>0?P:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});cI.displayName=Zg;var uI="SelectGroup",[VF,FF]=Za(uI),UF=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Xr();return o.jsx(VF,{scope:n,id:s,children:o.jsx(_e.div,{role:"group","aria-labelledby":s,...r,ref:e})})});UF.displayName=uI;var dI="SelectLabel",hI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=FF(dI,n);return o.jsx(_e.div,{id:s.id,...r,ref:e})});hI.displayName=dI;var jh="SelectItem",[$F,fI]=Za(jh),mI=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=wi(jh,n),c=_i(jh,n),d=l.value===r,[h,f]=g.useState(i??""),[m,x]=g.useState(!1),N=Oe(e,_=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,_,r,s)}),v=Xr(),y=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx($F,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:g.useCallback(_=>{f(T=>T||((_==null?void 0:_.textContent)??"").trim())},[]),children:o.jsx(Af.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(_e.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:N,onFocus:J(a.onFocus,()=>x(!0)),onBlur:J(a.onBlur,()=>x(!1)),onClick:J(a.onClick,()=>{y.current!=="mouse"&&E()}),onPointerUp:J(a.onPointerUp,()=>{y.current==="mouse"&&E()}),onPointerDown:J(a.onPointerDown,_=>{y.current=_.pointerType}),onPointerMove:J(a.onPointerMove,_=>{var T;y.current=_.pointerType,s?(T=c.onItemLeave)==null||T.call(c):y.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:J(a.onPointerLeave,_=>{var T;_.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:J(a.onKeyDown,_=>{var P;((P=c.searchRef)==null?void 0:P.current)!==""&&_.key===" "||(NF.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});mI.displayName=jh;var Vl="SelectItemText",pI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=wi(Vl,n),l=_i(Vl,n),c=fI(Vl,n),d=RF(Vl,n),[h,f]=g.useState(null),m=Oe(e,E=>f(E),c.onItemTextChange,E=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,E,c.value,c.disabled)}),x=h==null?void 0:h.textContent,N=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=d;return Gt(()=>(v(N),()=>y(N)),[v,y,N]),o.jsxs(o.Fragment,{children:[o.jsx(_e.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?go.createPortal(i.children,a.valueNode):null]})});pI.displayName=Vl;var gI="SelectItemIndicator",yI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return fI(gI,n).isSelected?o.jsx(_e.span,{"aria-hidden":!0,...r,ref:e}):null});yI.displayName=gI;var ey="SelectScrollUpButton",vI=g.forwardRef((t,e)=>{const n=_i(ey,t.__scopeSelect),r=fx(ey,t.__scopeSelect),[s,i]=g.useState(!1),a=Oe(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(wI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});vI.displayName=ey;var ty="SelectScrollDownButton",xI=g.forwardRef((t,e)=>{const n=_i(ty,t.__scopeSelect),r=fx(ty,t.__scopeSelect),[s,i]=g.useState(!1),a=Oe(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(wI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});xI.displayName=ty;var wI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=_i("SelectScrollButton",n),a=g.useRef(null),l=kf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Gt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(_e.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:J(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:J(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:J(s.onPointerLeave,()=>{c()})})}),zF="SelectSeparator",_I=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(_e.div,{"aria-hidden":!0,...r,ref:e})});_I.displayName=zF;var ny="SelectArrow",BF=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Df(n),i=wi(ny,n),a=_i(ny,n);return i.open&&a.position==="popper"?o.jsx(Xv,{...s,...r,ref:e}):null});BF.displayName=ny;function EI(t){return t===""||t===void 0}var SI=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=g.useRef(null),i=Oe(e,s),a=hx(n);return g.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx(eu,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});SI.displayName="BubbleSelect";function TI(t){const e=qt(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function bI(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=qF(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function qF(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var GF=JC,NI=eI,HF=nI,WF=rI,KF=sI,CI=iI,QF=cI,II=hI,PI=mI,YF=pI,XF=yI,RI=vI,jI=xI,AI=_I;const er=GF,tr=HF,Mn=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(NI,{ref:r,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(WF,{asChild:!0,children:o.jsx(_f,{className:"h-4 w-4 opacity-50"})})]}));Mn.displayName=NI.displayName;const kI=g.forwardRef(({className:t,...e},n)=>o.jsx(RI,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(YM,{className:"h-4 w-4"})}));kI.displayName=RI.displayName;const DI=g.forwardRef(({className:t,...e},n)=>o.jsx(jI,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(_f,{className:"h-4 w-4"})}));DI.displayName=jI.displayName;const Ln=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(KF,{children:o.jsxs(CI,{ref:s,className:me("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(kI,{}),o.jsx(QF,{className:me("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(DI,{})]})}));Ln.displayName=CI.displayName;const JF=g.forwardRef(({className:t,...e},n)=>o.jsx(II,{ref:n,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));JF.displayName=II.displayName;const Ie=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(PI,{ref:r,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(XF,{children:o.jsx(nu,{className:"h-4 w-4"})})}),o.jsx(YF,{children:e})]}));Ie.displayName=PI.displayName;const ZF=g.forwardRef(({className:t,...e},n)=>o.jsx(AI,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));ZF.displayName=AI.displayName;function e6({open:t,onOpenChange:e,mode:n="login"}){const{login:r,registerSchool:s}=Cf(),{toast:i}=jt(),[a,l]=g.useState(n),[c,d]=g.useState(!1);g.useState(null);const[h,f]=g.useState({email:"",password:""}),[m,x]=g.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"}),N=async y=>{y.preventDefault(),d(!0);try{const E=await r(h.email,h.password);e(!1),f({email:"",password:""}),E!=null&&E.message&&i({title:"Welcome!",description:E.message})}catch(E){i({title:"Error",description:E.message,variant:"destructive"})}finally{d(!1)}},v=async y=>{y.preventDefault(),d(!0);try{if(m.plan!=="free"&&m.plan!=="free_trial"){localStorage.setItem("pendingRegistration",JSON.stringify(m)),e(!1),window.location.href=`/register?plan=${m.plan}`;return}await s(m),e(!1),x({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"})}catch(E){i({title:"Error",description:E.message,variant:"destructive"})}finally{d(!1)}};return o.jsx(Zn,{open:t,onOpenChange:e,children:o.jsxs(Rn,{className:"max-w-md",children:[o.jsxs(jn,{children:[o.jsx(An,{className:"text-center",children:a==="login"?"Sign In to PassPilot":a==="set-password"?"Set Your Password":"Register Your School"}),o.jsx(jf,{className:"text-center",children:a==="login"?"Enter your email and password. New teachers: choose any password to get started.":"Create a new school account to get started"})]}),a==="login"?o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"email",children:"Email Address"}),o.jsx(de,{type:"email",id:"email",placeholder:"teacher@school.edu",value:h.email,onChange:y=>f({...h,email:y.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"password",children:"Password"}),o.jsx(de,{type:"password",id:"password",placeholder:"Enter password (new teachers: choose your password)",value:h.password,onChange:y=>f({...h,password:y.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(H,{type:"submit",className:"w-full",disabled:c,"data-testid":"button-login",children:c?"Signing In...":"Sign In"})]}):o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name"}),o.jsx(de,{type:"text",id:"schoolName",placeholder:"Lincoln Elementary School",value:m.schoolName,onChange:y=>x({...m,schoolName:y.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(de,{type:"text",id:"adminName",placeholder:"Principal Smith",value:m.adminName,onChange:y=>x({...m,adminName:y.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(de,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:m.adminEmail,onChange:y=>x({...m,adminEmail:y.target.value}),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminPassword",children:"Password"}),o.jsx(de,{type:"password",id:"adminPassword",placeholder:"••••••••",value:m.adminPassword,onChange:y=>x({...m,adminPassword:y.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"plan",children:"Choose Plan"}),o.jsxs(er,{value:m.plan,onValueChange:y=>x({...m,plan:y}),children:[o.jsx(Mn,{"data-testid":"select-plan",children:o.jsx(tr,{placeholder:"Select a plan"})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"free",children:"Demo Plan (Free)"}),o.jsx(Ie,{value:"free_trial",children:"30-Day Free Trial"}),o.jsx(Ie,{value:"basic",children:"Basic - 3 Teachers ($6/month)"}),o.jsx(Ie,{value:"small_school",children:"Small School - 10 Teachers ($35/month)"}),o.jsx(Ie,{value:"medium_school",children:"Medium School - 25 Teachers ($75/month)"}),o.jsx(Ie,{value:"large_school",children:"Large School - 50 Teachers ($120/month)"}),o.jsx(Ie,{value:"unlimited",children:"Unlimited Teachers ($180/month)"})]})]})]}),o.jsx(H,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:c,"data-testid":"button-register",children:c?"Registering...":"Register School"})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:a==="login"?o.jsxs(o.Fragment,{children:["Don't have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("register"),"data-testid":"button-switch-register",children:"Register School"})]}):o.jsxs(o.Fragment,{children:["Already have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("login"),"data-testid":"button-switch-login",children:"Sign In"})]})})})]})})}function t6(){const[,t]=ur(),[e,n]=g.useState(!1),[r,s]=g.useState("login"),i=a=>{s(a),n(!0)};return o.jsxs("div",{className:"min-h-screen",children:[o.jsxs("section",{className:"bg-gradient-to-br from-primary to-blue-700 text-white min-h-screen flex items-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1580582932707-520aed937b7b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:o.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center mx-auto mb-6",children:o.jsx("i",{className:"fas fa-id-card text-primary text-2xl"})}),o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"PassPilot"}),o.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Streamline Student Pass Management with Real-Time Tracking"}),o.jsx("p",{className:"text-lg mb-12 opacity-80 max-w-2xl mx-auto",children:"Designed specifically for teachers and schools to efficiently manage bathroom passes, track student movements, and maintain classroom safety with intelligent reporting."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[o.jsx(H,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(H,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(H,{onClick:()=>i("login"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-login",children:"Log In"})]}),o.jsx("div",{className:"flex justify-center mb-12",children:o.jsx(H,{onClick:()=>t("/login"),variant:"link",className:"text-white hover:text-gray-200 underline text-lg","data-testid":"button-forgot-password-landing",children:"Forgot your password?"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-clock text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Real-Time Tracking"}),o.jsx("p",{className:"text-sm opacity-80",children:"Monitor student movements instantly with live updates"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-chart-line text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Smart Reports"}),o.jsx("p",{className:"text-sm opacity-80",children:"Generate detailed analytics and export data easily"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-shield-alt text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Secure & Safe"}),o.jsx("p",{className:"text-sm opacity-80",children:"Protect student data with enterprise-grade security"})]})]})]})})]}),o.jsx("section",{className:"py-20 bg-background",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-6",children:"Everything You Need for Efficient Pass Management"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"PassPilot provides comprehensive tools for teachers and administrators to maintain student safety while reducing classroom disruptions."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-clipboard-list text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Live Pass Tracking"}),o.jsx("p",{className:"text-muted-foreground",children:"See which students are currently out of class with real-time status updates and duration tracking."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-users text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Multi-Grade Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage multiple grade levels and classrooms with easy switching between student rosters."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-accent rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-cloud-upload-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Easy Data Import"}),o.jsx("p",{className:"text-muted-foreground",children:"Import student rosters from Google Classroom, Clever, or upload CSV files for quick setup."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-chart-bar text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Detailed Reports"}),o.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports with filtering options and export to CSV or PDF formats."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-mobile-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Mobile Friendly"}),o.jsx("p",{className:"text-muted-foreground",children:"Access PassPilot from any device with a responsive design optimized for tablets and phones."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-cogs text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Admin Controls"}),o.jsx("p",{className:"text-muted-foreground",children:"School administrators can manage teacher accounts, billing, and configure system settings."})]})]})]})}),o.jsx("section",{className:"py-20 bg-primary text-primary-foreground",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Transform Your Classroom Management?"}),o.jsx("p",{className:"text-xl mb-12 opacity-90 max-w-2xl mx-auto",children:"Join thousands of teachers and schools already using PassPilot to create safer, more organized learning environments."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsx(H,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(H,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-6 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(H,{variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-schedule-demo",children:"Schedule Demo"})]})]})}),o.jsx("footer",{className:"bg-gray-900 text-white py-12",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx("i",{className:"fas fa-id-card text-white text-sm"})}),o.jsx("span",{className:"text-xl font-bold",children:"PassPilot"})]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Streamlining student pass management for modern classrooms."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Features"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Pricing"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Security"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Help Center"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Contact Us"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Training"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"About"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Terms"})})]})]})]}),o.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8 text-center text-sm text-gray-400",children:o.jsx("p",{children:"© 2024 PassPilot. All rights reserved."})})]})}),o.jsx(e6,{open:e,onOpenChange:n,mode:r})]})}var fp="rovingFocusGroup.onEntryFocus",n6={bubbles:!1,cancelable:!0},Of="RovingFocusGroup",[ry,OI,r6]=vf(Of),[s6,MI]=qn(Of,[r6]),[i6,o6]=s6(Of),LI=g.forwardRef((t,e)=>o.jsx(ry.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(ry.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(a6,{...t,ref:e})})}));LI.displayName=Of;var a6=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=g.useRef(null),x=Oe(e,m),N=dx(i),[v=null,y]=ai({prop:a,defaultProp:l,onChange:c}),[E,_]=g.useState(!1),T=qt(d),P=OI(n),D=g.useRef(!1),[M,b]=g.useState(0);return g.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(fp,T),()=>S.removeEventListener(fp,T)},[T]),o.jsx(i6,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(S=>y(S),[y]),onItemShiftTab:g.useCallback(()=>_(!0),[]),onFocusableItemAdd:g.useCallback(()=>b(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>b(S=>S-1),[]),children:o.jsx(_e.div,{tabIndex:E||M===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...t.style},onMouseDown:J(t.onMouseDown,()=>{D.current=!0}),onFocus:J(t.onFocus,S=>{const C=!D.current;if(S.target===S.currentTarget&&C&&!E){const R=new CustomEvent(fp,n6);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const k=P().filter(Z=>Z.focusable),A=k.find(Z=>Z.active),j=k.find(Z=>Z.id===v),ue=[A,j,...k].filter(Boolean).map(Z=>Z.ref.current);UI(ue,h)}}D.current=!1}),onBlur:J(t.onBlur,()=>_(!1))})})}),VI="RovingFocusGroupItem",FI=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Xr(),c=i||l,d=o6(VI,n),h=d.currentTabStopId===c,f=OI(n),{onFocusableItemAdd:m,onFocusableItemRemove:x}=d;return g.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),o.jsx(ry.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(_e.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:J(t.onMouseDown,N=>{r?d.onItemFocus(c):N.preventDefault()}),onFocus:J(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:J(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){d.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const v=u6(N,d.orientation,d.dir);if(v!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let E=f().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const _=E.indexOf(N.currentTarget);E=d.loop?d6(E,_+1):E.slice(_+1)}setTimeout(()=>UI(E))}})})})});FI.displayName=VI;var l6={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function c6(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function u6(t,e,n){const r=c6(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return l6[r]}function UI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function d6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var h6=LI,f6=FI,sy=["Enter"," "],m6=["ArrowDown","PageUp","Home"],$I=["ArrowUp","PageDown","End"],p6=[...m6,...$I],g6={ltr:[...sy,"ArrowRight"],rtl:[...sy,"ArrowLeft"]},y6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ou="Menu",[Pc,v6,x6]=vf(ou),[yo,zI]=qn(ou,[x6,Ja,MI]),Mf=Ja(),BI=MI(),[w6,vo]=yo(ou),[_6,au]=yo(ou),qI=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=t,l=Mf(e),[c,d]=g.useState(null),h=g.useRef(!1),f=qt(i),m=dx(s);return g.useEffect(()=>{const x=()=>{h.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>h.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),o.jsx(uC,{...l,children:o.jsx(w6,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:d,children:o.jsx(_6,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:a,children:r})})})};qI.displayName=ou;var E6="MenuAnchor",mx=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Mf(n);return o.jsx(Qv,{...s,...r,ref:e})});mx.displayName=E6;var px="MenuPortal",[S6,GI]=yo(px,{forceMount:void 0}),HI=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=vo(px,e);return o.jsx(S6,{scope:e,forceMount:n,children:o.jsx(dr,{present:n||i.open,children:o.jsx(Zc,{asChild:!0,container:s,children:r})})})};HI.displayName=px;var Fn="MenuContent",[T6,gx]=yo(Fn),WI=g.forwardRef((t,e)=>{const n=GI(Fn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=vo(Fn,t.__scopeMenu),a=au(Fn,t.__scopeMenu);return o.jsx(Pc.Provider,{scope:t.__scopeMenu,children:o.jsx(dr,{present:r||i.open,children:o.jsx(Pc.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(b6,{...s,ref:e}):o.jsx(N6,{...s,ref:e})})})})}),b6=g.forwardRef((t,e)=>{const n=vo(Fn,t.__scopeMenu),r=g.useRef(null),s=Oe(e,r);return g.useEffect(()=>{const i=r.current;if(i)return tx(i)},[]),o.jsx(yx,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:J(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),N6=g.forwardRef((t,e)=>{const n=vo(Fn,t.__scopeMenu);return o.jsx(yx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),C6=ro("MenuContent.ScrollLock"),yx=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:x,disableOutsideScroll:N,...v}=t,y=vo(Fn,n),E=au(Fn,n),_=Mf(n),T=BI(n),P=v6(n),[D,M]=g.useState(null),b=g.useRef(null),S=Oe(e,b,y.onContentChange),C=g.useRef(0),R=g.useRef(""),k=g.useRef(0),A=g.useRef(null),j=g.useRef("right"),W=g.useRef(0),ue=N?Rf:g.Fragment,Z=N?{as:C6,allowPinchZoom:!0}:void 0,se=z=>{var oe,q;const Y=R.current+z,F=P().filter(ne=>!ne.disabled),V=document.activeElement,K=(oe=F.find(ne=>ne.ref.current===V))==null?void 0:oe.textValue,pe=F.map(ne=>ne.textValue),Be=F6(pe,Y,K),qe=(q=F.find(ne=>ne.textValue===Be))==null?void 0:q.ref.current;(function ne(he){R.current=he,window.clearTimeout(C.current),he!==""&&(C.current=window.setTimeout(()=>ne(""),1e3))})(Y),qe&&setTimeout(()=>qe.focus())};g.useEffect(()=>()=>window.clearTimeout(C.current),[]),ex();const U=g.useCallback(z=>{var F,V;return j.current===((F=A.current)==null?void 0:F.side)&&$6(z,(V=A.current)==null?void 0:V.area)},[]);return o.jsx(T6,{scope:n,searchRef:R,onItemEnter:g.useCallback(z=>{U(z)&&z.preventDefault()},[U]),onItemLeave:g.useCallback(z=>{var Y;U(z)||((Y=b.current)==null||Y.focus(),M(null))},[U]),onTriggerLeave:g.useCallback(z=>{U(z)&&z.preventDefault()},[U]),pointerGraceTimerRef:k,onPointerGraceIntentChange:g.useCallback(z=>{A.current=z},[]),children:o.jsx(ue,{...Z,children:o.jsx(If,{asChild:!0,trapped:s,onMountAutoFocus:J(i,z=>{var Y;z.preventDefault(),(Y=b.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Ka,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:x,children:o.jsx(h6,{asChild:!0,...T,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:M,onEntryFocus:J(c,z=>{E.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Yv,{role:"menu","aria-orientation":"vertical","data-state":cP(y.open),"data-radix-menu-content":"",dir:E.dir,..._,...v,ref:S,style:{outline:"none",...v.style},onKeyDown:J(v.onKeyDown,z=>{const F=z.target.closest("[data-radix-menu-content]")===z.currentTarget,V=z.ctrlKey||z.altKey||z.metaKey,K=z.key.length===1;F&&(z.key==="Tab"&&z.preventDefault(),!V&&K&&se(z.key));const pe=b.current;if(z.target!==pe||!p6.includes(z.key))return;z.preventDefault();const qe=P().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);$I.includes(z.key)&&qe.reverse(),L6(qe)}),onBlur:J(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(C.current),R.current="")}),onPointerMove:J(t.onPointerMove,Rc(z=>{const Y=z.target,F=W.current!==z.clientX;if(z.currentTarget.contains(Y)&&F){const V=z.clientX>W.current?"right":"left";j.current=V,W.current=z.clientX}}))})})})})})})});WI.displayName=Fn;var I6="MenuGroup",vx=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(_e.div,{role:"group",...r,ref:e})});vx.displayName=I6;var P6="MenuLabel",KI=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(_e.div,{...r,ref:e})});KI.displayName=P6;var Ah="MenuItem",SE="menu.itemSelect",Lf=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=g.useRef(null),a=au(Ah,t.__scopeMenu),l=gx(Ah,t.__scopeMenu),c=Oe(e,i),d=g.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(SE,{bubbles:!0,cancelable:!0});f.addEventListener(SE,x=>r==null?void 0:r(x),{once:!0}),Dv(f,m),m.defaultPrevented?d.current=!1:a.onClose()}};return o.jsx(QI,{...s,ref:c,disabled:n,onClick:J(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),d.current=!0},onPointerUp:J(t.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:J(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||sy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Lf.displayName=Ah;var QI=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,a=gx(Ah,n),l=BI(n),c=g.useRef(null),d=Oe(e,c),[h,f]=g.useState(!1),[m,x]=g.useState("");return g.useEffect(()=>{const N=c.current;N&&x((N.textContent??"").trim())},[i.children]),o.jsx(Pc.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(f6,{asChild:!0,...l,focusable:!r,children:o.jsx(_e.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:J(t.onPointerMove,Rc(N=>{r?a.onItemLeave(N):(a.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:J(t.onPointerLeave,Rc(N=>a.onItemLeave(N))),onFocus:J(t.onFocus,()=>f(!0)),onBlur:J(t.onBlur,()=>f(!1))})})})}),R6="MenuCheckboxItem",YI=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return o.jsx(tP,{scope:t.__scopeMenu,checked:n,children:o.jsx(Lf,{role:"menuitemcheckbox","aria-checked":kh(n)?"mixed":n,...s,ref:e,"data-state":wx(n),onSelect:J(s.onSelect,()=>r==null?void 0:r(kh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});YI.displayName=R6;var XI="MenuRadioGroup",[j6,A6]=yo(XI,{value:void 0,onValueChange:()=>{}}),JI=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=qt(r);return o.jsx(j6,{scope:t.__scopeMenu,value:n,onValueChange:i,children:o.jsx(vx,{...s,ref:e})})});JI.displayName=XI;var ZI="MenuRadioItem",eP=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=A6(ZI,t.__scopeMenu),i=n===s.value;return o.jsx(tP,{scope:t.__scopeMenu,checked:i,children:o.jsx(Lf,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":wx(i),onSelect:J(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});eP.displayName=ZI;var xx="MenuItemIndicator",[tP,k6]=yo(xx,{checked:!1}),nP=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=k6(xx,n);return o.jsx(dr,{present:r||kh(i.checked)||i.checked===!0,children:o.jsx(_e.span,{...s,ref:e,"data-state":wx(i.checked)})})});nP.displayName=xx;var D6="MenuSeparator",rP=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(_e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});rP.displayName=D6;var O6="MenuArrow",sP=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Mf(n);return o.jsx(Xv,{...s,...r,ref:e})});sP.displayName=O6;var M6="MenuSub",[xq,iP]=yo(M6),Fl="MenuSubTrigger",oP=g.forwardRef((t,e)=>{const n=vo(Fl,t.__scopeMenu),r=au(Fl,t.__scopeMenu),s=iP(Fl,t.__scopeMenu),i=gx(Fl,t.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},h=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>h,[h]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(mx,{asChild:!0,...d,children:o.jsx(QI,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":cP(n.open),...t,ref:yf(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:J(t.onPointerMove,Rc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:J(t.onPointerLeave,Rc(f=>{var x,N;h();const m=(x=n.content)==null?void 0:x.getBoundingClientRect();if(m){const v=(N=n.content)==null?void 0:N.dataset.side,y=v==="right",E=y?-5:5,_=m[y?"left":"right"],T=m[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+E,y:f.clientY},{x:_,y:m.top},{x:T,y:m.top},{x:T,y:m.bottom},{x:_,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:J(t.onKeyDown,f=>{var x;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||g6[r.dir].includes(f.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),f.preventDefault())})})})});oP.displayName=Fl;var aP="MenuSubContent",lP=g.forwardRef((t,e)=>{const n=GI(Fn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=vo(Fn,t.__scopeMenu),a=au(Fn,t.__scopeMenu),l=iP(aP,t.__scopeMenu),c=g.useRef(null),d=Oe(e,c);return o.jsx(Pc.Provider,{scope:t.__scopeMenu,children:o.jsx(dr,{present:r||i.open,children:o.jsx(Pc.Slot,{scope:t.__scopeMenu,children:o.jsx(yx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:J(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:J(t.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:J(t.onKeyDown,h=>{var x;const f=h.currentTarget.contains(h.target),m=y6[a.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(x=l.trigger)==null||x.focus(),h.preventDefault())})})})})})});lP.displayName=aP;function cP(t){return t?"open":"closed"}function kh(t){return t==="indeterminate"}function wx(t){return kh(t)?"indeterminate":t?"checked":"unchecked"}function L6(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function V6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function F6(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=V6(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function U6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,d=e[a].x,h=e[a].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function $6(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return U6(n,e)}function Rc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var z6=qI,B6=mx,q6=HI,G6=WI,H6=vx,W6=KI,K6=Lf,Q6=YI,Y6=JI,X6=eP,J6=nP,Z6=rP,e3=sP,t3=oP,n3=lP,_x="DropdownMenu",[r3,wq]=qn(_x,[zI]),tn=zI(),[s3,uP]=r3(_x),dP=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=tn(e),d=g.useRef(null),[h=!1,f]=ai({prop:s,defaultProp:i,onChange:a});return o.jsx(s3,{scope:e,triggerId:Xr(),triggerRef:d,contentId:Xr(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(z6,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};dP.displayName=_x;var hP="DropdownMenuTrigger",fP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=uP(hP,n),a=tn(n);return o.jsx(B6,{asChild:!0,...a,children:o.jsx(_e.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:yf(e,i.triggerRef),onPointerDown:J(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:J(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});fP.displayName=hP;var i3="DropdownMenuPortal",mP=t=>{const{__scopeDropdownMenu:e,...n}=t,r=tn(e);return o.jsx(q6,{...r,...n})};mP.displayName=i3;var pP="DropdownMenuContent",gP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=uP(pP,n),i=tn(n),a=g.useRef(!1);return o.jsx(G6,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:J(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:J(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gP.displayName=pP;var o3="DropdownMenuGroup",a3=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(H6,{...s,...r,ref:e})});a3.displayName=o3;var l3="DropdownMenuLabel",yP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(W6,{...s,...r,ref:e})});yP.displayName=l3;var c3="DropdownMenuItem",vP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(K6,{...s,...r,ref:e})});vP.displayName=c3;var u3="DropdownMenuCheckboxItem",xP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(Q6,{...s,...r,ref:e})});xP.displayName=u3;var d3="DropdownMenuRadioGroup",h3=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(Y6,{...s,...r,ref:e})});h3.displayName=d3;var f3="DropdownMenuRadioItem",wP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(X6,{...s,...r,ref:e})});wP.displayName=f3;var m3="DropdownMenuItemIndicator",_P=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(J6,{...s,...r,ref:e})});_P.displayName=m3;var p3="DropdownMenuSeparator",EP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(Z6,{...s,...r,ref:e})});EP.displayName=p3;var g3="DropdownMenuArrow",y3=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(e3,{...s,...r,ref:e})});y3.displayName=g3;var v3="DropdownMenuSubTrigger",SP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(t3,{...s,...r,ref:e})});SP.displayName=v3;var x3="DropdownMenuSubContent",TP=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(n3,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});TP.displayName=x3;var w3=dP,_3=fP,E3=mP,bP=gP,NP=yP,CP=vP,IP=xP,PP=wP,RP=_P,jP=EP,AP=SP,kP=TP;const DP=w3,OP=_3,S3=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>o.jsxs(AP,{ref:s,className:me("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,o.jsx(QM,{className:"ml-auto"})]}));S3.displayName=AP.displayName;const T3=g.forwardRef(({className:t,...e},n)=>o.jsx(kP,{ref:n,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));T3.displayName=kP.displayName;const Ex=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(E3,{children:o.jsx(bP,{ref:r,sideOffset:e,className:me("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Ex.displayName=bP.displayName;const oa=g.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(CP,{ref:r,className:me("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));oa.displayName=CP.displayName;const b3=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>o.jsxs(IP,{ref:s,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(RP,{children:o.jsx(nu,{className:"h-4 w-4"})})}),e]}));b3.displayName=IP.displayName;const N3=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(PP,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(RP,{children:o.jsx(XM,{className:"h-2 w-2 fill-current"})})}),e]}));N3.displayName=PP.displayName;const C3=g.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(NP,{ref:r,className:me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));C3.displayName=NP.displayName;const I3=g.forwardRef(({className:t,...e},n)=>o.jsx(jP,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));I3.displayName=jP.displayName;const le=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));le.displayName="Card";const Ne=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("flex flex-col space-y-1.5 p-6",t),...e}));Ne.displayName="CardHeader";const Ce=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ce.displayName="CardTitle";const Jr=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Jr.displayName="CardDescription";const ce=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("p-6 pt-0",t),...e}));ce.displayName="CardContent";const P3=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("flex items-center p-6 pt-0",t),...e}));P3.displayName="CardFooter";const R3=tu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Un({className:t,variant:e,...n}){return o.jsx("div",{className:me(R3({variant:e}),t),...n})}const j3=()=>{};var TE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},A3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},LP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;c||(x=64,a||(m=64)),r.push(n[h],n[f],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):A3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new k3;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),f!==64){const N=d<<6&192|f;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D3=function(t){const e=MP(t);return LP.encodeByteArray(e,!0)},Dh=function(t){return D3(t).replace(/\./g,"")},VP=function(t){try{return LP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=()=>O3().__FIREBASE_DEFAULTS__,L3=()=>{if(typeof process>"u"||typeof TE>"u")return;const t=TE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VP(t[1]);return e&&JSON.parse(e)},Vf=()=>{try{return j3()||M3()||L3()||V3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FP=t=>{var e,n;return(n=(e=Vf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},F3=t=>{const e=FP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UP=()=>{var t;return(t=Vf())==null?void 0:t.config},$P=t=>{var e;return(e=Vf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zP(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dh(JSON.stringify(n)),Dh(JSON.stringify(a)),""].join(".")}const rc={};function z3(){const t={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function B3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bE=!1;function BP(t,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||rc[t]===e||rc[t]||bE)return;rc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=z3().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{bE=!0,a()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=B3(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),v=n("learnmore"),y=document.getElementById(v)||document.createElement("a"),E=n("preprendIcon"),_=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;l(T),h(y,v);const P=d();c(_,E),T.append(_,N,y,P),document.body.appendChild(T)}i?(N.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function G3(){var e;const t=(e=Vf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function K3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q3(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y3(){return!G3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X3(){try{return typeof indexedDB=="object"}catch{return!1}}function J3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="FirebaseError";class fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Z3,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?e5(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fs(s,l,r)}}function e5(t,e){return t.replace(t5,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const t5=/\{\$([^}]+)}/g;function n5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(NE(i)&&NE(a)){if(!ao(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function NE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function r5(t,e){const n=new s5(t,e);return n.subscribe.bind(n)}class s5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");i5(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mp),s.error===void 0&&(s.error=mp),s.complete===void 0&&(s.complete=mp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l5(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a5(t){return t===Di?void 0:t}function l5(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new o5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const u5={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},d5=Re.INFO,h5={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},f5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=h5[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sx{constructor(e){this.name=e,this._logLevel=d5,this._logHandler=f5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?u5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const m5=(t,e)=>e.some(n=>t instanceof n);let CE,IE;function p5(){return CE||(CE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g5(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qP=new WeakMap,iy=new WeakMap,GP=new WeakMap,pp=new WeakMap,Tx=new WeakMap;function y5(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Zs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&qP.set(n,t)}).catch(()=>{}),Tx.set(e,t),e}function v5(t){if(iy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});iy.set(t,e)}let oy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return iy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x5(t){oy=t(oy)}function w5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gp(this),e,...n);return GP.set(r,e.sort?e.sort():[e]),Zs(r)}:g5().includes(t)?function(...e){return t.apply(gp(this),e),Zs(qP.get(this))}:function(...e){return Zs(t.apply(gp(this),e))}}function _5(t){return typeof t=="function"?w5(t):(t instanceof IDBTransaction&&v5(t),m5(t,p5())?new Proxy(t,oy):t)}function Zs(t){if(t instanceof IDBRequest)return y5(t);if(pp.has(t))return pp.get(t);const e=_5(t);return e!==t&&(pp.set(t,e),Tx.set(e,t)),e}const gp=t=>Tx.get(t);function E5(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Zs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Zs(a.result),c.oldVersion,c.newVersion,Zs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const S5=["get","getKey","getAll","getAllKeys","count"],T5=["put","add","delete","clear"],yp=new Map;function PE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=T5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||S5.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return yp.set(e,i),i}x5(t=>({...t,get:(e,n,r)=>PE(e,n)||t.get(e,n,r),has:(e,n)=>!!PE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ay="@firebase/app",RE="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Sx("@firebase/app"),C5="@firebase/app-compat",I5="@firebase/analytics-compat",P5="@firebase/analytics",R5="@firebase/app-check-compat",j5="@firebase/app-check",A5="@firebase/auth",k5="@firebase/auth-compat",D5="@firebase/database",O5="@firebase/data-connect",M5="@firebase/database-compat",L5="@firebase/functions",V5="@firebase/functions-compat",F5="@firebase/installations",U5="@firebase/installations-compat",$5="@firebase/messaging",z5="@firebase/messaging-compat",B5="@firebase/performance",q5="@firebase/performance-compat",G5="@firebase/remote-config",H5="@firebase/remote-config-compat",W5="@firebase/storage",K5="@firebase/storage-compat",Q5="@firebase/firestore",Y5="@firebase/ai",X5="@firebase/firestore-compat",J5="firebase",Z5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="[DEFAULT]",eU={[ay]:"fire-core",[C5]:"fire-core-compat",[P5]:"fire-analytics",[I5]:"fire-analytics-compat",[j5]:"fire-app-check",[R5]:"fire-app-check-compat",[A5]:"fire-auth",[k5]:"fire-auth-compat",[D5]:"fire-rtdb",[O5]:"fire-data-connect",[M5]:"fire-rtdb-compat",[L5]:"fire-fn",[V5]:"fire-fn-compat",[F5]:"fire-iid",[U5]:"fire-iid-compat",[$5]:"fire-fcm",[z5]:"fire-fcm-compat",[B5]:"fire-perf",[q5]:"fire-perf-compat",[G5]:"fire-rc",[H5]:"fire-rc-compat",[W5]:"fire-gcs",[K5]:"fire-gcs-compat",[Q5]:"fire-fst",[X5]:"fire-fst-compat",[Y5]:"fire-vertex","fire-js":"fire-js",[J5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,tU=new Map,cy=new Map;function jE(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ma(t){const e=t.name;if(cy.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,t);for(const n of Oh.values())jE(n,t);for(const n of tU.values())jE(n,t);return!0}function bx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new lu("app","Firebase",nU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=Z5;function HP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ly,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ei.create("bad-app-name",{appName:String(s)});if(n||(n=UP()),!n)throw ei.create("no-options");const i=Oh.get(s);if(i){if(ao(n,i.options)&&ao(r,i.config))return i;throw ei.create("duplicate-app",{appName:s})}const a=new c5(s);for(const c of cy.values())a.addComponent(c);const l=new rU(n,r,a);return Oh.set(s,l),l}function WP(t=ly){const e=Oh.get(t);if(!e&&t===ly&&UP())return HP();if(!e)throw ei.create("no-app",{appName:t});return e}function ti(t,e,n){let r=eU[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(a.join(" "));return}Ma(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="firebase-heartbeat-database",iU=1,jc="firebase-heartbeat-store";let vp=null;function KP(){return vp||(vp=E5(sU,iU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),vp}async function oU(t){try{const n=(await KP()).transaction(jc),r=await n.objectStore(jc).get(QP(t));return await n.done,r}catch(e){if(e instanceof fs)ls.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(n.message)}}}async function AE(t,e){try{const r=(await KP()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,QP(t)),await r.done}catch(n){if(n instanceof fs)ls.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ls.warn(r.message)}}}function QP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=1024,lU=30;class cU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>lU){const a=hU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kE(),{heartbeatsToSend:r,unsentEntries:s}=uU(this._heartbeatsCache.heartbeats),i=Dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ls.warn(n),""}}}function kE(){return new Date().toISOString().substring(0,10)}function uU(t,e=aU){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),DE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),DE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X3()?J3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return AE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return AE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DE(t){return Dh(JSON.stringify({version:2,heartbeats:t})).length}function hU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){Ma(new lo("platform-logger",e=>new b5(e),"PRIVATE")),Ma(new lo("heartbeat",e=>new cU(e),"PRIVATE")),ti(ay,RE,t),ti(ay,RE,"esm2020"),ti("fire-js","")}fU("");var mU="firebase",pU="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti(mU,pU,"app");function YP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gU=YP,XP=new lu("auth","Firebase",YP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Sx("@firebase/auth");function yU(t,...e){Mh.logLevel<=Re.WARN&&Mh.warn(`Auth (${tl}): ${t}`,...e)}function Od(t,...e){Mh.logLevel<=Re.ERROR&&Mh.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw Cx(t,...e)}function Nr(t,...e){return Cx(t,...e)}function Nx(t,e,n){const r={...gU(),[e]:n};return new lu("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return Nx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),Nx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XP.create(t,...e)}function ye(t,e,...n){if(!t)throw Cx(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Od(e),new Error(e)}function cs(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function xU(){return OE()==="http:"||OE()==="https:"}function OE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xU()||W3()||"connection"in navigator)?navigator.onLine:!0}function _U(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,cs(n>e,"Short delay should be less than long delay!"),this.isMobile=q3()||K3()}get(){return wU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TU=new uu(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Si(t,e,n,r,s={}){return ZP(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=cu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return H3()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&el(t.emulatorConfig.host)&&(d.credentials="include"),JP.fetch()(await eR(t,t.config.apiHost,n,l),d)})}async function ZP(t,e,n){t._canInitEmulator=!1;const r={...EU,...e};try{const s=new NU(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ld(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ld(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ld(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Nx(t,h,d);Bn(t,h)}}catch(s){if(s instanceof fs)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function du(t,e,n,r,s={}){const i=await Si(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eR(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Ix(t.config,s):`${t.config.apiScheme}://${s}`;return SU.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function bU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),TU.get())})}}function ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Nr(t,e,r);return s.customData._tokenResponse=n,s}function ME(t){return t!==void 0&&t.enterprise!==void 0}class CU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IU(t,e){return Si(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(t,e){return Si(t,"POST","/v1/accounts:delete",e)}async function Lh(t,e){return Si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RU(t,e=!1){const n=Et(t),r=await n.getIdToken(e),s=Px(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:sc(xp(s.auth_time)),issuedAtTime:sc(xp(s.iat)),expirationTime:sc(xp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xp(t){return Number(t)*1e3}function Px(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const s=VP(n);return s?JSON.parse(s):(Od("Failed to decode base64 JWT payload"),null)}catch(s){return Od("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LE(t){const e=Px(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fs&&jU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Ac(t,Lh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?tR(s.providerUserInfo):[],a=DU(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function kU(t){const e=Et(t);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(t,e){const n=await ZP(t,{},async()=>{const r=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await eR(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&el(t.emulatorConfig.host)&&(c.credentials="include"),JP.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MU(t,e){return Si(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=LE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await OU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new aa;return r&&(ye(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new AU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RU(this,e)}reload(){return kU(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Ac(this,PU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:x,providerData:N,stsTokenManager:v}=n;ye(f&&v,e,"internal-error");const y=aa.fromJSON(this.name,v);ye(typeof f=="string",e,"internal-error"),Ss(r,e.name),Ss(s,e.name),ye(typeof m=="boolean",e,"internal-error"),ye(typeof x=="boolean",e,"internal-error"),Ss(i,e.name),Ss(a,e.name),Ss(l,e.name),Ss(c,e.name),Ss(d,e.name),Ss(h,e.name);const E=new nr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:y,createdAt:d,lastLoginAt:h});return N&&Array.isArray(N)&&(E.providerData=N.map(_=>({..._}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new nr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tR(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new aa;l.updateFromIdToken(r);const c=new nr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new Map;function Qr(t){cs(t instanceof Function,"Expected a class definition");let e=VE.get(t);return e?(cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nR.type="NONE";const FE=nR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Md(this.userKey,s.apiKey,i),this.fullPersistenceKey=Md("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lh(this.auth,{idToken:e}).catch(()=>{});return n?nr._fromGetAccountInfoResponse(this.auth,n,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new la(Qr(FE),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Qr(FE);const a=Md(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Lh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await nr._fromGetAccountInfoResponse(e,m,h)}else f=nr._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new la(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new la(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lR(e))return"Blackberry";if(cR(e))return"Webos";if(sR(e))return"Safari";if((e.includes("chrome/")||iR(e))&&!e.includes("edge/"))return"Chrome";if(aR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rR(t=Ht()){return/firefox\//i.test(t)}function sR(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iR(t=Ht()){return/crios\//i.test(t)}function oR(t=Ht()){return/iemobile/i.test(t)}function aR(t=Ht()){return/android/i.test(t)}function lR(t=Ht()){return/blackberry/i.test(t)}function cR(t=Ht()){return/webos/i.test(t)}function Rx(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LU(t=Ht()){var e;return Rx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function VU(){return Q3()&&document.documentMode===10}function uR(t=Ht()){return Rx(t)||aR(t)||cR(t)||lR(t)||/windows phone/i.test(t)||oR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e=[]){let n;switch(t){case"Browser":n=UE(Ht());break;case"Worker":n=`${UE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e={}){return Si(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=6;class zU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$U,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new FU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lh(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_U()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Cr(this));const n=e?Et(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UU(this),n=new zU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qr(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&yU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ms(t){return Et(t)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=r5(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qU(t){Ff=t}function hR(t){return Ff.loadJS(t)}function GU(){return Ff.recaptchaEnterpriseScript}function HU(){return Ff.gapiScript}function WU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class KU{constructor(){this.enterprise=new QU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YU="recaptcha-enterprise",fR="NO_RECAPTCHA";class XU{constructor(e){this.type=YU,this.auth=ms(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{IU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new CU(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;ME(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(fR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new KU().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&ME(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=GU();c.length!==0&&(c+=l),hR(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function zE(t,e,n,r=!1,s=!1){const i=new XU(t);let a;if(s)a=fR;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function hy(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await zE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await zE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t,e){const n=bx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ao(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function ZU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function e9(t,e,n){const r=ms(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=mR(e),{host:a,port:l}=t9(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(ao(d,r.config.emulator)&&ao(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,el(a)?(zP(`${i}//${a}${c}`),BP("Auth",!0)):n9()}function mR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t9(t){const e=mR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:BE(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:BE(a)}}}function BE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function n9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function r9(t,e){return Si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s9(t,e){return du(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i9(t,e){return du(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function o9(t,e){return du(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends jx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hy(e,n,"signInWithPassword",s9);case"emailLink":return i9(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hy(e,r,"signUpPassword",r9);case"emailLink":return o9(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return du(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9="http://localhost";class co extends jx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new co(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:a9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c9(t){const e=Ul($l(t)).link,n=e?Ul($l(e)).deep_link_id:null,r=Ul($l(t)).deep_link_id;return(r?Ul($l(r)).link:null)||r||n||e||t}class Ax{constructor(e){const n=Ul($l(e)),r=n.apiKey??null,s=n.oobCode??null,i=l9(n.mode??null);ye(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=c9(e);try{return new Ax(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(){this.providerId=nl.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ax.parseLink(n);return ye(r,"argument-error"),kc._fromEmailAndCode(e,r.code,r.tenantId)}}nl.PROVIDER_ID="password";nl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends kx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends hu{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return co._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends hu{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends hu{constructor(){super("twitter.com")}static credential(e,n){return co._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u9(t,e){return du(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await nr._fromIdTokenResponse(e,r,s),a=qE(r);return new uo({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qE(r);return new uo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends fs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fh(e,n,r,s)}}function pR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,i,e,r):i})}async function d9(t,e,n=!1){const r=await Ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h9(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const i=await Ac(t,pR(r,s,e,t),n);ye(i.idToken,r,"internal-error");const a=Px(i.idToken);ye(a,r,"internal-error");const{sub:l}=a;return ye(t.uid===l,r,"user-mismatch"),uo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(t,e,n=!1){if(yn(t.app))return Promise.reject(Cr(t));const r="signIn",s=await pR(t,r,e),i=await uo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function f9(t,e){return gR(ms(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t){const e=ms(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m9(t,e,n){if(yn(t.app))return Promise.reject(Cr(t));const r=ms(t),a=await hy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",u9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&yR(t),c}),l=await uo._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function p9(t,e,n){return yn(t.app)?Promise.reject(Cr(t)):f9(Et(t),nl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yR(t),r})}function g9(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function y9(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function v9(t){return Et(t).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=1e3,w9=10;class xR extends vR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);VU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,w9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},x9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xR.type="LOCAL";const _9=xR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends vR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wR.type="SESSION";const _R=wR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Uf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await E9(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Dx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return window}function T9(t){Ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof Ir().WorkerGlobalScope<"u"&&typeof Ir().importScripts=="function"}async function b9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function C9(){return ER()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebaseLocalStorageDb",I9=1,$h="firebaseLocalStorage",TR="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $f(t,e){return t.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function P9(){const t=indexedDB.deleteDatabase(SR);return new fu(t).toPromise()}function fy(){const t=indexedDB.open(SR,I9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($h,{keyPath:TR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($h)?e(r):(r.close(),await P9(),e(await fy()))})})}async function GE(t,e,n){const r=$f(t,!0).put({[TR]:e,value:n});return new fu(r).toPromise()}async function R9(t,e){const n=$f(t,!1).get(e),r=await new fu(n).toPromise();return r===void 0?null:r.value}function HE(t,e){const n=$f(t,!0).delete(e);return new fu(n).toPromise()}const j9=800,A9=3;class bR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>A9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ER()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uf._getInstance(C9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await b9(),!this.activeServiceWorker)return;this.sender=new S9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fy();return await GE(e,Uh,"1"),await HE(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>GE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>R9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>HE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$f(s,!1).getAll();return new fu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bR.type="LOCAL";const k9=bR;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t,e){return e?Qr(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends jx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D9(t){return gR(t.auth,new Ox(t),t.bypassAuthState)}function O9(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),h9(n,new Ox(t),t.bypassAuthState)}async function M9(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),d9(n,new Ox(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D9;case"linkViaPopup":case"linkViaRedirect":return M9;case"reauthViaPopup":case"reauthViaRedirect":return O9;default:Bn(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new uu(2e3,1e4);class Ko extends CR{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=Dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L9.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9="pendingRedirect",Ld=new Map;class F9 extends CR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ld.get(this.auth._key());if(!e){try{const r=await U9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ld.set(this.auth._key(),e)}return this.bypassAuthState||Ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U9(t,e){const n=PR(e),r=IR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function $9(t,e){return IR(t)._set(PR(e),"true")}function z9(t,e){Ld.set(t._key(),e)}function IR(t){return Qr(t._redirectPersistence)}function PR(t){return Md(V9,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t,e,n){return q9(t,e,n)}async function q9(t,e,n){if(yn(t.app))return Promise.reject(Cr(t));const r=ms(t);vU(t,e,kx),await r._initializationPromise;const s=NR(r,n);return await $9(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function G9(t,e){return await ms(t)._initializationPromise,RR(t,e,!1)}async function RR(t,e,n=!1){if(yn(t.app))return Promise.reject(Cr(t));const r=ms(t),s=NR(r,e),a=await new F9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=10*60*1e3;class W9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!K9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jR(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H9&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(e))}saveEventToCache(e){this.cachedEventUids.add(WE(e)),this.lastProcessedEventTime=Date.now()}}function WE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function K9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q9(t,e={}){return Si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X9=/^https?/;async function J9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Q9(t);for(const n of e)try{if(Z9(n))return}catch{}Bn(t,"unauthorized-domain")}function Z9(t){const e=uy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!X9.test(n))return!1;if(Y9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=new uu(3e4,6e4);function KE(){const t=Ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function t$(t){return new Promise((e,n)=>{var s,i,a;function r(){KE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KE(),n(Nr(t,"network-request-failed"))},timeout:e$.get()})}if((i=(s=Ir().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Ir().gapi)!=null&&a.load)r();else{const l=WU("iframefcb");return Ir()[l]=()=>{gapi.load?r():n(Nr(t,"network-request-failed"))},hR(`${HU()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Vd=null,e})}let Vd=null;function n$(t){return Vd=Vd||t$(t),Vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$=new uu(5e3,15e3),s$="__/auth/iframe",i$="emulator/auth/iframe",o$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l$(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ix(e,i$):`https://${t.config.authDomain}/${s$}`,r={apiKey:e.apiKey,appName:t.name,v:tl},s=a$.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${cu(r).slice(1)}`}async function c$(t){const e=await n$(t),n=Ir().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:l$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o$,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Nr(t,"network-request-failed"),l=Ir().setTimeout(()=>{i(a)},r$.get());function c(){Ir().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d$=500,h$=600,f$="_blank",m$="http://localhost";class QE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p$(t,e,n,r=d$,s=h$){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...u$,width:r.toString(),height:s.toString(),top:i,left:a},d=Ht().toLowerCase();n&&(l=iR(d)?f$:n),rR(d)&&(e=e||m$,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,N])=>`${m}${x}=${N},`,"");if(LU(d)&&l!=="_self")return g$(e||"",l),new QE(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new QE(f)}function g$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$="__/auth/handler",v$="emulator/auth/handler",x$=encodeURIComponent("fac");async function YE(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:s};if(e instanceof kx){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",n5(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof hu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${x$}=${encodeURIComponent(c)}`:"";return`${w$(t)}?${cu(l).slice(1)}${d}`}function w$({config:t}){return t.emulator?Ix(t,v$):`https://${t.authDomain}/${y$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class _${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_R,this._completeRedirectFn=RR,this._overrideRedirectResult=z9}async _openPopup(e,n,r,s){var a;cs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await YE(e,n,r,uy(),s);return p$(e,i,Dx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await YE(e,n,r,uy(),s);return T9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(cs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await c$(e),r=new W9(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[wp];i!==void 0&&n(!!i),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=J9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uR()||sR()||Rx()}}const E$=_$;var XE="@firebase/auth",JE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b$(t){Ma(new lo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ye(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dR(t)},d=new BU(r,s,i,c);return ZU(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ma(new lo("auth-internal",e=>{const n=ms(e.getProvider("auth").getImmediate());return(r=>new S$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ti(XE,JE,T$(t)),ti(XE,JE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=5*60,C$=$P("authIdTokenMaxAge")||N$;let ZE=null;const I$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>C$)return;const s=n==null?void 0:n.token;ZE!==s&&(ZE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function P$(t=WP()){const e=bx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JU(t,{popupRedirectResolver:E$,persistence:[k9,_9,_R]}),r=$P("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=I$(i.toString());y9(n,a,()=>a(n.currentUser)),g9(n,l=>a(l))}}const s=FP("auth");return s&&e9(n,`http://${s}`),n}function R$(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}qU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",R$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b$("Browser");var e1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,AR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function C(){}C.prototype=S.prototype,b.D=S.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(R,k,A){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return S.prototype[k].apply(R,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,C){C||(C=0);var R=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)R[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;16>k;++k)R[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=b.g[0],C=b.g[1],k=b.g[2];var A=b.g[3],j=S+(A^C&(k^A))+R[0]+3614090360&4294967295;S=C+(j<<7&4294967295|j>>>25),j=A+(k^S&(C^k))+R[1]+3905402710&4294967295,A=S+(j<<12&4294967295|j>>>20),j=k+(C^A&(S^C))+R[2]+606105819&4294967295,k=A+(j<<17&4294967295|j>>>15),j=C+(S^k&(A^S))+R[3]+3250441966&4294967295,C=k+(j<<22&4294967295|j>>>10),j=S+(A^C&(k^A))+R[4]+4118548399&4294967295,S=C+(j<<7&4294967295|j>>>25),j=A+(k^S&(C^k))+R[5]+1200080426&4294967295,A=S+(j<<12&4294967295|j>>>20),j=k+(C^A&(S^C))+R[6]+2821735955&4294967295,k=A+(j<<17&4294967295|j>>>15),j=C+(S^k&(A^S))+R[7]+4249261313&4294967295,C=k+(j<<22&4294967295|j>>>10),j=S+(A^C&(k^A))+R[8]+1770035416&4294967295,S=C+(j<<7&4294967295|j>>>25),j=A+(k^S&(C^k))+R[9]+2336552879&4294967295,A=S+(j<<12&4294967295|j>>>20),j=k+(C^A&(S^C))+R[10]+4294925233&4294967295,k=A+(j<<17&4294967295|j>>>15),j=C+(S^k&(A^S))+R[11]+2304563134&4294967295,C=k+(j<<22&4294967295|j>>>10),j=S+(A^C&(k^A))+R[12]+1804603682&4294967295,S=C+(j<<7&4294967295|j>>>25),j=A+(k^S&(C^k))+R[13]+4254626195&4294967295,A=S+(j<<12&4294967295|j>>>20),j=k+(C^A&(S^C))+R[14]+2792965006&4294967295,k=A+(j<<17&4294967295|j>>>15),j=C+(S^k&(A^S))+R[15]+1236535329&4294967295,C=k+(j<<22&4294967295|j>>>10),j=S+(k^A&(C^k))+R[1]+4129170786&4294967295,S=C+(j<<5&4294967295|j>>>27),j=A+(C^k&(S^C))+R[6]+3225465664&4294967295,A=S+(j<<9&4294967295|j>>>23),j=k+(S^C&(A^S))+R[11]+643717713&4294967295,k=A+(j<<14&4294967295|j>>>18),j=C+(A^S&(k^A))+R[0]+3921069994&4294967295,C=k+(j<<20&4294967295|j>>>12),j=S+(k^A&(C^k))+R[5]+3593408605&4294967295,S=C+(j<<5&4294967295|j>>>27),j=A+(C^k&(S^C))+R[10]+38016083&4294967295,A=S+(j<<9&4294967295|j>>>23),j=k+(S^C&(A^S))+R[15]+3634488961&4294967295,k=A+(j<<14&4294967295|j>>>18),j=C+(A^S&(k^A))+R[4]+3889429448&4294967295,C=k+(j<<20&4294967295|j>>>12),j=S+(k^A&(C^k))+R[9]+568446438&4294967295,S=C+(j<<5&4294967295|j>>>27),j=A+(C^k&(S^C))+R[14]+3275163606&4294967295,A=S+(j<<9&4294967295|j>>>23),j=k+(S^C&(A^S))+R[3]+4107603335&4294967295,k=A+(j<<14&4294967295|j>>>18),j=C+(A^S&(k^A))+R[8]+1163531501&4294967295,C=k+(j<<20&4294967295|j>>>12),j=S+(k^A&(C^k))+R[13]+2850285829&4294967295,S=C+(j<<5&4294967295|j>>>27),j=A+(C^k&(S^C))+R[2]+4243563512&4294967295,A=S+(j<<9&4294967295|j>>>23),j=k+(S^C&(A^S))+R[7]+1735328473&4294967295,k=A+(j<<14&4294967295|j>>>18),j=C+(A^S&(k^A))+R[12]+2368359562&4294967295,C=k+(j<<20&4294967295|j>>>12),j=S+(C^k^A)+R[5]+4294588738&4294967295,S=C+(j<<4&4294967295|j>>>28),j=A+(S^C^k)+R[8]+2272392833&4294967295,A=S+(j<<11&4294967295|j>>>21),j=k+(A^S^C)+R[11]+1839030562&4294967295,k=A+(j<<16&4294967295|j>>>16),j=C+(k^A^S)+R[14]+4259657740&4294967295,C=k+(j<<23&4294967295|j>>>9),j=S+(C^k^A)+R[1]+2763975236&4294967295,S=C+(j<<4&4294967295|j>>>28),j=A+(S^C^k)+R[4]+1272893353&4294967295,A=S+(j<<11&4294967295|j>>>21),j=k+(A^S^C)+R[7]+4139469664&4294967295,k=A+(j<<16&4294967295|j>>>16),j=C+(k^A^S)+R[10]+3200236656&4294967295,C=k+(j<<23&4294967295|j>>>9),j=S+(C^k^A)+R[13]+681279174&4294967295,S=C+(j<<4&4294967295|j>>>28),j=A+(S^C^k)+R[0]+3936430074&4294967295,A=S+(j<<11&4294967295|j>>>21),j=k+(A^S^C)+R[3]+3572445317&4294967295,k=A+(j<<16&4294967295|j>>>16),j=C+(k^A^S)+R[6]+76029189&4294967295,C=k+(j<<23&4294967295|j>>>9),j=S+(C^k^A)+R[9]+3654602809&4294967295,S=C+(j<<4&4294967295|j>>>28),j=A+(S^C^k)+R[12]+3873151461&4294967295,A=S+(j<<11&4294967295|j>>>21),j=k+(A^S^C)+R[15]+530742520&4294967295,k=A+(j<<16&4294967295|j>>>16),j=C+(k^A^S)+R[2]+3299628645&4294967295,C=k+(j<<23&4294967295|j>>>9),j=S+(k^(C|~A))+R[0]+4096336452&4294967295,S=C+(j<<6&4294967295|j>>>26),j=A+(C^(S|~k))+R[7]+1126891415&4294967295,A=S+(j<<10&4294967295|j>>>22),j=k+(S^(A|~C))+R[14]+2878612391&4294967295,k=A+(j<<15&4294967295|j>>>17),j=C+(A^(k|~S))+R[5]+4237533241&4294967295,C=k+(j<<21&4294967295|j>>>11),j=S+(k^(C|~A))+R[12]+1700485571&4294967295,S=C+(j<<6&4294967295|j>>>26),j=A+(C^(S|~k))+R[3]+2399980690&4294967295,A=S+(j<<10&4294967295|j>>>22),j=k+(S^(A|~C))+R[10]+4293915773&4294967295,k=A+(j<<15&4294967295|j>>>17),j=C+(A^(k|~S))+R[1]+2240044497&4294967295,C=k+(j<<21&4294967295|j>>>11),j=S+(k^(C|~A))+R[8]+1873313359&4294967295,S=C+(j<<6&4294967295|j>>>26),j=A+(C^(S|~k))+R[15]+4264355552&4294967295,A=S+(j<<10&4294967295|j>>>22),j=k+(S^(A|~C))+R[6]+2734768916&4294967295,k=A+(j<<15&4294967295|j>>>17),j=C+(A^(k|~S))+R[13]+1309151649&4294967295,C=k+(j<<21&4294967295|j>>>11),j=S+(k^(C|~A))+R[4]+4149444226&4294967295,S=C+(j<<6&4294967295|j>>>26),j=A+(C^(S|~k))+R[11]+3174756917&4294967295,A=S+(j<<10&4294967295|j>>>22),j=k+(S^(A|~C))+R[2]+718787259&4294967295,k=A+(j<<15&4294967295|j>>>17),j=C+(A^(k|~S))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(k+(j<<21&4294967295|j>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+A&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var C=S-this.blockSize,R=this.B,k=this.h,A=0;A<S;){if(k==0)for(;A<=C;)s(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<S;)if(R[k++]=b.charCodeAt(A++),k==this.blockSize){s(this,R),k=0;break}}else for(;A<S;)if(R[k++]=b[A++],k==this.blockSize){s(this,R),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var C=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=C&255,C/=256;for(this.u(b),b=Array(16),S=C=0;4>S;++S)for(var R=0;32>R;R+=8)b[C++]=this.g[S]>>>R&255;return b};function i(b,S){var C=l;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=S(b)}function a(b,S){this.h=S;for(var C=[],R=!0,k=b.length-1;0<=k;k--){var A=b[k]|0;R&&A==S||(C[k]=A,R=!1)}this.g=C}var l={};function c(b){return-128<=b&&128>b?i(b,function(S){return new a([S|0],0>S?-1:0)}):new a([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return y(d(-b));for(var S=[],C=1,R=0;b>=C;R++)S[R]=b/C|0,C*=4294967296;return new a(S,0)}function h(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return y(h(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(S,8)),R=f,k=0;k<b.length;k+=8){var A=Math.min(8,b.length-k),j=parseInt(b.substring(k,k+A),S);8>A?(A=d(Math.pow(S,A)),R=R.j(A).add(d(j))):(R=R.j(C),R=R.add(d(j)))}return R}var f=c(0),m=c(1),x=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var b=0,S=1,C=0;C<this.g.length;C++){var R=this.i(C);b+=(0<=R?R:4294967296+R)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N(this))return"0";if(v(this))return"-"+y(this).toString(b);for(var S=d(Math.pow(b,6)),C=this,R="";;){var k=P(C,S).g;C=E(C,k.j(S));var A=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=k,N(C))return A+R;for(;6>A.length;)A="0"+A;R=A+R}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function N(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function v(b){return b.h==-1}t.l=function(b){return b=E(this,b),v(b)?-1:N(b)?0:1};function y(b){for(var S=b.g.length,C=[],R=0;R<S;R++)C[R]=~b.g[R];return new a(C,~b.h).add(m)}t.abs=function(){return v(this)?y(this):this},t.add=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],R=0,k=0;k<=S;k++){var A=R+(this.i(k)&65535)+(b.i(k)&65535),j=(A>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);R=j>>>16,A&=65535,j&=65535,C[k]=j<<16|A}return new a(C,C[C.length-1]&-2147483648?-1:0)};function E(b,S){return b.add(y(S))}t.j=function(b){if(N(this)||N(b))return f;if(v(this))return v(b)?y(this).j(y(b)):y(y(this).j(b));if(v(b))return y(this.j(y(b)));if(0>this.l(x)&&0>b.l(x))return d(this.m()*b.m());for(var S=this.g.length+b.g.length,C=[],R=0;R<2*S;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<b.g.length;k++){var A=this.i(R)>>>16,j=this.i(R)&65535,W=b.i(k)>>>16,ue=b.i(k)&65535;C[2*R+2*k]+=j*ue,_(C,2*R+2*k),C[2*R+2*k+1]+=A*ue,_(C,2*R+2*k+1),C[2*R+2*k+1]+=j*W,_(C,2*R+2*k+1),C[2*R+2*k+2]+=A*W,_(C,2*R+2*k+2)}for(R=0;R<S;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=S;R<2*S;R++)C[R]=0;return new a(C,0)};function _(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function T(b,S){this.g=b,this.h=S}function P(b,S){if(N(S))throw Error("division by zero");if(N(b))return new T(f,f);if(v(b))return S=P(y(b),S),new T(y(S.g),y(S.h));if(v(S))return S=P(b,y(S)),new T(y(S.g),S.h);if(30<b.g.length){if(v(b)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var C=m,R=S;0>=R.l(b);)C=D(C),R=D(R);var k=M(C,1),A=M(R,1);for(R=M(R,2),C=M(C,2);!N(R);){var j=A.add(R);0>=j.l(b)&&(k=k.add(C),A=j),R=M(R,1),C=M(C,1)}return S=E(b,k.j(S)),new T(k,S)}for(k=f;0<=b.l(S);){for(C=Math.max(1,Math.floor(b.m()/S.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),A=d(C),j=A.j(S);v(j)||0<j.l(b);)C-=R,A=d(C),j=A.j(S);N(A)&&(A=m),k=k.add(A),b=E(b,j)}return new T(k,b)}t.A=function(b){return P(this,b).h},t.and=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)&b.i(R);return new a(C,this.h&b.h)},t.or=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)|b.i(R);return new a(C,this.h|b.h)},t.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)^b.i(R);return new a(C,this.h^b.h)};function D(b){for(var S=b.g.length+1,C=[],R=0;R<S;R++)C[R]=b.i(R)<<1|b.i(R-1)>>>31;return new a(C,b.h)}function M(b,S){var C=S>>5;S%=32;for(var R=b.g.length-C,k=[],A=0;A<R;A++)k[A]=0<S?b.i(A+C)>>>S|b.i(A+C+1)<<32-S:b.i(A+C);return new a(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ni=a}).apply(typeof e1<"u"?e1:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kR,zl,DR,Fd,my,OR,MR,LR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,w){return u==Array.prototype||u==Object.prototype||(u[p]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var p=0;p<u.length;++p){var w=u[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var w=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in w))break e;w=w[L]}u=u[u.length-1],I=w[u],p=p(I),p!=I&&p!=null&&e(w,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var w=0,I=!1,L={next:function(){if(!I&&w<u.length){var $=w++;return{value:p($,u[$]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function d(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,w){return u.call.apply(u.bind,arguments)}function f(u,p,w){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,w){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function x(u,p){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function N(u,p){function w(){}w.prototype=p.prototype,u.aa=p.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(I,L,$){for(var X=Array(arguments.length-2),He=2;He<arguments.length;He++)X[He-2]=arguments[He];return p.prototype[L].apply(I,X)}}function v(u){const p=u.length;if(0<p){const w=Array(p);for(let I=0;I<p;I++)w[I]=u[I];return w}return[]}function y(u,p){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(c(I)){const L=u.length||0,$=I.length||0;u.length=L+$;for(let X=0;X<$;X++)u[L+X]=I[X]}else u.push(I)}}class E{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(u,p,w){for(const I in u)p.call(w,u[I],I,u)}function b(u,p){for(const w in u)p.call(void 0,u[w],w,u)}function S(u){const p={};for(const w in u)p[w]=u[w];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(u,p){let w,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(w in I)u[w]=I[w];for(let $=0;$<C.length;$++)w=C[$],Object.prototype.hasOwnProperty.call(I,w)&&(u[w]=I[w])}}function k(u){var p=1;u=u.split(":");const w=[];for(;0<p&&u.length;)w.push(u.shift()),p--;return u.length&&w.push(u.join(":")),w}function A(u){l.setTimeout(()=>{throw u},0)}function j(){var u=z;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,w){const I=ue.get();I.set(p,w),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new E(()=>new Z,u=>u.reset());class Z{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,U=!1,z=new W,Y=()=>{const u=l.Promise.resolve(void 0);se=()=>{u.then(F)}};var F=()=>{for(var u;u=j();){try{u.h.call(u.g)}catch(w){A(w)}var p=ue;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}U=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};l.addEventListener("test",w,p),l.removeEventListener("test",w,p)}catch{}return u}();function Be(u,p){if(K.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{P(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else w=="mouseover"?p=u.fromElement:w=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Be.aa.h.call(this)}}N(Be,K);var qe={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),q=0;function ne(u,p,w,I,L){this.listener=u,this.proxy=null,this.src=p,this.type=w,this.capture=!!I,this.ha=L,this.key=++q,this.da=this.fa=!1}function he(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,p,w,I,L){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var X=St(u,p,I,L);return-1<X?(p=u[X],w||(p.fa=!1)):(p=new ne(p,this.src,$,!!I,L),p.fa=w,u.push(p)),p};function Ve(u,p){var w=p.type;if(w in u.g){var I=u.g[w],L=Array.prototype.indexOf.call(I,p,void 0),$;($=0<=L)&&Array.prototype.splice.call(I,L,1),$&&(he(p),u.g[w].length==0&&(delete u.g[w],u.h--))}}function St(u,p,w,I){for(var L=0;L<u.length;++L){var $=u[L];if(!$.da&&$.listener==p&&$.capture==!!w&&$.ha==I)return L}return-1}var nn="closure_lm_"+(1e6*Math.random()|0),Mr={};function gs(u,p,w,I,L){if(Array.isArray(p)){for(var $=0;$<p.length;$++)gs(u,p[$],w,I,L);return null}return w=Ew(w),u&&u[oe]?u.K(p,w,d(I)?!!I.capture:!!I,L):Ni(u,p,w,!1,I,L)}function Ni(u,p,w,I,L,$){if(!p)throw Error("Invalid event type");var X=d(L)?!!L.capture:!!L,He=im(u);if(He||(u[nn]=He=new xe(u)),w=He.add(p,w,I,X,$),w.proxy)return w;if(I=rm(),w.proxy=I,I.src=u,I.listener=w,u.addEventListener)pe||(L=X),L===void 0&&(L=!1),u.addEventListener(p.toString(),I,L);else if(u.attachEvent)u.attachEvent(_w(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function rm(){function u(w){return p.call(u.src,u.listener,w)}const p=zA;return u}function Ci(u,p,w,I,L){if(Array.isArray(p))for(var $=0;$<p.length;$++)Ci(u,p[$],w,I,L);else I=d(I)?!!I.capture:!!I,w=Ew(w),u&&u[oe]?(u=u.i,p=String(p).toString(),p in u.g&&($=u.g[p],w=St($,w,I,L),-1<w&&(he($[w]),Array.prototype.splice.call($,w,1),$.length==0&&(delete u.g[p],u.h--)))):u&&(u=im(u))&&(p=u.g[p.toString()],u=-1,p&&(u=St(p,w,I,L)),(w=-1<u?p[u]:null)&&sm(w))}function sm(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[oe])Ve(p.i,u);else{var w=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(w,I,u.capture):p.detachEvent?p.detachEvent(_w(w),I):p.addListener&&p.removeListener&&p.removeListener(I),(w=im(p))?(Ve(w,u),w.h==0&&(w.src=null,p[nn]=null)):he(u)}}}function _w(u){return u in Mr?Mr[u]:Mr[u]="on"+u}function zA(u,p){if(u.da)u=!0;else{p=new Be(p,this);var w=u.listener,I=u.ha||u.src;u.fa&&sm(u),u=w.call(I,p)}return u}function im(u){return u=u[nn],u instanceof xe?u:null}var om="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ew(u){return typeof u=="function"?u:(u[om]||(u[om]=function(p){return u.handleEvent(p)}),u[om])}function At(){V.call(this),this.i=new xe(this),this.M=this,this.F=null}N(At,V),At.prototype[oe]=!0,At.prototype.removeEventListener=function(u,p,w,I){Ci(this,u,p,w,I)};function Wt(u,p){var w,I=u.F;if(I)for(w=[];I;I=I.F)w.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new K(p,u);else if(p instanceof K)p.target=p.target||u;else{var L=p;p=new K(I,u),R(p,L)}if(L=!0,w)for(var $=w.length-1;0<=$;$--){var X=p.g=w[$];L=wu(X,I,!0,p)&&L}if(X=p.g=u,L=wu(X,I,!0,p)&&L,L=wu(X,I,!1,p)&&L,w)for($=0;$<w.length;$++)X=p.g=w[$],L=wu(X,I,!1,p)&&L}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var w=u.g[p],I=0;I<w.length;I++)he(w[I]);delete u.g[p],u.h--}}this.F=null},At.prototype.K=function(u,p,w,I){return this.i.add(String(u),p,!1,w,I)},At.prototype.L=function(u,p,w,I){return this.i.add(String(u),p,!0,w,I)};function wu(u,p,w,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,$=0;$<p.length;++$){var X=p[$];if(X&&!X.da&&X.capture==w){var He=X.listener,Tt=X.ha||X.src;X.fa&&Ve(u.i,X),L=He.call(Tt,I)!==!1&&L}}return L&&!I.defaultPrevented}function Sw(u,p,w){if(typeof u=="function")w&&(u=m(u,w));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(u,p||0)}function Tw(u){u.g=Sw(()=>{u.g=null,u.i&&(u.i=!1,Tw(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class BA extends V{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tw(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(u){V.call(this),this.h=u,this.g={}}N(ll,V);var bw=[];function Nw(u){M(u.g,function(p,w){this.g.hasOwnProperty(w)&&sm(p)},u),u.g={}}ll.prototype.N=function(){ll.aa.N.call(this),Nw(this)},ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var am=l.JSON.stringify,qA=l.JSON.parse,GA=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function lm(){}lm.prototype.h=null;function Cw(u){return u.h||(u.h=u.i())}function Iw(){}var cl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cm(){K.call(this,"d")}N(cm,K);function um(){K.call(this,"c")}N(um,K);var Ii={},Pw=null;function _u(){return Pw=Pw||new At}Ii.La="serverreachability";function Rw(u){K.call(this,Ii.La,u)}N(Rw,K);function ul(u){const p=_u();Wt(p,new Rw(p))}Ii.STAT_EVENT="statevent";function jw(u,p){K.call(this,Ii.STAT_EVENT,u),this.stat=p}N(jw,K);function Kt(u){const p=_u();Wt(p,new jw(p,u))}Ii.Ma="timingevent";function Aw(u,p){K.call(this,Ii.Ma,u),this.size=p}N(Aw,K);function dl(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function hl(){this.g=!0}hl.prototype.xa=function(){this.g=!1};function HA(u,p,w,I,L,$){u.info(function(){if(u.g)if($)for(var X="",He=$.split("&"),Tt=0;Tt<He.length;Tt++){var Fe=He[Tt].split("=");if(1<Fe.length){var kt=Fe[0];Fe=Fe[1];var Dt=kt.split("_");X=2<=Dt.length&&Dt[1]=="type"?X+(kt+"="+Fe+"&"):X+(kt+"=redacted&")}}else X=null;else X=$;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+w+`
`+X})}function WA(u,p,w,I,L,$,X){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+w+`
`+$+" "+X})}function Eo(u,p,w,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+QA(u,w)+(I?" "+I:"")})}function KA(u,p){u.info(function(){return"TIMEOUT: "+p})}hl.prototype.info=function(){};function QA(u,p){if(!u.g)return p;if(!p)return null;try{var w=JSON.parse(p);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var I=w[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var $=L[0];if($!="noop"&&$!="stop"&&$!="close")for(var X=1;X<L.length;X++)L[X]=""}}}}return am(w)}catch{return p}}var Eu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dm;function Su(){}N(Su,lm),Su.prototype.g=function(){return new XMLHttpRequest},Su.prototype.i=function(){return{}},dm=new Su;function ys(u,p,w,I){this.j=u,this.i=p,this.l=w,this.R=I||1,this.U=new ll(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dw}function Dw(){this.i=null,this.g="",this.h=!1}var Ow={},hm={};function fm(u,p,w){u.L=1,u.v=Cu(Lr(p)),u.m=w,u.P=!0,Mw(u,null)}function Mw(u,p){u.F=Date.now(),Tu(u),u.A=Lr(u.v);var w=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Yw(w.i,"t",I),u.C=0,w=u.j.J,u.h=new Dw,u.g=m0(u.j,w?p:null,!u.m),0<u.O&&(u.M=new BA(m(u.Y,u,u.g),u.O)),p=u.U,w=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(bw[0]=L.toString()),L=bw);for(var $=0;$<L.length;$++){var X=gs(w,L[$],I||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),ul(),HA(u.i,u.u,u.A,u.l,u.R,u.m)}ys.prototype.ca=function(u){u=u.target;const p=this.M;p&&Vr(u)==3?p.j():this.Y(u)},ys.prototype.Y=function(u){try{if(u==this.g)e:{const Dt=Vr(this.g);var p=this.g.Ba();const bo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||r0(this.g)))){this.J||Dt!=4||p==7||(p==8||0>=bo?ul(3):ul(2)),mm(this);var w=this.g.Z();this.X=w;t:if(Lw(this)){var I=r0(this.g);u="";var L=I.length,$=Vr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),fl(this);var X="";break t}this.h.i=new l.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!($&&p==L-1)});I.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=w==200,WA(this.i,this.u,this.A,this.l,this.R,Dt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Tt=this.g;if((He=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(He)){var Fe=He;break t}}Fe=null}if(w=Fe)Eo(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pm(this,w);else{this.o=!1,this.s=3,Kt(12),Pi(this),fl(this);break e}}if(this.P){w=!0;let Gn;for(;!this.J&&this.C<X.length;)if(Gn=YA(this,X),Gn==hm){Dt==4&&(this.s=4,Kt(14),w=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Ow){this.s=4,Kt(15),Eo(this.i,this.l,X,"[Invalid Chunk]"),w=!1;break}else Eo(this.i,this.l,Gn,null),pm(this,Gn);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||X.length!=0||this.h.h||(this.s=1,Kt(16),w=!1),this.o=this.o&&w,!w)Eo(this.i,this.l,X,"[Invalid Chunked Response]"),Pi(this),fl(this);else if(0<X.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),_m(kt),kt.M=!0,Kt(11))}}else Eo(this.i,this.l,X,null),pm(this,X);Dt==4&&Pi(this),this.o&&!this.J&&(Dt==4?u0(this.j,this):(this.o=!1,Tu(this)))}else fk(this.g),w==400&&0<X.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Pi(this),fl(this)}}}catch{}finally{}};function Lw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function YA(u,p){var w=u.C,I=p.indexOf(`
`,w);return I==-1?hm:(w=Number(p.substring(w,I)),isNaN(w)?Ow:(I+=1,I+w>p.length?hm:(p=p.slice(I,I+w),u.C=I+w,p)))}ys.prototype.cancel=function(){this.J=!0,Pi(this)};function Tu(u){u.S=Date.now()+u.I,Vw(u,u.I)}function Vw(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=dl(m(u.ba,u),p)}function mm(u){u.B&&(l.clearTimeout(u.B),u.B=null)}ys.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(KA(this.i,this.A),this.L!=2&&(ul(),Kt(17)),Pi(this),this.s=2,fl(this)):Vw(this,this.S-u)};function fl(u){u.j.G==0||u.J||u0(u.j,u)}function Pi(u){mm(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Nw(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function pm(u,p){try{var w=u.j;if(w.G!=0&&(w.g==u||gm(w.h,u))){if(!u.K&&gm(w.h,u)&&w.G==3){try{var I=w.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)ku(w),ju(w);else break e;wm(w),Kt(18)}}else w.za=L[1],0<w.za-w.T&&37500>L[2]&&w.F&&w.v==0&&!w.C&&(w.C=dl(m(w.Za,w),6e3));if(1>=$w(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ji(w,11)}else if((u.K||w.g==u)&&ku(w),!_(p))for(L=w.Da.g.parse(p),p=0;p<L.length;p++){let Fe=L[p];if(w.T=Fe[0],Fe=Fe[1],w.G==2)if(Fe[0]=="c"){w.K=Fe[1],w.ia=Fe[2];const kt=Fe[3];kt!=null&&(w.la=kt,w.j.info("VER="+w.la));const Dt=Fe[4];Dt!=null&&(w.Aa=Dt,w.j.info("SVER="+w.Aa));const bo=Fe[5];bo!=null&&typeof bo=="number"&&0<bo&&(I=1.5*bo,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Gn=u.g;if(Gn){const Ou=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ou){var $=I.h;$.g||Ou.indexOf("spdy")==-1&&Ou.indexOf("quic")==-1&&Ou.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ym($,$.h),$.h=null))}if(I.D){const Em=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Em&&(I.ya=Em,Qe(I.I,I.D,Em))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var X=u;if(I.qa=f0(I,I.J?I.ia:null,I.W),X.K){zw(I.h,X);var He=X,Tt=I.L;Tt&&(He.I=Tt),He.B&&(mm(He),Tu(He)),I.g=X}else l0(I);0<w.i.length&&Au(w)}else Fe[0]!="stop"&&Fe[0]!="close"||ji(w,7);else w.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ji(w,7):xm(w):Fe[0]!="noop"&&w.l&&w.l.ta(Fe),w.v=0)}}ul(4)}catch{}}var XA=class{constructor(u,p){this.g=u,this.map=p}};function Fw(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $w(u){return u.h?1:u.g?u.g.size:0}function gm(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ym(u,p){u.g?u.g.add(p):u.h=p}function zw(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Fw.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Bw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const w of u.g.values())p=p.concat(w.D);return p}return v(u.i)}function JA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],w=u.length,I=0;I<w;I++)p.push(u[I]);return p}p=[],w=0;for(I in u)p[w++]=u[I];return p}function ZA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var w=0;w<u;w++)p.push(w);return p}p=[],w=0;for(const I in u)p[w++]=I;return p}}}function qw(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var w=ZA(u),I=JA(u),L=I.length,$=0;$<L;$++)p.call(void 0,I[$],w&&w[$],u)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ek(u,p){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var I=u[w].indexOf("="),L=null;if(0<=I){var $=u[w].substring(0,I);L=u[w].substring(I+1)}else $=u[w];p($,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ri(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ri){this.h=u.h,bu(this,u.j),this.o=u.o,this.g=u.g,Nu(this,u.s),this.l=u.l;var p=u.i,w=new gl;w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),Hw(this,w),this.m=u.m}else u&&(p=String(u).match(Gw))?(this.h=!1,bu(this,p[1]||"",!0),this.o=ml(p[2]||""),this.g=ml(p[3]||"",!0),Nu(this,p[4]),this.l=ml(p[5]||"",!0),Hw(this,p[6]||"",!0),this.m=ml(p[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}Ri.prototype.toString=function(){var u=[],p=this.j;p&&u.push(pl(p,Ww,!0),":");var w=this.g;return(w||p=="file")&&(u.push("//"),(p=this.o)&&u.push(pl(p,Ww,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(pl(w,w.charAt(0)=="/"?rk:nk,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",pl(w,ik)),u.join("")};function Lr(u){return new Ri(u)}function bu(u,p,w){u.j=w?ml(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Nu(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Hw(u,p,w){p instanceof gl?(u.i=p,ok(u.i,u.h)):(w||(p=pl(p,sk)),u.i=new gl(p,u.h))}function Qe(u,p,w){u.i.set(p,w)}function Cu(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ml(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function pl(u,p,w){return typeof u=="string"?(u=encodeURI(u).replace(p,tk),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ww=/[#\/\?@]/g,nk=/[#\?:]/g,rk=/[#\?]/g,sk=/[#\?@]/g,ik=/#/g;function gl(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function vs(u){u.g||(u.g=new Map,u.h=0,u.i&&ek(u.i,function(p,w){u.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}t=gl.prototype,t.add=function(u,p){vs(this),this.i=null,u=So(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(p),this.h+=1,this};function Kw(u,p){vs(u),p=So(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Qw(u,p){return vs(u),p=So(u,p),u.g.has(p)}t.forEach=function(u,p){vs(this),this.g.forEach(function(w,I){w.forEach(function(L){u.call(p,L,I,this)},this)},this)},t.na=function(){vs(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),w=[];for(let I=0;I<p.length;I++){const L=u[I];for(let $=0;$<L.length;$++)w.push(p[I])}return w},t.V=function(u){vs(this);let p=[];if(typeof u=="string")Qw(this,u)&&(p=p.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)p=p.concat(u[w])}return p},t.set=function(u,p){return vs(this),this.i=null,u=So(this,u),Qw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Yw(u,p,w){Kw(u,p),0<w.length&&(u.i=null,u.g.set(So(u,p),v(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var w=0;w<p.length;w++){var I=p[w];const $=encodeURIComponent(String(I)),X=this.V(I);for(I=0;I<X.length;I++){var L=$;X[I]!==""&&(L+="="+encodeURIComponent(String(X[I]))),u.push(L)}}return this.i=u.join("&")};function So(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function ok(u,p){p&&!u.j&&(vs(u),u.i=null,u.g.forEach(function(w,I){var L=I.toLowerCase();I!=L&&(Kw(this,I),Yw(this,L,w))},u)),u.j=p}function ak(u,p){const w=new hl;if(l.Image){const I=new Image;I.onload=x(xs,w,"TestLoadImage: loaded",!0,p,I),I.onerror=x(xs,w,"TestLoadImage: error",!1,p,I),I.onabort=x(xs,w,"TestLoadImage: abort",!1,p,I),I.ontimeout=x(xs,w,"TestLoadImage: timeout",!1,p,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function lk(u,p){const w=new hl,I=new AbortController,L=setTimeout(()=>{I.abort(),xs(w,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(L),$.ok?xs(w,"TestPingServer: ok",!0,p):xs(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),xs(w,"TestPingServer: error",!1,p)})}function xs(u,p,w,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(w)}catch{}}function ck(){this.g=new GA}function uk(u,p,w){const I=w||"";try{qw(u,function(L,$){let X=L;d(L)&&(X=am(L)),p.push(I+$+"="+encodeURIComponent(X))})}catch(L){throw p.push(I+"type="+encodeURIComponent("_badmap")),L}}function Iu(u){this.l=u.Ub||null,this.j=u.eb||!1}N(Iu,lm),Iu.prototype.g=function(){return new Pu(this.l,this.j)},Iu.prototype.i=function(u){return function(){return u}}({});function Pu(u,p){At.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Pu,At),t=Pu.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,vl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?yl(this):vl(this),this.readyState==3&&Xw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,yl(this))},t.Qa=function(u){this.g&&(this.response=u,yl(this))},t.ga=function(){this.g&&yl(this)};function yl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=p.next();return u.join(`\r
`)};function vl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Pu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jw(u){let p="";return M(u,function(w,I){p+=I,p+=":",p+=w,p+=`\r
`}),p}function vm(u,p,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Jw(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Qe(u,p,w))}function it(u){At.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(it,At);var dk=/^https?$/i,hk=["POST","PUT"];t=it.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dm.g(),this.v=this.o?Cw(this.o):Cw(dm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){Zw(this,$);return}if(u=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)w.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())w.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find($=>$.toLowerCase()=="content-type"),L=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hk,p,void 0))||I||L||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,X]of w)this.g.setRequestHeader($,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{n0(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Zw(this,$)}};function Zw(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,e0(u),Ru(u)}function e0(u){u.A||(u.A=!0,Wt(u,"complete"),Wt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Wt(this,"complete"),Wt(this,"abort"),Ru(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ru(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?t0(this):this.bb())},t.bb=function(){t0(this)};function t0(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Vr(u)!=4||u.Z()!=2)){if(u.u&&Vr(u)==4)Sw(u.Ea,0,u);else if(Wt(u,"readystatechange"),Vr(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var I;if(I=X===0){var L=String(u.D).match(Gw)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),I=!dk.test(L?L.toLowerCase():"")}w=I}if(w)Wt(u,"complete"),Wt(u,"success");else{u.m=6;try{var $=2<Vr(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",e0(u)}}finally{Ru(u)}}}}function Ru(u,p){if(u.g){n0(u);const w=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Wt(u,"ready");try{w.onreadystatechange=I}catch{}}}function n0(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Vr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),qA(p)}};function r0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fk(u){const p={};u=(u.g&&2<=Vr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(_(u[I]))continue;var w=k(u[I]);const L=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const $=p[L]||[];p[L]=$,$.push(w)}b(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(u,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||p}function s0(u){this.Aa=0,this.i=[],this.j=new hl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,u),this.cb=xl("retryDelaySeedMs",1e4,u),this.Wa=xl("forwardChannelMaxRetries",2,u),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fw(u&&u.concurrentRequestLimit),this.Da=new ck,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=s0.prototype,t.la=8,t.G=1,t.connect=function(u,p,w,I){Kt(0),this.W=u,this.H=p||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=f0(this,null,this.W),Au(this)};function xm(u){if(i0(u),u.G==3){var p=u.U++,w=Lr(u.I);if(Qe(w,"SID",u.K),Qe(w,"RID",p),Qe(w,"TYPE","terminate"),wl(u,w),p=new ys(u,u.j,p),p.L=2,p.v=Cu(Lr(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!w&&l.Image&&(new Image().src=p.v,w=!0),w||(p.g=m0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Tu(p)}h0(u)}function ju(u){u.g&&(_m(u),u.g.cancel(),u.g=null)}function i0(u){ju(u),u.u&&(l.clearTimeout(u.u),u.u=null),ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Au(u){if(!Uw(u.h)&&!u.s){u.s=!0;var p=u.Ga;se||Y(),U||(se(),U=!0),z.add(p,u),u.B=0}}function mk(u,p){return $w(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=dl(m(u.Ga,u,p),d0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new ys(this,this.j,u);let $=this.o;if(this.S&&($?($=S($),R($,this.S)):$=this.S),this.m!==null||this.O||(L.H=$,$=null),this.P)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=a0(this,L,p),w=Lr(this.I),Qe(w,"RID",u),Qe(w,"CVER",22),this.D&&Qe(w,"X-HTTP-Session-Id",this.D),wl(this,w),$&&(this.O?p="headers="+encodeURIComponent(String(Jw($)))+"&"+p:this.m&&vm(w,this.m,$)),ym(this.h,L),this.Ua&&Qe(w,"TYPE","init"),this.P?(Qe(w,"$req",p),Qe(w,"SID","null"),L.T=!0,fm(L,w,null)):fm(L,w,p),this.G=2}}else this.G==3&&(u?o0(this,u):this.i.length==0||Uw(this.h)||o0(this))};function o0(u,p){var w;p?w=p.l:w=u.U++;const I=Lr(u.I);Qe(I,"SID",u.K),Qe(I,"RID",w),Qe(I,"AID",u.T),wl(u,I),u.m&&u.o&&vm(I,u.m,u.o),w=new ys(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),p&&(u.i=p.D.concat(u.i)),p=a0(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ym(u.h,w),fm(w,I,p)}function wl(u,p){u.H&&M(u.H,function(w,I){Qe(p,I,w)}),u.l&&qw({},function(w,I){Qe(p,I,w)})}function a0(u,p,w){w=Math.min(u.i.length,w);var I=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let $=-1;for(;;){const X=["count="+w];$==-1?0<w?($=L[0].g,X.push("ofs="+$)):$=0:X.push("ofs="+$);let He=!0;for(let Tt=0;Tt<w;Tt++){let Fe=L[Tt].g;const kt=L[Tt].map;if(Fe-=$,0>Fe)$=Math.max(0,L[Tt].g-100),He=!1;else try{uk(kt,X,"req"+Fe+"_")}catch{I&&I(kt)}}if(He){I=X.join("&");break e}}}return u=u.i.splice(0,w),p.D=u,I}function l0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;se||Y(),U||(se(),U=!0),z.add(p,u),u.v=0}}function wm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=dl(m(u.Fa,u),d0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,c0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=dl(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),ju(this),c0(this))};function _m(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function c0(u){u.g=new ys(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Lr(u.qa);Qe(p,"RID","rpc"),Qe(p,"SID",u.K),Qe(p,"AID",u.T),Qe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(p,"TO",u.ja),Qe(p,"TYPE","xmlhttp"),wl(u,p),u.m&&u.o&&vm(p,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Cu(Lr(p)),w.m=null,w.P=!0,Mw(w,u)}t.Za=function(){this.C!=null&&(this.C=null,ju(this),wm(this),Kt(19))};function ku(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function u0(u,p){var w=null;if(u.g==p){ku(u),_m(u),u.g=null;var I=2}else if(gm(u.h,p))w=p.D,zw(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){w=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;I=_u(),Wt(I,new Aw(I,w)),Au(u)}else l0(u);else if(L=p.s,L==3||L==0&&0<p.X||!(I==1&&mk(u,p)||I==2&&wm(u)))switch(w&&0<w.length&&(p=u.h,p.i=p.i.concat(w)),L){case 1:ji(u,5);break;case 4:ji(u,10);break;case 3:ji(u,6);break;default:ji(u,2)}}}function d0(u,p){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*p}function ji(u,p){if(u.j.info("Error code "+p),p==2){var w=m(u.fb,u),I=u.Xa;const L=!I;I=new Ri(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bu(I,"https"),Cu(I),L?ak(I.toString(),w):lk(I.toString(),w)}else Kt(2);u.G=0,u.l&&u.l.sa(p),h0(u),i0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function h0(u){if(u.G=0,u.ka=[],u.l){const p=Bw(u.h);(p.length!=0||u.i.length!=0)&&(y(u.ka,p),y(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function f0(u,p,w){var I=w instanceof Ri?Lr(w):new Ri(w);if(I.g!="")p&&(I.g=p+"."+I.g),Nu(I,I.s);else{var L=l.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var $=new Ri(null);I&&bu($,I),p&&($.g=p),L&&Nu($,L),w&&($.l=w),I=$}return w=u.D,p=u.ya,w&&p&&Qe(I,w,p),Qe(I,"VER",u.la),wl(u,I),I}function m0(u,p,w){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new it(new Iu({eb:w})):new it(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p0(){}t=p0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Du(){}Du.prototype.g=function(u,p){return new fn(u,p)};function fn(u,p){At.call(this),this.g=new s0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new To(this)}N(fn,At),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){xm(this.g)},fn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=am(u),u=w);p.i.push(new XA(p.Ya++,u)),p.G==3&&Au(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,xm(this.g),delete this.g,fn.aa.N.call(this)};function g0(u){cm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const w in p){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}N(g0,cm);function y0(){um.call(this),this.status=1}N(y0,um);function To(u){this.g=u}N(To,p0),To.prototype.ua=function(){Wt(this.g,"a")},To.prototype.ta=function(u){Wt(this.g,new g0(u))},To.prototype.sa=function(u){Wt(this.g,new y0)},To.prototype.ra=function(){Wt(this.g,"b")},Du.prototype.createWebChannel=Du.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,LR=function(){return new Du},MR=function(){return _u()},OR=Ii,my={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Eu.NO_ERROR=0,Eu.TIMEOUT=8,Eu.HTTP_ERROR=6,Fd=Eu,kw.COMPLETE="complete",DR=kw,Iw.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",At.prototype.listen=At.prototype.K,zl=Iw,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,kR=it}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const t1="@firebase/firestore",n1="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new Sx("@firebase/firestore");function Ro(){return ho.logLevel}function ie(t,...e){if(ho.logLevel<=Re.DEBUG){const n=e.map(Mx);ho.debug(`Firestore (${rl}): ${t}`,...n)}}function us(t,...e){if(ho.logLevel<=Re.ERROR){const n=e.map(Mx);ho.error(`Firestore (${rl}): ${t}`,...n)}}function La(t,...e){if(ho.logLevel<=Re.WARN){const n=e.map(Mx);ho.warn(`Firestore (${rl}): ${t}`,...n)}}function Mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VR(t,r,n)}function VR(t,e,n){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw us(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||VR(e,s,r)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class A${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k${constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ki,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ki)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new FR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class D${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new D$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class r1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new r1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new r1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=L$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function py(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return _p(s)===_p(i)?je(s,i):_p(s)?1:-1}return je(t.length,e.length)}const V$=55296,F$=57343;function _p(t){const e=t.charCodeAt(0);return e>=V$&&e<=F$}function Va(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="__name__";class gr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return je(e.length,n.length)}static compareSegments(e,n){const r=gr.isNumericId(e),s=gr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gr.extractNumericId(e).compare(gr.extractNumericId(n)):py(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ni.fromString(e.substring(4,e.length-2))}}class We extends gr{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new We(n)}static emptyPath(){return new We([])}}const U$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends gr{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return U$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s1}static keyField(){return new Ct([s1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(We.fromString(e))}static fromName(e){return new fe(We.fromString(e).popFirst(5))}static empty(){return new fe(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $$(t,e,n,r){if(e===!0&&r===!0)throw new te(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function i1(t){if(!fe.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function o1(t){if(fe.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $R(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function Zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function mu(t,e){if(!$R(t))throw new te(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=-62135596800,l1=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*l1);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<a1)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l1}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mu(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:mt("string",Je._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Je(0,0))}static max(){return new we(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function z$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new di(s,fe.empty(),e)}function B$(t){return new di(t.readTime,t.key,Dc)}class di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new di(we.min(),fe.empty(),Dc)}static max(){return new di(we.max(),fe.empty(),Dc)}}function q$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==G$)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function W$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=-1;function qf(t){return t==null}function zh(t){return t===0&&1/t==-1/0}function K$(t){return typeof t=="number"&&Number.isInteger(t)&&!zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="";function Q$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c1(e)),e=Y$(t.get(n),e);return c1(e)}function Y$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zR:n+="";break;default:n+=i}}return n}function c1(t){return t+zR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ti(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d1(this.data.getIterator())}getIteratorFrom(e){return new d1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class d1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new xn([])}unionWith(e){let n=new vt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qR("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const X$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=X$.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fi(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="server_timestamp",HR="__type__",WR="__previous_value__",KR="__local_write_time__";function Fx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[HR])==null?void 0:r.stringValue)===GR}function Gf(t){const e=t.mapValue.fields[WR];return Fx(e)?Gf(e):e}function Oc(t){const e=hi(t.mapValue.fields[KR].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Bh="(default)";class Mc{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="__type__",YR="__max__",dd={mapValue:{fields:{__type__:{stringValue:YR}}}},XR="__vector__",qh="value";function mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fx(t)?4:e8(t)?9007199254740991:Z$(t)?10:11:ve(28295,{value:t})}function Dr(t,e){if(t===e)return!0;const n=mi(t);if(n!==mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=hi(s.timestampValue),l=hi(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return fi(s.bytesValue).isEqual(fi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=lt(s.doubleValue),l=lt(i.doubleValue);return a===l?zh(a)===zh(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(u1(a)!==u1(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Dr(a[c],l[c])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function Lc(t,e){return(t.values||[]).find(n=>Dr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;const n=mi(t),r=mi(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lt(i.integerValue||i.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return h1(t.timestampValue,e.timestampValue);case 4:return h1(Oc(t),Oc(e));case 5:return py(t.stringValue,e.stringValue);case 6:return function(i,a){const l=fi(i),c=fi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=je(l[d],c[d]);if(h!==0)return h}return je(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=je(lt(i.latitude),lt(a.latitude));return l!==0?l:je(lt(i.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return f1(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,x,N,v;const l=i.fields||{},c=a.fields||{},d=(m=l[qh])==null?void 0:m.arrayValue,h=(x=c[qh])==null?void 0:x.arrayValue,f=je(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:f1(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===dd.mapValue&&a===dd.mapValue)return 0;if(i===dd.mapValue)return 1;if(a===dd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=py(c[f],h[f]);if(m!==0)return m;const x=Fa(l[c[f]],d[h[f]]);if(x!==0)return x}return je(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function h1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=hi(t),r=hi(e),s=je(n.seconds,r.seconds);return s!==0?s:je(n.nanos,r.nanos)}function f1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fa(n[s],r[s]);if(i)return i}return je(n.length,r.length)}function Ua(t){return gy(t)}function gy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=gy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${gy(n.fields[a])}`;return s+"}"}(t.mapValue):ve(61005,{value:t})}function Ud(t){switch(mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gf(t);return e?16+Ud(e):16;case 5:return 2*t.stringValue.length;case 6:return fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ud(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ti(r.fields,(i,a)=>{s+=i.length+Ud(a)}),s}(t.mapValue);default:throw ve(13486,{value:t})}}function m1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yy(t){return!!t&&"integerValue"in t}function Ux(t){return!!t&&"arrayValue"in t}function p1(t){return!!t&&"nullValue"in t}function g1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $d(t){return!!t&&"mapValue"in t}function Z$(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[QR])==null?void 0:r.stringValue)===XR}function ic(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return{...t}}function e8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===YR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=Ct.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ic(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$d(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ti(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(ic(this.value))}}function JR(t){const e=[];return Ti(t.fields,(n,r)=>{const s=new Ct([n]);if($d(r)){const i=JR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new $t(e,0,we.min(),we.min(),we.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new $t(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new $t(e,2,n,we.min(),we.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,we.min(),we.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function y1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(a.referenceValue),n.key):r=Fa(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function v1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function t8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{}class ft extends ZR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r8(e,n,r):n==="array-contains"?new o8(e,r):n==="in"?new a8(e,r):n==="not-in"?new l8(e,r):n==="array-contains-any"?new c8(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s8(e,r):new i8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&mi(this.value)===mi(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends ZR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cr(e,n)}matches(e){return ej(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ej(t){return t.op==="and"}function tj(t){return n8(t)&&ej(t)}function n8(t){for(const e of t.filters)if(e instanceof cr)return!1;return!0}function vy(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(tj(t))return t.filters.map(e=>vy(e)).join(",");{const e=t.filters.map(n=>vy(n)).join(",");return`${t.op}(${e})`}}function nj(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&Dr(r.value,s.value)}(t,e):t instanceof cr?function(r,s){return s instanceof cr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&nj(a,s.filters[l]),!0):!1}(t,e):void ve(19439)}function rj(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof cr?function(n){return n.op.toString()+" {"+n.getFilters().map(rj).join(" ,")+"}"}(t):"Filter"}class r8 extends ft{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class s8 extends ft{constructor(e,n){super(e,"in",n),this.keys=sj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i8 extends ft{constructor(e,n){super(e,"not-in",n),this.keys=sj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class o8 extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ux(n)&&Lc(n.arrayValue,this.value)}}class a8 extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class l8 extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class c8 extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ux(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function x1(t,e=null,n=[],r=[],s=null,i=null,a=null){return new u8(t,e,n,r,s,i,a)}function $x(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.Te=n}return e.Te}function zx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!t8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v1(t.startAt,e.startAt)&&v1(t.endAt,e.endAt)}function xy(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function d8(t,e,n,r,s,i,a,l){return new ol(t,e,n,r,s,i,a,l)}function Bx(t){return new ol(t)}function w1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ij(t){return t.collectionGroup!==null}function oc(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(Ct.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Vc(i,r))}),n.has(Ct.keyField().canonicalString())||e.Ie.push(new Vc(Ct.keyField(),r))}return e.Ie}function Pr(t){const e=Ee(t);return e.Ee||(e.Ee=h8(e,oc(t))),e.Ee}function h8(t,e){if(t.limitType==="F")return x1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vc(s.field,i)});const n=t.endAt?new Gh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gh(t.startAt.position,t.startAt.inclusive):null;return x1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wy(t,e){const n=t.filters.concat([e]);return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _y(t,e,n){return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hf(t,e){return zx(Pr(t),Pr(e))&&t.limitType===e.limitType}function oj(t){return`${$x(Pr(t))}|lt:${t.limitType}`}function jo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rj(s)).join(", ")}]`),qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ua(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ua(s)).join(",")),`Target(${r})`}(Pr(t))}; limitType=${t.limitType})`}function Wf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=y1(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,oc(r),s)||r.endAt&&!function(a,l,c){const d=y1(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,oc(r),s))}(t,e)}function f8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aj(t){return(e,n)=>{let r=!1;for(const s of oc(t)){const i=m8(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function m8(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Fa(c,d):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return BR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=new st(fe.comparator);function ds(){return p8}const lj=new st(fe.comparator);function Bl(...t){let e=lj;for(const n of t)e=e.insert(n.key,n);return e}function cj(t){let e=lj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return ac()}function uj(){return ac()}function ac(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const g8=new st(fe.comparator),y8=new vt(fe.comparator);function Ae(...t){let e=y8;for(const n of t)e=e.add(n);return e}const v8=new vt(je);function x8(){return v8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function dj(t){return{integerValue:""+t}}function w8(t,e){return K$(e)?dj(e):qx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._=void 0}}function _8(t,e,n){return t instanceof Hh?function(s,i){const a={fields:{[HR]:{stringValue:GR},[KR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fx(i)&&(i=Gf(i)),i&&(a.fields[WR]=i),{mapValue:a}}(n,e):t instanceof Fc?fj(t,e):t instanceof Uc?mj(t,e):function(s,i){const a=hj(s,i),l=_1(a)+_1(s.Ae);return yy(a)&&yy(s.Ae)?dj(l):qx(s.serializer,l)}(t,e)}function E8(t,e,n){return t instanceof Fc?fj(t,e):t instanceof Uc?mj(t,e):n}function hj(t,e){return t instanceof Wh?function(r){return yy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hh extends Kf{}class Fc extends Kf{constructor(e){super(),this.elements=e}}function fj(t,e){const n=pj(e);for(const r of t.elements)n.some(s=>Dr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uc extends Kf{constructor(e){super(),this.elements=e}}function mj(t,e){let n=pj(e);for(const r of t.elements)n=n.filter(s=>!Dr(s,r));return{arrayValue:{values:n}}}class Wh extends Kf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _1(t){return lt(t.integerValue||t.doubleValue)}function pj(t){return Ux(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function S8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fc&&s instanceof Fc||r instanceof Uc&&s instanceof Uc?Va(r.elements,s.elements,Dr):r instanceof Wh&&s instanceof Wh?Dr(r.Ae,s.Ae):r instanceof Hh&&s instanceof Hh}(t.transform,e.transform)}class T8{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qf{}function gj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gx(t.key,ir.none()):new pu(t.key,t.data,ir.none());{const n=t.data,r=ln.empty();let s=new vt(Ct.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new bi(t.key,r,new xn(s.toArray()),ir.none())}}function b8(t,e,n){t instanceof pu?function(s,i,a){const l=s.value.clone(),c=S1(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof bi?function(s,i,a){if(!zd(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=S1(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(yj(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof pu?function(i,a,l,c){if(!zd(i.precondition,a))return l;const d=i.value.clone(),h=T1(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof bi?function(i,a,l,c){if(!zd(i.precondition,a))return l;const d=T1(i.fieldTransforms,c,a),h=a.data;return h.setAll(yj(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return zd(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function N8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hj(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function E1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Va(r,s,(i,a)=>S8(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pu extends Qf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bi extends Qf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function S1(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,E8(a,l,n[s]))}return r}function T1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,_8(i,a,e))}return r}class Gx extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C8 extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&b8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uj();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=gj(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>E1(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>E1(n,r))}}class Hx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return g8}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Hx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Me;function j8(t){switch(t){case B.OK:return ve(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function vj(t){if(t===void 0)return us("GRPC error has no .code"),B.UNKNOWN;switch(t){case dt.OK:return B.OK;case dt.CANCELLED:return B.CANCELLED;case dt.UNKNOWN:return B.UNKNOWN;case dt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case dt.INTERNAL:return B.INTERNAL;case dt.UNAVAILABLE:return B.UNAVAILABLE;case dt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case dt.NOT_FOUND:return B.NOT_FOUND;case dt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case dt.ABORTED:return B.ABORTED;case dt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case dt.DATA_LOSS:return B.DATA_LOSS;default:return ve(39323,{code:t})}}(Me=dt||(dt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=new ni([4294967295,4294967295],0);function b1(t){const e=A8().encode(t),n=new AR;return n.update(e),new Uint8Array(n.digest())}function N1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ni([n,r],0),new ni([s,i],0)]}class Wx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ni.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ni.fromNumber(r)));return s.compare(k8)===1&&(s=new ni([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b1(e),[r,s]=N1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Wx(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=b1(e),[r,s]=N1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yf(we.min(),s,new st(je),ds(),Ae())}}class gu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class xj{constructor(e,n){this.targetId=e,this.Ce=n}}class wj{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class C1{constructor(){this.ve=0,this.Fe=I1(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve(38017,{changeType:i})}}),new gu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=I1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class D8{constructor(e){this.Ge=e,this.ze=new Map,this.je=ds(),this.Je=hd(),this.He=hd(),this.Ye=new st(je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(xy(i))if(r===0){const a=new fe(i.path);this.et(n,a,$t.newNoDocument(a,we.min()))}else ze(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=fi(r).toUint8Array()}catch(c){if(c instanceof qR)return La("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Wx(a,s,i)}catch(c){return La(c instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&xy(l.target)){const c=new fe(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,$t.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Yf(e,n,this.Ye,this.je,r);return this.je=ds(),this.Je=hd(),this.He=hd(),this.Ye=new st(je),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new C1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hd(){return new st(fe.comparator)}function I1(){return new st(fe.comparator)}const O8={asc:"ASCENDING",desc:"DESCENDING"},M8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L8={and:"AND",or:"OR"};class V8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ey(t,e){return t.useProto3Json||qf(e)?e:{value:e}}function Kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _j(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F8(t,e){return Kh(t,e.toTimestamp())}function Rr(t){return ze(!!t,49232),we.fromTimestamp(function(n){const r=hi(n);return new Je(r.seconds,r.nanos)}(t))}function Kx(t,e){return Sy(t,e).canonicalString()}function Sy(t,e){const n=function(s){return new We(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ej(t){const e=We.fromString(t);return ze(Cj(e),10190,{key:e.toString()}),e}function Ty(t,e){return Kx(t.databaseId,e.path)}function Ep(t,e){const n=Ej(e);if(n.get(1)!==t.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(Tj(n))}function Sj(t,e){return Kx(t.databaseId,e)}function U8(t){const e=Ej(t);return e.length===4?We.emptyPath():Tj(e)}function by(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tj(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function P1(t,e,n){return{name:Ty(t,e),fields:n.value.mapValue.fields}}function $8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ve(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Rt.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?B.UNKNOWN:vj(d.code);return new te(h,d.message||"")}(a);n=new wj(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ep(t,r.document.name),i=Rr(r.document.updateTime),a=r.document.createTime?Rr(r.document.createTime):we.min(),l=new ln({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Bd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ep(t,r.document),i=r.readTime?Rr(r.readTime):we.min(),a=$t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Bd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ep(t,r.document),i=r.removedTargetIds||[];n=new Bd([],i,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new R8(s,i),l=r.targetId;n=new xj(l,a)}}return n}function z8(t,e){let n;if(e instanceof pu)n={update:P1(t,e.key,e.value)};else if(e instanceof Gx)n={delete:Ty(t,e.key)};else if(e instanceof bi)n={update:P1(t,e.key,e.data),updateMask:X8(e.fieldMask)};else{if(!(e instanceof C8))return ve(16599,{Vt:e.type});n={verify:Ty(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Hh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Uc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wh)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ve(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:F8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve(27497)}(t,e.precondition)),n}function B8(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Rr(s.updateTime):Rr(i);return a.isEqual(we.min())&&(a=Rr(i)),new T8(a,s.transformResults||[])}(n,e))):[]}function q8(t,e){return{documents:[Sj(t,e.path)]}}function G8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sj(t,s);const i=function(d){if(d.length!==0)return Nj(cr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ao(m.field),direction:K8(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ey(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function H8(t){let e=U8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=bj(f);return m instanceof cr&&tj(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(N){return new Vc(ko(N.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,qf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,x=f.values||[];return new Gh(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,x=f.values||[];return new Gh(x,m)}(n.endAt)),d8(e,s,a,i,l,"F",c,d)}function W8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ko(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ko(n.unaryFilter.field);return ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(ko(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cr.create(n.compositeFilter.filters.map(r=>bj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function K8(t){return O8[t]}function Q8(t){return M8[t]}function Y8(t){return L8[t]}function Ao(t){return{fieldPath:t.canonicalString()}}function ko(t){return Ct.fromServerFormat(t.fieldPath)}function Nj(t){return t instanceof ft?function(n){if(n.op==="=="){if(g1(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NAN"}};if(p1(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g1(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NAN"}};if(p1(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(n.field),op:Q8(n.op),value:n.value}}}(t):t instanceof cr?function(n){const r=n.getFilters().map(s=>Nj(s));return r.length===1?r[0]:{compositeFilter:{op:Y8(n.op),filters:r}}}(t):ve(54877,{filter:t})}function X8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Cj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,r,s,i=we.min(),a=we.min(),l=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.yt=e}}function Z8(t){const e=H8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_y(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(){this.Cn=new tz}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(di.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class tz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(We.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ij=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Ij,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $a(0)}static cr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="LruGarbageCollector",nz=1048576;function A1([t,e],[n,r]){const s=je(t,n);return s===0?je(e,r):s}class rz{constructor(e){this.Ir=e,this.buffer=new vt(A1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(j1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){il(n)?ie(j1,"Ignoring IndexedDB error during garbage collection: ",n):await sl(n)}await this.Vr(3e5)})}}class iz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Bf.ce);const r=new rz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(R1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Ro()<=Re.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function oz(t,e){return new iz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lc(r.mutation,s,xn.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Vi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Bl();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=ds();const a=ac(),l=function(){return ac()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof bi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),lc(h.mutation,d,h.mutation.getFieldMask(),Je.now())):a.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new lz(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ac();let s=new st((a,l)=>a-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||xn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Ae()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=uj();h.forEach(m=>{if(!i.has(m)){const x=gj(n.get(m),r.get(m));x!==null&&f.set(m,x),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return G.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ij(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(Vi());let l=Dc,c=i;return a.next(d=>G.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ae())).next(h=>({batchId:l,changes:cj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Bl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Bl();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const d=function(f,m){return new ol(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,$t.newInvalidDocument(h)))});let l=Bl();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&lc(h.mutation,d,xn.empty(),Je.now()),Wf(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Z8(s.bundledQuery),readTime:Rr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(){this.overlays=new st(fe.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vi();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=Vi(),i=n.length+1,a=new fe(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new st((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Vi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Vi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new P8(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.Qr=new vt(xt.$r),this.Ur=new vt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new fe(new We([])),r=new xt(n,e),s=new xt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new fe(new We([])),r=new xt(n,e),s=new xt(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return fe.comparator(e.key,n.key)||je(e.Yr,n.Yr)}static Kr(e,n){return je(e.Yr,n.Yr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(xt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new I8(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new xt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Vx:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),s=new xt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(je);return n.forEach(s=>{const i=new xt(s,0),a=new xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const a=new xt(new fe(i),0);let l=new vt(je);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xt(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e){this.ri=e,this.docs=function(){return new st(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=ds();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ds();const a=n.path,l=new fe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||q$(B$(h),r)<=0||(s.has(h.key)||Wf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pz(this)}getSize(e){return G.resolve(this.size)}}class pz extends az{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e){this.persistence=e,this.si=new xo(n=>$x(n),zx),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Qx,this.targetCount=0,this.ai=$a.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bf(0),this.li=!1,this.li=!0,this.hi=new hz,this.referenceDelegate=e(this),this.Pi=new gz(this),this.indexManager=new ez,this.remoteDocumentCache=function(s){return new mz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new J8(n),this.Ii=new uz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new fz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const s=new yz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class yz extends H${constructor(e){super(),this.currentSequenceNumber=e}}class Yx{constructor(e){this.persistence=e,this.Ri=new Qx,this.Vi=null}static mi(e){return new Yx(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=fe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qh{constructor(e,n){this.persistence=e,this.pi=new xo(r=>Q$(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=oz(this,n)}static mi(e,n){return new Qh(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ud(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Xx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Y3()?8:W$(Ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new vz;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ro()<=Re.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Ro()<=Re.DEBUG&&ie("QueryEngine","Query:",jo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ro()<=Re.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(n))):G.resolve())}ys(e,n){if(w1(n))return G.resolve(null);let r=Pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_y(n,null,"F"),r=Pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ae(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,_y(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return w1(n)||s.isEqual(we.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?G.resolve(null):(Ro()<=Re.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jo(n)),this.vs(e,a,n,z$(s,Dc)).next(l=>l))})}Ds(e,n){let r=new vt(aj(e));return n.forEach((s,i)=>{Wf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ro()<=Re.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",jo(n)),this.ps.getDocumentsMatchingQuery(e,n,di.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="LocalStore",wz=3e8;class _z{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new st(je),this.xs=new xo(i=>$x(i),zx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ez(t,e,n,r){return new _z(t,e,n,r)}async function Rj(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ae();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function Sz(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let x=G.resolve();return m.forEach(N=>{x=x.next(()=>h.getEntry(c,N)).next(v=>{const y=d.docVersions.get(N);ze(y!==null,48541),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function jj(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Tz(t,e){const n=Ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(Rt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(f,x),function(v,y,E){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=wz?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,x,h)&&l.push(n.Pi.updateTargetData(i,x))});let c=ds(),d=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(bz(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function bz(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=ds();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ie(Jx,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function Nz(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cz(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new qs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ny(t,e,n){const r=Ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!il(a))throw a;ie(Jx,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function k1(t,e,n){const r=Ee(t);let s=we.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=Ee(c),m=f.xs.get(h);return m!==void 0?G.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,Pr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:we.min(),n?i:Ae())).next(l=>(Iz(r,f8(e),l),{documents:l,Qs:i})))}function Iz(t,e,n){let r=t.Os.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class D1{constructor(){this.activeTargetIds=x8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pz{constructor(){this.Mo=new D1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new D1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="ConnectivityMonitor";class M1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(O1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(O1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd=null;function Cy(){return fd===null?fd=function(){return 268435456+Math.round(2147483648*Math.random())}():fd++,"0x"+fd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="RestConnection",jz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Az{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Cy(),l=this.zo(e,n.toUriEncodedString());ie(Sp,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=el(d);return this.Jo(e,l,c,r,h).then(f=>(ie(Sp,`Received RPC '${e}' ${a}: `,f),f),f=>{throw La(Sp,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=jz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class Dz extends Az{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Cy();return new Promise((l,c)=>{const d=new kR;d.setWithCredentials(!0),d.listenOnce(DR.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fd.NO_ERROR:const f=d.getResponseJson();ie(Lt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Fd.TIMEOUT:ie(Lt,`RPC '${e}' ${a} timed out`),c(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:const m=d.getStatus();if(ie(Lt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const v=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(N.status);c(new te(v,N.message))}else c(new te(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(B.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ie(Lt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);ie(Lt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Cy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LR(),l=MR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ie(Lt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,x=!1;const N=new kz({Yo:y=>{x?ie(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(m||(ie(Lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),ie(Lt,`RPC '${e}' stream ${s} sending:`,y),f.send(y))},Zo:()=>f.close()}),v=(y,E,_)=>{y.listen(E,T=>{try{_(T)}catch(P){setTimeout(()=>{throw P},0)}})};return v(f,zl.EventType.OPEN,()=>{x||(ie(Lt,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),v(f,zl.EventType.CLOSE,()=>{x||(x=!0,ie(Lt,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(f))}),v(f,zl.EventType.ERROR,y=>{x||(x=!0,La(Lt,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),N.a_(new te(B.UNAVAILABLE,"The operation could not be completed")))}),v(f,zl.EventType.MESSAGE,y=>{var E;if(!x){const _=y.data[0];ze(!!_,16349);const T=_,P=(T==null?void 0:T.error)||((E=T[0])==null?void 0:E.error);if(P){ie(Lt,`RPC '${e}' stream ${s} received error:`,P);const D=P.status;let M=function(C){const R=dt[C];if(R!==void 0)return vj(R)}(D),b=P.message;M===void 0&&(M=B.INTERNAL,b="Unknown error status: "+D+" with message "+P.message),x=!0,N.a_(new te(M,b)),f.close()}else ie(Lt,`RPC '${e}' stream ${s} received:`,_),N.u_(_)}}),v(l,OR.STAT_EVENT,y=>{y.stat===my.PROXY?ie(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===my.NOPROXY&&ie(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Tp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){return new V8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="PersistentStream";class kj{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new te(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(L1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(L1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Oz extends kj{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$8(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?Rr(a.readTime):we.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=by(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=xy(c)?{documents:q8(i,c)}:{query:G8(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=_j(i,a.resumeToken);const d=Ey(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(we.min())>0){l.readTime=Kh(i,a.snapshotVersion.toTimestamp());const d=Ey(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=W8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=by(this.serializer),n.removeTarget=e,this.q_(n)}}class Mz extends kj{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=B8(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=by(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>z8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{}class Vz extends Lz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Sy(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Sy(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Fz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class Uz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{wo(this)&&(ie(fo,"Restarting streams for network reachability change."),await async function(c){const d=Ee(c);d.Ea.add(4),await yu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Jf(d)}(this))})}),this.Ra=new Fz(r,s)}}async function Jf(t){if(wo(t))for(const e of t.da)await e(!0)}async function yu(t){for(const e of t.da)await e(!1)}function Dj(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nw(n)?tw(n):al(n).O_()&&ew(n,e))}function Zx(t,e){const n=Ee(t),r=al(n);n.Ia.delete(e),r.O_()&&Oj(n,e),n.Ia.size===0&&(r.O_()?r.L_():wo(n)&&n.Ra.set("Unknown"))}function ew(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(t).Y_(e)}function Oj(t,e){t.Va.Ue(e),al(t).Z_(e)}function tw(t){t.Va=new D8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),al(t).start(),t.Ra.ua()}function nw(t){return wo(t)&&!al(t).x_()&&t.Ia.size>0}function wo(t){return Ee(t).Ea.size===0}function Mj(t){t.Va=void 0}async function $z(t){t.Ra.set("Online")}async function zz(t){t.Ia.forEach((e,n)=>{ew(t,e)})}async function Bz(t,e){Mj(t),nw(t)?(t.Ra.ha(e),tw(t)):t.Ra.set("Unknown")}async function qz(t,e,n){if(t.Ra.set("Online"),e instanceof wj&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ie(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yh(t,r)}else if(e instanceof Bd?t.Va.Ze(e):e instanceof xj?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const r=await jj(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Rt.EMPTY_BYTE_STRING,h.snapshotVersion)),Oj(i,c);const f=new qs(h.target,c,d,h.sequenceNumber);ew(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ie(fo,"Failed to raise snapshot:",r),await Yh(t,r)}}async function Yh(t,e,n){if(!il(e))throw e;t.Ea.add(1),await yu(t),t.Ra.set("Offline"),n||(n=()=>jj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jf(t)})}function Lj(t,e){return e().catch(n=>Yh(t,n,e))}async function Zf(t){const e=Ee(t),n=pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vx;for(;Gz(e);)try{const s=await Nz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Hz(e,s)}catch(s){await Yh(e,s)}Vj(e)&&Fj(e)}function Gz(t){return wo(t)&&t.Ta.length<10}function Hz(t,e){t.Ta.push(e);const n=pi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Vj(t){return wo(t)&&!pi(t).x_()&&t.Ta.length>0}function Fj(t){pi(t).start()}async function Wz(t){pi(t).ra()}async function Kz(t){const e=pi(t);for(const n of t.Ta)e.ea(n.mutations)}async function Qz(t,e,n){const r=t.Ta.shift(),s=Hx.from(r,e,n);await Lj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zf(t)}async function Yz(t,e){e&&pi(t).X_&&await async function(r,s){if(function(a){return j8(a)&&a!==B.ABORTED}(s.code)){const i=r.Ta.shift();pi(r).B_(),await Lj(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zf(r)}}(t,e),Vj(t)&&Fj(t)}async function V1(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),ie(fo,"RemoteStore received new credentials");const r=wo(n);n.Ea.add(3),await yu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jf(n)}async function Xz(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Jf(n)):e||(n.Ea.add(2),await yu(n),n.Ra.set("Unknown"))}function al(t){return t.ma||(t.ma=function(n,r,s){const i=Ee(n);return i.sa(),new Oz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:$z.bind(null,t),t_:zz.bind(null,t),r_:Bz.bind(null,t),H_:qz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),nw(t)?tw(t):t.Ra.set("Unknown")):(await t.ma.stop(),Mj(t))})),t.ma}function pi(t){return t.fa||(t.fa=function(n,r,s){const i=Ee(n);return i.sa(),new Mz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wz.bind(null,t),r_:Yz.bind(null,t),ta:Kz.bind(null,t),na:Qz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zf(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new rw(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sw(t,e){if(us("AsyncQueue",`${e}: ${t}`),il(t))return new te(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{static emptySet(e){return new ua(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Bl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.ga=new st(fe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class za{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new za(e,n,ua.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Zz{constructor(){this.queries=U1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ee(n),i=s.queries;s.queries=U1(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new te(B.ABORTED,"Firestore shutting down"))}}function U1(){return new xo(t=>oj(t),Hf)}async function eB(t,e){const n=Ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Jz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=sw(a,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&iw(n)}async function tB(t,e){const n=Ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nB(t,e){const n=Ee(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&iw(n)}function rB(t,e,n){const r=Ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function iw(t){t.Ca.forEach(e=>{e.next()})}var Iy,$1;($1=Iy||(Iy={})).Ma="default",$1.Cache="cache";class sB{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Iy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.key=e}}class $j{constructor(e){this.key=e}}class iB{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=aj(e),this.tu=new ua(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new F1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),x=Wf(this.query,f)?f:null,N=!!m&&this.mutatedKeys.has(m.key),v=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let y=!1;m&&x?m.data.isEqual(x.data)?N!==v&&(r.track({type:3,doc:x}),y=!0):this.su(m,x)||(r.track({type:2,doc:x}),y=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),y=!0):m&&!x&&(r.track({type:1,doc:m}),y=!0,(c||d)&&(l=!0)),y&&(x?(a=a.add(x),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(x,N){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:y})}};return v(x)-v(N)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new za(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $j(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Uj(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ow="SyncEngine";class oB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aB{constructor(e){this.key=e,this.hu=!1}}class lB{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xo(l=>oj(l),Hf),this.Iu=new Map,this.Eu=new Set,this.du=new st(fe.comparator),this.Au=new Map,this.Ru=new Qx,this.Vu={},this.mu=new Map,this.fu=$a.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cB(t,e,n=!0){const r=Wj(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await zj(r,e,n,!0),s}async function uB(t,e){const n=Wj(t);await zj(n,e,!0,!1)}async function zj(t,e,n,r){const s=await Cz(t.localStore,Pr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await dB(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Dj(t.remoteStore,s),l}async function dB(t,e,n,r,s){t.pu=(f,m,x)=>async function(v,y,E,_){let T=y.view.ru(E);T.Cs&&(T=await k1(v.localStore,y.query,!1).then(({documents:b})=>y.view.ru(b,T)));const P=_&&_.targetChanges.get(y.targetId),D=_&&_.targetMismatches.get(y.targetId)!=null,M=y.view.applyChanges(T,v.isPrimaryClient,P,D);return B1(v,y.targetId,M.au),M.snapshot}(t,f,m,x);const i=await k1(t.localStore,e,!0),a=new iB(e,i.Qs),l=a.ru(i.documents),c=gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);B1(t,n,d.au);const h=new oB(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function hB(t,e,n){const r=Ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Hf(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ny(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zx(r.remoteStore,s.targetId),Py(r,s.targetId)}).catch(sl)):(Py(r,s.targetId),await Ny(r.localStore,s.targetId,!0))}async function fB(t,e){const n=Ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zx(n.remoteStore,r.targetId))}async function mB(t,e,n){const r=_B(t);try{const s=await function(a,l){const c=Ee(a),d=Je.now(),h=l.reduce((x,N)=>x.add(N.key),Ae());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=ds(),v=Ae();return c.Ns.getEntries(x,h).next(y=>{N=y,N.forEach((E,_)=>{_.isValidDocument()||(v=v.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,N)).next(y=>{f=y;const E=[];for(const _ of l){const T=N8(_,f.get(_.key).overlayedDocument);T!=null&&E.push(new bi(_.key,T,JR(T.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,E,l)}).next(y=>{m=y;const E=y.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(x,y.batchId,E)})}).then(()=>({batchId:m.batchId,changes:cj(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new st(je)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await vu(r,s.changes),await Zf(r.remoteStore)}catch(s){const i=sw(s,"Failed to persist write");n.reject(i)}}async function Bj(t,e){const n=Ee(t);try{const r=await Tz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ze(a.hu,14607):s.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await vu(n,r,e)}catch(r){await sl(r)}}function z1(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Ee(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&iw(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pB(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new st(fe.comparator);a=a.insert(i,$t.newNoDocument(i,we.min()));const l=Ae().add(i),c=new Yf(we.min(),new Map,new st(je),a,l);await Bj(r,c),r.du=r.du.remove(i),r.Au.delete(e),aw(r)}else await Ny(r.localStore,e,!1).then(()=>Py(r,e,n)).catch(sl)}async function gB(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await Sz(n.localStore,e);Gj(n,r,null),qj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vu(n,s)}catch(s){await sl(s)}}async function yB(t,e,n){const r=Ee(t);try{const s=await function(a,l){const c=Ee(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(ze(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);Gj(r,e,n),qj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vu(r,s)}catch(s){await sl(s)}}function qj(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Gj(t,e,n){const r=Ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Py(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Hj(t,r)})}function Hj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Zx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),aw(t))}function B1(t,e,n){for(const r of n)r instanceof Uj?(t.Ru.addReference(r.key,e),vB(t,r)):r instanceof $j?(ie(ow,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Hj(t,r.key)):ve(19791,{wu:r})}function vB(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ie(ow,"New document in limbo: "+n),t.Eu.add(r),aw(t))}function aw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new fe(We.fromString(e)),r=t.fu.next();t.Au.set(r,new aB(n)),t.du=t.du.insert(n,r),Dj(t.remoteStore,new qs(Pr(Bx(n.path)),r,"TargetPurposeLimboResolution",Bf.ce))}}async function vu(t,e,n){const r=Ee(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Xx.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=Ee(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(d,m=>G.forEach(m.Es,x=>h.persistence.referenceDelegate.addReference(f,m.targetId,x)).next(()=>G.forEach(m.ds,x=>h.persistence.referenceDelegate.removeReference(f,m.targetId,x)))))}catch(f){if(!il(f))throw f;ie(Jx,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const x=h.Ms.get(m),N=x.snapshotVersion,v=x.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function xB(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){ie(ow,"User change. New user:",e.toKey());const r=await Rj(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new te(B.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(n,r.Ls)}}function wB(t,e){const n=Ee(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Wj(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pB.bind(null,e),e.Pu.H_=nB.bind(null,e.eventManager),e.Pu.yu=rB.bind(null,e.eventManager),e}function _B(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yB.bind(null,e),e}class Xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ez(this.persistence,new xz,e.initialUser,this.serializer)}Cu(e){return new Pj(Yx.mi,this.serializer)}Du(e){return new Pz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xh.provider={build:()=>new Xh};class EB extends Xh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Qh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new sz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Pj(r=>Qh.mi(r,n),this.serializer)}}class Ry{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xB.bind(null,this.syncEngine),await Xz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Zz}()}createDatastore(e){const n=Xf(e.databaseInfo.databaseId),r=function(i){return new Dz(i)}(e.databaseInfo);return function(i,a,l,c){return new Vz(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new Uz(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>z1(this.syncEngine,n,0),function(){return M1.v()?new M1:new Rz}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new lB(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ee(s);ie(fo,"RemoteStore shutting down."),i.Ea.add(5),await yu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ry.provider={build:()=>new Ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="FirestoreClient";class TB{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Lx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{ie(gi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ie(gi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(gi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Rj(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function q1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bB(t);ie(gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>V1(e.remoteStore,s)),t._onlineComponents=e}async function bB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(gi,"Using user provided OfflineComponentProvider");try{await bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await bp(t,new Xh)}}else ie(gi,"Using default OfflineComponentProvider"),await bp(t,new EB(void 0));return t._offlineComponents}async function Kj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(gi,"Using user provided OnlineComponentProvider"),await q1(t,t._uninitializedComponentsProvider._online)):(ie(gi,"Using default OnlineComponentProvider"),await q1(t,new Ry))),t._onlineComponents}function NB(t){return Kj(t).then(e=>e.syncEngine)}async function G1(t){const e=await Kj(t),n=e.eventManager;return n.onListen=cB.bind(null,e.syncEngine),n.onUnlisten=hB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fB.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="firestore.googleapis.com",W1=!0;class K1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yj,this.ssl=W1}else this.host=e.host,this.ssl=e.ssl??W1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ij;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nz)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qj(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new j$;switch(r.type){case"firstParty":return new O$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=H1.get(n);r&&(ie("ComponentProvider","Removing Datastore"),H1.delete(n),r.terminate())}(this),Promise.resolve()}}function CB(t,e,n,r={}){var d;t=Zr(t,em);const s=el(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(zP(`https://${l}`),BP("Firestore",!0)),i.host!==Yj&&i.host!==l&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!ao(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=$3(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(m)}t._authCredentials=new A$(new FR(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mu(n,ut._jsonSchema))return new ut(e,r||null,new fe(We.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:mt("string",ut._jsonSchemaVersion),referencePath:mt("string")};class ri extends _o{constructor(e,n,r){super(e,n,Bx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new fe(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function IB(t,e,...n){if(t=Et(t),UR("collection","path",e),t instanceof em){const r=We.fromString(e,...n);return o1(r),new ri(t,null,r)}{if(!(t instanceof ut||t instanceof ri))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return o1(r),new ri(t.firestore,null,r)}}function Np(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Lx.newId()),UR("doc","path",e),t instanceof em){const r=We.fromString(e,...n);return i1(r),new ut(t,null,new fe(r))}{if(!(t instanceof ut||t instanceof ri))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return i1(r),new ut(t.firestore,t instanceof ri?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="AsyncQueue";class Y1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aj(this,"async_queue_retry"),this._c=()=>{const r=Tp();r&&ie(Q1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Tp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ki;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!il(e))throw e;ie(Q1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",X1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=rw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:X1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function X1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ba extends em{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Y1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y1(e),this._firestoreClient=void 0,await e}}}function PB(t,e){const n=typeof t=="object"?t:WP(),r=typeof t=="string"?t:Bh,s=bx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=F3("firestore");i&&CB(s,...i)}return s}function Xj(t){if(t._terminated)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RB(t),t._firestoreClient}function RB(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new J$(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Qj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TB(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Rt.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mu(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:mt("string",kn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(mu(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:mt("string",jr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mu(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ar(e.vectorValues);throw new te(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:mt("string",Ar._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=/^__.*__$/;class AB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class Jj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Zj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:t})}}class cw{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zj(this.Ac)&&jB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xf(e)}Cc(e,n,r,s=!1){return new cw({Ac:e,methodName:n,Dc:r,path:Ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uw(t){const e=t._freezeSettings(),n=Xf(t._databaseId);return new kB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DB(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);dw("Data must be an object, but it was:",a,r);const l=eA(r,a);let c,d;if(i.merge)c=new xn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=jy(e,f,n);if(!a.contains(m))throw new te(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nA(h,m)||h.push(m)}c=new xn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new AB(new ln(l),c,d)}class nm extends lw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}function OB(t,e,n,r){const s=t.Cc(1,e,n);dw("Data must be an object, but it was:",s,r);const i=[],a=ln.empty();Ti(r,(c,d)=>{const h=hw(e,c,n);d=Et(d);const f=s.yc(h);if(d instanceof nm)i.push(h);else{const m=xu(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new xn(i);return new Jj(a,l,s.fieldTransforms)}function MB(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[jy(e,r,n)],c=[s];if(i.length%2!=0)throw new te(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(jy(e,i[m])),c.push(i[m+1]);const d=[],h=ln.empty();for(let m=l.length-1;m>=0;--m)if(!nA(d,l[m])){const x=l[m];let N=c[m];N=Et(N);const v=a.yc(x);if(N instanceof nm)d.push(x);else{const y=xu(N,v);y!=null&&(d.push(x),h.set(x,y))}}const f=new xn(d);return new Jj(h,f,a.fieldTransforms)}function LB(t,e,n,r=!1){return xu(n,t.Cc(r?4:3,e))}function xu(t,e){if(tA(t=Et(t)))return dw("Unsupported field value:",e,t),eA(t,e);if(t instanceof lw)return function(r,s){if(!Zj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=xu(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w8(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Kh(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(s.serializer,i)}}if(r instanceof jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kn)return{bytesValue:_j(s.serializer,r._byteString)};if(r instanceof ut){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ar)return function(a,l){return{mapValue:{fields:{[QR]:{stringValue:XR},[qh]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return qx(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${zf(r)}`)}(t,e)}function eA(t,e){const n={};return BR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(t,(r,s)=>{const i=xu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof jr||t instanceof kn||t instanceof ut||t instanceof lw||t instanceof Ar)}function dw(t,e,n){if(!tA(n)||!$R(n)){const r=zf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jy(t,e,n){if((e=Et(e))instanceof tm)return e._internalPath;if(typeof e=="string")return hw(t,e);throw Jh("Field path arguments must be of type string or ",t,!1,void 0,n)}const VB=new RegExp("[~\\*/\\[\\]]");function hw(t,e,n){if(e.search(VB)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tm(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jh(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new te(B.INVALID_ARGUMENT,l+t+c)}function nA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FB extends rA{data(){return super.data()}}function fw(t,e){return typeof e=="string"?hw(t,e):e instanceof tm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mw{}class sA extends mw{}function $B(t,e,...n){let r=[];e instanceof mw&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof gw).length,l=i.filter(c=>c instanceof pw).length;if(a>1||a>0&&l>0)throw new te(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class pw extends sA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pw(e,n,r)}_apply(e){const n=this._parse(e);return iA(e._query,n),new _o(e.firestore,e.converter,wy(e._query,n))}_parse(e){const n=uw(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){eS(f,h);const N=[];for(const v of f)N.push(Z1(c,i,v));m={arrayValue:{values:N}}}else m=Z1(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||eS(f,h),m=LB(l,a,f,h==="in"||h==="not-in");return ft.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class gw extends mw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)iA(a,c),a=wy(a,c)}(e._query,n),new _o(e.firestore,e.converter,wy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yw extends sA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yw(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(i,a)}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ol(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function zB(t,e="asc"){const n=e,r=fw("orderBy",t);return yw._create(r,n)}function Z1(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new te(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ij(e)&&n.indexOf("/")!==-1)throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!fe.isDocumentKey(r))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return m1(t,new fe(r))}if(n instanceof ut)return m1(t,n._key);throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function eS(t,e){if(!Array.isArray(t)||t.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iA(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BB{convertValue(e,n="none"){switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ti(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[qh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>lt(a.doubleValue));return new Ar(n)}convertGeoPoint(e){return new jr(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=hi(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);ze(Cj(r),9688,{name:e});const s=new Mc(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends rA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:mt("string",Qi._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class qd extends Qi{data(e={}){return super.data(e)}}class da{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qd(this._firestore,this._userDataWriter,r.key,r,new Gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new qd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Gl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new qd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Gl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:GB(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:mt("string",da._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class oA extends BB{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function HB(t,e,n){t=Zr(t,ut);const r=Zr(t.firestore,Ba),s=qB(t.converter,e);return vw(r,[DB(uw(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ir.none())])}function WB(t,e,n,...r){t=Zr(t,ut);const s=Zr(t.firestore,Ba),i=uw(s);let a;return a=typeof(e=Et(e))=="string"||e instanceof tm?MB(i,"updateDoc",t._key,e,n,r):OB(i,"updateDoc",t._key,e),vw(s,[a.toMutation(t._key,ir.exists(!0))])}function KB(t){return vw(Zr(t.firestore,Ba),[new Gx(t._key,ir.none())])}function QB(t,...e){var c,d,h;t=Et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||J1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(J1(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof ut)a=Zr(t.firestore,Ba),l=Bx(t._key.path),i={next:f=>{e[r]&&e[r](YB(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Zr(t,_o);a=Zr(f.firestore,Ba),l=f._query;const m=new oA(a);i={next:x=>{e[r]&&e[r](new da(a,m,f,x))},error:e[r+1],complete:e[r+2]},UB(t._query)}return function(m,x,N,v){const y=new SB(v),E=new sB(x,y,N);return m.asyncQueue.enqueueAndForget(async()=>eB(await G1(m),E)),()=>{y.Nu(),m.asyncQueue.enqueueAndForget(async()=>tB(await G1(m),E))}}(Xj(a),l,s,i)}function vw(t,e){return function(r,s){const i=new Ki;return r.asyncQueue.enqueueAndForget(async()=>mB(await NB(r),s,i)),i.promise}(Xj(t),e)}function YB(t,e,n){const r=n.docs.get(e._key),s=new oA(t);return new Qi(t,s,e._key,r,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){rl=s})(tl),Ma(new lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ba(new k$(r.getProvider("auth-internal")),new M$(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ti(t1,n1,e),ti(t1,n1,"esm2020")})();const XB={apiKey:"AIzaSyBr7Vti_UUKtHV3wCA0FfNPmvT1AYC0yFM",authDomain:"passpilot-55c3d.firebaseapp.com",projectId:"passpilot-55c3d",storageBucket:"passpilot-55c3d.firebasestorage.app",appId:"1:134904289902:web:e62d187d4ef81703cfe47f"};let Cp=null,Do=null,Hl=null;try{Cp=HP(XB),Do=P$(Cp),Hl=PB(Cp),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const JB=new qr;class Qo{constructor(){}static getInstance(){return Qo.instance||(Qo.instance=new Qo),Qo.instance}isConfigured(){return!0}async signInWithGoogle(){if(!this.isConfigured())throw new Error("Firebase not configured");return B9(Do,JB)}async handleRedirectResult(){if(!this.isConfigured())throw new Error("Firebase not configured");return G9(Do)}async signInWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return p9(Do,e,n)}async createUserWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return m9(Do,e,n)}async signOut(){if(!this.isConfigured())throw new Error("Firebase not configured");return v9(Do)}async setDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Np(Hl,e);return HB(r,n)}async updateDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Np(Hl,e);return WB(r,n)}async deleteDocument(e){if(!this.isConfigured())throw new Error("Firebase not configured");const n=Np(Hl,e);return KB(n)}onSnapshot(e,n){if(!this.isConfigured())return console.warn("Firebase not configured, using mock data"),()=>{};const r=IB(Hl,e),s=$B(r,zB("createdAt","desc"));return QB(s,i=>{const a=i.docs.map(l=>({id:l.id,...l.data()}));n(a)})}}const ZB=Qo.getInstance();function e7(){const{data:t=[],isLoading:e}=zt({queryKey:["/api/passes/active"],refetchInterval:5e3});return{passes:t,isLoading:e}}function tS({user:t,selectedGrades:e=new Set}){const{passes:n,isLoading:r}=e7(),[s,i]=g.useState("all");if(r)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const a=f=>{const m=new Date,x=new Date(f),N=m.getTime()-x.getTime();return`${Math.floor(N/(1e3*60))} min`},l=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),c=f=>{const m=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],x=f.length%m.length;return m[x]},d=f=>{switch(f){case"nurse":return o.jsx(Un,{variant:"outline",className:"bg-red-50 text-red-600 border-red-200",children:"Nurse"});case"discipline":return o.jsx(Un,{variant:"outline",className:"bg-orange-50 text-orange-600 border-orange-200",children:"Discipline"});case"general":default:return o.jsx(Un,{variant:"outline",className:"bg-blue-50 text-blue-600 border-blue-200",children:"General"})}},h=n.filter(f=>{var N;const m=s==="all"||f.passType===s,x=e.size===0||e.has((N=f.student)==null?void 0:N.grade);return m&&x});return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Current Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Students currently checked out"})]}),o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),o.jsx("span",{className:"text-muted-foreground",children:"Live updates enabled"})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h.length," of ",n.length," passes"]}),e.size>0&&o.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["Viewing grades: ",Array.from(e).sort().join(", ")]}),e.size===0&&o.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"No grades selected - select grades in Roster tab to view passes"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by type:"}),o.jsxs(er,{value:s,onValueChange:i,children:[o.jsx(Mn,{className:"w-32",children:o.jsx(tr,{})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"all",children:"All Types"}),o.jsx(Ie,{value:"general",children:"General"}),o.jsx(Ie,{value:"nurse",children:"Nurse"}),o.jsx(Ie,{value:"discipline",children:"Discipline"})]})]})]})]}),o.jsx("div",{className:"space-y-3","data-testid":"active-passes-list",children:h.length===0?o.jsx(le,{children:o.jsxs(ce,{className:"p-6 text-center",children:[o.jsx("i",{className:"fas fa-check-circle text-secondary text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.length===0?"All students are in class":`No ${s==="all"?"":s+" "}passes currently active`})]})}):h.map(f=>{var m,x,N,v,y;return o.jsx(le,{className:"shadow-sm","data-testid":`pass-card-${f.id}`,children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c(((m=f.student)==null?void 0:m.name)||"")}`,children:o.jsx("span",{className:"text-sm font-medium","data-testid":`student-initials-${f.id}`,children:l(((x=f.student)==null?void 0:x.name)||"")})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("h3",{className:"font-medium text-foreground","data-testid":`student-name-${f.id}`,children:(N=f.student)==null?void 0:N.name}),d(f.passType)]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Grade ",o.jsx("span",{"data-testid":`student-grade-${f.id}`,children:(v=f.student)==null?void 0:v.grade})," • Out for ",o.jsx("span",{"data-testid":`pass-duration-${f.id}`,children:a(f.checkoutTime)})]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Issued by: ",o.jsx("span",{className:"font-medium",children:((y=f.teacher)==null?void 0:y.name)||"Unknown Teacher"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked out"}),o.jsx("p",{className:"text-sm font-medium text-foreground","data-testid":`checkout-time-${f.id}`,children:new Date(f.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})})},f.id)})})]})}function t7({user:t,selectedGrades:e=new Set,currentGrade:n,onRemoveGrade:r}){const[s,i]=g.useState(n||(e.size>0?Array.from(e)[0]:"")),[a,l]=g.useState(""),[c,d]=g.useState(null),[h,f]=g.useState(!1);g.useEffect(()=>{n&&n!==s&&i(n)},[n]);const{toast:m}=jt(),{data:x=[],isLoading:N}=zt({queryKey:["/api/students"]}),{data:v=[],isLoading:y}=zt({queryKey:["/api/passes/active"],refetchInterval:3e3}),{data:E=[]}=zt({queryKey:["/api/grades"]}),_=N||y,T=(t==null?void 0:t.assignedGrades)||[],P=E.filter(F=>e.has(F.name)&&(T.length===0||T.includes(F.name))),D=async(F,V,K="general",pe="")=>{try{await Ue("POST","/api/passes",{studentId:F,passType:K,customReason:pe||void 0}),De.invalidateQueries({queryKey:["/api/passes/active"]}),De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Pass created",description:`${V} has been marked out for ${pe||(K==="nurse"?"Nurse":K==="discipline"?"Discipline":"General")}.`})}catch(Be){m({title:"Error",description:Be.message,variant:"destructive"})}},M=()=>{c&&a.trim()&&(D(c.id,c.name,"general",a.trim()),l(""),d(null),f(!1))},b=F=>{d(F),l(""),f(!0)},S=async(F,V)=>{try{await Ue("PUT",`/api/passes/${F}/return`,{}),De.invalidateQueries({queryKey:["/api/passes/active"]}),De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Student returned",description:`${V} has been marked as returned.`})}catch(K){m({title:"Error",description:K.message,variant:"destructive"})}},C=F=>F.split(" ").map(V=>V[0]).join("").toUpperCase().slice(0,2),R=F=>{const V=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],K=F.length%V.length;return V[K]},k=F=>{switch(F){case"nurse":return o.jsx(Q_,{className:"w-4 h-4 text-red-500"});case"discipline":return o.jsx(bh,{className:"w-4 h-4 text-orange-500"});default:return o.jsx(is,{className:"w-4 h-4 text-blue-500"})}},A=F=>{switch(F){case"nurse":return"Nurse";case"discipline":return"Discipline";default:return"General"}},j=F=>{switch(F){case"nurse":return"bg-red-100 text-red-700 border-red-200";case"discipline":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}},[W,ue]=g.useState(new Date);g.useEffect(()=>{const F=setInterval(()=>{ue(new Date)},3e3);return()=>clearInterval(F)},[]);const Z=F=>{const V=new Date(F),K=W.getTime()-V.getTime(),pe=Math.floor(K/(1e3*60));return`${Math.max(1,pe)} min`};if(P.length===0)return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx(le,{children:o.jsxs(ce,{className:"p-6 text-center",children:[o.jsx(On,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Grades Selected"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Click on grade cards in the Roster tab to add them to MyClass. Green cards in Roster are active here."})]})})]});if(_)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const se=P.find(F=>F.name===s),U=se?x.filter(F=>F.grade===se.name):[],z=se?v.filter(F=>{const V=x.find(K=>K.id===F.studentId);return V&&V.grade===se.name}):[],Y=U.filter(F=>!v.some(V=>V.studentId===F.id));return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(F=>{x.filter(pe=>pe.grade===F.name);const V=v.filter(pe=>{const Be=x.find(qe=>qe.id===pe.studentId);return Be&&Be.grade===F.name}).length,K=s===F.name;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(H,{variant:K?"default":"outline",size:"sm",onClick:()=>i(F.name),"data-testid":`tab-grade-${F.name}`,className:`flex items-center gap-2 ${K?"ring-2 ring-primary":""}`,children:[o.jsx(On,{className:"w-4 h-4"}),"Grade ",F.name,V>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:V})]}),o.jsx(H,{variant:"ghost",size:"sm",onClick:pe=>{pe.stopPropagation(),r==null||r(F.name)},"data-testid":`button-remove-grade-${F.name}`,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground hover:bg-red-100 dark:hover:bg-red-900/20",title:`Remove Grade ${F.name} from My Class`,children:o.jsx(ru,{className:"w-4 h-4"})})]},F.id)})})}),se&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(On,{className:"h-5 w-5 text-blue-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Students"}),o.jsx("p",{className:"text-lg font-bold",children:U.length})]})]})})}),o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(a4,{className:"h-5 w-5 text-red-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Currently Out"}),o.jsx("p",{className:"text-lg font-bold text-red-600",children:z.length})]})]})})}),o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(eE,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:Y.length})]})]})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(is,{className:"w-5 h-5 text-red-600"}),"Currently Out - Grade ",se.name]})}),o.jsx(ce,{children:z.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No students are currently out of class"}):o.jsx("div",{className:"space-y-3",children:z.map(F=>{const V=x.find(K=>K.id===F.studentId);return V?o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${R(V.name)}`,children:C(V.name)}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-medium",children:V.name}),o.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border flex items-center gap-1 ${j(F.passType||"general")}`,children:[k(F.passType||"general"),A(F.passType||"general")]})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[F.customReason||`Out for ${Z(F.checkoutTime)}`," • Since ",new Date(F.checkoutTime).toLocaleTimeString()]})]})]}),o.jsx(H,{onClick:()=>S(F.id,V.name),size:"sm","data-testid":`button-return-${F.id}`,children:"Mark Returned"})]},F.id):null})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(eE,{className:"w-5 h-5 text-green-600"}),"Available Students - Grade ",se.name]})}),o.jsx(ce,{children:Y.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:U.length===0?`No students in Grade ${se.name}. Add students in the Roster tab.`:"All students are currently out of class"}):o.jsx("div",{className:"grid gap-3",children:Y.map(F=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${R(F.name)}`,children:C(F.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:F.name}),F.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",F.studentId]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(H,{onClick:()=>D(F.id,F.name,"general"),size:"sm",variant:"outline","data-testid":`button-checkout-${F.id}`,children:"Mark Out"}),o.jsxs(DP,{children:[o.jsx(OP,{asChild:!0,children:o.jsx(H,{size:"sm",variant:"outline","data-testid":`button-special-checkout-${F.id}`,className:"px-2",children:o.jsx(_f,{className:"w-4 h-4"})})}),o.jsxs(Ex,{align:"end",children:[o.jsxs(oa,{onClick:()=>D(F.id,F.name,"nurse"),className:"flex items-center gap-2",children:[o.jsx(Q_,{className:"w-4 h-4 text-red-500"}),"Nurse"]}),o.jsxs(oa,{onClick:()=>D(F.id,F.name,"discipline"),className:"flex items-center gap-2",children:[o.jsx(bh,{className:"w-4 h-4 text-orange-500"}),"Discipline"]}),o.jsxs(oa,{onClick:()=>b(F),className:"flex items-center gap-2",children:[o.jsx(t4,{className:"w-4 h-4 text-blue-500"}),"Custom Reason"]})]})]})]})]},F.id))})})]})]}),!se&&P.length>0&&o.jsx(le,{children:o.jsxs(ce,{className:"p-6 text-center",children:[o.jsx(On,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a Grade"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on one of the grade tabs above to view and manage students."})]})}),o.jsx(Zn,{open:h,onOpenChange:f,children:o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsxs(An,{children:["Custom Reason for ",c==null?void 0:c.name]})}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"customReason",children:"Reason for leaving class"}),o.jsx(de,{id:"customReason",placeholder:"e.g., Library research, Guidance counselor, Office errand...",value:a,onChange:F=>l(F.target.value),onKeyDown:F=>{F.key==="Enter"&&M()},"data-testid":"input-custom-reason"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-cancel-custom-reason",children:"Cancel"}),o.jsx(H,{onClick:M,disabled:!a.trim(),"data-testid":"button-submit-custom-reason",children:"Mark Out"})]})]})]})})]})}function n7({user:t,selectedGrades:e=new Set,onGradeClick:n}){const[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),[d,h]=g.useState(!1),[f,m]=g.useState(null),[x,N]=g.useState(null),[v,y]=g.useState(null),[E,_]=g.useState(""),[T,P]=g.useState({name:"",grade:"",studentId:""}),[D,M]=g.useState({name:""}),[b,S]=g.useState(""),{toast:C}=jt(),{data:R=[],isLoading:k}=zt({queryKey:["/api/students"]}),{data:A=[],isLoading:j}=zt({queryKey:["/api/grades"]}),W=k||j,ue=async q=>{if(q.preventDefault(),!D.name){C({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ue("POST","/api/grades",D),De.invalidateQueries({queryKey:["/api/grades"]}),M({name:""}),c(!1),C({title:"Grade added",description:`Grade ${D.name} has been added.`})}catch(ne){C({title:"Error",description:ne.message,variant:"destructive"})}},Z=q=>{N(q),M({name:q.name})},se=async q=>{if(q.preventDefault(),!D.name||!x){C({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ue("PUT",`/api/grades/${x.id}`,D),De.invalidateQueries({queryKey:["/api/grades"]}),M({name:""}),N(null),C({title:"Grade updated",description:`Grade has been updated to ${D.name}.`})}catch(ne){C({title:"Error",description:ne.message,variant:"destructive"})}},U=async(q,ne)=>{if(confirm(`Are you sure you want to delete grade "${ne}"? This will also delete all students in this grade.`))try{await Ue("DELETE",`/api/grades/${q}`,{}),De.invalidateQueries({queryKey:["/api/grades"]}),De.invalidateQueries({queryKey:["/api/students"]}),C({title:"Grade deleted",description:`Grade ${ne} has been deleted.`})}catch(he){C({title:"Error",description:he.message,variant:"destructive"})}},z=async q=>{if(q.preventDefault(),!T.name||!T.grade){C({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ue("POST","/api/students",T),De.invalidateQueries({queryKey:["/api/students"]}),P({name:"",grade:"",studentId:""}),s(!1),C({title:"Student added",description:`${T.name} has been added to grade ${T.grade}.`})}catch(ne){C({title:"Error",description:ne.message,variant:"destructive"})}},Y=async q=>{if(q.preventDefault(),!b.trim()||!E){C({title:"Missing Information",description:"Please enter student names and select a grade.",variant:"destructive"});return}const ne=b.split(`
`).map(he=>he.trim()).filter(he=>he.length>0);if(ne.length===0){C({title:"No students to add",description:"Please enter at least one student name.",variant:"destructive"});return}try{const he=ne.map(xe=>Ue("POST","/api/students",{name:xe,grade:E,studentId:""}));await Promise.all(he),De.invalidateQueries({queryKey:["/api/students"]}),S(""),_(""),a(!1),C({title:"Students added",description:`${ne.length} student${ne.length!==1?"s":""} have been added to grade ${E}.`})}catch(he){C({title:"Error",description:he.message,variant:"destructive"})}},F=q=>{m(q),P({name:q.name,grade:q.grade,studentId:q.studentId||""})},V=async q=>{if(q.preventDefault(),!T.name||!T.grade||!f){C({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ue("PUT",`/api/students/${f.id}`,T),De.invalidateQueries({queryKey:["/api/students"]}),P({name:"",grade:"",studentId:""}),m(null),C({title:"Student updated",description:`${T.name} has been updated.`})}catch(ne){C({title:"Error",description:ne.message,variant:"destructive"})}},K=async(q,ne)=>{if(confirm(`Are you sure you want to delete ${ne}?`))try{await Ue("DELETE",`/api/students/${q}`,{}),De.invalidateQueries({queryKey:["/api/students"]}),C({title:"Student deleted",description:`${ne} has been deleted.`})}catch(he){C({title:"Error",description:he.message,variant:"destructive"})}},pe=q=>q.split(" ").map(ne=>ne[0]).join("").toUpperCase().slice(0,2),Be=q=>{const ne=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],he=q.length%ne.length;return ne[he]},qe=(t==null?void 0:t.assignedGrades)||[],oe=qe.length===0?A:A.filter(q=>qe.includes(q.name));return W?o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})}):o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Student Roster"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Manage grades and students. Click on grade cards to add them to MyClass tab.",o.jsx("span",{className:"text-green-600 font-medium",children:" Green cards are active in MyClass."})]})]}),o.jsxs(le,{className:"mb-6",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(On,{className:"w-5 h-5"}),"Grade Levels"]}),o.jsxs(Zn,{open:l,onOpenChange:c,children:[o.jsx(wF,{asChild:!0,children:o.jsxs(H,{size:"sm","data-testid":"button-add-grade",children:[o.jsx(X_,{className:"w-4 h-4 mr-2"}),"Add Grade"]})}),o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsx(An,{children:"Add New Grade"})}),o.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"gradeName",children:"Grade Name"}),o.jsx(de,{id:"gradeName",value:D.name,onChange:q=>M({name:q.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),o.jsx(H,{type:"submit","data-testid":"button-submit-grade",children:"Add Grade"})]})]})]})]})]})}),o.jsx(ce,{children:oe.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:qe.length===0?"No grades created yet. Add a grade to get started.":"No assigned grades found. Contact your admin to assign grades to your account."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:oe.map(q=>{const ne=R.filter(xe=>xe.grade===q.name),he=e.has(q.name);return o.jsx(le,{className:`cursor-pointer hover:shadow-md transition-all border-2 ${he?"border-green-500 bg-green-50 shadow-md":"hover:border-primary/20"}`,onClick:()=>n==null?void 0:n(q.name),"data-testid":`card-grade-${q.name}`,children:o.jsxs(ce,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(e4,{className:`w-4 h-4 ${he?"text-green-600":"text-primary"}`}),o.jsxs("h3",{className:`font-semibold ${he?"text-green-700":""}`,children:["Grade ",q.name]}),he&&o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(H,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),y(q),h(!0)},className:"h-6 w-6 p-0","data-testid":`button-view-grade-${q.id}`,children:o.jsx(jd,{className:"h-3 w-3"})}),o.jsx(H,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),Z(q)},className:"h-6 w-6 p-0","data-testid":`button-edit-grade-${q.id}`,children:o.jsx(Z_,{className:"h-3 w-3"})}),o.jsx(H,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),U(q.id,q.name)},className:"h-6 w-6 p-0 hover:text-red-600","data-testid":`button-delete-grade-${q.id}`,children:o.jsx(qg,{className:"h-3 w-3"})})]})]}),o.jsxs("p",{className:`text-sm ${he?"text-green-600":"text-muted-foreground"}`,children:[ne.length," student",ne.length!==1?"s":""]}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsx("p",{className:`text-xs ${he?"text-green-600":"text-primary"}`,children:he?"✓ Active in MyClass":"Click to add to MyClass →"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(H,{size:"sm",variant:"outline",onClick:xe=>{xe.stopPropagation(),P({name:"",grade:q.name,studentId:""}),s(!0)},className:"h-6 text-xs px-2","data-testid":`button-add-student-${q.name}`,children:"Add Student"}),o.jsx(H,{size:"sm",variant:"outline",onClick:xe=>{xe.stopPropagation(),_(q.name),a(!0)},className:"h-6 text-xs px-2","data-testid":`button-bulk-add-${q.name}`,children:"Bulk Add"})]})]})]})},q.id)})})})]}),o.jsx(Zn,{open:r,onOpenChange:s,children:o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsx(An,{children:"Add New Student"})}),o.jsxs("form",{onSubmit:z,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"studentName",children:"Student Name"}),o.jsx(de,{id:"studentName",value:T.name,onChange:q=>P({...T,name:q.target.value}),placeholder:"Enter student name","data-testid":"input-student-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"studentGrade",children:"Grade"}),o.jsxs(er,{value:T.grade,onValueChange:q=>P({...T,grade:q}),children:[o.jsx(Mn,{"data-testid":"select-student-grade",children:o.jsx(tr,{placeholder:"Select a grade"})}),o.jsx(Ln,{children:oe.map(q=>o.jsxs(Ie,{value:q.name,children:["Grade ",q.name]},q.id))})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"studentId",children:"Student ID (Optional)"}),o.jsx(de,{id:"studentId",value:T.studentId,onChange:q=>P({...T,studentId:q.target.value}),placeholder:"Enter student ID","data-testid":"input-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),o.jsx(H,{type:"submit","data-testid":"button-submit-student",children:"Add Student"})]})]})]})}),o.jsx(Zn,{open:i,onOpenChange:a,children:o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsx(An,{children:"Bulk Add Students"})}),o.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"bulkGrade",children:"Grade"}),o.jsxs(er,{value:E,onValueChange:_,children:[o.jsx(Mn,{"data-testid":"select-bulk-grade",children:o.jsx(tr,{placeholder:"Select a grade"})}),o.jsx(Ln,{children:oe.map(q=>o.jsxs(Ie,{value:q.name,children:["Grade ",q.name]},q.id))})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"bulkStudentNames",children:"Student Names (one per line)"}),o.jsx("textarea",{id:"bulkStudentNames",value:b,onChange:q=>S(q.target.value),placeholder:`Enter student names, one per line:
John Smith
Jane Doe
Alex Johnson`,className:"w-full h-32 p-3 border rounded-md resize-none","data-testid":"textarea-bulk-student-names"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter each student name on a new line"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(H,{type:"submit","data-testid":"button-submit-bulk-students",children:"Add Students"})]})]})]})}),x&&o.jsx(Zn,{open:!!x,onOpenChange:()=>N(null),children:o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsx(An,{children:"Edit Grade"})}),o.jsxs("form",{onSubmit:se,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"editGradeName",children:"Grade Name"}),o.jsx(de,{id:"editGradeName",value:D.name,onChange:q=>M({name:q.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-edit-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>N(null),children:"Cancel"}),o.jsx(H,{type:"submit","data-testid":"button-update-grade",children:"Update Grade"})]})]})]})}),f&&o.jsx(Zn,{open:!!f,onOpenChange:()=>m(null),children:o.jsxs(Rn,{children:[o.jsx(jn,{children:o.jsx(An,{children:"Edit Student"})}),o.jsxs("form",{onSubmit:V,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"editStudentName",children:"Student Name"}),o.jsx(de,{id:"editStudentName",value:T.name,onChange:q=>P({...T,name:q.target.value}),placeholder:"Enter student name","data-testid":"input-edit-student-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"editStudentGrade",children:"Grade"}),o.jsxs(er,{value:T.grade,onValueChange:q=>P({...T,grade:q}),children:[o.jsx(Mn,{"data-testid":"select-edit-student-grade",children:o.jsx(tr,{placeholder:"Select a grade"})}),o.jsx(Ln,{children:oe.map(q=>o.jsxs(Ie,{value:q.name,children:["Grade ",q.name]},q.id))})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"editStudentId",children:"Student ID (Optional)"}),o.jsx(de,{id:"editStudentId",value:T.studentId,onChange:q=>P({...T,studentId:q.target.value}),placeholder:"Enter student ID","data-testid":"input-edit-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>m(null),children:"Cancel"}),o.jsx(H,{type:"submit","data-testid":"button-update-student",children:"Update Student"})]})]})]})}),v&&o.jsx(Zn,{open:d,onOpenChange:h,children:o.jsxs(Rn,{className:"max-w-4xl",children:[o.jsx(jn,{children:o.jsxs(An,{children:["Grade ",v.name," - Full Roster"]})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{const q=R.filter(ne=>ne.grade===v.name);return q.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(On,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsxs("p",{className:"text-muted-foreground",children:["No students in Grade ",v.name," yet."]}),o.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[o.jsx(H,{onClick:()=>{P({name:"",grade:v.name,studentId:""}),h(!1),s(!0)},size:"sm",children:"Add Student"}),o.jsx(H,{onClick:()=>{_(v.name),h(!1),a(!0)},size:"sm",variant:"outline",children:"Bulk Add Students"})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[q.length," student",q.length!==1?"s":""," in Grade ",v.name]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(H,{onClick:()=>{P({name:"",grade:v.name,studentId:""}),h(!1),s(!0)},size:"sm",children:[o.jsx(X_,{className:"w-4 h-4 mr-2"}),"Add Student"]}),o.jsxs(H,{onClick:()=>{_(v.name),h(!1),a(!0)},size:"sm",variant:"outline",children:[o.jsx(On,{className:"w-4 h-4 mr-2"}),"Bulk Add"]})]})]}),q.map(ne=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${Be(ne.name)}`,children:pe(ne.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:ne.name}),ne.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",ne.studentId]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(H,{size:"sm",variant:"ghost",onClick:()=>{F(ne),h(!1)},"data-testid":`button-edit-student-${ne.id}`,children:o.jsx(Z_,{className:"h-4 w-4"})}),o.jsx(H,{size:"sm",variant:"ghost",onClick:()=>K(ne.id,ne.name),className:"hover:text-red-600","data-testid":`button-delete-student-${ne.id}`,children:o.jsx(qg,{className:"h-4 w-4"})})]})]},ne.id))]})})()})]})})]})}function r7({user:t}){const[e,n]=g.useState(!1),[r,s]=g.useState(!1),[i,a]=g.useState(!1),{toast:l}=jt(),c=async f=>{var x;const m=(x=f.target.files)==null?void 0:x[0];if(m){if(!m.name.endsWith(".csv")){l({title:"Invalid File Type",description:"Please upload a CSV file.",variant:"destructive"});return}n(!0);try{const N=new FormData;N.append("file",m);const v=await fetch("/api/upload/csv",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:N});if(!v.ok)throw new Error("Upload failed");const y=await v.json();De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Upload Complete",description:`Successfully imported ${y.studentsAdded} students and ${y.gradesAdded} grades.`})}catch(N){l({title:"Upload Failed",description:N.message,variant:"destructive"})}finally{n(!1)}}},d=async()=>{n(!0);try{const m=await(await Ue("POST","/api/import/clever",{})).json();De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Clever Import Complete",description:`Successfully imported ${m.studentsAdded} students from Clever.`}),s(!0)}catch{l({title:"Clever Import Failed",description:"Please check your Clever API credentials and try again.",variant:"destructive"})}finally{n(!1)}},h=async()=>{n(!0);try{const m=await(await Ue("POST","/api/import/google-classroom",{})).json();De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Google Classroom Import Complete",description:`Successfully imported ${m.studentsAdded} students from Google Classroom.`}),a(!0)}catch{l({title:"Google Classroom Import Failed",description:"Please check your Google Classroom API credentials and try again.",variant:"destructive"})}finally{n(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Upload Student Data"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from multiple sources"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsx(Ce,{children:"CSV File Upload"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"fileUpload",children:"Select CSV File"}),o.jsx(de,{id:"fileUpload",type:"file",accept:".csv",onChange:c,disabled:e,"data-testid":"input-file-upload"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"mb-2",children:"CSV file should contain the following columns:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"name (required)"}),o.jsx("li",{children:"grade (required)"}),o.jsx("li",{children:"studentId (optional)"})]})]}),e&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary border-t-transparent rounded-full"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing upload..."})]})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center justify-between",children:["Clever Integration",r&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters directly from your Clever account. This will sync all students from your connected schools."}),o.jsx(H,{onClick:d,disabled:e,className:"w-full","data-testid":"button-clever-import",children:e?"Importing...":"Import from Clever"})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center justify-between",children:["Google Classroom Integration",i&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from your Google Classroom courses. All enrolled students will be added to your roster."}),o.jsx(H,{onClick:h,disabled:e,className:"w-full","data-testid":"button-google-classroom-import",children:e?"Importing...":"Import from Google Classroom"})]})})]})]})]})}function s7({user:t}){const{toast:e}=jt(),[n,r]=g.useState({dateRange:"today",grade:"all",teacher:"all",passType:"all"}),[s,i]=g.useState({startDate:"",endDate:""}),a=(b,S)=>{if(!S)return null;const C=new Date(b),k=new Date(S).getTime()-C.getTime(),A=Math.round(k/(1e3*60));return A<1?1:A},{data:l=[],refetch:c}=zt({queryKey:["/api/passes",n],refetchInterval:3e3,queryFn:async()=>{const b=new URLSearchParams;if(n.dateRange&&n.dateRange!=="all"){const k=new Date;let A=new Date;switch(n.dateRange){case"today":A.setHours(0,0,0,0),b.append("dateStart",A.toISOString());break;case"week":A.setDate(k.getDate()-7),b.append("dateStart",A.toISOString());break;case"month":A.setMonth(k.getMonth()-1),b.append("dateStart",A.toISOString());break;case"custom":s.startDate&&b.append("dateStart",new Date(s.startDate+"T00:00:00").toISOString()),s.endDate&&b.append("dateEnd",new Date(s.endDate+"T23:59:59").toISOString());break}}n.grade&&n.grade!=="all"&&b.append("grade",n.grade),n.teacher&&n.teacher!==""&&n.teacher!=="all"&&b.append("teacherId",n.teacher),n.passType&&n.passType!=="all"&&b.append("passType",n.passType);const S=`/api/passes${b.toString()?"?"+b.toString():""}`,R=await(await Ue("GET",S)).json();return Array.isArray(R)?R:[]}}),{data:d=[]}=zt({queryKey:["/api/grades"]}),{data:h=[]}=zt({queryKey:["/api/teachers"]}),f=(t==null?void 0:t.assignedGrades)||[],m=f.length===0?d:d.filter(b=>f.includes(b.name)),x=()=>{c(),e({title:"Filters Applied",description:"Report data has been updated based on your filters."})},N=()=>{if(!l||l.length===0){e({title:"No Data",description:"No pass data available to export. Apply filters first.",variant:"destructive"});return}const b=["Student Name","Grade","Teacher","Pass Type","Custom Reason","Checkout Time","Return Time","Duration (min)"],S=l.map(j=>{var ue,Z,se;const W=j.returnTime?a(j.checkoutTime,j.returnTime)??j.duration:null;return[((ue=j.student)==null?void 0:ue.name)||"Unknown",((Z=j.student)==null?void 0:Z.grade)||"Unknown",((se=j.teacher)==null?void 0:se.name)||"Unknown",j.passType||"general",j.customReason||"",new Date(j.checkoutTime).toLocaleString(),j.returnTime?new Date(j.returnTime).toLocaleString():"Still Out",W!==null?W:"Still Out"]}),C=[b,...S].map(j=>j.map(W=>`"${W}"`).join(",")).join(`
`),R=new Blob([C],{type:"text/csv"}),k=window.URL.createObjectURL(R),A=document.createElement("a");A.href=k,A.download=`pass-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(k),e({title:"Export Complete",description:"Pass report has been downloaded as CSV."})},v=()=>{e({title:"Exporting PDF",description:"Your report is being exported as PDF..."})},E=l.filter(b=>b.status==="returned"&&b.returnTime).map(b=>{const S=a(b.checkoutTime,b.returnTime)??b.duration;return{...b,calculatedDuration:S}}).filter(b=>b.calculatedDuration!==null),_={totalPasses:l.length,avgDuration:E.length>0?Math.round(E.reduce((b,S)=>b+(S.calculatedDuration||0),0)/E.length*10)/10:0,peakHour:l.length>0?new Date(l.reduce((b,S)=>new Date(S.checkoutTime)>new Date(b.checkoutTime)?S:b).checkoutTime).toLocaleTimeString([],{hour:"numeric"}):"N/A",uniqueStudents:new Set(l.map(b=>b.studentId)).size},T={general:l.filter(b=>(b.passType||"general")==="general").length,nurse:l.filter(b=>b.passType==="nurse").length,discipline:l.filter(b=>b.passType==="discipline").length},P=new Date;P.setHours(0,0,0,0);const D=l.filter(b=>new Date(b.checkoutTime)>=P),M=D.length>0?D.sort((b,S)=>new Date(S.checkoutTime).getTime()-new Date(b.checkoutTime).getTime()).slice(0,10).map(b=>{var C;const S=a(b.checkoutTime,b.returnTime);return{id:b.id,studentName:((C=b.student)==null?void 0:C.name)||"Unknown Student",action:b.status==="returned"?`Returned after ${S!==null?S:b.duration&&b.duration>=1?b.duration:1} minutes`:`Checked out${b.customReason?` - ${b.customReason}`:b.passType&&b.passType!=="general"?` for ${b.passType}`:""}`,time:new Date(b.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),date:"Today",passType:b.passType||"general"}}):[];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Reports"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"View and export student pass usage data"})]}),o.jsx(le,{className:"mb-6",children:o.jsxs(ce,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Filters"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"dateRange",children:"Date Range"}),o.jsxs(er,{value:n.dateRange,onValueChange:b=>r({...n,dateRange:b}),children:[o.jsx(Mn,{"data-testid":"select-date-range",children:o.jsx(tr,{placeholder:"Select date range"})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"today",children:"Today"}),o.jsx(Ie,{value:"week",children:"This Week"}),o.jsx(Ie,{value:"month",children:"This Month"}),o.jsx(Ie,{value:"custom",children:"Custom Range"})]})]})]}),n.dateRange==="custom"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"startDate",children:"Start Date"}),o.jsx(de,{id:"startDate",type:"date",value:s.startDate,onChange:b=>i({...s,startDate:b.target.value}),"data-testid":"input-start-date"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"endDate",children:"End Date"}),o.jsx(de,{id:"endDate",type:"date",value:s.endDate,onChange:b=>i({...s,endDate:b.target.value}),"data-testid":"input-end-date"})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"gradeFilter",children:"Grade"}),o.jsxs(er,{value:n.grade,onValueChange:b=>r({...n,grade:b}),children:[o.jsx(Mn,{"data-testid":"select-grade-filter",children:o.jsx(tr,{placeholder:"All Grades"})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"all",children:"All Grades"}),m.map(b=>o.jsxs(Ie,{value:b.name,children:["Grade ",b.name]},b.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"teacherFilter",children:"Teacher"}),o.jsxs(er,{value:n.teacher,onValueChange:b=>r({...n,teacher:b}),children:[o.jsx(Mn,{"data-testid":"select-teacher-filter",children:o.jsx(tr,{placeholder:"All Teachers"})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"all",children:"All Teachers"}),h.map(b=>o.jsx(Ie,{value:b.id,children:b.name},b.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"passTypeFilter",children:"Pass Type"}),o.jsxs(er,{value:n.passType,onValueChange:b=>r({...n,passType:b}),children:[o.jsx(Mn,{"data-testid":"select-pass-type-filter",children:o.jsx(tr,{placeholder:"All Types"})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"all",children:"All Types"}),o.jsx(Ie,{value:"general",children:"General"}),o.jsx(Ie,{value:"nurse",children:"Nurse"}),o.jsx(Ie,{value:"discipline",children:"Discipline"})]})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx(H,{onClick:x,className:"w-full","data-testid":"button-apply-filters",children:"Apply Filters"})})]})]})}),o.jsx(le,{className:"mb-6",children:o.jsxs(ce,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Pass Type Breakdown"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"General"})]}),o.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-general-passes",children:T.general}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Bathroom/General"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Nurse"})]}),o.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"stat-nurse-passes",children:T.nurse}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Health Office"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Discipline"})]}),o.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"stat-discipline-passes",children:T.discipline}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Office/Admin"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(le,{children:o.jsxs(ce,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary","data-testid":"stat-total-passes",children:_.totalPasses}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Passes"})]})}),o.jsx(le,{children:o.jsxs(ce,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-secondary","data-testid":"stat-avg-duration",children:_.avgDuration}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Minutes"})]})}),o.jsx(le,{children:o.jsxs(ce,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-accent","data-testid":"stat-peak-hour",children:_.peakHour}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Peak Hour"})]})}),o.jsx(le,{children:o.jsxs(ce,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-foreground","data-testid":"stat-unique-students",children:_.uniqueStudents}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Students"})]})})]}),o.jsx(le,{className:"mb-6",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Export Data"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(H,{onClick:N,className:"bg-secondary hover:bg-secondary/90","data-testid":"button-export-csv",children:[o.jsx("i",{className:"fas fa-file-csv mr-2"}),"Export CSV"]}),o.jsxs(H,{onClick:v,className:"bg-destructive hover:bg-destructive/90","data-testid":"button-export-pdf",children:[o.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Export PDF"]})]})]})})}),o.jsx(le,{children:o.jsxs(ce,{className:"p-0",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Today's Activity"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Resets daily • View historical data using date filters above"})]})}),o.jsx("div",{className:"divide-y divide-border","data-testid":"recent-activity-list",children:M.length===0?o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("i",{className:"fas fa-history text-muted-foreground text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No activity today"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Historical data available using date filters above"})]}):M.map(b=>o.jsx("div",{className:"p-4","data-testid":`activity-${b.id}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary",children:b.studentName.split(" ").map(S=>S[0]).join("")})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:b.studentName}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.passType==="nurse"?"bg-red-100 text-red-700":b.passType==="discipline"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:b.passType==="nurse"?"Nurse":b.passType==="discipline"?"Discipline":"General"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:b.action})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:b.time}),o.jsx("p",{className:"text-xs text-muted-foreground",children:b.date})]})]})},b.id))})]})})]})}var xw="Switch",[i7,Eq]=qn(xw),[o7,a7]=i7(xw),aA=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,x]=g.useState(null),N=Oe(e,T=>x(T)),v=g.useRef(!1),y=m?h||!!m.closest("form"):!0,[E=!1,_]=ai({prop:s,defaultProp:i,onChange:d});return o.jsxs(o7,{scope:n,checked:E,disabled:l,children:[o.jsx(_e.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":uA(E),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:N,onClick:J(t.onClick,T=>{_(P=>!P),y&&(v.current=T.isPropagationStopped(),v.current||T.stopPropagation())})}),y&&o.jsx(l7,{control:m,bubbles:!v.current,name:r,value:c,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});aA.displayName=xw;var lA="SwitchThumb",cA=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=a7(lA,n);return o.jsx(_e.span,{"data-state":uA(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});cA.displayName=lA;var l7=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=g.useRef(null),a=hx(n),l=Hv(e);return g.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function uA(t){return t?"checked":"unchecked"}var dA=aA,c7=cA;const Ay=g.forwardRef(({className:t,...e},n)=>o.jsx(dA,{className:me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(c7,{className:me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ay.displayName=dA.displayName;function u7({user:t}){const[e,n]=g.useState({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30}),[r,s]=g.useState(t.name||""),[i,a]=g.useState(!1),[l,c]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,h]=g.useState({current:!1,new:!1,confirm:!1}),[f,m]=g.useState(!1),{toast:x}=jt();g.useEffect(()=>{n({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30})},[t]);const N=async()=>{try{r!==t.name&&await Ue("PUT","/api/users/me",{name:r}),await Ue("PUT","/api/users/settings",e),De.invalidateQueries({queryKey:["/api/users/me"]}),x({title:"Settings Saved",description:"Your profile and settings have been updated successfully."})}catch(y){x({title:"Error",description:y.message,variant:"destructive"})}},v=async()=>{if(l.newPassword!==l.confirmPassword){x({title:"Error",description:"New passwords don't match",variant:"destructive"});return}if(l.newPassword.length<6){x({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}m(!0);try{await Ue("PUT","/api/users/me/password",{currentPassword:l.currentPassword,newPassword:l.newPassword}),x({title:"Password Changed",description:"Your password has been updated successfully."}),a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(y){x({title:"Error",description:y.message,variant:"destructive"})}finally{m(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Profile & Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your profile and configure your school settings"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(Gg,{className:"w-5 h-5"}),"Profile Information"]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{children:"Email"}),o.jsx(de,{value:t.email,readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-email"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),o.jsxs("div",{children:[o.jsx(ee,{children:"Name"}),o.jsx(de,{value:r,onChange:y=>s(y.target.value),placeholder:"Enter your name","data-testid":"input-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{children:"Role"}),o.jsx(de,{value:t.isAdmin?"Administrator":"Teacher",readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-role"})]}),o.jsxs("div",{children:[o.jsx(ee,{children:"Password"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(de,{value:"••••••••",onChange:()=>{},readOnly:!0,disabled:!0,className:"bg-muted flex-1",type:"password"}),o.jsxs(H,{variant:"outline",onClick:()=>a(!0),"data-testid":"button-change-password",children:[o.jsx(Y_,{className:"w-4 h-4 mr-2"}),"Change"]})]})]})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(r4,{className:"w-5 h-5"}),"School Information"]})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name"}),o.jsx(de,{id:"schoolName",value:e.schoolName,onChange:y=>n({...e,schoolName:y.target.value}),placeholder:"Enter school name","data-testid":"input-school-name"})]})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(s4,{className:"w-5 h-5"}),"System Settings"]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ee,{children:"Enable Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when students are out for extended periods"})]}),o.jsx(Ay,{checked:e.enableNotifications,onCheckedChange:y=>n({...e,enableNotifications:y}),"data-testid":"switch-notifications"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ee,{children:"Auto-Return Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically mark students as returned after timeout"})]}),o.jsx(Ay,{checked:e.autoReturn,onCheckedChange:y=>n({...e,autoReturn:y}),"data-testid":"switch-auto-return"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"passTimeout",children:"Pass Timeout (minutes)"}),o.jsx(de,{id:"passTimeout",type:"number",value:e.passTimeout,onChange:y=>n({...e,passTimeout:parseInt(y.target.value)||30}),min:"5",max:"180","data-testid":"input-pass-timeout"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Time before a pass is considered overdue (5-180 minutes)"})]})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsx(Ce,{children:"Getting Started"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Go to the Roster tab and add your grade levels (6th, 7th, 8th, etc.)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use bulk add or individual student creation in the Roster tab"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Select Active Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on grade cards in Roster to make them active in MyClass (they'll turn green)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"4"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Manage Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the MyClass tab to issue and track student hall passes"})]})]})]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(H,{onClick:N,"data-testid":"button-save-settings",children:"Save Settings"})})]}),o.jsx(Zn,{open:i,onOpenChange:a,children:o.jsxs(Rn,{className:"max-w-md",children:[o.jsxs(jn,{children:[o.jsxs(An,{className:"flex items-center gap-2",children:[o.jsx(Y_,{className:"w-5 h-5"}),"Change Password"]}),o.jsx(jf,{children:"Enter your current password and choose a new one"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"currentPassword",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(de,{id:"currentPassword",type:d.current?"text":"password",value:l.currentPassword,onChange:y=>c({...l,currentPassword:y.target.value}),placeholder:"Enter current password","data-testid":"input-current-password"}),o.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,current:!d.current}),children:d.current?o.jsx(tp,{className:"w-4 h-4"}):o.jsx(jd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"newPassword",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(de,{id:"newPassword",type:d.new?"text":"password",value:l.newPassword,onChange:y=>c({...l,newPassword:y.target.value}),placeholder:"Enter new password","data-testid":"input-new-password"}),o.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,new:!d.new}),children:d.new?o.jsx(tp,{className:"w-4 h-4"}):o.jsx(jd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(de,{id:"confirmPassword",type:d.confirm?"text":"password",value:l.confirmPassword,onChange:y=>c({...l,confirmPassword:y.target.value}),placeholder:"Confirm new password","data-testid":"input-confirm-password"}),o.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,confirm:!d.confirm}),children:d.confirm?o.jsx(tp,{className:"w-4 h-4"}):o.jsx(jd,{className:"w-4 h-4"})})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx(H,{variant:"outline",onClick:()=>{a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})},disabled:f,children:"Cancel"}),o.jsx(H,{onClick:v,disabled:f||!l.currentPassword||!l.newPassword||!l.confirmPassword,"data-testid":"button-confirm-password-change",children:f?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})})]})}const d7=tu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),$c=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:me(d7({variant:e}),t),...n}));$c.displayName="Alert";const h7=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:me("mb-1 font-medium leading-none tracking-tight",t),...e}));h7.displayName="AlertTitle";const zc=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-sm [&_p]:leading-relaxed",t),...e}));zc.displayName="AlertDescription";function f7({user:t}){var h;const{toast:e}=jt(),n=kv(),{data:r,isLoading:s}=zt({queryKey:["/api/subscription-status"],enabled:!!t}),i=Wo({mutationFn:()=>Ue("POST","/api/cancel-subscription"),onSuccess:f=>{e({title:"Subscription Cancelled",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Cancellation Failed",description:f.message||"Failed to cancel subscription",variant:"destructive"})}}),a=Wo({mutationFn:()=>Ue("POST","/api/reactivate-subscription"),onSuccess:f=>{e({title:"Subscription Reactivated",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Reactivation Failed",description:f.message||"Failed to reactivate subscription",variant:"destructive"})}});if(s)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6"}),o.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=(f,m="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:m}).format(f/100),d=[{name:"Basic",users:"3 users",price:"$6",annual:"$48/year",monthlySavings:"$24",features:["3 teacher licenses","Full feature access","Email support","All reporting tools"],current:!0},{name:"Small School",users:"10 users",price:"$35",annual:"$336/year",monthlySavings:"$84",features:["10 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Medium School",users:"25 users",price:"$75",annual:"$720/year",monthlySavings:"$180",features:["25 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Large School",users:"50 users",price:"$120",annual:"$1,152/year",monthlySavings:"$288",features:["50 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Unlimited",users:"Unlimited",price:"$180",annual:"$1,728/year",monthlySavings:"$432",features:["Unlimited teachers","Full feature access","Email support","All reporting tools"],current:!1}];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Billing & Subscription"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your subscription and billing information"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(le,{children:o.jsxs(ce,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zg,{className:"w-5 h-5 text-primary"}),o.jsx("h3",{className:"font-medium text-foreground",children:"Current Subscription"})]}),o.jsx(Un,{variant:r!=null&&r.hasActiveSubscription?"default":"secondary","data-testid":"subscription-status-badge",children:r!=null&&r.hasActiveSubscription?"Active":r!=null&&r.isTrialAccount?"Free Trial":"Free Plan"})]}),r!=null&&r.hasActiveSubscription?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Plan"}),o.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(h=r.plan)==null?void 0:h.replace("_"," ")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Amount"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c(r.amount,r.currency),o.jsxs("span",{className:"text-xs",children:["/",r.interval]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Teacher Licenses"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.maxTeachers===-1?"Unlimited":r.maxTeachers})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Next Billing"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:l(r.currentPeriodEnd)})]})]}),o.jsx("div",{className:"border-t pt-4",children:r.cancelled?o.jsxs("div",{className:"space-y-3",children:[o.jsxs($c,{children:[o.jsx(RN,{className:"h-4 w-4"}),o.jsxs(zc,{children:["Your subscription has been cancelled and will end on ",l(r.currentPeriodEnd),". You can reactivate it at any time before then."]})]}),o.jsxs(H,{onClick:()=>a.mutate(),disabled:a.isPending,className:"w-full","data-testid":"button-reactivate-subscription",children:[o.jsx(n4,{className:"w-4 h-4 mr-2"}),a.isPending?"Reactivating...":"Reactivate Subscription"]})]}):o.jsxs(H,{onClick:()=>{confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your current billing period.")&&i.mutate()},disabled:i.isPending,variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50","data-testid":"button-cancel-subscription",children:[o.jsx(ru,{className:"w-4 h-4 mr-2"}),i.isPending?"Cancelling...":"Cancel Subscription"]})})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:r!=null&&r.isTrialAccount?"You are currently on a free trial with unlimited access.":"You are on the free plan with limited features."}),o.jsx(H,{className:"w-full","data-testid":"button-upgrade-subscription",onClick:()=>window.open("/register","_blank"),children:"Upgrade to Paid Plan"})]})]})}),o.jsx(le,{children:o.jsxs(ce,{className:"p-6",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Available Plans"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:d.map(f=>{const m=f.name.toLowerCase().replace(" ","_")===(r==null?void 0:r.plan);return o.jsx(le,{className:m?"border-primary":"",children:o.jsx(ce,{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"font-medium text-foreground mb-1",children:f.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:f.users}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:f.price}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"per month"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:f.annual}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium mb-4",children:["Save ",f.monthlySavings," annually"]}),o.jsx("ul",{className:"text-xs text-muted-foreground space-y-1 mb-6",children:f.features.map((x,N)=>o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 bg-primary rounded-full flex-shrink-0"}),x]},N))}),m?o.jsx(Un,{variant:"secondary",className:"w-full",children:"Current Plan"}):o.jsx(H,{className:"w-full",variant:"outline",onClick:()=>window.open("/register","_blank"),"data-testid":`button-select-${f.name.toLowerCase().replace(" ","-")}`,children:"Select Plan"})]})})},f.name)})})]})})]})]})}var ww="Checkbox",[m7,Sq]=qn(ww),[p7,g7]=m7(ww),hA=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,x]=g.useState(null),N=Oe(e,P=>x(P)),v=g.useRef(!1),y=m?h||!!m.closest("form"):!0,[E=!1,_]=ai({prop:s,defaultProp:i,onChange:d}),T=g.useRef(E);return g.useEffect(()=>{const P=m==null?void 0:m.form;if(P){const D=()=>_(T.current);return P.addEventListener("reset",D),()=>P.removeEventListener("reset",D)}},[m,_]),o.jsxs(p7,{scope:n,state:E,disabled:l,children:[o.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":si(E)?"mixed":E,"aria-required":a,"data-state":pA(E),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:N,onKeyDown:J(t.onKeyDown,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:J(t.onClick,P=>{_(D=>si(D)?!0:!D),y&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})}),y&&o.jsx(y7,{control:m,bubbles:!v.current,name:r,value:c,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:si(i)?!1:i})]})});hA.displayName=ww;var fA="CheckboxIndicator",mA=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=g7(fA,n);return o.jsx(dr,{present:r||si(i.state)||i.state===!0,children:o.jsx(_e.span,{"data-state":pA(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});mA.displayName=fA;var y7=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,a=g.useRef(null),l=hx(n),c=Hv(e);g.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&x){const N=new Event("click",{bubbles:r});h.indeterminate=si(n),x.call(h,si(n)?!1:n),h.dispatchEvent(N)}},[l,n,r]);const d=g.useRef(si(n)?!1:n);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function si(t){return t==="indeterminate"}function pA(t){return si(t)?"indeterminate":t?"checked":"unchecked"}var gA=hA,v7=mA;const yA=g.forwardRef(({className:t,...e},n)=>o.jsx(gA,{ref:n,className:me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:o.jsx(v7,{className:me("flex items-center justify-center text-current"),children:o.jsx(nu,{className:"h-4 w-4"})})}));yA.displayName=gA.displayName;function x7(){const t=ZB.isConfigured(),n=t?{icon:o.jsx(Wr,{className:"h-5 w-5 text-green-500"}),status:"Configured",variant:"default",message:"Firebase is properly configured and ready to use."}:{icon:o.jsx(jN,{className:"h-5 w-5 text-destructive"}),status:"Not Configured",variant:"destructive",message:"Firebase keys are missing. Please add your Firebase configuration in the secrets."};return o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[n.icon,"Firebase Integration"]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Un,{variant:n.variant,children:n.status})}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.message}),t&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Configuration Details:"}),o.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsxs("div",{children:["Project ID: ","passpilot-55c3d"]}),o.jsxs("div",{children:["App ID: ","1:134904289902:web:e62d187d4ef81703cfe47f"]}),o.jsxs("div",{children:["API Key: ","••••••••"]})]})]}),!t&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[o.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(RN,{className:"h-4 w-4"}),"Required Environment Variables:"]}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:"• VITE_FIREBASE_API_KEY"}),o.jsx("li",{children:"• VITE_FIREBASE_PROJECT_ID"}),o.jsx("li",{children:"• VITE_FIREBASE_APP_ID"})]})]})]})})]})}var vA="AlertDialog",[w7,Tq]=qn(vA,[RC]),ps=RC(),xA=t=>{const{__scopeAlertDialog:e,...n}=t,r=ps(e);return o.jsx(HC,{...r,...n,modal:!0})};xA.displayName=vA;var _7="AlertDialogTrigger",wA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return o.jsx(WC,{...s,...r,ref:e})});wA.displayName=_7;var E7="AlertDialogPortal",_A=t=>{const{__scopeAlertDialog:e,...n}=t,r=ps(e);return o.jsx(KC,{...r,...n})};_A.displayName=E7;var S7="AlertDialogOverlay",EA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return o.jsx(ox,{...s,...r,ref:e})});EA.displayName=S7;var ha="AlertDialogContent",[T7,b7]=w7(ha),N7=rN("AlertDialogContent"),SA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=ps(n),a=g.useRef(null),l=Oe(e,a),c=g.useRef(null);return o.jsx(gF,{contentName:ha,titleName:TA,docsSlug:"alert-dialog",children:o.jsx(T7,{scope:n,cancelRef:c,children:o.jsxs(ax,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:J(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(N7,{children:r}),o.jsx(I7,{contentRef:a})]})})})});SA.displayName=ha;var TA="AlertDialogTitle",bA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return o.jsx(lx,{...s,...r,ref:e})});bA.displayName=TA;var NA="AlertDialogDescription",CA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return o.jsx(cx,{...s,...r,ref:e})});CA.displayName=NA;var C7="AlertDialogAction",IA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return o.jsx(ux,{...s,...r,ref:e})});IA.displayName=C7;var PA="AlertDialogCancel",RA=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=b7(PA,n),i=ps(n),a=Oe(e,s);return o.jsx(ux,{...i,...r,ref:a})});RA.displayName=PA;var I7=({contentRef:t})=>{const e=`\`${ha}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ha}\` by passing a \`${NA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ha}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},P7=xA,R7=wA,j7=_A,jA=EA,AA=SA,kA=IA,DA=RA,OA=bA,MA=CA;const Ip=P7,Pp=R7,A7=j7,LA=g.forwardRef(({className:t,...e},n)=>o.jsx(jA,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));LA.displayName=jA.displayName;const Gd=g.forwardRef(({className:t,...e},n)=>o.jsxs(A7,{children:[o.jsx(LA,{}),o.jsx(AA,{ref:n,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Gd.displayName=AA.displayName;const Hd=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});Hd.displayName="AlertDialogHeader";const Wd=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wd.displayName="AlertDialogFooter";const Kd=g.forwardRef(({className:t,...e},n)=>o.jsx(OA,{ref:n,className:me("text-lg font-semibold",t),...e}));Kd.displayName=OA.displayName;const Qd=g.forwardRef(({className:t,...e},n)=>o.jsx(MA,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Qd.displayName=MA.displayName;const Yd=g.forwardRef(({className:t,...e},n)=>o.jsx(kA,{ref:n,className:me(Zv(),t),...e}));Yd.displayName=kA.displayName;const Xd=g.forwardRef(({className:t,...e},n)=>o.jsx(DA,{ref:n,className:me(Zv({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xd.displayName=DA.displayName;function k7({user:t}){var b;const[e,n]=g.useState({schoolName:t.schoolName||"",enableNotifications:!0,autoReturn:!1,passTimeout:30}),[r,s]=g.useState(t.assignedGrades||[]),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(!1),{toast:f}=jt(),{data:m=[]}=zt({queryKey:["/api/grades"]}),{data:x=[]}=zt({queryKey:["/api/admin/teachers"],enabled:t.isAdmin}),{data:N}=zt({queryKey:["/api/admin/school-info"],enabled:t.isAdmin}),v=async()=>{try{await Ue("PUT","/api/users/settings",{...e,assignedGrades:r}),De.invalidateQueries({queryKey:["/api/users/me"]}),f({title:"Settings Saved",description:"Your settings have been updated successfully."})}catch(S){f({title:"Error",description:S.message,variant:"destructive"})}},y=(S,C)=>{s(C?[...r,S]:r.filter(R=>R!==S))},E=Wo({mutationFn:async S=>(await Ue("POST","/api/admin/teachers",S)).json(),onSuccess:()=>{De.invalidateQueries({queryKey:["/api/admin/teachers"]}),a(""),c(""),h(!1),f({title:"Teacher Added",description:"Teacher invitation sent. They'll set their password on first login."})},onError:S=>{f({title:"Error",description:S.message||"Failed to add teacher",variant:"destructive"})}}),_=Wo({mutationFn:async S=>{await Ue("DELETE",`/api/admin/teachers/${S}`)},onSuccess:()=>{De.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Removed",description:"Teacher has been removed from your school."})},onError:S=>{f({title:"Error",description:S.message||"Failed to remove teacher",variant:"destructive"})}}),T=Wo({mutationFn:async S=>(await Ue("PATCH",`/api/admin/teachers/${S}/promote`)).json(),onSuccess:S=>{De.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Promoted",description:S.message||"Teacher has been promoted to admin."})},onError:S=>{f({title:"Error",description:S.message||"Failed to promote teacher",variant:"destructive"})}}),P=Wo({mutationFn:async S=>(await Ue("PATCH",`/api/admin/teachers/${S}/demote`)).json(),onSuccess:S=>{De.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Admin Demoted",description:S.message||"Admin has been demoted to teacher."})},onError:S=>{f({title:"Error",description:S.message||"Failed to demote admin",variant:"destructive"})}}),D=()=>{if(!i||!l){f({title:"Error",description:"Please enter email and name",variant:"destructive"});return}const S=(N==null?void 0:N.maxTeachers)||1;if(x.length>=S){f({title:"User Limit Reached",description:`Your ${(N==null?void 0:N.plan)||"current"} plan allows ${S} teacher${S===1?"":"s"}. Upgrade to add more teachers.`,variant:"destructive"});return}E.mutate({email:i,name:l})},M=S=>{switch(S){case"free":return 10;case"basic_10":return 10;case"standard_25":return 25;case"premium_50":return 50;case"enterprise_unlimited":return"Unlimited";default:return 10}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Admin Panel"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure school settings and system administration"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(x7,{}),t.isAdmin&&o.jsxs(o.Fragment,{children:[o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(JM,{className:"w-5 h-5"}),"School Plan & Limits"]})}),o.jsx(ce,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(ee,{children:"Current Plan"}),o.jsx(Un,{variant:"outline",className:"mt-1",children:((b=N==null?void 0:N.plan)==null?void 0:b.replace("_"," ").toUpperCase())||"FREE"})]}),o.jsxs("div",{children:[o.jsx(ee,{children:"Teachers"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[x.length," / ",M((N==null?void 0:N.plan)||"free")]})]}),o.jsxs("div",{children:[o.jsx(ee,{children:"School ID"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:(N==null?void 0:N.schoolId)||"Loading..."})]})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(np,{className:"w-5 h-5"}),"Add New Teacher"]})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[d?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"teacher-email",children:"Teacher Email"}),o.jsx(de,{id:"teacher-email",type:"email",value:i,onChange:S=>a(S.target.value),placeholder:"teacher@school.edu","data-testid":"input-teacher-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"teacher-name",children:"Teacher Name"}),o.jsx(de,{id:"teacher-name",value:l,onChange:S=>c(S.target.value),placeholder:"Teacher Name","data-testid":"input-teacher-name"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{onClick:D,disabled:E.isPending,"data-testid":"button-confirm-add-teacher",children:E.isPending?"Adding...":"Add Teacher"}),o.jsx(H,{variant:"outline",onClick:()=>h(!1),"data-testid":"button-cancel-add-teacher",children:"Cancel"})]})]}):o.jsxs(H,{onClick:()=>h(!0),className:"w-full","data-testid":"button-add-teacher",children:[o.jsx(np,{className:"w-4 h-4 mr-2"}),"Add Teacher"]}),(N==null?void 0:N.maxTeachers)&&x.length>=N.maxTeachers&&o.jsxs("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg flex items-center gap-2",children:[o.jsx(bh,{className:"w-4 h-4 text-amber-600"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["You've reached your plan limit of ",N.maxTeachers," teacher",N.maxTeachers===1?"":"s",". Upgrade your plan to add more teachers."]})]})]})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(On,{className:"w-5 h-5"}),"Current Teachers (",x.length,")"]})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-3",children:x.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No teachers added yet. Add your first teacher above."}):x.map(S=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`teacher-item-${S.email}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(AN,{className:"w-4 h-4 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:S.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:S.email})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Un,{variant:S.status==="active"?"default":"secondary",children:S.status}),o.jsx(Un,{variant:S.isAdmin?"default":"outline",children:S.isAdmin?"Admin":"Teacher"}),(S.id!==(t==null?void 0:t.id)||x.filter(C=>C.isAdmin).length>1)&&o.jsxs(o.Fragment,{children:[S.isAdmin?o.jsxs(Ip,{children:[o.jsx(Pp,{asChild:!0,children:o.jsx(H,{variant:"ghost",size:"sm",className:"text-orange-600 hover:text-orange-700","data-testid":`button-demote-admin-${S.email}`,children:o.jsx(l4,{className:"w-4 h-4"})})}),o.jsxs(Gd,{children:[o.jsxs(Hd,{children:[o.jsx(Kd,{children:"Demote Admin"}),o.jsxs(Qd,{children:["Are you sure you want to demote ",S.name," (",S.email,") from admin to teacher? They will lose admin privileges and cannot access admin functions."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsx(Yd,{onClick:()=>P.mutate(S.id),className:"bg-orange-600 text-white hover:bg-orange-700",children:"Demote to Teacher"})]})]})]}):o.jsxs(Ip,{children:[o.jsx(Pp,{asChild:!0,children:o.jsx(H,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700","data-testid":`button-promote-teacher-${S.email}`,children:o.jsx(np,{className:"w-4 h-4"})})}),o.jsxs(Gd,{children:[o.jsxs(Hd,{children:[o.jsx(Kd,{children:"Promote to Admin"}),o.jsxs(Qd,{children:["Are you sure you want to promote ",S.name," (",S.email,") to admin? They will gain full administrative privileges including the ability to manage other teachers and school settings."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsx(Yd,{onClick:()=>T.mutate(S.id),className:"bg-green-600 text-white hover:bg-green-700",children:"Promote to Admin"})]})]})]}),(!S.isAdmin||x.filter(C=>C.isAdmin).length>1)&&o.jsxs(Ip,{children:[o.jsx(Pp,{asChild:!0,children:o.jsx(H,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive","data-testid":`button-remove-teacher-${S.email}`,children:o.jsx(qg,{className:"w-4 h-4"})})}),o.jsxs(Gd,{children:[o.jsxs(Hd,{children:[o.jsxs(Kd,{children:["Remove ",S.isAdmin?"Admin":"Teacher"]}),o.jsxs(Qd,{children:["Are you sure you want to remove ",S.name," (",S.email,") from your school? This action cannot be undone and will revoke their access to all school data.",S.isAdmin&&" They will lose all administrative privileges."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsxs(Yd,{onClick:()=>_.mutate(S.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Remove ",S.isAdmin?"Admin":"Teacher"]})]})]})]})]})]})]},S.id))})})]})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsx(Ce,{children:"School Information"})}),o.jsx(ce,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name"}),o.jsx(de,{id:"schoolName",value:e.schoolName,onChange:S=>n({...e,schoolName:S.target.value}),"data-testid":"input-school-name"})]})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsx(Ce,{children:"Teacher Profile"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"teacherName",children:"Name"}),o.jsx(de,{id:"teacherName",value:t.name||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"teacherEmail",children:"Email"}),o.jsx(de,{id:"teacherEmail",value:t.email||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-email"})]})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School"}),o.jsx(de,{id:"schoolName",value:t.schoolName||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-school-name-readonly"})]})]})})]}),!t.isAdmin&&o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsx(Ce,{children:"Grade Level Access"})}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which grade levels you want access to. You can manage students and passes for these grades."}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(S=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx(yA,{id:`grade-${S.id}`,checked:r.includes(S.name),onCheckedChange:C=>y(S.name,!!C),"data-testid":`checkbox-grade-${S.name}`}),o.jsxs(ee,{htmlFor:`grade-${S.id}`,className:"text-sm font-medium cursor-pointer",children:["Grade ",S.name]})]},S.id))}),m.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground bg-gray-50 dark:bg-gray-800 p-3 rounded",children:"No grades available yet. Add grades in the Roster tab first."}),r.length===0&&m.length>0&&o.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-3 rounded",children:"Please select at least one grade to access student management features."}),r.length>0&&o.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded",children:o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:["You have access to ",r.length," grade level",r.length!==1?"s":"",": ",r.join(", ")]})})]})})]}),o.jsx(H,{onClick:v,className:"w-full","data-testid":"button-save-settings",children:"Save Settings"})]})]})}function D7(){const[,t]=ur(),{data:e}=zt({queryKey:["/api/trial-status"],refetchInterval:6e4});if(!(e!=null&&e.isTrialAccount))return null;if(e.isExpired)return o.jsxs($c,{className:"mb-4 border-red-500 bg-red-50 dark:bg-red-950",children:[o.jsx(bh,{className:"h-4 w-4 text-red-600"}),o.jsxs(zc,{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-red-800 dark:text-red-200 font-medium",children:"Your 30-day free trial has expired. Upgrade now to continue using PassPilot."}),o.jsxs(H,{size:"sm",className:"ml-4",onClick:()=>t("/register"),"data-testid":"button-upgrade-now",children:[o.jsx(zg,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})]});const n=e.daysRemaining<=7,r=n?"bg-yellow-50 dark:bg-yellow-950":"bg-blue-50 dark:bg-blue-950",s=n?"border-yellow-500":"border-blue-500",i=n?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200",a=n?"text-yellow-600":"text-blue-600";return o.jsxs($c,{className:`mb-4 ${s} ${r}`,children:[o.jsx(is,{className:`h-4 w-4 ${a}`}),o.jsxs(zc,{className:"flex items-center justify-between",children:[o.jsx("span",{className:`${i} font-medium`,children:n?`⚠️ Trial expires in ${e.daysRemaining} day${e.daysRemaining!==1?"s":""}!`:`Free trial: ${e.daysRemaining} days remaining`}),o.jsxs("div",{className:"flex gap-2",children:[n&&o.jsxs(H,{size:"sm",variant:"outline",onClick:()=>t("/register"),"data-testid":"button-upgrade-trial",children:[o.jsx(zg,{className:"w-4 h-4 mr-2"}),"Upgrade"]}),o.jsx(H,{size:"sm",variant:"ghost",onClick:()=>t("/register"),"data-testid":"button-view-plans",children:"View Plans"})]})]})]})}function O7({user:t,enabled:e=!0}){const{toast:n}=jt(),r=g.useRef(new Set),{data:s}=zt({queryKey:["/api/passes/active"],refetchInterval:e&&(t!=null&&t.enableNotifications)?3e4:!1,enabled:e&&(t==null?void 0:t.enableNotifications)});g.useEffect(()=>{if(!(t!=null&&t.enableNotifications)||!s||!Array.isArray(s))return;const i=t.passTimeout||30,a=new Date;s.forEach(l=>{var h;if(!l.checkoutTime||r.current.has(l.id))return;const c=new Date(l.checkoutTime),d=Math.floor((a.getTime()-c.getTime())/(1e3*60));d>=i&&(r.current.add(l.id),n({title:"Pass Overdue",description:`${((h=l.student)==null?void 0:h.name)||"Student"} has been out for ${d} minutes (${l.passType} pass)`,variant:"destructive"}))})},[s,t==null?void 0:t.enableNotifications,t==null?void 0:t.passTimeout,n]),g.useEffect(()=>{if(!s||!Array.isArray(s))return;const i=new Set(s.map(l=>l.id));Array.from(r.current).forEach(l=>{i.has(l)||r.current.delete(l)})},[s])}function M7({user:t,onLogout:e}){const[n,r]=g.useState("passes"),[,s]=ur(),{toast:i}=jt(),[a,l]=g.useState(!1),[c,d]=g.useState(""),[h,f]=g.useState("");O7({user:t,enabled:t==null?void 0:t.enableNotifications});const[m,x]=g.useState(()=>{try{const T=localStorage.getItem(`selectedGrades_${t.id}`);return T?new Set(JSON.parse(T)):new Set}catch{return new Set}}),[N,v]=g.useState(()=>{try{return localStorage.getItem(`currentGrade_${t.id}`)||null}catch{return null}});g.useEffect(()=>{try{localStorage.setItem(`selectedGrades_${t.id}`,JSON.stringify(Array.from(m)))}catch(T){console.warn("Failed to save selected grades to localStorage:",T)}},[m,t.id]),g.useEffect(()=>{try{N?localStorage.setItem(`currentGrade_${t.id}`,N):localStorage.removeItem(`currentGrade_${t.id}`)}catch(T){console.warn("Failed to save current grade to localStorage:",T)}},[N,t.id]);const y=[{id:"passes",label:"Passes",icon:"fas fa-clipboard-list"},{id:"myclass",label:"My Class",icon:"fas fa-chalkboard-teacher"},{id:"roster",label:"Roster",icon:"fas fa-users"},{id:"upload",label:"Upload",icon:"fas fa-cloud-upload-alt"},{id:"reports",label:"Reports",icon:"fas fa-chart-bar"},{id:"profile",label:"Profile",icon:"fas fa-user"}];t.isAdmin&&(y.push({id:"admin",label:"Admin",icon:"fas fa-cog"}),y.push({id:"billing",label:"Billing",icon:"fas fa-credit-card"}));const E=()=>{switch(n){case"passes":return o.jsx(tS,{user:t,selectedGrades:m});case"myclass":return o.jsx(t7,{user:t,selectedGrades:m,currentGrade:N,onRemoveGrade:T=>{const P=new Set(m);if(P.delete(T),N===T){const D=Array.from(P);v(D.length>0?D[0]:null)}x(P)}});case"roster":return o.jsx(n7,{user:t,selectedGrades:m,onGradeClick:T=>{const P=new Set(m);m.has(T)?(P.delete(T),N===T&&v(null)):(P.add(T),v(T)),x(P)}});case"upload":return o.jsx(r7,{user:t});case"reports":return o.jsx(s7,{user:t});case"admin":return t.isAdmin?o.jsx(k7,{user:t}):null;case"profile":return o.jsx(u7,{user:t});case"billing":return t.isAdmin?o.jsx(f7,{user:t}):null;default:return o.jsx(tS,{user:t})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card shadow-sm border-b border-border px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"PassPilot"}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:t.schoolName||"School"}),o.jsx("span",{children:"•"}),o.jsx("span",{children:t.name||"Teacher"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(DP,{children:[o.jsx(OP,{asChild:!0,children:o.jsx(H,{variant:"outline",size:"sm","data-testid":"button-user-menu",children:o.jsx(_f,{className:"h-4 w-4"})})}),o.jsxs(Ex,{align:"end",children:[o.jsxs(oa,{onClick:()=>l(!0),"data-testid":"menu-switch-kiosk",children:[o.jsx(o4,{className:"h-4 w-4 mr-2"}),"Switch to Kiosk"]}),o.jsx(oa,{onClick:e,"data-testid":"menu-logout",children:"Logout"})]})]})})]})}),o.jsxs("main",{className:"pb-20 min-h-screen",children:[o.jsx("div",{className:"p-4",children:o.jsx(D7,{})}),E()]}),o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-40",children:o.jsx("div",{className:`grid h-16 ${y.length===6?"grid-cols-6":"grid-cols-7"}`,children:y.map(T=>o.jsxs(H,{variant:"ghost",className:`flex flex-col items-center justify-center h-full rounded-none ${n===T.id?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground"}`,onClick:()=>r(T.id),"data-testid":`button-tab-${T.id}`,children:[o.jsx("i",{className:`${T.icon} text-lg mb-1`}),o.jsx("span",{className:"text-xs",children:T.label})]},T.id))})}),o.jsx(Zn,{open:a,onOpenChange:l,children:o.jsxs(Rn,{"data-testid":"dialog-kiosk-setup",children:[o.jsxs(jn,{children:[o.jsx(An,{children:"Switch to Kiosk Mode"}),o.jsx(jf,{children:"Set up this device for shared use. Students can check out passes without accessing teacher settings."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"4-Digit PIN (for exiting kiosk mode):"}),o.jsx(de,{type:"password",placeholder:"Enter 4-digit PIN",value:c,onChange:T=>d(T.target.value.slice(0,4)),maxLength:4,className:"text-center text-lg","data-testid":"input-kiosk-pin"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location Label (optional):"}),o.jsx(de,{placeholder:"e.g., Mr. Smith's Room, Hallway Tablet",value:h,onChange:T=>f(T.target.value),"data-testid":"input-location-label"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{onClick:_,disabled:c.length!==4,className:"flex-1","data-testid":"button-confirm-kiosk",children:"Switch to Kiosk"}),o.jsx(H,{variant:"outline",onClick:()=>{l(!1),d(""),f("")},className:"flex-1","data-testid":"button-cancel-kiosk",children:"Cancel"})]})]})]})})]});async function _(){try{if(!(await fetch("/api/auth/set-kiosk-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({pin:c})})).ok)throw new Error("Failed to set kiosk PIN");const P={teacherId:t.id,teacherName:t.name,locationLabel:h||void 0,schoolId:t.schoolId,currentGrade:N,token:localStorage.getItem("token")};console.log("Creating kiosk session:",P),sessionStorage.setItem("kioskSession",JSON.stringify(P)),s("/kiosk")}catch{i({title:"Error",description:"Failed to switch to kiosk mode. Please try again.",variant:"destructive"})}}}function nS(){const{user:t,logout:e,isLoading:n}=Cf();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-orange-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):t?o.jsx(M7,{user:t,onLogout:e}):o.jsx(t6,{})}function L7(){const{login:t,registerSchool:e}=Cf(),{toast:n}=jt();ur();const[r,s]=g.useState("login"),[i,a]=g.useState(!1),[l,c]=g.useState({email:"",password:""}),[d,h]=g.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free"}),[f,m]=g.useState({email:""}),x=async y=>{y.preventDefault(),a(!0);try{const E=await t(l.email,l.password);E!=null&&E.message&&n({title:"Welcome!",description:E.message})}catch(E){n({title:"Error",description:E.message,variant:"destructive"})}finally{a(!1)}},N=async y=>{y.preventDefault(),a(!0);try{await e(d),n({title:"Success!",description:"School registered successfully!"})}catch(E){n({title:"Error",description:E.message,variant:"destructive"})}finally{a(!1)}},v=async y=>{y.preventDefault(),a(!0);try{const E=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.email})}),_=await E.json();if(!E.ok)throw new Error(_.message);n({title:"Reset Email Sent",description:"Check your email for password reset instructions."}),s("login")}catch(E){n({title:"Error",description:E.message,variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(le,{className:"w-full max-w-md",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-id-card text-white text-2xl"})}),o.jsx(Ce,{className:"text-2xl font-bold",children:r==="login"?"Sign In to PassPilot":r==="forgot-password"?"Reset Your Password":"Register Your School"})]}),o.jsx(ce,{children:r==="login"?o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"email",children:"Email Address"}),o.jsx(de,{type:"email",id:"email",placeholder:"teacher@school.edu",value:l.email,onChange:y=>c({...l,email:y.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"password",children:"Password"}),o.jsx(de,{type:"password",id:"password",placeholder:"••••••••",value:l.password,onChange:y=>c({...l,password:y.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(H,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-login",children:i?"Signing In...":"Sign In"}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(H,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>s("forgot-password"),"data-testid":"button-forgot-password",children:"Forgot Password?"}),o.jsx(H,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>s("register"),"data-testid":"button-register-link",children:"Register School"})]})]}):r==="forgot-password"?o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"forgot-email",children:"Email Address"}),o.jsx(de,{type:"email",id:"forgot-email",placeholder:"teacher@school.edu",value:f.email,onChange:y=>m({...f,email:y.target.value}),required:!0,"data-testid":"input-forgot-email"})]}),o.jsx(H,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-send-reset",children:i?"Sending Reset Email...":"Send Reset Email"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(H,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>s("login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]}):o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name"}),o.jsx(de,{type:"text",id:"schoolName",placeholder:"Lincoln Elementary School",value:d.schoolName,onChange:y=>h({...d,schoolName:y.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(de,{type:"text",id:"adminName",placeholder:"Principal Smith",value:d.adminName,onChange:y=>h({...d,adminName:y.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(de,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:d.adminEmail,onChange:y=>h({...d,adminEmail:y.target.value}),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminPassword",children:"Password"}),o.jsx(de,{type:"password",id:"adminPassword",placeholder:"••••••••",value:d.adminPassword,onChange:y=>h({...d,adminPassword:y.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsx(H,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:i,"data-testid":"button-register",children:i?"Registering...":"Register School"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(H,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>s("login"),"data-testid":"button-back-to-login-from-register",children:"Back to Sign In"})})]})})]})})}var VA="basil",V7=function(e){return e===3?"v3":e},FA="https://js.stripe.com",F7="".concat(FA,"/").concat(VA,"/stripe.js"),U7=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,$7=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,rS="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",z7=function(e){return U7.test(e)||$7.test(e)},B7=function(){for(var e=document.querySelectorAll('script[src^="'.concat(FA,'"]')),n=0;n<e.length;n++){var r=e[n];if(z7(r.src))return r}return null},sS=function(e){var n="",r=document.createElement("script");r.src="".concat(F7).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},q7=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:n})},jl=null,md=null,pd=null,G7=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},H7=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},W7=function(e){return jl!==null?jl:(jl=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(rS),window.Stripe){n(window.Stripe);return}try{var s=B7();if(s&&e)console.warn(rS);else if(!s)s=sS(e);else if(s&&pd!==null&&md!==null){var i;s.removeEventListener("load",pd),s.removeEventListener("error",md),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=sS(e)}pd=H7(n,r),md=G7(r),s.addEventListener("load",pd),s.addEventListener("error",md)}catch(a){r(a);return}}),jl.catch(function(n){return jl=null,Promise.reject(n)}))},K7=function(e,n,r){if(e===null)return null;var s=n[0],i=s.match(/^pk_test/),a=V7(e.version),l=VA;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,n);return q7(c,r),c},Al,UA=!1,$A=function(){return Al||(Al=W7(null).catch(function(e){return Al=null,Promise.reject(e)}),Al)};Promise.resolve().then(function(){return $A()}).catch(function(t){UA||console.warn(t)});var Q7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];UA=!0;var s=Date.now();return $A().then(function(i){return K7(i,n,s)})};const Y7=Q7("pk_live_51RtLjlBw14YCsyD6BiOwJkWZVUnznHUwGDJa0Sx5UwQwyQsXgLtq29TT6YJpygC7I4IE6KsXNaSc8yU6vH3mJclb00iOMfz4tJ"),iS=[{id:"free",name:"Demo Plan",price:0,maxTeachers:10,features:["10 teacher licenses","Full feature access","For demo purposes only","No time limit"]},{id:"free_trial",name:"30-Day Free Trial",price:0,maxTeachers:-1,features:["Unlimited teachers for 30 days","Full feature access","Real-time pass tracking","Comprehensive reporting","Email support"]},{id:"basic",name:"Basic",price:6,annualPrice:48,maxTeachers:3,features:["3 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1Rtco7Bw14YCsyD6u5jnXzsw",annualPriceId:"price_1Rtco7Bw14YCsyD6LEmSd5ek"},{id:"small_school",name:"Small School",price:35,annualPrice:336,maxTeachers:10,features:["10 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1Rtd13Bw14YCsyD6s94Aj95z",annualPriceId:"price_1Rtd13Bw14YCsyD6PiBLGG75"},{id:"medium_school",name:"Medium School",price:75,annualPrice:720,maxTeachers:25,features:["25 teacher licenses","Full feature access","Pass tracking & reports","Email support"],popular:!0,priceId:"price_1Rtd9rBw14YCsyD6oxHsrBRT",annualPriceId:"price_1RtdAHBw14YCsyD6D8cXpvJ3"},{id:"large_school",name:"Large School",price:120,annualPrice:1152,maxTeachers:50,features:["50 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1RtdBlBw14YCsyD6kyVO5y78",annualPriceId:"price_1RtdBlBw14YCsyD66Lee6JnO"},{id:"unlimited",name:"Unlimited",price:180,annualPrice:1728,maxTeachers:-1,features:["Unlimited teachers","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1RtdFUBw14YCsyD6nVyOraRH",annualPriceId:"price_1RtdGIBw14YCsyD6SRJqK3ED"}];function X7(){const[t,e]=g.useState("plans"),[n,r]=g.useState(!1),[s,i]=g.useState(null),[a,l]=g.useState("monthly"),{registerSchool:c}=Cf(),{toast:d}=jt(),[h,f]=g.useState({schoolName:"",district:"",adminName:"",adminEmail:"",adminPassword:"",selectedPlan:""});pr.useEffect(()=>{const y=localStorage.getItem("pendingRegistration"),_=new URLSearchParams(window.location.search).get("plan");if(y&&_)try{const T=JSON.parse(y),P=iS.find(D=>D.id===_);P&&(i(P),f({schoolName:T.schoolName||"",district:"",adminName:T.adminName||"",adminEmail:T.adminEmail||"",adminPassword:T.adminPassword||"",selectedPlan:P.id}),e("details"),localStorage.removeItem("pendingRegistration"))}catch(T){console.error("Error parsing pending registration data:",T),localStorage.removeItem("pendingRegistration")}},[]);const m=y=>{i(y),f(E=>({...E,selectedPlan:y.id})),e("details")},x=async y=>{y.preventDefault(),s&&(s.id==="free"?await N():e("payment"))},N=async()=>{r(!0);try{await c({schoolName:h.schoolName,adminName:h.adminName,adminEmail:h.adminEmail,adminPassword:h.adminPassword,plan:h.selectedPlan}),d({title:"Registration Successful!",description:"Your school has been registered. You can now start inviting teachers."})}catch(y){d({title:"Registration Failed",description:y.message,variant:"destructive"})}finally{r(!1)}},v=async()=>{if(!(!s||!s.priceId)){r(!0);try{const y=await Y7;if(!y)throw new Error("Stripe failed to load");const E=a==="annual"&&s.annualPriceId||s.priceId,_=await fetch("/api/create-subscription-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:E,schoolData:h})}),{sessionId:T}=await _.json(),{error:P}=await y.redirectToCheckout({sessionId:T});if(P)throw new Error(P.message)}catch(y){d({title:"Payment Failed",description:y.message,variant:"destructive"})}finally{r(!1)}}};return t==="plans"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(WM,{className:"text-white text-3xl"})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Choose Your PassPilot Plan"}),o.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8",children:"Professional hall pass management for schools of every size. Start with our free trial or choose a plan that fits your needs."}),o.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[o.jsx("span",{className:`text-sm ${a==="monthly"?"text-primary font-medium":"text-gray-500"}`,children:"Monthly"}),o.jsx("button",{onClick:()=>l(a==="monthly"?"annual":"monthly"),className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","data-testid":"billing-toggle",children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a==="annual"?"translate-x-6":"translate-x-1"}`})}),o.jsxs("span",{className:`text-sm ${a==="annual"?"text-primary font-medium":"text-gray-500"}`,children:["Annual ",o.jsx("span",{className:"text-green-600",children:"(Save 20%)"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:iS.map(y=>o.jsxs(le,{className:`relative cursor-pointer transition-all hover:shadow-lg ${y.popular?"ring-2 ring-primary scale-105":""}`,onClick:()=>m(y),"data-testid":`plan-${y.id}`,children:[y.popular&&o.jsx(Un,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary",children:"Most Popular"}),o.jsxs(Ne,{className:"text-center",children:[o.jsx(Ce,{className:"text-lg",children:y.name}),o.jsx("div",{className:"text-3xl font-bold text-primary",children:a==="annual"&&y.annualPrice?o.jsxs(o.Fragment,{children:["$",y.annualPrice,o.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/year"})]}):o.jsxs(o.Fragment,{children:["$",y.price,o.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})}),a==="annual"&&y.annualPrice&&o.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["$",Math.round(y.annualPrice/12),"/month • Save $",y.price*12-y.annualPrice]}),o.jsxs(Jr,{children:[y.maxTeachers===-1?"Unlimited":y.maxTeachers," teachers"]})]}),o.jsxs(ce,{children:[o.jsx("ul",{className:"space-y-2",children:y.features.map((E,_)=>o.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[o.jsx(nu,{className:"w-4 h-4 text-green-500"}),E]},_))}),o.jsx(H,{className:"w-full mt-6",variant:y.popular?"default":"outline","data-testid":`select-plan-${y.id}`,children:y.price===0?"Start Free Trial":"Choose Plan"})]})]},y.id))}),o.jsx("div",{className:"text-center mt-12",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All plans include secure data storage, FERPA compliance, and 24/7 uptime monitoring."})})]})}):t==="details"?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(le,{className:"w-full max-w-lg",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx(i4,{className:"text-white text-2xl"})}),o.jsx(Ce,{className:"text-2xl font-bold",children:"School Registration"}),o.jsxs(Jr,{children:[s==null?void 0:s.name," Plan - ",(s==null?void 0:s.maxTeachers)===-1?"Unlimited":s==null?void 0:s.maxTeachers," Teachers"]})]}),o.jsx(ce,{children:o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name *"}),o.jsx(de,{id:"schoolName",placeholder:"St. Francis Elementary",value:h.schoolName,onChange:y=>f(E=>({...E,schoolName:y.target.value})),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"district",children:"School District (Optional)"}),o.jsx(de,{id:"district",placeholder:"Springfield School District",value:h.district,onChange:y=>f(E=>({...E,district:y.target.value})),"data-testid":"input-district"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminName",children:"Administrator Name *"}),o.jsx(de,{id:"adminName",placeholder:"John Smith",value:h.adminName,onChange:y=>f(E=>({...E,adminName:y.target.value})),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminEmail",children:"Administrator Email *"}),o.jsx(de,{type:"email",id:"adminEmail",placeholder:"admin@school.edu",value:h.adminEmail,onChange:y=>f(E=>({...E,adminEmail:y.target.value})),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminPassword",children:"Administrator Password *"}),o.jsx(de,{type:"password",id:"adminPassword",placeholder:"••••••••",value:h.adminPassword,onChange:y=>f(E=>({...E,adminPassword:y.target.value})),required:!0,"data-testid":"input-admin-password"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>e("plans"),className:"flex-1","data-testid":"button-back",children:"Back to Plans"}),o.jsx(H,{type:"submit",disabled:n,className:"flex-1","data-testid":"button-continue",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(s==null?void 0:s.price)===0?"Complete Registration":"Continue to Payment"})]})]})})]})}):t==="payment"?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(le,{className:"w-full max-w-lg",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx(kN,{className:"text-white text-2xl"})}),o.jsx(Ce,{className:"text-2xl font-bold",children:"Complete Your Purchase"}),o.jsxs(Jr,{children:[s==null?void 0:s.name," Plan - $",s==null?void 0:s.price,"/month"]})]}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Order Summary"}),o.jsx("div",{className:"flex justify-between",children:o.jsxs("span",{children:["School: ",h.schoolName]})}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Plan: ",s==null?void 0:s.name]}),o.jsxs("span",{children:["$",s==null?void 0:s.price,"/month"]})]}),o.jsx("div",{className:"flex justify-between",children:o.jsxs("span",{children:["Teachers: ",(s==null?void 0:s.maxTeachers)===-1?"Unlimited":s==null?void 0:s.maxTeachers]})})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(H,{type:"button",variant:"outline",onClick:()=>e("details"),className:"flex-1","data-testid":"button-back-to-details",children:"Back"}),o.jsx(H,{onClick:v,disabled:n,className:"flex-1","data-testid":"button-pay",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Redirecting..."]}):"Pay with Stripe"})]})]})})]})}):null}function J7(){const[,t]=ur(),[e,n]=g.useState({schoolName:"",district:"",adminName:"",adminEmail:"",adminPassword:""}),[r,s]=g.useState(!1),{toast:i}=jt(),a=async c=>{c.preventDefault(),s(!0);try{const d=await Ue("POST","/api/auth/register-school",{...e,plan:"free_trial"}),h=await d.json();if(d.ok)h.requiresVerification?(i({title:"Registration Successful!",description:"Please check your email and click the verification link to activate your trial."}),t(`/verification-pending?school=${encodeURIComponent(h.schoolName)}&email=${encodeURIComponent(h.adminEmail)}`)):(localStorage.setItem("authToken",h.token),i({title:"Welcome to PassPilot!",description:"Your account has been created successfully."}),t("/trial-success"));else throw new Error(h.message||"Registration failed")}catch(d){let h=d.message||"An error occurred during registration";h.includes("trial account already exists")&&(h="A trial account already exists for your organization. Each school/district is limited to one trial account. Contact support if you need assistance."),i({title:"Registration Failed",description:h,variant:"destructive"})}finally{s(!1)}},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-4xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Start Your Free Trial"}),o.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-6",children:"Get full access to PassPilot for 30 days - completely free!"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs(le,{className:"border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"text-green-800 dark:text-green-200 flex items-center",children:[o.jsx(kN,{className:"w-5 h-5 mr-2"}),"What's Included in Your Trial"]})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Unlimited Teachers"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Add as many teachers as you need during your trial"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Full Feature Access"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"All pass management, reporting, and admin features"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Real-time Tracking"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Live pass monitoring and student safety features"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Email Support"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Get help when you need it during your trial"})]})]})]})]}),o.jsxs($c,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:[o.jsx(is,{className:"h-4 w-4 text-blue-600"}),o.jsxs(zc,{className:"text-blue-800 dark:text-blue-200",children:[o.jsx("strong",{children:"30-Day Trial Period:"})," Your trial starts immediately and runs for 30 full days. No credit card required to get started!"]})]})]}),o.jsxs(le,{children:[o.jsxs(Ne,{children:[o.jsx(Ce,{children:"School Information"}),o.jsx(Jr,{children:"Tell us about your school to start your free trial"})]}),o.jsx(ce,{children:o.jsxs("form",{onSubmit:a,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"schoolName",children:"School Name *"}),o.jsx(de,{id:"schoolName",placeholder:"Lincoln Elementary School",value:e.schoolName,onChange:c=>l("schoolName",c.target.value),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"district",children:"School District (Optional)"}),o.jsx(de,{id:"district",placeholder:"Springfield School District",value:e.district,onChange:c=>l("district",c.target.value),"data-testid":"input-district"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminName",children:"Administrator Name *"}),o.jsx(de,{id:"adminName",placeholder:"Principal Smith",value:e.adminName,onChange:c=>l("adminName",c.target.value),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminEmail",children:"Administrator Email *"}),o.jsx(de,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:e.adminEmail,onChange:c=>l("adminEmail",c.target.value),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"adminPassword",children:"Password *"}),o.jsx(de,{type:"password",id:"adminPassword",placeholder:"••••••••",value:e.adminPassword,onChange:c=>l("adminPassword",c.target.value),required:!0,"data-testid":"input-admin-password"})]}),o.jsx(H,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:r,"data-testid":"button-start-trial",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Starting Your Trial..."]}):o.jsxs(o.Fragment,{children:[o.jsx(On,{className:"w-4 h-4 mr-2"}),"Start My 30-Day Free Trial"]})}),o.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("p",{children:["Already have an account?"," ",o.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>t("/login"),"data-testid":"button-login-link",children:"Sign In"})]}),o.jsxs("p",{className:"mt-2",children:["Want to see paid plans?"," ",o.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>t("/register"),"data-testid":"button-view-plans",children:"View All Plans"})]})]})]})})]})]})]})})}function Z7(){const[,t]=ur(),[e,n]=g.useState(!0),{toast:r}=jt();return g.useEffect(()=>{(async()=>{try{const a=new URLSearchParams(window.location.search).get("session_id");if(!a)throw new Error("No session ID found");const c=await(await fetch("/api/complete-registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a})})).json();if(c.success)localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(c.user)),r({title:"Registration Complete!",description:c.message}),setTimeout(()=>{t("/")},2e3);else throw new Error(c.message||"Registration failed")}catch(i){console.error("Registration processing error:",i),r({title:"Registration Error",description:i.message,variant:"destructive"}),setTimeout(()=>{t("/register")},3e3)}finally{n(!1)}})()},[t,r]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs(le,{className:"w-full max-w-md text-center",children:[o.jsxs(Ne,{children:[o.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e?o.jsx(Th,{className:"w-10 h-10 text-white animate-spin"}):o.jsx(Wr,{className:"w-10 h-10 text-white"})}),o.jsx(Ce,{className:"text-2xl font-bold text-green-800 dark:text-green-400",children:e?"Processing Registration...":"Registration Successful!"}),o.jsx(Jr,{children:e?"Please wait while we set up your school account.":"Your school has been successfully registered with PassPilot."})]}),o.jsx(ce,{children:e?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Creating your school account..."}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Setting up admin access..."}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configuring subscription..."})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You will be redirected to your admin dashboard shortly, where you can:"}),o.jsxs("ul",{className:"text-sm text-left space-y-1 text-gray-600 dark:text-gray-400",children:[o.jsx("li",{children:"• Invite teachers to your school"}),o.jsx("li",{children:"• Set up grades and student rosters"}),o.jsx("li",{children:"• Configure pass tracking settings"}),o.jsx("li",{children:"• Access reporting and analytics"})]}),o.jsx(H,{onClick:()=>t("/"),className:"w-full","data-testid":"button-continue-to-app",children:"Continue to PassPilot"})]})})]})})}function eq(){const[,t]=ur();return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-rose-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs(le,{className:"w-full max-w-md text-center",children:[o.jsxs(Ne,{children:[o.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(jN,{className:"w-10 h-10 text-white"})}),o.jsx(Ce,{className:"text-2xl font-bold text-red-800 dark:text-red-400",children:"Registration Cancelled"}),o.jsx(Jr,{children:"Your school registration was cancelled and no payment was processed."})]}),o.jsx(ce,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Don't worry - you can try again at any time. Your information was not saved."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(H,{onClick:()=>t("/register"),className:"w-full","data-testid":"button-try-again",children:"Try Registration Again"}),o.jsxs(H,{onClick:()=>t("/"),variant:"outline",className:"w-full","data-testid":"button-back-home",children:[o.jsx(PN,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t",children:o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Need help? Contact our support team at support@passpilot.com"})})]})})]})})}function tq(){const[,t]=ur();g.useEffect(()=>{De.invalidateQueries()},[]);const e=()=>{t("/")};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-2xl",children:o.jsxs(le,{className:"border-green-200 shadow-lg",children:[o.jsxs(Ne,{className:"text-center pb-6",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4",children:o.jsx(Wr,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),o.jsx(Ce,{className:"text-3xl font-bold text-green-800 dark:text-green-200",children:"Welcome to PassPilot!"}),o.jsx(Jr,{className:"text-lg text-green-700 dark:text-green-300",children:"Your 30-day free trial has started successfully"})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[o.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-3",children:"Your Trial Includes:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(KM,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"30 days full access"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(On,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Unlimited teachers"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"All premium features"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Wr,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Email support included"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Next Steps:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Set up your grades and classes"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure the grade levels your school uses"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Invite your teachers"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add unlimited teachers to your school account"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Add students and start tracking passes"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Import or manually add student rosters"})]})]})]})]}),o.jsx("div",{className:"pt-4",children:o.jsxs(H,{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-lg py-3","data-testid":"button-continue-to-app",children:["Get Started with PassPilot",o.jsx(Ug,{className:"w-5 h-5 ml-2"})]})}),o.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 pt-2",children:o.jsxs("p",{children:["Your trial will automatically remind you before it expires.",o.jsx("br",{}),"No credit card required until you decide to upgrade."]})})]})]})})})}function nq(){const[,t]=ur(),[e,n]=g.useState(24*60*60),r=new URLSearchParams(window.location.search),s=r.get("school"),i=r.get("email");g.useEffect(()=>{const l=setInterval(()=>{n(c=>c>0?c-1:0)},1e3);return()=>clearInterval(l)},[]);const a=l=>{const c=Math.floor(l/3600),d=Math.floor(l%3600/60);return`${c}h ${d}m`};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsxs(le,{className:"w-full max-w-md",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(AN,{className:"w-8 h-8 text-blue-600"})}),o.jsx(Ce,{className:"text-2xl",children:"Check Your Email"}),o.jsx(Jr,{children:"We've sent a verification link to activate your free trial"})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"A verification email has been sent to:"}),o.jsx("p",{className:"font-semibold text-gray-900","data-testid":"verification-email",children:i})]}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($g,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-sm font-medium",children:"Registration Complete"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(is,{className:"w-5 h-5 text-blue-600"}),o.jsxs("span",{className:"text-sm",children:["Verification link expires in ",a(e)]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"What's Next?"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"1"}),"Check your email inbox (and spam folder)"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"2"}),"Click the verification link in the email"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"3"}),"Log in to start your 30-day free trial"]})]})]}),s&&o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:"School:"})," ",s]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:"Trial Length:"})," 30 days with unlimited teachers"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Didn't receive the email? Check your spam folder or contact support."}),o.jsxs(H,{variant:"outline",onClick:()=>t("/trial"),className:"w-full","data-testid":"button-back",children:[o.jsx(PN,{className:"w-4 h-4 mr-2"}),"Back to Registration"]})]})]})]})})}function rq(){const{toast:t}=jt(),[,e]=ur(),[n,r]=g.useState(!1),[s,i]=g.useState(""),[a,l]=g.useState({newPassword:"",confirmPassword:""});g.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("token");if(!h){t({title:"Invalid Reset Link",description:"This password reset link is invalid or missing the required token.",variant:"destructive"}),e("/login");return}i(h)},[]);const c=async d=>{d.preventDefault(),r(!0);try{if(!a.newPassword||!a.confirmPassword)throw new Error("Please fill in both password fields");if(a.newPassword.length<6)throw new Error("Password must be at least 6 characters long");if(a.newPassword!==a.confirmPassword)throw new Error("Passwords do not match");const h=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,newPassword:a.newPassword})}),f=await h.json();if(!h.ok)throw new Error(f.message);t({title:"Password Reset Successful",description:"Your password has been reset. You can now sign in with your new password."}),e("/login")}catch(h){t({title:"Error",description:h.message,variant:"destructive"})}finally{r(!1)}};return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(le,{className:"w-full max-w-md",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-lock text-white text-2xl"})}),o.jsx(Ce,{className:"text-2xl font-bold",children:"Create New Password"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your new password below"})]}),o.jsx(ce,{children:o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"newPassword",children:"New Password"}),o.jsx(de,{type:"password",id:"newPassword",placeholder:"••••••••",value:a.newPassword,onChange:d=>l({...a,newPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-new-password"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 6 characters long"})]}),o.jsxs("div",{children:[o.jsx(ee,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsx(de,{type:"password",id:"confirmPassword",placeholder:"••••••••",value:a.confirmPassword,onChange:d=>l({...a,confirmPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-confirm-password"})]}),o.jsx(H,{type:"submit",className:"w-full",disabled:n,"data-testid":"button-reset-password",children:n?"Resetting Password...":"Reset Password"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(H,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>e("/login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]})})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx(le,{className:"w-full max-w-md",children:o.jsx(ce,{className:"p-8 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})})}function sq({onBack:t}){const[e,n]=g.useState(null),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(!1),f={id:"1",name:"Emma Johnson",grade:"5th Grade",currentlyOut:!1,lastPass:"Yesterday, 2:30 PM - Returned 2:45 PM"},m=()=>{r.length>=3&&n(f)},x=async()=>{i&&(h(!0),setTimeout(()=>{h(!1),n(null),s(""),a(""),c(""),alert("Pass request sent to teacher for approval!")},1500))},N=()=>{n({...e,currentlyOut:!1}),alert("Welcome back! Pass completed.")};return e?e.currentlyOut?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(le,{className:"shadow-lg border-orange-200",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(is,{className:"w-8 h-8 text-orange-600"})}),o.jsx(Ce,{className:"text-xl",children:"You're Currently Out"}),o.jsx("p",{className:"text-slate-600",children:"Return from your pass when finished"})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[o.jsx("p",{className:"font-medium",children:e.name}),o.jsx("p",{className:"text-sm text-slate-600",children:e.grade}),o.jsx(Un,{className:"mt-2 bg-orange-100 text-orange-700",children:"Out for 8 minutes"})]}),o.jsxs(H,{onClick:N,className:"w-full bg-green-600 hover:bg-green-700",children:[o.jsx(Ug,{className:"w-4 h-4 mr-2"}),"I'm Back - End Pass"]}),o.jsxs(H,{variant:"ghost",onClick:()=>n(null),className:"w-full",children:[o.jsx(Bg,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-12",children:o.jsxs(le,{className:"shadow-lg",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Gg,{className:"w-8 h-8 text-blue-600"})}),o.jsxs(Ce,{className:"text-xl",children:["Welcome, ",e.name]}),o.jsx("p",{className:"text-slate-600",children:e.grade})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm",children:[o.jsx("p",{className:"text-slate-600",children:"Last Pass:"}),o.jsx("p",{className:"font-medium",children:e.lastPass})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ee,{children:"Why do you need to leave?"}),o.jsxs(er,{value:i,onValueChange:a,children:[o.jsx(Mn,{children:o.jsx(tr,{placeholder:"Select pass type..."})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"restroom",children:"Restroom"}),o.jsx(Ie,{value:"water",children:"Water/Drink"}),o.jsx(Ie,{value:"nurse",children:"Nurse Visit"}),o.jsx(Ie,{value:"office",children:"Main Office"}),o.jsx(Ie,{value:"locker",children:"Locker"}),o.jsx(Ie,{value:"counselor",children:"Counselor"}),o.jsx(Ie,{value:"other",children:"Other (explain below)"})]})]})]}),i==="other"&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ee,{htmlFor:"custom-reason",children:"Please explain:"}),o.jsx(de,{id:"custom-reason",placeholder:"Enter reason...",value:l,onChange:v=>c(v.target.value)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(H,{onClick:x,disabled:!i||d,className:"flex-1",children:d?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):o.jsxs(o.Fragment,{children:[o.jsx(Ug,{className:"w-4 h-4 mr-2"}),"Request Pass"]})}),o.jsx(H,{variant:"outline",onClick:()=>n(null),disabled:d,children:o.jsx(Bg,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"text-center",children:o.jsx(H,{variant:"ghost",onClick:t,className:"text-sm",children:"← Teacher View"})})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(le,{className:"shadow-lg",children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx(Ce,{className:"text-2xl text-blue-600",children:"Student Pass Kiosk"}),o.jsx("p",{className:"text-slate-600",children:"Enter your Student ID to request a pass"})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ee,{htmlFor:"student-id",children:"Student ID"}),o.jsx(de,{id:"student-id",placeholder:"Enter your student ID...",value:r,onChange:v=>s(v.target.value),className:"text-center text-xl",maxLength:10})]}),o.jsxs(H,{onClick:m,className:"w-full",disabled:r.length<3,children:[o.jsx(Gg,{className:"w-4 h-4 mr-2"}),"Sign In"]}),o.jsx("div",{className:"text-center",children:o.jsx(H,{variant:"ghost",onClick:t,className:"text-sm",children:"← Back to Teacher View"})})]})]})})})}function iq({onBack:t}){const[e,n]=g.useState([{id:"1",studentName:"Emma Johnson",grade:"5th Grade",passType:"restroom",customReason:"",requestTime:"2:45 PM",avatar:"EJ"},{id:"2",studentName:"Marcus Chen",grade:"5th Grade",passType:"nurse",customReason:"",requestTime:"2:43 PM",avatar:"MC"},{id:"3",studentName:"Sofia Rodriguez",grade:"5th Grade",passType:"other",customReason:"Need to get my inhaler from my backpack in locker",requestTime:"2:41 PM",avatar:"SR"}]),r=l=>{n(c=>c.filter(d=>d.id!==l))},s=l=>{n(c=>c.filter(d=>d.id!==l))},i=l=>{const c={restroom:{label:"Restroom",color:"bg-blue-50 text-blue-600 border-blue-200"},water:{label:"Water",color:"bg-cyan-50 text-cyan-600 border-cyan-200"},nurse:{label:"Nurse",color:"bg-red-50 text-red-600 border-red-200"},office:{label:"Office",color:"bg-purple-50 text-purple-600 border-purple-200"},locker:{label:"Locker",color:"bg-green-50 text-green-600 border-green-200"},counselor:{label:"Counselor",color:"bg-orange-50 text-orange-600 border-orange-200"},other:{label:"Other",color:"bg-slate-50 text-slate-600 border-slate-200"}},d=c[l]||c.other;return o.jsx(Un,{variant:"outline",className:d.color,children:d.label})},a=l=>{const c=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],d=l.length%c.length;return c[d]};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Pass Requests"}),o.jsx("p",{className:"text-slate-600",children:"Approve or deny student pass requests"})]}),o.jsx(H,{variant:"outline",onClick:t,children:"← Back to Demo"})]}),e.length===0?o.jsx(le,{children:o.jsxs(ce,{className:"p-12 text-center",children:[o.jsx(is,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No Pending Requests"}),o.jsx("p",{className:"text-slate-500",children:"Student pass requests will appear here for approval"})]})}):o.jsx("div",{className:"space-y-4",children:e.map(l=>o.jsx(le,{className:"border-orange-200 bg-orange-50/30",children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-medium ${a(l.studentName)}`,children:l.avatar}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-slate-800",children:l.studentName}),o.jsx("p",{className:"text-sm text-slate-600",children:l.grade})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i(l.passType),o.jsx("span",{className:"text-sm text-slate-500",children:l.requestTime})]}),l.customReason&&o.jsxs("p",{className:"text-sm text-slate-600 max-w-xs",children:['"',l.customReason,'"']})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(H,{size:"sm",onClick:()=>r(l.id),className:"bg-green-600 hover:bg-green-700",children:[o.jsx(nu,{className:"w-4 h-4 mr-1"}),"Approve"]}),o.jsxs(H,{size:"sm",variant:"outline",onClick:()=>s(l.id),className:"border-red-300 text-red-600 hover:bg-red-50",children:[o.jsx(ru,{className:"w-4 h-4 mr-1"}),"Deny"]})]})]})]})})},l.id))}),o.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"How Student Self-Service Works:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:"• Students use a classroom computer/tablet to request passes"}),o.jsx("li",{children:"• Teacher receives real-time notifications to approve/deny"}),o.jsx("li",{children:"• Approved students can leave; denied requests explain why"}),o.jsx("li",{children:"• Students return through the same kiosk to log back in"}),o.jsx("li",{children:"• All activity is tracked for reports and accountability"})]})]})]})}function oq(){const[t,e]=g.useState("menu");return t==="student"?o.jsx(sq,{onBack:()=>e("menu")}):t==="teacher"?o.jsx(iq,{onBack:()=>e("menu")}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto pt-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Student Self-Service Pass System Demo"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Experience how a student-operated kiosk system would work compared to teacher-managed passes"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[o.jsxs(le,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("student"),children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx(ZM,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),o.jsx(Ce,{className:"text-xl",children:"Student Kiosk View"})]}),o.jsxs(ce,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See what students would experience when requesting passes at a classroom computer or tablet."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:"• Enter student ID to sign in"}),o.jsx("li",{children:"• Select pass type and reason"}),o.jsx("li",{children:"• Submit request for teacher approval"}),o.jsx("li",{children:"• Return to mark pass complete"})]}),o.jsx(H,{className:"w-full mt-4",children:"Try Student View →"})]})]}),o.jsxs(le,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("teacher"),children:[o.jsxs(Ne,{className:"text-center",children:[o.jsx(J_,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),o.jsx(Ce,{className:"text-xl",children:"Teacher Approval Panel"})]}),o.jsxs(ce,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See how teachers would approve or deny student pass requests in real-time."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:"• View incoming student requests"}),o.jsx("li",{children:"• See pass type and reasons"}),o.jsx("li",{children:"• Approve or deny with one click"}),o.jsx("li",{children:"• Monitor all active passes"})]}),o.jsx(H,{className:"w-full mt-4",variant:"outline",children:"Try Teacher View →"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(le,{className:"bg-green-50 border-green-200",children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"text-green-800 flex items-center gap-2",children:[o.jsx(J_,{className:"w-5 h-5"}),"Student Self-Service Advantages"]})}),o.jsx(ce,{children:o.jsxs("ul",{className:"text-green-700 space-y-2 text-sm",children:[o.jsx("li",{children:"• Reduces teacher interruptions during instruction"}),o.jsx("li",{children:"• Students take ownership of pass requests"}),o.jsx("li",{children:"• Automatic logging and accountability"}),o.jsx("li",{children:"• Scales well for larger classes"}),o.jsx("li",{children:"• Digital literacy for students"}),o.jsx("li",{children:"• Clear audit trail of all requests"})]})})]}),o.jsxs(le,{className:"bg-orange-50 border-orange-200",children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"text-orange-800 flex items-center gap-2",children:[o.jsx(On,{className:"w-5 h-5"}),"Implementation Considerations"]})}),o.jsx(ce,{children:o.jsxs("ul",{className:"text-orange-700 space-y-2 text-sm",children:[o.jsx("li",{children:"• Requires dedicated device in each classroom"}),o.jsx("li",{children:"• Student ID system and training needed"}),o.jsx("li",{children:"• Teacher must monitor approval notifications"}),o.jsx("li",{children:"• May not work well for younger students"}),o.jsx("li",{children:"• Needs reliable internet connectivity"}),o.jsx("li",{children:"• Initial setup and device management"})]})})]})]}),o.jsx("div",{className:"text-center mt-12",children:o.jsx(le,{className:"bg-blue-50 border-blue-200",children:o.jsxs(ce,{className:"p-6",children:[o.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Hybrid Option"}),o.jsx("p",{className:"text-blue-700",children:"PassPilot could offer both modes - letting schools choose teacher-managed passes OR student self-service kiosks based on their preferences and classroom setup."})]})})})]})})}function aq(){const[,t]=ur(),{toast:e}=jt(),[n,r]=g.useState(null),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState("general"),[h,f]=g.useState(""),[m,x]=g.useState(""),[N,v]=g.useState(!1),[y,E]=g.useState(null),[_,T]=g.useState(null),[P,D]=g.useState([]),[M,b]=g.useState(!1),[S,C]=g.useState(null),[R,k]=g.useState(Date.now());g.useEffect(()=>{const V=sessionStorage.getItem("kioskSession");if(V){const K=JSON.parse(V);console.log("Kiosk session loaded:",K),console.log("Token available:",!!K.token),console.log("LocalStorage token:",!!localStorage.getItem("token")),console.log("LocalStorage token value:",localStorage.getItem("token")),r(K),T(K.currentGrade||null),A(K.schoolId),j(K.teacherId),W()}else console.log("No kiosk session found, redirecting to login"),console.log("Current path should be /kiosk but redirecting to /login"),t("/login")},[t]),g.useEffect(()=>{const V=setInterval(()=>{k(Date.now())},1e4);return()=>clearInterval(V)},[]),g.useEffect(()=>{if(n!=null&&n.teacherId){const V=setInterval(()=>{j(n.teacherId)},3e3);return()=>clearInterval(V)}},[n==null?void 0:n.teacherId]);const A=async V=>{try{const pe=await(await Ue("GET",`/api/students?schoolId=${V}`,void 0)).json();console.log("Loaded students in kiosk:",pe),i(pe)}catch(K){console.error("Error loading students:",K)}},j=async V=>{try{const pe=await(await Ue("GET",`/api/passes/active?teacherId=${V}`,void 0)).json();l(pe)}catch(K){console.error("Failed to load active passes:",K)}},W=async()=>{try{const K=await(await Ue("GET","/api/grades",void 0)).json();D(K)}catch(V){console.error("Failed to load grades:",V)}},ue=V=>{if(!n)return;const K=a.find(pe=>pe.studentId===V.id&&pe.status==="out");K?se(K.id):(C(V),b(!0),d("general"),f(""))},Z=async()=>{if(!(!S||!n))try{console.log("Creating pass for student:",S.name);let V=h;c==="general"&&!h?V="Bathroom":c==="nurse"&&!h?V="Nurse visit":c==="discipline"&&!h&&(V="Discipline"),await Ue("POST","/api/passes",{studentId:S.id,passType:c,customReason:V}),De.invalidateQueries({queryKey:["/api/passes/active"]}),De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/passes"]}),await j(n.teacherId),e({title:"Pass created",description:`${S.name} has been marked as out for ${V}.`}),b(!1),C(null),d("general"),f("")}catch(V){console.error("Error creating pass:",V),e({title:"Error",description:`Failed to create pass: ${(V==null?void 0:V.message)||"Unknown error"}`,variant:"destructive"})}},se=async V=>{try{const K=a.find(Be=>Be.id===V),pe=(K==null?void 0:K.studentName)||"Student";await Ue("PUT",`/api/passes/${V}/return`,{}),De.invalidateQueries({queryKey:["/api/passes/active"]}),De.invalidateQueries({queryKey:["/api/students"]}),De.invalidateQueries({queryKey:["/api/passes"]}),e({title:"Student Returned",description:`${pe} has been marked as returned.`}),await j(n.teacherId)}catch(K){e({title:"Error",description:(K==null?void 0:K.message)||"Failed to return student. Please try again.",variant:"destructive"})}},U=async()=>{if(n)try{const V=await fetch("/api/auth/verify-kiosk-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:n.teacherId,pin:m})});V.ok&&((await V.json()).valid?(sessionStorage.removeItem("kioskSession"),t("/")):(e({title:"Invalid PIN",description:"Please enter the correct PIN to exit kiosk mode.",variant:"destructive"}),x("")))}catch{e({title:"Error",description:"Failed to verify PIN. Please try again.",variant:"destructive"})}},z=()=>{const V=setTimeout(()=>{v(!0)},3e3);E(V)},Y=()=>{y&&(clearTimeout(y),E(null))},F=s.filter(V=>!_||V.grade===_);return g.useEffect(()=>{!_&&P.length>0&&T(P[0].name)},[P,_]),n?N?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs(le,{className:"w-full max-w-md",children:[o.jsx(Ne,{children:o.jsx(Ce,{className:"text-center",children:"Exit Kiosk Mode"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Enter Teacher PIN:"}),o.jsx(de,{type:"password",value:m,onChange:V=>x(V.target.value),placeholder:"4-digit PIN",maxLength:4,className:"text-center text-lg","data-testid":"input-exit-pin"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{onClick:U,className:"flex-1","data-testid":"button-confirm-exit",children:"Exit Kiosk"}),o.jsx(H,{variant:"outline",onClick:()=>{v(!1),x("")},className:"flex-1","data-testid":"button-cancel-exit",children:"Cancel"})]})]})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"PassPilot Kiosk"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.teacherName,n.locationLabel&&` • ${n.locationLabel}`]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(H,{variant:"outline",onClick:()=>v(!0),className:"flex items-center space-x-2","data-testid":"button-exit-kiosk",children:[o.jsx(Bg,{className:"h-4 w-4"}),o.jsx("span",{children:"Exit Kiosk"})]}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date().toLocaleDateString()," • ",new Date().toLocaleTimeString()]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:P.map(V=>o.jsxs(H,{variant:_===V.name?"default":"outline",size:"sm",onClick:()=>T(V.name),className:`${_===V.name?"bg-blue-600 text-white hover:bg-blue-700":"hover:bg-blue-50"}`,"data-testid":`button-grade-${V.name}`,children:[V.name,o.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs rounded-full bg-black/10",children:F.length})]},V.id))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(On,{className:"h-5 w-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),o.jsx("p",{className:"text-2xl font-bold",children:F.length})]})]})})}),o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:o.jsx(is,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Currently Out"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(V=>V.status==="out"&&F.some(K=>K.id===V.studentId)).length})]})]})})}),o.jsx(le,{children:o.jsx(ce,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx($g,{className:"h-5 w-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Available"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:F.length-a.filter(V=>V.status==="out"&&F.some(K=>K.id===V.studentId)).length})]})]})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2 text-red-600",children:[o.jsx(is,{className:"h-5 w-5"}),"Currently Out - ",_||"All Grades"]})}),o.jsx(ce,{children:a.filter(V=>V.status==="out"&&F.some(K=>K.id===V.studentId)).length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No students are currently out of class"}):o.jsx("div",{className:"space-y-3",children:a.filter(V=>V.status==="out"&&F.some(K=>K.id===V.studentId)).map(V=>{const K=F.find(pe=>pe.id===V.studentId);return K?o.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-red-600",children:K.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:K.name}),o.jsxs("div",{className:"text-sm text-gray-600",children:[V.passType==="general"?"General":V.passType==="nurse"?"Nurse":"Discipline",V.customReason&&` • ${V.customReason}`]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Out for ",Math.floor((R-new Date(V.checkoutTime).getTime())/6e4)," min • Since ",new Date(V.checkoutTime).toLocaleTimeString()]})]})]}),o.jsx(H,{size:"sm",onClick:()=>se(V.id),className:"bg-blue-600 hover:bg-blue-700","data-testid":`button-return-${V.id}`,children:"Mark Returned"})]},V.id):null})})})]}),o.jsxs(le,{children:[o.jsx(Ne,{children:o.jsxs(Ce,{className:"flex items-center gap-2 text-green-600",children:[o.jsx($g,{className:"h-5 w-5"}),"Available Students - ",_||"All Grades"]})}),o.jsx(ce,{children:F.filter(V=>!a.some(K=>K.studentId===V.id&&K.status==="out")).length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"All students are currently out of class"}):o.jsx("div",{className:"space-y-2",children:F.filter(V=>!a.some(K=>K.studentId===V.id&&K.status==="out")).map(V=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>ue(V),"data-testid":`button-student-${V.id}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-green-600",children:V.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:V.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[V.grade," • ",V.studentId]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(H,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-50",children:"Mark Out"})})]},V.id))})})]})]}),o.jsx(Zn,{open:M,onOpenChange:b,children:o.jsxs(Rn,{className:"sm:max-w-md",children:[o.jsx(jn,{children:o.jsx(An,{children:"Mark Student Out"})}),o.jsxs("div",{className:"space-y-4 py-4",children:[S&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Creating pass for: ",o.jsx("span",{className:"font-medium",children:S.name})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ee,{htmlFor:"pass-type",children:"Pass Type"}),o.jsxs(er,{value:c,onValueChange:V=>d(V),children:[o.jsx(Mn,{id:"pass-type",children:o.jsx(tr,{})}),o.jsxs(Ln,{children:[o.jsx(Ie,{value:"general",children:"General (Bathroom, Water, etc.)"}),o.jsx(Ie,{value:"nurse",children:"Nurse"}),o.jsx(Ie,{value:"discipline",children:"Discipline"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ee,{htmlFor:"custom-reason",children:"Custom Reason (Optional)"}),o.jsx(de,{id:"custom-reason",value:h,onChange:V=>f(V.target.value),placeholder:c==="general"?"Bathroom, Water fountain, etc.":c==="nurse"?"Nurse visit":"Discipline office","data-testid":"input-custom-reason"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(H,{onClick:Z,className:"flex-1","data-testid":"button-create-pass",children:"Create Pass"}),o.jsx(H,{variant:"outline",onClick:()=>{b(!1),C(null),d("general"),f("")},className:"flex-1","data-testid":"button-cancel-pass",children:"Cancel"})]})]})]})}),o.jsx("div",{className:"fixed top-0 left-0 w-16 h-16 opacity-0 cursor-pointer",onMouseDown:z,onMouseUp:Y,onMouseLeave:Y,onTouchStart:z,onTouchEnd:Y,"data-testid":"corner-exit-trigger"})]}):o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."})}function lq(){return o.jsxs(yO,{children:[o.jsx(bn,{path:"/",component:nS}),o.jsx(bn,{path:"/login",component:L7}),o.jsx(bn,{path:"/register",component:X7}),o.jsx(bn,{path:"/trial",component:J7}),o.jsx(bn,{path:"/verification-pending",component:nq}),o.jsx(bn,{path:"/registration-success",component:Z7}),o.jsx(bn,{path:"/registration-cancelled",component:eq}),o.jsx(bn,{path:"/trial-success",component:tq}),o.jsx(bn,{path:"/reset-password",component:rq}),o.jsx(bn,{path:"/kiosk-demo",component:oq}),o.jsx(bn,{path:"/kiosk",component:aq}),o.jsx(bn,{children:o.jsx(nS,{})})]})}function cq(){return o.jsx(LO,{client:De,children:o.jsx(pV,{children:o.jsxs(yV,{children:[o.jsx(q4,{}),o.jsx(lq,{})]})})})}"serviceWorker"in navigator&&console.log("Service worker temporarily disabled for deployment debugging");Rb(document.getElementById("root")).render(o.jsx(cq,{}));
