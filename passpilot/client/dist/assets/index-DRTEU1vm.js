var p0=t=>{throw TypeError(t)};var _m=(t,e,n)=>e.has(t)||p0("Cannot "+n);var O=(t,e,n)=>(_m(t,e,"read from private field"),n?n.call(t):e.get(t)),pe=(t,e,n)=>e.has(t)?p0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),te=(t,e,n,r)=>(_m(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Te=(t,e,n)=>(_m(t,e,"access private method"),n);var Ou=(t,e,n,r)=>({set _(s){te(t,e,s,n)},get _(){return O(t,e,r)}});function hk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function mS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pS={exports:{}},Zh={},gS={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),fk=Symbol.for("react.portal"),mk=Symbol.for("react.fragment"),pk=Symbol.for("react.strict_mode"),gk=Symbol.for("react.profiler"),yk=Symbol.for("react.provider"),vk=Symbol.for("react.context"),xk=Symbol.for("react.forward_ref"),wk=Symbol.for("react.suspense"),_k=Symbol.for("react.memo"),Ek=Symbol.for("react.lazy"),g0=Symbol.iterator;function Sk(t){return t===null||typeof t!="object"?null:(t=g0&&t[g0]||t["@@iterator"],typeof t=="function"?t:null)}var yS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vS=Object.assign,xS={};function Ba(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||yS}Ba.prototype.isReactComponent={};Ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wS(){}wS.prototype=Ba.prototype;function Py(t,e,n){this.props=t,this.context=e,this.refs=xS,this.updater=n||yS}var Ry=Py.prototype=new wS;Ry.constructor=Py;vS(Ry,Ba.prototype);Ry.isPureReactComponent=!0;var y0=Array.isArray,_S=Object.prototype.hasOwnProperty,Ay={current:null},ES={key:!0,ref:!0,__self:!0,__source:!0};function SS(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)_S.call(e,r)&&!ES.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Gc,type:t,key:i,ref:a,props:s,_owner:Ay.current}}function Tk(t,e){return{$$typeof:Gc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Gc}function bk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v0=/\/+/g;function Em(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bk(""+t.key):e.toString(36)}function pd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Gc:case fk:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Em(a,0):r,y0(s)?(n="",t!=null&&(n=t.replace(v0,"$&/")+"/"),pd(s,e,n,"",function(d){return d})):s!=null&&(jy(s)&&(s=Tk(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(v0,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",y0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Em(i,l);a+=pd(i,e,n,c,s)}else if(c=Sk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Em(i,l++),a+=pd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Mu(t,e,n){if(t==null)return t;var r=[],s=0;return pd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ck(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},gd={transition:null},Nk={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:gd,ReactCurrentOwner:Ay};function TS(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Mu,forEach:function(t,e,n){Mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mu(t,function(){e++}),e},toArray:function(t){return Mu(t,function(e){return e})||[]},only:function(t){if(!jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Ba;Ce.Fragment=mk;Ce.Profiler=gk;Ce.PureComponent=Py;Ce.StrictMode=pk;Ce.Suspense=wk;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nk;Ce.act=TS;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vS({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ay.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)_S.call(e,c)&&!ES.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Gc,type:t.type,key:s,ref:i,props:r,_owner:a}};Ce.createContext=function(t){return t={$$typeof:vk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yk,_context:t},t.Consumer=t};Ce.createElement=SS;Ce.createFactory=function(t){var e=SS.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:xk,render:t}};Ce.isValidElement=jy;Ce.lazy=function(t){return{$$typeof:Ek,_payload:{_status:-1,_result:t},_init:Ck}};Ce.memo=function(t,e){return{$$typeof:_k,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=gd.transition;gd.transition={};try{t()}finally{gd.transition=e}};Ce.unstable_act=TS;Ce.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Ce.useContext=function(t){return Zt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Ce.useId=function(){return Zt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};Ce.useRef=function(t){return Zt.current.useRef(t)};Ce.useState=function(t){return Zt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Zt.current.useTransition()};Ce.version="18.3.1";gS.exports=Ce;var g=gS.exports;const lr=mS(g),bS=hk({__proto__:null,default:lr},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik=g,Pk=Symbol.for("react.element"),Rk=Symbol.for("react.fragment"),Ak=Object.prototype.hasOwnProperty,jk=Ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kk={key:!0,ref:!0,__self:!0,__source:!0};function CS(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ak.call(e,r)&&!kk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Pk,type:t,key:i,ref:a,props:s,_owner:jk.current}}Zh.Fragment=Rk;Zh.jsx=CS;Zh.jsxs=CS;pS.exports=Zh;var o=pS.exports,NS={exports:{}},Sn={},IS={exports:{}},PS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var Q=V.length;V.push($);e:for(;0<Q;){var U=Q-1>>>1,X=V[U];if(0<s(X,$))V[U]=$,V[Q]=X,Q=U;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var $=V[0],Q=V.pop();if(Q!==$){V[0]=Q;e:for(var U=0,X=V.length,de=X>>>1;U<de;){var be=2*(U+1)-1,qe=V[be],$e=be+1,se=V[$e];if(0>s(qe,Q))$e<X&&0>s(se,qe)?(V[U]=se,V[$e]=Q,U=$e):(V[U]=qe,V[be]=Q,U=be);else if($e<X&&0>s(se,Q))V[U]=se,V[$e]=Q,U=$e;else break e}}return $}function s(V,$){var Q=V.sortIndex-$.sortIndex;return Q!==0?Q:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,x=!1,b=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=V)r(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(d)}}function R(V){if(v=!1,C(V),!b)if(n(c)!==null)b=!0,J(D);else{var $=n(d);$!==null&&oe(R,$.startTime-V)}}function D(V,$){b=!1,v&&(v=!1,_(E),E=-1),x=!0;var Q=m;try{for(C($),f=n(c);f!==null&&(!(f.expirationTime>$)||V&&!k());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var X=U(f.expirationTime<=$);$=t.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),C($)}else r(c);f=n(c)}if(f!==null)var de=!0;else{var be=n(d);be!==null&&oe(R,be.startTime-$),de=!1}return de}finally{f=null,m=Q,x=!1}}var M=!1,T=null,E=-1,N=5,P=-1;function k(){return!(t.unstable_now()-P<N)}function j(){if(T!==null){var V=t.unstable_now();P=V;var $=!0;try{$=T(!0,V)}finally{$?A():(M=!1,T=null)}}else M=!1}var A;if(typeof S=="function")A=function(){S(j)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ce=H.port2;H.port1.onmessage=j,A=function(){ce.postMessage(null)}}else A=function(){y(j,0)};function J(V){T=V,M||(M=!0,A())}function oe(V,$){E=y(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,J(D))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var Q=m;m=$;try{return V()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=m;m=V;try{return $()}finally{m=Q}},t.unstable_scheduleCallback=function(V,$,Q){var U=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?U+Q:U):Q=U,V){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Q+X,V={id:h++,callback:$,priorityLevel:V,startTime:Q,expirationTime:X,sortIndex:-1},Q>U?(V.sortIndex=Q,e(d,V),n(c)===null&&V===n(d)&&(v?(_(E),E=-1):v=!0,oe(R,Q-U))):(V.sortIndex=X,e(c,V),b||x||(b=!0,J(D))),V},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(V){var $=m;return function(){var Q=m;m=$;try{return V.apply(this,arguments)}finally{m=Q}}}})(PS);IS.exports=PS;var Dk=IS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok=g,En=Dk;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RS=new Set,lc={};function mo(t,e){ba(t,e),ba(t+"Capture",e)}function ba(t,e){for(lc[t]=e,t=0;t<e.length;t++)RS.add(e[t])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ip=Object.prototype.hasOwnProperty,Mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x0={},w0={};function Lk(t){return Ip.call(w0,t)?!0:Ip.call(x0,t)?!1:Mk.test(t)?w0[t]=!0:(x0[t]=!0,!1)}function Vk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fk(t,e,n,r){if(e===null||typeof e>"u"||Vk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function Dy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,Dy);Pt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,Dy);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,Dy);Pt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oy(t,e,n,r){var s=Pt.hasOwnProperty(e)?Pt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fk(e,n,s,r)&&(n=null),r||s===null?Lk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var us=Ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),Pp=Symbol.for("react.profiler"),AS=Symbol.for("react.provider"),jS=Symbol.for("react.context"),Ly=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Ap=Symbol.for("react.suspense_list"),Vy=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),kS=Symbol.for("react.offscreen"),_0=Symbol.iterator;function wl(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,Sm;function jl(t){if(Sm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sm=e&&e[1]||""}return`
`+Sm+t}var Tm=!1;function bm(t,e){if(!t||Tm)return"";Tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Tm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function Uk(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=bm(t.type,!1),t;case 11:return t=bm(t.type.render,!1),t;case 1:return t=bm(t.type,!0),t;default:return""}}function jp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case Pp:return"Profiler";case My:return"StrictMode";case Rp:return"Suspense";case Ap:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jS:return(t.displayName||"Context")+".Consumer";case AS:return(t._context.displayName||"Context")+".Provider";case Ly:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vy:return e=t.displayName||null,e!==null?e:jp(t.type)||"Memo";case bs:e=t._payload,t=t._init;try{return jp(t(e))}catch{}}return null}function $k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jp(e);case 8:return e===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zk(t){var e=DS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vu(t){t._valueTracker||(t._valueTracker=zk(t))}function OS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kp(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MS(t,e){e=e.checked,e!=null&&Oy(t,"checked",e,!1)}function Dp(t,e){MS(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Op(t,e.type,n):e.hasOwnProperty("defaultValue")&&Op(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function S0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Op(t,e,n){(e!=="number"||Jd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kl=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(kl(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function LS(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function b0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fu,FS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fu=Fu||document.createElement("div"),Fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bk=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){Bk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function US(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function $S(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=US(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qk=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(t,e){if(e){if(qk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Fp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Up=null;function Fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $p=null,Xo=null,Jo=null;function C0(t){if(t=Qc(t)){if(typeof $p!="function")throw Error(W(280));var e=t.stateNode;e&&(e=sf(e),$p(t.stateNode,t.type,e))}}function zS(t){Xo?Jo?Jo.push(t):Jo=[t]:Xo=t}function BS(){if(Xo){var t=Xo,e=Jo;if(Jo=Xo=null,C0(t),e)for(t=0;t<e.length;t++)C0(e[t])}}function qS(t,e){return t(e)}function HS(){}var Cm=!1;function GS(t,e,n){if(Cm)return t(e,n);Cm=!0;try{return qS(t,e,n)}finally{Cm=!1,(Xo!==null||Jo!==null)&&(HS(),BS())}}function uc(t,e){var n=t.stateNode;if(n===null)return null;var r=sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var zp=!1;if(es)try{var _l={};Object.defineProperty(_l,"passive",{get:function(){zp=!0}}),window.addEventListener("test",_l,_l),window.removeEventListener("test",_l,_l)}catch{zp=!1}function Hk(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Wl=!1,Zd=null,eh=!1,Bp=null,Gk={onError:function(t){Wl=!0,Zd=t}};function Wk(t,e,n,r,s,i,a,l,c){Wl=!1,Zd=null,Hk.apply(Gk,arguments)}function Kk(t,e,n,r,s,i,a,l,c){if(Wk.apply(this,arguments),Wl){if(Wl){var d=Zd;Wl=!1,Zd=null}else throw Error(W(198));eh||(eh=!0,Bp=d)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N0(t){if(po(t)!==t)throw Error(W(188))}function Qk(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return N0(s),t;if(i===r)return N0(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function KS(t){return t=Qk(t),t!==null?QS(t):null}function QS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QS(t);if(e!==null)return e;t=t.sibling}return null}var YS=En.unstable_scheduleCallback,I0=En.unstable_cancelCallback,Yk=En.unstable_shouldYield,Xk=En.unstable_requestPaint,ct=En.unstable_now,Jk=En.unstable_getCurrentPriorityLevel,Uy=En.unstable_ImmediatePriority,XS=En.unstable_UserBlockingPriority,th=En.unstable_NormalPriority,Zk=En.unstable_LowPriority,JS=En.unstable_IdlePriority,ef=null,_r=null;function e2(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(ef,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:r2,t2=Math.log,n2=Math.LN2;function r2(t){return t>>>=0,t===0?32:31-(t2(t)/n2|0)|0}var Uu=64,$u=4194304;function Dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Dl(l):(i&=a,i!==0&&(r=Dl(i)))}else a=n&~s,a!==0?r=Dl(a):i!==0&&(r=Dl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),s=1<<n,r|=t[n],e&=~s;return r}function s2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Xn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=s2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZS(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function Nm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function o2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $y(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Be=0;function eT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tT,zy,nT,rT,sT,Hp=!1,zu=[],qs=null,Hs=null,Gs=null,dc=new Map,hc=new Map,Ns=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P0(t,e){switch(t){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":dc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function El(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qc(e),e!==null&&zy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function l2(t,e,n,r,s){switch(e){case"focusin":return qs=El(qs,t,e,n,r,s),!0;case"dragenter":return Hs=El(Hs,t,e,n,r,s),!0;case"mouseover":return Gs=El(Gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return dc.set(i,El(dc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,hc.set(i,El(hc.get(i)||null,t,e,n,r,s)),!0}return!1}function iT(t){var e=Di(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=WS(n),e!==null){t.blockedOn=e,sT(t.priority,function(){nT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Up=r,n.target.dispatchEvent(r),Up=null}else return e=Qc(n),e!==null&&zy(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){yd(t)&&n.delete(e)}function c2(){Hp=!1,qs!==null&&yd(qs)&&(qs=null),Hs!==null&&yd(Hs)&&(Hs=null),Gs!==null&&yd(Gs)&&(Gs=null),dc.forEach(R0),hc.forEach(R0)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,Hp||(Hp=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,c2)))}function fc(t){function e(s){return Sl(s,t)}if(0<zu.length){Sl(zu[0],t);for(var n=1;n<zu.length;n++){var r=zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qs!==null&&Sl(qs,t),Hs!==null&&Sl(Hs,t),Gs!==null&&Sl(Gs,t),dc.forEach(e),hc.forEach(e),n=0;n<Ns.length;n++)r=Ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ns.length&&(n=Ns[0],n.blockedOn===null);)iT(n),n.blockedOn===null&&Ns.shift()}var Zo=us.ReactCurrentBatchConfig,rh=!0;function u2(t,e,n,r){var s=Be,i=Zo.transition;Zo.transition=null;try{Be=1,By(t,e,n,r)}finally{Be=s,Zo.transition=i}}function d2(t,e,n,r){var s=Be,i=Zo.transition;Zo.transition=null;try{Be=4,By(t,e,n,r)}finally{Be=s,Zo.transition=i}}function By(t,e,n,r){if(rh){var s=Gp(t,e,n,r);if(s===null)Lm(t,e,r,sh,n),P0(t,r);else if(l2(s,t,e,n,r))r.stopPropagation();else if(P0(t,r),e&4&&-1<a2.indexOf(t)){for(;s!==null;){var i=Qc(s);if(i!==null&&tT(i),i=Gp(t,e,n,r),i===null&&Lm(t,e,r,sh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lm(t,e,r,null,n)}}var sh=null;function Gp(t,e,n,r){if(sh=null,t=Fy(r),t=Di(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sh=t,null}function oT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jk()){case Uy:return 1;case XS:return 4;case th:case Zk:return 16;case JS:return 536870912;default:return 16}default:return 16}}var $s=null,qy=null,vd=null;function aT(){if(vd)return vd;var t,e=qy,n=e.length,r,s="value"in $s?$s.value:$s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return vd=s.slice(t,1<r?1-r:void 0)}function xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function A0(){return!1}function Tn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bu:A0,this.isPropagationStopped=A0,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hy=Tn(qa),Kc=rt({},qa,{view:0,detail:0}),h2=Tn(Kc),Im,Pm,Tl,tf=rt({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(Im=t.screenX-Tl.screenX,Pm=t.screenY-Tl.screenY):Pm=Im=0,Tl=t),Im)},movementY:function(t){return"movementY"in t?t.movementY:Pm}}),j0=Tn(tf),f2=rt({},tf,{dataTransfer:0}),m2=Tn(f2),p2=rt({},Kc,{relatedTarget:0}),Rm=Tn(p2),g2=rt({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),y2=Tn(g2),v2=rt({},qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),x2=Tn(v2),w2=rt({},qa,{data:0}),k0=Tn(w2),_2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=S2[t])?!!e[t]:!1}function Gy(){return T2}var b2=rt({},Kc,{key:function(t){if(t.key){var e=_2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gy,charCode:function(t){return t.type==="keypress"?xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C2=Tn(b2),N2=rt({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D0=Tn(N2),I2=rt({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gy}),P2=Tn(I2),R2=rt({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),A2=Tn(R2),j2=rt({},tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k2=Tn(j2),D2=[9,13,27,32],Wy=es&&"CompositionEvent"in window,Kl=null;es&&"documentMode"in document&&(Kl=document.documentMode);var O2=es&&"TextEvent"in window&&!Kl,lT=es&&(!Wy||Kl&&8<Kl&&11>=Kl),O0=" ",M0=!1;function cT(t,e){switch(t){case"keyup":return D2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function M2(t,e){switch(t){case"compositionend":return uT(e);case"keypress":return e.which!==32?null:(M0=!0,O0);case"textInput":return t=e.data,t===O0&&M0?null:t;default:return null}}function L2(t,e){if(Lo)return t==="compositionend"||!Wy&&cT(t,e)?(t=aT(),vd=qy=$s=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lT&&e.locale!=="ko"?null:e.data;default:return null}}var V2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V2[t.type]:e==="textarea"}function dT(t,e,n,r){zS(r),e=ih(e,"onChange"),0<e.length&&(n=new Hy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,mc=null;function F2(t){ET(t,0)}function nf(t){var e=Uo(t);if(OS(e))return t}function U2(t,e){if(t==="change")return e}var hT=!1;if(es){var Am;if(es){var jm="oninput"in document;if(!jm){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),jm=typeof V0.oninput=="function"}Am=jm}else Am=!1;hT=Am&&(!document.documentMode||9<document.documentMode)}function F0(){Ql&&(Ql.detachEvent("onpropertychange",fT),mc=Ql=null)}function fT(t){if(t.propertyName==="value"&&nf(mc)){var e=[];dT(e,mc,t,Fy(t)),GS(F2,e)}}function $2(t,e,n){t==="focusin"?(F0(),Ql=e,mc=n,Ql.attachEvent("onpropertychange",fT)):t==="focusout"&&F0()}function z2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nf(mc)}function B2(t,e){if(t==="click")return nf(e)}function q2(t,e){if(t==="input"||t==="change")return nf(e)}function H2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:H2;function pc(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ip.call(e,s)||!er(t[s],e[s]))return!1}return!0}function U0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $0(t,e){var n=U0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U0(n)}}function mT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pT(){for(var t=window,e=Jd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jd(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G2(t){var e=pT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mT(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$0(n,i);var a=$0(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W2=es&&"documentMode"in document&&11>=document.documentMode,Vo=null,Wp=null,Yl=null,Kp=!1;function z0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kp||Vo==null||Vo!==Jd(r)||(r=Vo,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&pc(Yl,r)||(Yl=r,r=ih(Wp,"onSelect"),0<r.length&&(e=new Hy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function qu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionend:qu("Transition","TransitionEnd")},km={},gT={};es&&(gT=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function rf(t){if(km[t])return km[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gT)return km[t]=e[n];return t}var yT=rf("animationend"),vT=rf("animationiteration"),xT=rf("animationstart"),wT=rf("transitionend"),_T=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){_T.set(t,e),mo(e,[t])}for(var Dm=0;Dm<B0.length;Dm++){var Om=B0[Dm],K2=Om.toLowerCase(),Q2=Om[0].toUpperCase()+Om.slice(1);gi(K2,"on"+Q2)}gi(yT,"onAnimationEnd");gi(vT,"onAnimationIteration");gi(xT,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(wT,"onTransitionEnd");ba("onMouseEnter",["mouseout","mouseover"]);ba("onMouseLeave",["mouseout","mouseover"]);ba("onPointerEnter",["pointerout","pointerover"]);ba("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function q0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Kk(r,e,void 0,t),t.currentTarget=null}function ET(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;q0(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;q0(s,l,d),i=c}}}if(eh)throw t=Bp,eh=!1,Bp=null,t}function Xe(t,e){var n=e[Zp];n===void 0&&(n=e[Zp]=new Set);var r=t+"__bubble";n.has(r)||(ST(e,t,2,!1),n.add(r))}function Mm(t,e,n){var r=0;e&&(r|=4),ST(n,t,r,e)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function gc(t){if(!t[Hu]){t[Hu]=!0,RS.forEach(function(n){n!=="selectionchange"&&(Y2.has(n)||Mm(n,!1,t),Mm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hu]||(e[Hu]=!0,Mm("selectionchange",!1,e))}}function ST(t,e,n,r){switch(oT(e)){case 1:var s=u2;break;case 4:s=d2;break;default:s=By}n=s.bind(null,e,n,t),s=void 0,!zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Lm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Di(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}GS(function(){var d=i,h=Fy(n),f=[];e:{var m=_T.get(t);if(m!==void 0){var x=Hy,b=t;switch(t){case"keypress":if(xd(n)===0)break e;case"keydown":case"keyup":x=C2;break;case"focusin":b="focus",x=Rm;break;case"focusout":b="blur",x=Rm;break;case"beforeblur":case"afterblur":x=Rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=j0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=m2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=P2;break;case yT:case vT:case xT:x=y2;break;case wT:x=A2;break;case"scroll":x=h2;break;case"wheel":x=k2;break;case"copy":case"cut":case"paste":x=x2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=D0}var v=(e&4)!==0,y=!v&&t==="scroll",_=v?m!==null?m+"Capture":null:m;v=[];for(var S=d,C;S!==null;){C=S;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,_!==null&&(R=uc(S,_),R!=null&&v.push(yc(S,R,C)))),y)break;S=S.return}0<v.length&&(m=new x(m,b,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==Up&&(b=n.relatedTarget||n.fromElement)&&(Di(b)||b[ts]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(b=n.relatedTarget||n.toElement,x=d,b=b?Di(b):null,b!==null&&(y=po(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(v=j0,R="onMouseLeave",_="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(v=D0,R="onPointerLeave",_="onPointerEnter",S="pointer"),y=x==null?m:Uo(x),C=b==null?m:Uo(b),m=new v(R,S+"leave",x,n,h),m.target=y,m.relatedTarget=C,R=null,Di(h)===d&&(v=new v(_,S+"enter",b,n,h),v.target=C,v.relatedTarget=y,R=v),y=R,x&&b)t:{for(v=x,_=b,S=0,C=v;C;C=Co(C))S++;for(C=0,R=_;R;R=Co(R))C++;for(;0<S-C;)v=Co(v),S--;for(;0<C-S;)_=Co(_),C--;for(;S--;){if(v===_||_!==null&&v===_.alternate)break t;v=Co(v),_=Co(_)}v=null}else v=null;x!==null&&H0(f,m,x,v,!1),b!==null&&y!==null&&H0(f,y,b,v,!0)}}e:{if(m=d?Uo(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var D=U2;else if(L0(m))if(hT)D=q2;else{D=z2;var M=$2}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=B2);if(D&&(D=D(t,d))){dT(f,D,n,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Op(m,"number",m.value)}switch(M=d?Uo(d):window,t){case"focusin":(L0(M)||M.contentEditable==="true")&&(Vo=M,Wp=d,Yl=null);break;case"focusout":Yl=Wp=Vo=null;break;case"mousedown":Kp=!0;break;case"contextmenu":case"mouseup":case"dragend":Kp=!1,z0(f,n,h);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":z0(f,n,h)}var T;if(Wy)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Lo?cT(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(lT&&n.locale!=="ko"&&(Lo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Lo&&(T=aT()):($s=h,qy="value"in $s?$s.value:$s.textContent,Lo=!0)),M=ih(d,E),0<M.length&&(E=new k0(E,t,null,n,h),f.push({event:E,listeners:M}),T?E.data=T:(T=uT(n),T!==null&&(E.data=T)))),(T=O2?M2(t,n):L2(t,n))&&(d=ih(d,"onBeforeInput"),0<d.length&&(h=new k0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=T))}ET(f,e)})}function yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=uc(t,n),i!=null&&r.unshift(yc(t,i,s)),i=uc(t,e),i!=null&&r.push(yc(t,i,s))),t=t.return}return r}function Co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H0(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=uc(n,i),c!=null&&a.unshift(yc(n,c,l))):s||(c=uc(n,i),c!=null&&a.push(yc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var X2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function G0(t){return(typeof t=="string"?t:""+t).replace(X2,`
`).replace(J2,"")}function Gu(t,e,n){if(e=G0(e),G0(t)!==e&&n)throw Error(W(425))}function oh(){}var Qp=null,Yp=null;function Xp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jp=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,W0=typeof Promise=="function"?Promise:void 0,eD=typeof queueMicrotask=="function"?queueMicrotask:typeof W0<"u"?function(t){return W0.resolve(null).then(t).catch(tD)}:Jp;function tD(t){setTimeout(function(){throw t})}function Vm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fc(e)}function Ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function K0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),yr="__reactFiber$"+Ha,vc="__reactProps$"+Ha,ts="__reactContainer$"+Ha,Zp="__reactEvents$"+Ha,nD="__reactListeners$"+Ha,rD="__reactHandles$"+Ha;function Di(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ts]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=K0(t);t!==null;){if(n=t[yr])return n;t=K0(t)}return e}t=n,n=t.parentNode}return null}function Qc(t){return t=t[yr]||t[ts],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function sf(t){return t[vc]||null}var eg=[],$o=-1;function yi(t){return{current:t}}function Ze(t){0>$o||(t.current=eg[$o],eg[$o]=null,$o--)}function Ke(t,e){$o++,eg[$o]=t.current,t.current=e}var ii={},zt=yi(ii),un=yi(!1),Qi=ii;function Ca(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dn(t){return t=t.childContextTypes,t!=null}function ah(){Ze(un),Ze(zt)}function Q0(t,e,n){if(zt.current!==ii)throw Error(W(168));Ke(zt,e),Ke(un,n)}function TT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,$k(t)||"Unknown",s));return rt({},n,r)}function lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Qi=zt.current,Ke(zt,t),Ke(un,un.current),!0}function Y0(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=TT(t,e,Qi),r.__reactInternalMemoizedMergedChildContext=t,Ze(un),Ze(zt),Ke(zt,t)):Ze(un),Ke(un,n)}var Ur=null,of=!1,Fm=!1;function bT(t){Ur===null?Ur=[t]:Ur.push(t)}function sD(t){of=!0,bT(t)}function vi(){if(!Fm&&Ur!==null){Fm=!0;var t=0,e=Be;try{var n=Ur;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ur=null,of=!1}catch(s){throw Ur!==null&&(Ur=Ur.slice(t+1)),YS(Uy,vi),s}finally{Be=e,Fm=!1}}return null}var zo=[],Bo=0,ch=null,uh=0,Nn=[],In=0,Yi=null,qr=1,Hr="";function Ai(t,e){zo[Bo++]=uh,zo[Bo++]=ch,ch=t,uh=e}function CT(t,e,n){Nn[In++]=qr,Nn[In++]=Hr,Nn[In++]=Yi,Yi=t;var r=qr;t=Hr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var i=32-Xn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qr=1<<32-Xn(e)+s|n<<s|r,Hr=i+t}else qr=1<<i|n<<s|r,Hr=t}function Qy(t){t.return!==null&&(Ai(t,1),CT(t,1,0))}function Yy(t){for(;t===ch;)ch=zo[--Bo],zo[Bo]=null,uh=zo[--Bo],zo[Bo]=null;for(;t===Yi;)Yi=Nn[--In],Nn[In]=null,Hr=Nn[--In],Nn[In]=null,qr=Nn[--In],Nn[In]=null}var wn=null,vn=null,et=!1,Hn=null;function NT(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=Ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yi!==null?{id:qr,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function tg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ng(t){if(et){var e=vn;if(e){var n=e;if(!X0(t,e)){if(tg(t))throw Error(W(418));e=Ws(n.nextSibling);var r=wn;e&&X0(t,e)?NT(r,n):(t.flags=t.flags&-4097|2,et=!1,wn=t)}}else{if(tg(t))throw Error(W(418));t.flags=t.flags&-4097|2,et=!1,wn=t}}}function J0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Wu(t){if(t!==wn)return!1;if(!et)return J0(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xp(t.type,t.memoizedProps)),e&&(e=vn)){if(tg(t))throw IT(),Error(W(418));for(;e;)NT(t,e),e=Ws(e.nextSibling)}if(J0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ws(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?Ws(t.stateNode.nextSibling):null;return!0}function IT(){for(var t=vn;t;)t=Ws(t.nextSibling)}function Na(){vn=wn=null,et=!1}function Xy(t){Hn===null?Hn=[t]:Hn.push(t)}var iD=us.ReactCurrentBatchConfig;function bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Ku(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Z0(t){var e=t._init;return e(t._payload)}function PT(t){function e(_,S){if(t){var C=_.deletions;C===null?(_.deletions=[S],_.flags|=16):C.push(S)}}function n(_,S){if(!t)return null;for(;S!==null;)e(_,S),S=S.sibling;return null}function r(_,S){for(_=new Map;S!==null;)S.key!==null?_.set(S.key,S):_.set(S.index,S),S=S.sibling;return _}function s(_,S){return _=Xs(_,S),_.index=0,_.sibling=null,_}function i(_,S,C){return _.index=C,t?(C=_.alternate,C!==null?(C=C.index,C<S?(_.flags|=2,S):C):(_.flags|=2,S)):(_.flags|=1048576,S)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,S,C,R){return S===null||S.tag!==6?(S=Gm(C,_.mode,R),S.return=_,S):(S=s(S,C),S.return=_,S)}function c(_,S,C,R){var D=C.type;return D===Mo?h(_,S,C.props.children,R,C.key):S!==null&&(S.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===bs&&Z0(D)===S.type)?(R=s(S,C.props),R.ref=bl(_,S,C),R.return=_,R):(R=Cd(C.type,C.key,C.props,null,_.mode,R),R.ref=bl(_,S,C),R.return=_,R)}function d(_,S,C,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=Wm(C,_.mode,R),S.return=_,S):(S=s(S,C.children||[]),S.return=_,S)}function h(_,S,C,R,D){return S===null||S.tag!==7?(S=Gi(C,_.mode,R,D),S.return=_,S):(S=s(S,C),S.return=_,S)}function f(_,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Gm(""+S,_.mode,C),S.return=_,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lu:return C=Cd(S.type,S.key,S.props,null,_.mode,C),C.ref=bl(_,null,S),C.return=_,C;case Oo:return S=Wm(S,_.mode,C),S.return=_,S;case bs:var R=S._init;return f(_,R(S._payload),C)}if(kl(S)||wl(S))return S=Gi(S,_.mode,C,null),S.return=_,S;Ku(_,S)}return null}function m(_,S,C,R){var D=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:l(_,S,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Lu:return C.key===D?c(_,S,C,R):null;case Oo:return C.key===D?d(_,S,C,R):null;case bs:return D=C._init,m(_,S,D(C._payload),R)}if(kl(C)||wl(C))return D!==null?null:h(_,S,C,R,null);Ku(_,C)}return null}function x(_,S,C,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(C)||null,l(S,_,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lu:return _=_.get(R.key===null?C:R.key)||null,c(S,_,R,D);case Oo:return _=_.get(R.key===null?C:R.key)||null,d(S,_,R,D);case bs:var M=R._init;return x(_,S,C,M(R._payload),D)}if(kl(R)||wl(R))return _=_.get(C)||null,h(S,_,R,D,null);Ku(S,R)}return null}function b(_,S,C,R){for(var D=null,M=null,T=S,E=S=0,N=null;T!==null&&E<C.length;E++){T.index>E?(N=T,T=null):N=T.sibling;var P=m(_,T,C[E],R);if(P===null){T===null&&(T=N);break}t&&T&&P.alternate===null&&e(_,T),S=i(P,S,E),M===null?D=P:M.sibling=P,M=P,T=N}if(E===C.length)return n(_,T),et&&Ai(_,E),D;if(T===null){for(;E<C.length;E++)T=f(_,C[E],R),T!==null&&(S=i(T,S,E),M===null?D=T:M.sibling=T,M=T);return et&&Ai(_,E),D}for(T=r(_,T);E<C.length;E++)N=x(T,_,E,C[E],R),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?E:N.key),S=i(N,S,E),M===null?D=N:M.sibling=N,M=N);return t&&T.forEach(function(k){return e(_,k)}),et&&Ai(_,E),D}function v(_,S,C,R){var D=wl(C);if(typeof D!="function")throw Error(W(150));if(C=D.call(C),C==null)throw Error(W(151));for(var M=D=null,T=S,E=S=0,N=null,P=C.next();T!==null&&!P.done;E++,P=C.next()){T.index>E?(N=T,T=null):N=T.sibling;var k=m(_,T,P.value,R);if(k===null){T===null&&(T=N);break}t&&T&&k.alternate===null&&e(_,T),S=i(k,S,E),M===null?D=k:M.sibling=k,M=k,T=N}if(P.done)return n(_,T),et&&Ai(_,E),D;if(T===null){for(;!P.done;E++,P=C.next())P=f(_,P.value,R),P!==null&&(S=i(P,S,E),M===null?D=P:M.sibling=P,M=P);return et&&Ai(_,E),D}for(T=r(_,T);!P.done;E++,P=C.next())P=x(T,_,E,P.value,R),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?E:P.key),S=i(P,S,E),M===null?D=P:M.sibling=P,M=P);return t&&T.forEach(function(j){return e(_,j)}),et&&Ai(_,E),D}function y(_,S,C,R){if(typeof C=="object"&&C!==null&&C.type===Mo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Lu:e:{for(var D=C.key,M=S;M!==null;){if(M.key===D){if(D=C.type,D===Mo){if(M.tag===7){n(_,M.sibling),S=s(M,C.props.children),S.return=_,_=S;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===bs&&Z0(D)===M.type){n(_,M.sibling),S=s(M,C.props),S.ref=bl(_,M,C),S.return=_,_=S;break e}n(_,M);break}else e(_,M);M=M.sibling}C.type===Mo?(S=Gi(C.props.children,_.mode,R,C.key),S.return=_,_=S):(R=Cd(C.type,C.key,C.props,null,_.mode,R),R.ref=bl(_,S,C),R.return=_,_=R)}return a(_);case Oo:e:{for(M=C.key;S!==null;){if(S.key===M)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){n(_,S.sibling),S=s(S,C.children||[]),S.return=_,_=S;break e}else{n(_,S);break}else e(_,S);S=S.sibling}S=Wm(C,_.mode,R),S.return=_,_=S}return a(_);case bs:return M=C._init,y(_,S,M(C._payload),R)}if(kl(C))return b(_,S,C,R);if(wl(C))return v(_,S,C,R);Ku(_,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(n(_,S.sibling),S=s(S,C),S.return=_,_=S):(n(_,S),S=Gm(C,_.mode,R),S.return=_,_=S),a(_)):n(_,S)}return y}var Ia=PT(!0),RT=PT(!1),dh=yi(null),hh=null,qo=null,Jy=null;function Zy(){Jy=qo=hh=null}function ev(t){var e=dh.current;Ze(dh),t._currentValue=e}function rg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ea(t,e){hh=t,Jy=qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Jy!==t)if(t={context:t,memoizedValue:e,next:null},qo===null){if(hh===null)throw Error(W(308));qo=t,hh.dependencies={lanes:0,firstContext:t}}else qo=qo.next=t;return e}var Oi=null;function tv(t){Oi===null?Oi=[t]:Oi.push(t)}function AT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ns(t,r)}function ns(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cs=!1;function nv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ns(t,n)}return s=r.interleaved,s===null?(e.next=e,tv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ns(t,n)}function wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}function e_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fh(t,e,n,r){var s=t.updateQueue;Cs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,v=l;switch(m=e,x=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(x,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,m=typeof b=="function"?b.call(x,f,m):b,m==null)break e;f=rt({},f,m);break e;case 2:Cs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=f):h=h.next=x,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ji|=a,t.lanes=a,t.memoizedState=f}}function t_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Yc={},Er=yi(Yc),xc=yi(Yc),wc=yi(Yc);function Mi(t){if(t===Yc)throw Error(W(174));return t}function rv(t,e){switch(Ke(wc,e),Ke(xc,t),Ke(Er,Yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lp(e,t)}Ze(Er),Ke(Er,e)}function Pa(){Ze(Er),Ze(xc),Ze(wc)}function kT(t){Mi(wc.current);var e=Mi(Er.current),n=Lp(e,t.type);e!==n&&(Ke(xc,t),Ke(Er,n))}function sv(t){xc.current===t&&(Ze(Er),Ze(xc))}var tt=yi(0);function mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Um=[];function iv(){for(var t=0;t<Um.length;t++)Um[t]._workInProgressVersionPrimary=null;Um.length=0}var _d=us.ReactCurrentDispatcher,$m=us.ReactCurrentBatchConfig,Xi=0,nt=null,pt=null,wt=null,ph=!1,Xl=!1,_c=0,oD=0;function Dt(){throw Error(W(321))}function ov(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function av(t,e,n,r,s,i){if(Xi=i,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_d.current=t===null||t.memoizedState===null?uD:dD,t=n(r,s),Xl){i=0;do{if(Xl=!1,_c=0,25<=i)throw Error(W(301));i+=1,wt=pt=null,e.updateQueue=null,_d.current=hD,t=n(r,s)}while(Xl)}if(_d.current=gh,e=pt!==null&&pt.next!==null,Xi=0,wt=pt=nt=null,ph=!1,e)throw Error(W(300));return t}function lv(){var t=_c!==0;return _c=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?nt.memoizedState=wt=t:wt=wt.next=t,wt}function On(){if(pt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?nt.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(W(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?nt.memoizedState=wt=t:wt=wt.next=t}return wt}function Ec(t,e){return typeof e=="function"?e(t):e}function zm(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Xi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,nt.lanes|=h,Ji|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,er(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,nt.lanes|=i,Ji|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bm(t){var e=On(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);er(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function DT(){}function OT(t,e){var n=nt,r=On(),s=e(),i=!er(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,cv(VT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Sc(9,LT.bind(null,n,r,s,e),void 0,null),_t===null)throw Error(W(349));Xi&30||MT(n,e,s)}return s}function MT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function LT(t,e,n,r){e.value=n,e.getSnapshot=r,FT(e)&&UT(t)}function VT(t,e,n){return n(function(){FT(e)&&UT(t)})}function FT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function UT(t){var e=ns(t,1);e!==null&&Jn(e,t,1,-1)}function n_(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=cD.bind(null,nt,t),[e.memoizedState,t]}function Sc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $T(){return On().memoizedState}function Ed(t,e,n,r){var s=ar();nt.flags|=t,s.memoizedState=Sc(1|e,n,void 0,r===void 0?null:r)}function af(t,e,n,r){var s=On();r=r===void 0?null:r;var i=void 0;if(pt!==null){var a=pt.memoizedState;if(i=a.destroy,r!==null&&ov(r,a.deps)){s.memoizedState=Sc(e,n,i,r);return}}nt.flags|=t,s.memoizedState=Sc(1|e,n,i,r)}function r_(t,e){return Ed(8390656,8,t,e)}function cv(t,e){return af(2048,8,t,e)}function zT(t,e){return af(4,2,t,e)}function BT(t,e){return af(4,4,t,e)}function qT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function HT(t,e,n){return n=n!=null?n.concat([t]):null,af(4,4,qT.bind(null,e,t),n)}function uv(){}function GT(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ov(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function WT(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ov(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KT(t,e,n){return Xi&21?(er(n,e)||(n=ZS(),nt.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function aD(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=$m.transition;$m.transition={};try{t(!1),e()}finally{Be=n,$m.transition=r}}function QT(){return On().memoizedState}function lD(t,e,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YT(t))XT(e,n);else if(n=AT(t,e,n,r),n!==null){var s=Jt();Jn(n,t,r,s),JT(n,e,r)}}function cD(t,e,n){var r=Ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YT(t))XT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,er(l,a)){var c=e.interleaved;c===null?(s.next=s,tv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=AT(t,e,s,r),n!==null&&(s=Jt(),Jn(n,t,r,s),JT(n,e,r))}}function YT(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function XT(t,e){Xl=ph=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$y(t,n)}}var gh={readContext:Dn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},uD={readContext:Dn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:r_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ed(4194308,4,qT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ed(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lD.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:n_,useDebugValue:uv,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=n_(!1),e=t[0];return t=aD.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,s=ar();if(et){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),_t===null)throw Error(W(349));Xi&30||MT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,r_(VT.bind(null,r,i,t),[t]),r.flags|=2048,Sc(9,LT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ar(),e=_t.identifierPrefix;if(et){var n=Hr,r=qr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_c++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dD={readContext:Dn,useCallback:GT,useContext:Dn,useEffect:cv,useImperativeHandle:HT,useInsertionEffect:zT,useLayoutEffect:BT,useMemo:WT,useReducer:zm,useRef:$T,useState:function(){return zm(Ec)},useDebugValue:uv,useDeferredValue:function(t){var e=On();return KT(e,pt.memoizedState,t)},useTransition:function(){var t=zm(Ec)[0],e=On().memoizedState;return[t,e]},useMutableSource:DT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1},hD={readContext:Dn,useCallback:GT,useContext:Dn,useEffect:cv,useImperativeHandle:HT,useInsertionEffect:zT,useLayoutEffect:BT,useMemo:WT,useReducer:Bm,useRef:$T,useState:function(){return Bm(Ec)},useDebugValue:uv,useDeferredValue:function(t){var e=On();return pt===null?e.memoizedState=t:KT(e,pt.memoizedState,t)},useTransition:function(){var t=Bm(Ec)[0],e=On().memoizedState;return[t,e]},useMutableSource:DT,useSyncExternalStore:OT,useId:QT,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lf={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Ys(t),i=Qr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(Jn(e,t,s,r),wd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Ys(t),i=Qr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(Jn(e,t,s,r),wd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Ys(t),s=Qr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ks(t,s,r),e!==null&&(Jn(e,t,r,n),wd(e,t,r))}};function s_(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!pc(n,r)||!pc(s,i):!0}function ZT(t,e,n){var r=!1,s=ii,i=e.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(s=dn(e)?Qi:zt.current,r=e.contextTypes,i=(r=r!=null)?Ca(t,s):ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function i_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lf.enqueueReplaceState(e,e.state,null)}function ig(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},nv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dn(i):(i=dn(e)?Qi:zt.current,s.context=Ca(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lf.enqueueReplaceState(s,s.state,null),fh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=Uk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function og(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fD=typeof WeakMap=="function"?WeakMap:Map;function eb(t,e,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vh||(vh=!0,gg=r),og(t,e)},n}function tb(t,e,n){n=Qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){og(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){og(t,e),typeof r!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function o_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ND.bind(null,t,e,n),e.then(t,t))}function a_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qr(-1,1),e.tag=2,Ks(n,e,1))),n.lanes|=1),t)}var mD=us.ReactCurrentOwner,cn=!1;function Xt(t,e,n,r){e.child=t===null?RT(e,null,n,r):Ia(e,t.child,n,r)}function c_(t,e,n,r,s){n=n.render;var i=e.ref;return ea(e,s),r=av(t,e,n,r,i,s),n=lv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rs(t,e,s)):(et&&n&&Qy(e),e.flags|=1,Xt(t,e,r,s),e.child)}function u_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!vv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nb(t,e,i,r,s)):(t=Cd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:pc,n(a,r)&&t.ref===e.ref)return rs(t,e,s)}return e.flags|=1,t=Xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function nb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pc(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,rs(t,e,s)}return ag(t,e,n,r,s)}function rb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Go,pn),pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Go,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Go,pn),pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Go,pn),pn|=r;return Xt(t,e,s,n),e.child}function sb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ag(t,e,n,r,s){var i=dn(n)?Qi:zt.current;return i=Ca(e,i),ea(e,s),n=av(t,e,n,r,i,s),r=lv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rs(t,e,s)):(et&&r&&Qy(e),e.flags|=1,Xt(t,e,n,s),e.child)}function d_(t,e,n,r,s){if(dn(n)){var i=!0;lh(e)}else i=!1;if(ea(e,s),e.stateNode===null)Sd(t,e),ZT(e,n,r),ig(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dn(d):(d=dn(n)?Qi:zt.current,d=Ca(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&i_(e,a,r,d),Cs=!1;var m=e.memoizedState;a.state=m,fh(e,r,a,s),c=e.memoizedState,l!==r||m!==c||un.current||Cs?(typeof h=="function"&&(sg(e,n,h,r),c=e.memoizedState),(l=Cs||s_(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,jT(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:zn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Dn(c):(c=dn(n)?Qi:zt.current,c=Ca(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&i_(e,a,r,c),Cs=!1,m=e.memoizedState,a.state=m,fh(e,r,a,s);var b=e.memoizedState;l!==f||m!==b||un.current||Cs?(typeof x=="function"&&(sg(e,n,x,r),b=e.memoizedState),(d=Cs||s_(e,n,d,r,m,b,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return lg(t,e,n,r,i,s)}function lg(t,e,n,r,s,i){sb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Y0(e,n,!1),rs(t,e,i);r=e.stateNode,mD.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ia(e,t.child,null,i),e.child=Ia(e,null,l,i)):Xt(t,e,l,i),e.memoizedState=r.state,s&&Y0(e,n,!0),e.child}function ib(t){var e=t.stateNode;e.pendingContext?Q0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q0(t,e.context,!1),rv(t,e.containerInfo)}function h_(t,e,n,r,s){return Na(),Xy(s),e.flags|=256,Xt(t,e,n,r),e.child}var cg={dehydrated:null,treeContext:null,retryLane:0};function ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function ob(t,e,n){var r=e.pendingProps,s=tt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(tt,s&1),t===null)return ng(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=df(a,r,0,null),t=Gi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ug(n),e.memoizedState=cg,t):dv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return pD(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xs(l,i):(i=Gi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?ug(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=cg,r}return i=t.child,t=i.sibling,r=Xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dv(t,e){return e=df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&Xy(r),Ia(e,t.child,null,n),t=dv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pD(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=qm(Error(W(422))),Qu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=df({mode:"visible",children:r.children},s,0,null),i=Gi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ia(e,t.child,null,a),e.child.memoizedState=ug(a),e.memoizedState=cg,i);if(!(e.mode&1))return Qu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(W(419)),r=qm(i,r,void 0),Qu(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=_t,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ns(t,s),Jn(r,t,s,-1))}return yv(),r=qm(Error(W(421))),Qu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ID.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vn=Ws(s.nextSibling),wn=e,et=!0,Hn=null,t!==null&&(Nn[In++]=qr,Nn[In++]=Hr,Nn[In++]=Yi,qr=t.id,Hr=t.overflow,Yi=e),e=dv(e,r.children),e.flags|=4096,e)}function f_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rg(t.return,e,n)}function Hm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ab(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xt(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f_(t,n,e);else if(t.tag===19)f_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(tt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hm(e,!0,n,null,i);break;case"together":Hm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gD(t,e,n){switch(e.tag){case 3:ib(e),Na();break;case 5:kT(e);break;case 1:dn(e.type)&&lh(e);break;case 4:rv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(dh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?ob(t,e,n):(Ke(tt,tt.current&1),t=rs(t,e,n),t!==null?t.sibling:null);Ke(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ab(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,rb(t,e,n)}return rs(t,e,n)}var lb,dg,cb,ub;lb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dg=function(){};cb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mi(Er.current);var i=null;switch(n){case"input":s=kp(t,s),r=kp(t,r),i=[];break;case"select":s=rt({},s,{value:void 0}),r=rt({},r,{value:void 0}),i=[];break;case"textarea":s=Mp(t,s),r=Mp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oh)}Vp(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(lc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(lc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ub=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yD(t,e,n){var r=e.pendingProps;switch(Yy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return dn(e.type)&&ah(),Ot(e),null;case 3:return r=e.stateNode,Pa(),Ze(un),Ze(zt),iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(xg(Hn),Hn=null))),dg(t,e),Ot(e),null;case 5:sv(e);var s=Mi(wc.current);if(n=e.type,t!==null&&e.stateNode!=null)cb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Ot(e),null}if(t=Mi(Er.current),Wu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[yr]=e,r[vc]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<Ol.length;s++)Xe(Ol[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":E0(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":T0(r,i),Xe("invalid",r)}Vp(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Gu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Gu(r.textContent,l,t),s=["children",""+l]):lc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Xe("scroll",r)}switch(n){case"input":Vu(r),S0(r,i,!0);break;case"textarea":Vu(r),b0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=oh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[yr]=e,t[vc]=r,lb(t,e,!1,!1),e.stateNode=t;e:{switch(a=Fp(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ol.length;s++)Xe(Ol[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":E0(t,r),s=kp(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=rt({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":T0(t,r),s=Mp(t,r),Xe("invalid",t);break;default:s=r}Vp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$S(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&cc(t,c):typeof c=="number"&&cc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",t):c!=null&&Oy(t,i,c,a))}switch(n){case"input":Vu(t),S0(t,r,!1);break;case"textarea":Vu(t),b0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=oh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)ub(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Mi(wc.current),Mi(Er.current),Wu(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(i=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Ot(e),null;case 13:if(Ze(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&vn!==null&&e.mode&1&&!(e.flags&128))IT(),Na(),e.flags|=98560,i=!1;else if(i=Wu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[yr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),i=!1}else Hn!==null&&(xg(Hn),Hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?yt===0&&(yt=3):yv())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Pa(),dg(t,e),t===null&&gc(e.stateNode.containerInfo),Ot(e),null;case 10:return ev(e.type._context),Ot(e),null;case 17:return dn(e.type)&&ah(),Ot(e),null;case 19:if(Ze(tt),i=e.memoizedState,i===null)return Ot(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Cl(i,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mh(t),a!==null){for(e.flags|=128,Cl(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(tt,tt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Aa&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304)}else{if(!r)if(t=mh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!et)return Ot(e),null}else 2*ct()-i.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=tt.current,Ke(tt,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return gv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function vD(t,e){switch(Yy(e),e.tag){case 1:return dn(e.type)&&ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),Ze(un),Ze(zt),iv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sv(e),null;case 13:if(Ze(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(tt),null;case 4:return Pa(),null;case 10:return ev(e.type._context),null;case 22:case 23:return gv(),null;case 24:return null;default:return null}}var Yu=!1,Ft=!1,xD=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function hg(t,e,n){try{n()}catch(r){at(t,e,r)}}var m_=!1;function wD(t,e){if(Qp=rh,t=pT(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)m=f,f=x;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(x=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yp={focusedElem:t,selectionRange:n},rh=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,y=b.memoizedState,_=e.stateNode,S=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:zn(e.type,v),y);_.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(R){at(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=m_,m_=!1,b}function Jl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hg(e,n,i)}s=s.next}while(s!==r)}}function cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function db(t){var e=t.alternate;e!==null&&(t.alternate=null,db(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[vc],delete e[Zp],delete e[nD],delete e[rD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hb(t){return t.tag===5||t.tag===3||t.tag===4}function p_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oh));else if(r!==4&&(t=t.child,t!==null))for(mg(t,e,n),t=t.sibling;t!==null;)mg(t,e,n),t=t.sibling}function pg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pg(t,e,n),t=t.sibling;t!==null;)pg(t,e,n),t=t.sibling}var bt=null,qn=!1;function xs(t,e,n){for(n=n.child;n!==null;)fb(t,e,n),n=n.sibling}function fb(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(ef,n)}catch{}switch(n.tag){case 5:Ft||Ho(n,e);case 6:var r=bt,s=qn;bt=null,xs(t,e,n),bt=r,qn=s,bt!==null&&(qn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(qn?(t=bt,n=n.stateNode,t.nodeType===8?Vm(t.parentNode,n):t.nodeType===1&&Vm(t,n),fc(t)):Vm(bt,n.stateNode));break;case 4:r=bt,s=qn,bt=n.stateNode.containerInfo,qn=!0,xs(t,e,n),bt=r,qn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&hg(n,e,a),s=s.next}while(s!==r)}xs(t,e,n);break;case 1:if(!Ft&&(Ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){at(n,e,l)}xs(t,e,n);break;case 21:xs(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,xs(t,e,n),Ft=r):xs(t,e,n);break;default:xs(t,e,n)}}function g_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xD),e.forEach(function(r){var s=PD.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:bt=l.stateNode,qn=!1;break e;case 3:bt=l.stateNode.containerInfo,qn=!0;break e;case 4:bt=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(bt===null)throw Error(W(160));fb(i,a,s),bt=null,qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){at(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mb(e,t),e=e.sibling}function mb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fn(e,t),or(t),r&4){try{Jl(3,t,t.return),cf(3,t)}catch(v){at(t,t.return,v)}try{Jl(5,t,t.return)}catch(v){at(t,t.return,v)}}break;case 1:Fn(e,t),or(t),r&512&&n!==null&&Ho(n,n.return);break;case 5:if(Fn(e,t),or(t),r&512&&n!==null&&Ho(n,n.return),t.flags&32){var s=t.stateNode;try{cc(s,"")}catch(v){at(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&MS(s,i),Fp(l,a);var d=Fp(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?$S(s,f):h==="dangerouslySetInnerHTML"?FS(s,f):h==="children"?cc(s,f):Oy(s,h,f,d)}switch(l){case"input":Dp(s,i);break;case"textarea":LS(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Yo(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Yo(s,!!i.multiple,i.defaultValue,!0):Yo(s,!!i.multiple,i.multiple?[]:"",!1))}s[vc]=i}catch(v){at(t,t.return,v)}}break;case 6:if(Fn(e,t),or(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){at(t,t.return,v)}}break;case 3:if(Fn(e,t),or(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fc(e.containerInfo)}catch(v){at(t,t.return,v)}break;case 4:Fn(e,t),or(t);break;case 13:Fn(e,t),or(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mv=ct())),r&4&&g_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(d=Ft)||h,Fn(e,t),Ft=d):Fn(e,t),or(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,x=m.child,m.tag){case 0:case 11:case 14:case 15:Jl(4,m,m.return);break;case 1:Ho(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){at(r,n,v)}}break;case 5:Ho(m,m.return);break;case 22:if(m.memoizedState!==null){v_(f);continue}}x!==null?(x.return=m,ie=x):v_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=US("display",a))}catch(v){at(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){at(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fn(e,t),or(t),r&4&&g_(t);break;case 21:break;default:Fn(e,t),or(t)}}function or(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hb(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cc(s,""),r.flags&=-33);var i=p_(t);pg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=p_(t);mg(t,l,a);break;default:throw Error(W(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _D(t,e,n){ie=t,pb(t)}function pb(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Yu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ft;l=Yu;var d=Ft;if(Yu=a,(Ft=c)&&!d)for(ie=s;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?x_(s):c!==null?(c.return=a,ie=c):x_(s);for(;i!==null;)ie=i,pb(i),i=i.sibling;ie=s,Yu=l,Ft=d}y_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):y_(t)}}function y_(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&t_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t_(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Ft||e.flags&512&&fg(e)}catch(m){at(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function v_(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function x_(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cf(4,e)}catch(c){at(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){at(e,s,c)}}var i=e.return;try{fg(e)}catch(c){at(e,i,c)}break;case 5:var a=e.return;try{fg(e)}catch(c){at(e,a,c)}}}catch(c){at(e,e.return,c)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var ED=Math.ceil,yh=us.ReactCurrentDispatcher,hv=us.ReactCurrentOwner,An=us.ReactCurrentBatchConfig,Me=0,_t=null,ht=null,It=0,pn=0,Go=yi(0),yt=0,Tc=null,Ji=0,uf=0,fv=0,Zl=null,an=null,mv=0,Aa=1/0,Fr=null,vh=!1,gg=null,Qs=null,Xu=!1,zs=null,xh=0,ec=0,yg=null,Td=-1,bd=0;function Jt(){return Me&6?ct():Td!==-1?Td:Td=ct()}function Ys(t){return t.mode&1?Me&2&&It!==0?It&-It:iD.transition!==null?(bd===0&&(bd=ZS()),bd):(t=Be,t!==0||(t=window.event,t=t===void 0?16:oT(t.type)),t):1}function Jn(t,e,n,r){if(50<ec)throw ec=0,yg=null,Error(W(185));Wc(t,n,r),(!(Me&2)||t!==_t)&&(t===_t&&(!(Me&2)&&(uf|=n),yt===4&&Is(t,It)),hn(t,r),n===1&&Me===0&&!(e.mode&1)&&(Aa=ct()+500,of&&vi()))}function hn(t,e){var n=t.callbackNode;i2(t,e);var r=nh(t,t===_t?It:0);if(r===0)n!==null&&I0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&I0(n),e===1)t.tag===0?sD(w_.bind(null,t)):bT(w_.bind(null,t)),eD(function(){!(Me&6)&&vi()}),n=null;else{switch(eT(r)){case 1:n=Uy;break;case 4:n=XS;break;case 16:n=th;break;case 536870912:n=JS;break;default:n=th}n=Sb(n,gb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gb(t,e){if(Td=-1,bd=0,Me&6)throw Error(W(327));var n=t.callbackNode;if(ta()&&t.callbackNode!==n)return null;var r=nh(t,t===_t?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wh(t,r);else{e=r;var s=Me;Me|=2;var i=vb();(_t!==t||It!==e)&&(Fr=null,Aa=ct()+500,Hi(t,e));do try{bD();break}catch(l){yb(t,l)}while(!0);Zy(),yh.current=i,Me=s,ht!==null?e=0:(_t=null,It=0,e=yt)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(r=s,e=vg(t,s))),e===1)throw n=Tc,Hi(t,0),Is(t,r),hn(t,ct()),n;if(e===6)Is(t,r);else{if(s=t.current.alternate,!(r&30)&&!SD(s)&&(e=wh(t,r),e===2&&(i=qp(t),i!==0&&(r=i,e=vg(t,i))),e===1))throw n=Tc,Hi(t,0),Is(t,r),hn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:ji(t,an,Fr);break;case 3:if(Is(t,r),(r&130023424)===r&&(e=mv+500-ct(),10<e)){if(nh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jp(ji.bind(null,t,an,Fr),e);break}ji(t,an,Fr);break;case 4:if(Is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Xn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ED(r/1960))-r,10<r){t.timeoutHandle=Jp(ji.bind(null,t,an,Fr),r);break}ji(t,an,Fr);break;case 5:ji(t,an,Fr);break;default:throw Error(W(329))}}}return hn(t,ct()),t.callbackNode===n?gb.bind(null,t):null}function vg(t,e){var n=Zl;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=wh(t,e),t!==2&&(e=an,an=n,e!==null&&xg(e)),t}function xg(t){an===null?an=t:an.push.apply(an,t)}function SD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Is(t,e){for(e&=~fv,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function w_(t){if(Me&6)throw Error(W(327));ta();var e=nh(t,0);if(!(e&1))return hn(t,ct()),null;var n=wh(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=vg(t,r))}if(n===1)throw n=Tc,Hi(t,0),Is(t,e),hn(t,ct()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ji(t,an,Fr),hn(t,ct()),null}function pv(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Aa=ct()+500,of&&vi())}}function Zi(t){zs!==null&&zs.tag===0&&!(Me&6)&&ta();var e=Me;Me|=1;var n=An.transition,r=Be;try{if(An.transition=null,Be=1,t)return t()}finally{Be=r,An.transition=n,Me=e,!(Me&6)&&vi()}}function gv(){pn=Go.current,Ze(Go)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Z2(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(Yy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ah();break;case 3:Pa(),Ze(un),Ze(zt),iv();break;case 5:sv(r);break;case 4:Pa();break;case 13:Ze(tt);break;case 19:Ze(tt);break;case 10:ev(r.type._context);break;case 22:case 23:gv()}n=n.return}if(_t=t,ht=t=Xs(t.current,null),It=pn=e,yt=0,Tc=null,fv=uf=Ji=0,an=Zl=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Oi=null}return t}function yb(t,e){do{var n=ht;try{if(Zy(),_d.current=gh,ph){for(var r=nt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ph=!1}if(Xi=0,wt=pt=nt=null,Xl=!1,_c=0,hv.current=null,n===null||n.return===null){yt=1,Tc=e,ht=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=It,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=a_(a);if(x!==null){x.flags&=-257,l_(x,a,l,i,e),x.mode&1&&o_(i,d,e),e=x,c=d;var b=e.updateQueue;if(b===null){var v=new Set;v.add(c),e.updateQueue=v}else b.add(c);break e}else{if(!(e&1)){o_(i,d,e),yv();break e}c=Error(W(426))}}else if(et&&l.mode&1){var y=a_(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),l_(y,a,l,i,e),Xy(Ra(c,l));break e}}i=c=Ra(c,l),yt!==4&&(yt=2),Zl===null?Zl=[i]:Zl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=eb(i,c,e);e_(i,_);break e;case 1:l=c;var S=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Qs===null||!Qs.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=tb(i,l,e);e_(i,R);break e}}i=i.return}while(i!==null)}wb(n)}catch(D){e=D,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function vb(){var t=yh.current;return yh.current=gh,t===null?gh:t}function yv(){(yt===0||yt===3||yt===2)&&(yt=4),_t===null||!(Ji&268435455)&&!(uf&268435455)||Is(_t,It)}function wh(t,e){var n=Me;Me|=2;var r=vb();(_t!==t||It!==e)&&(Fr=null,Hi(t,e));do try{TD();break}catch(s){yb(t,s)}while(!0);if(Zy(),Me=n,yh.current=r,ht!==null)throw Error(W(261));return _t=null,It=0,yt}function TD(){for(;ht!==null;)xb(ht)}function bD(){for(;ht!==null&&!Yk();)xb(ht)}function xb(t){var e=Eb(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?wb(t):ht=e,hv.current=null}function wb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vD(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ht=null;return}}else if(n=yD(n,e,pn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);yt===0&&(yt=5)}function ji(t,e,n){var r=Be,s=An.transition;try{An.transition=null,Be=1,CD(t,e,n,r)}finally{An.transition=s,Be=r}return null}function CD(t,e,n,r){do ta();while(zs!==null);if(Me&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(o2(t,i),t===_t&&(ht=_t=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xu||(Xu=!0,Sb(th,function(){return ta(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=An.transition,An.transition=null;var a=Be;Be=1;var l=Me;Me|=4,hv.current=null,wD(t,n),mb(n,t),G2(Yp),rh=!!Qp,Yp=Qp=null,t.current=n,_D(n),Xk(),Me=l,Be=a,An.transition=i}else t.current=n;if(Xu&&(Xu=!1,zs=t,xh=s),i=t.pendingLanes,i===0&&(Qs=null),e2(n.stateNode),hn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vh)throw vh=!1,t=gg,gg=null,t;return xh&1&&t.tag!==0&&ta(),i=t.pendingLanes,i&1?t===yg?ec++:(ec=0,yg=t):ec=0,vi(),null}function ta(){if(zs!==null){var t=eT(xh),e=An.transition,n=Be;try{if(An.transition=null,Be=16>t?16:t,zs===null)var r=!1;else{if(t=zs,zs=null,xh=0,Me&6)throw Error(W(331));var s=Me;for(Me|=4,ie=t.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Jl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,x=h.return;if(db(h),h===d){ie=null;break}if(m!==null){m.return=x,ie=m;break}ie=x}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jl(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ie=_;break e}ie=i.return}}var S=t.current;for(ie=S;ie!==null;){a=ie;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ie=C;else e:for(a=S;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cf(9,l)}}catch(D){at(l,l.return,D)}if(l===a){ie=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ie=R;break e}ie=l.return}}if(Me=s,vi(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(ef,t)}catch{}r=!0}return r}finally{Be=n,An.transition=e}}return!1}function __(t,e,n){e=Ra(n,e),e=eb(t,e,1),t=Ks(t,e,1),e=Jt(),t!==null&&(Wc(t,1,e),hn(t,e))}function at(t,e,n){if(t.tag===3)__(t,t,n);else for(;e!==null;){if(e.tag===3){__(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qs===null||!Qs.has(r))){t=Ra(n,t),t=tb(e,t,1),e=Ks(e,t,1),t=Jt(),e!==null&&(Wc(e,1,t),hn(e,t));break}}e=e.return}}function ND(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(It&n)===n&&(yt===4||yt===3&&(It&130023424)===It&&500>ct()-mv?Hi(t,0):fv|=n),hn(t,e)}function _b(t,e){e===0&&(t.mode&1?(e=$u,$u<<=1,!($u&130023424)&&($u=4194304)):e=1);var n=Jt();t=ns(t,e),t!==null&&(Wc(t,e,n),hn(t,n))}function ID(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_b(t,n)}function PD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),_b(t,n)}var Eb;Eb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,gD(t,e,n);cn=!!(t.flags&131072)}else cn=!1,et&&e.flags&1048576&&CT(e,uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sd(t,e),t=e.pendingProps;var s=Ca(e,zt.current);ea(e,n),s=av(null,e,r,t,s,n);var i=lv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(i=!0,lh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nv(e),s.updater=lf,e.stateNode=s,s._reactInternals=e,ig(e,r,t,n),e=lg(null,e,r,!0,i,n)):(e.tag=0,et&&i&&Qy(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=AD(r),t=zn(r,t),s){case 0:e=ag(null,e,r,t,n);break e;case 1:e=d_(null,e,r,t,n);break e;case 11:e=c_(null,e,r,t,n);break e;case 14:e=u_(null,e,r,zn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),ag(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),d_(t,e,r,s,n);case 3:e:{if(ib(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jT(t,e),fh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ra(Error(W(423)),e),e=h_(t,e,r,n,s);break e}else if(r!==s){s=Ra(Error(W(424)),e),e=h_(t,e,r,n,s);break e}else for(vn=Ws(e.stateNode.containerInfo.firstChild),wn=e,et=!0,Hn=null,n=RT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),r===s){e=rs(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return kT(e),t===null&&ng(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Xp(r,s)?a=null:i!==null&&Xp(r,i)&&(e.flags|=32),sb(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&ng(e),null;case 13:return ob(t,e,n);case 4:return rv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),c_(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ke(dh,r._currentValue),r._currentValue=a,i!==null)if(er(i.value,a)){if(i.children===s.children&&!un.current){e=rs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),rg(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ea(e,n),s=Dn(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=zn(r,e.pendingProps),s=zn(r.type,s),u_(t,e,r,s,n);case 15:return nb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),Sd(t,e),e.tag=1,dn(r)?(t=!0,lh(e)):t=!1,ea(e,n),ZT(e,r,s),ig(e,r,s,n),lg(null,e,r,!0,t,n);case 19:return ab(t,e,n);case 22:return rb(t,e,n)}throw Error(W(156,e.tag))};function Sb(t,e){return YS(t,e)}function RD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new RD(t,e,n,r)}function vv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AD(t){if(typeof t=="function")return vv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ly)return 11;if(t===Vy)return 14}return 2}function Xs(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cd(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")vv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Mo:return Gi(n.children,s,i,e);case My:a=8,s|=8;break;case Pp:return t=Rn(12,n,e,s|2),t.elementType=Pp,t.lanes=i,t;case Rp:return t=Rn(13,n,e,s),t.elementType=Rp,t.lanes=i,t;case Ap:return t=Rn(19,n,e,s),t.elementType=Ap,t.lanes=i,t;case kS:return df(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AS:a=10;break e;case jS:a=9;break e;case Ly:a=11;break e;case Vy:a=14;break e;case bs:a=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Rn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gi(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function df(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=kS,t.lanes=n,t.stateNode={isHidden:!1},t}function Gm(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function Wm(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jD(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nm(0),this.expirationTimes=Nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xv(t,e,n,r,s,i,a,l,c){return t=new jD(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nv(i),t}function kD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tb(t){if(!t)return ii;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(dn(n))return TT(t,n,e)}return e}function bb(t,e,n,r,s,i,a,l,c){return t=xv(n,r,!0,t,s,i,a,l,c),t.context=Tb(null),n=t.current,r=Jt(),s=Ys(n),i=Qr(r,s),i.callback=e??null,Ks(n,i,s),t.current.lanes=s,Wc(t,s,r),hn(t,r),t}function hf(t,e,n,r){var s=e.current,i=Jt(),a=Ys(s);return n=Tb(n),e.context===null?e.context=n:e.pendingContext=n,e=Qr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ks(s,e,a),t!==null&&(Jn(t,s,a,i),wd(t,s,a)),a}function _h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wv(t,e){E_(t,e),(t=t.alternate)&&E_(t,e)}function DD(){return null}var Cb=typeof reportError=="function"?reportError:function(t){console.error(t)};function _v(t){this._internalRoot=t}ff.prototype.render=_v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));hf(t,e,null,null)};ff.prototype.unmount=_v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){hf(null,t,null,null)}),e[ts]=null}};function ff(t){this._internalRoot=t}ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=rT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ns.length&&e!==0&&e<Ns[n].priority;n++);Ns.splice(n,0,t),n===0&&iT(t)}};function Ev(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S_(){}function OD(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=_h(a);i.call(d)}}var a=bb(e,r,t,0,null,!1,!1,"",S_);return t._reactRootContainer=a,t[ts]=a.current,gc(t.nodeType===8?t.parentNode:t),Zi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=_h(c);l.call(d)}}var c=xv(t,0,!1,null,null,!1,!1,"",S_);return t._reactRootContainer=c,t[ts]=c.current,gc(t.nodeType===8?t.parentNode:t),Zi(function(){hf(e,c,n,r)}),c}function pf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=_h(a);l.call(c)}}hf(e,a,t,s)}else a=OD(n,e,t,s,r);return _h(a)}tT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dl(e.pendingLanes);n!==0&&($y(e,n|1),hn(e,ct()),!(Me&6)&&(Aa=ct()+500,vi()))}break;case 13:Zi(function(){var r=ns(t,1);if(r!==null){var s=Jt();Jn(r,t,1,s)}}),wv(t,1)}};zy=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var n=Jt();Jn(e,t,134217728,n)}wv(t,134217728)}};nT=function(t){if(t.tag===13){var e=Ys(t),n=ns(t,e);if(n!==null){var r=Jt();Jn(n,t,e,r)}wv(t,e)}};rT=function(){return Be};sT=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};$p=function(t,e,n){switch(e){case"input":if(Dp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sf(r);if(!s)throw Error(W(90));OS(r),Dp(r,s)}}}break;case"textarea":LS(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};qS=pv;HS=Zi;var MD={usingClientEntryPoint:!1,Events:[Qc,Uo,sf,zS,BS,pv]},Nl={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LD={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:us.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KS(t),t===null?null:t.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||DD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{ef=Ju.inject(LD),_r=Ju}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MD;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ev(e))throw Error(W(200));return kD(t,e,null,n)};Sn.createRoot=function(t,e){if(!Ev(t))throw Error(W(299));var n=!1,r="",s=Cb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=xv(t,1,!1,null,null,n,!1,r,s),t[ts]=e.current,gc(t.nodeType===8?t.parentNode:t),new _v(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=KS(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Zi(t)};Sn.hydrate=function(t,e,n){if(!mf(e))throw Error(W(200));return pf(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!Ev(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Cb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bb(e,null,t,1,n??null,s,!1,i,a),t[ts]=e.current,gc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ff(e)};Sn.render=function(t,e,n){if(!mf(e))throw Error(W(200));return pf(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!mf(t))throw Error(W(40));return t._reactRootContainer?(Zi(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[ts]=null})}),!0):!1};Sn.unstable_batchedUpdates=pv;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mf(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return pf(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function Nb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nb)}catch(t){console.error(t)}}Nb(),NS.exports=Sn;var go=NS.exports;const VD=mS(go);var Ib,T_=go;Ib=T_.createRoot,T_.hydrateRoot;function FD(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Pb={exports:{}},Rb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=g;function UD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $D=typeof Object.is=="function"?Object.is:UD,zD=ja.useState,BD=ja.useEffect,qD=ja.useLayoutEffect,HD=ja.useDebugValue;function GD(t,e){var n=e(),r=zD({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return qD(function(){s.value=n,s.getSnapshot=e,Km(s)&&i({inst:s})},[t,n,e]),BD(function(){return Km(s)&&i({inst:s}),t(function(){Km(s)&&i({inst:s})})},[t]),HD(n),n}function Km(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$D(t,n)}catch{return!0}}function WD(t,e){return e()}var KD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WD:GD;Rb.useSyncExternalStore=ja.useSyncExternalStore!==void 0?ja.useSyncExternalStore:KD;Pb.exports=Rb;var QD=Pb.exports;const YD=bS.useInsertionEffect,XD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JD=XD?g.useLayoutEffect:g.useEffect,ZD=YD||JD,Ab=t=>{const e=g.useRef([t,(...n)=>e[0](...n)]).current;return ZD(()=>{e[0]=t}),e[1]},eO="popstate",Sv="pushState",Tv="replaceState",tO="hashchange",b_=[eO,Sv,Tv,tO],nO=t=>{for(const e of b_)addEventListener(e,t);return()=>{for(const e of b_)removeEventListener(e,t)}},jb=(t,e)=>QD.useSyncExternalStore(nO,t,e),rO=()=>location.search,sO=({ssrSearch:t=""}={})=>jb(rO,()=>t),C_=()=>location.pathname,iO=({ssrPath:t}={})=>jb(C_,t?()=>t:C_),oO=(t,{replace:e=!1,state:n=null}={})=>history[e?Tv:Sv](n,"",t),aO=(t={})=>[iO(t),oO],N_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[N_]>"u"){for(const t of[Sv,Tv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,N_,{value:!0})}const lO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",kb=(t="")=>t==="/"?"":t,cO=(t,e)=>t[0]==="~"?t.slice(1):kb(e)+t,uO=(t="",e)=>lO(I_(kb(t)),I_(e)),I_=t=>{try{return decodeURI(t)}catch{return t}},Db={hook:aO,searchHook:sO,parser:FD,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Ob=g.createContext(Db),Xc=()=>g.useContext(Ob),Mb={},Lb=g.createContext(Mb),dO=()=>g.useContext(Lb),gf=t=>{const[e,n]=t.hook(t);return[uO(t.base,e),Ab((r,s)=>n(cO(r,t.base),s))]},ds=()=>gf(Xc()),Vb=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):a.groups;let h={...c};return d&&Object.assign(h,d),h})(),...r?[l]:[]]:[!1,null]},hO=({children:t,...e})=>{var h,f;const n=Xc(),r=e.hook?Db:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=g.useRef({}),c=l.current,d=c;for(let m in r){const x=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===d&&x!==d[m]&&(l.current=d={...d}),d[m]=x,x!==r[m]&&(s=d)}return g.createElement(Ob.Provider,{value:s,children:t})},P_=({children:t,component:e},n)=>e?g.createElement(e,{params:n}):typeof t=="function"?t(n):t,fO=t=>{let e=g.useRef(Mb),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Un=({path:t,nest:e,match:n,...r})=>{const s=Xc(),[i]=gf(s),[a,l,c]=n??Vb(s.parser,t,i,e),d=fO({...dO(),...l});if(!a)return null;const h=c?g.createElement(hO,{base:c},P_(r,d)):P_(r,d);return g.createElement(Lb.Provider,{value:d,children:h})};g.forwardRef((t,e)=>{const n=Xc(),[r,s]=gf(n),{to:i="",href:a=i,onClick:l,asChild:c,children:d,className:h,replace:f,state:m,...x}=t,b=Ab(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),s(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&g.isValidElement(d)?g.cloneElement(d,{onClick:b,href:v}):g.createElement("a",{...x,onClick:b,href:v,className:h!=null&&h.call?h(r===a):h,children:d,ref:e})});const Fb=t=>Array.isArray(t)?t.flatMap(e=>Fb(e&&e.type===g.Fragment?e.props.children:e)):[t],mO=({children:t,location:e})=>{const n=Xc(),[r]=gf(n);for(const s of Fb(t)){let i=0;if(g.isValidElement(s)&&(i=Vb(n.parser,s.props.path,e||r,s.props.nest))[0])return g.cloneElement(s,{match:i})}return null};var Ga=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eo=typeof window>"u"||"Deno"in globalThis;function Cn(){}function pO(t,e){return typeof t=="function"?t(e):t}function wg(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ub(t,e){return Math.max(t+(e||0)-Date.now(),0)}function na(t,e){return typeof t=="function"?t(e):t}function Gn(t,e){return typeof t=="function"?t(e):t}function R_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==bv(a,e.options))return!1}else if(!bc(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function A_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(to(e.options.mutationKey)!==to(i))return!1}else if(!bc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function bv(t,e){return((e==null?void 0:e.queryKeyHashFn)||to)(t)}function to(t){return JSON.stringify(t,(e,n)=>_g(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!bc(t[n],e[n])):!1}function $b(t,e){if(t===e)return t;const n=j_(t)&&j_(e);if(n||_g(t)&&_g(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let d=0;d<a;d++){const h=n?d:i[d];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=$b(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function Eh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function j_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _g(t){if(!k_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!k_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function k_(t){return Object.prototype.toString.call(t)==="[object Object]"}function gO(t){return new Promise(e=>{setTimeout(e,t)})}function Eg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?$b(t,e):e}function yO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function vO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Cv=Symbol();function zb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Vi,js,ha,sS,xO=(sS=class extends Ga{constructor(){super();pe(this,Vi);pe(this,js);pe(this,ha);te(this,ha,e=>{if(!eo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,js)||this.setEventListener(O(this,ha))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,js))==null||e.call(this),te(this,js,void 0))}setEventListener(e){var n;te(this,ha,e),(n=O(this,js))==null||n.call(this),te(this,js,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,Vi)!==e&&(te(this,Vi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,Vi)=="boolean"?O(this,Vi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Vi=new WeakMap,js=new WeakMap,ha=new WeakMap,sS),Nv=new xO,fa,ks,ma,iS,wO=(iS=class extends Ga{constructor(){super();pe(this,fa,!0);pe(this,ks);pe(this,ma);te(this,ma,e=>{if(!eo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,ks)||this.setEventListener(O(this,ma))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,ks))==null||e.call(this),te(this,ks,void 0))}setEventListener(e){var n;te(this,ma,e),(n=O(this,ks))==null||n.call(this),te(this,ks,e(this.setOnline.bind(this)))}setOnline(e){O(this,fa)!==e&&(te(this,fa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,fa)}},fa=new WeakMap,ks=new WeakMap,ma=new WeakMap,iS),Sh=new wO;function Sg(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function _O(t){return Math.min(1e3*2**t,3e4)}function Bb(t){return(t??"online")==="online"?Sh.isOnline():!0}var qb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Qm(t){return t instanceof qb}function Hb(t){let e=!1,n=0,r=!1,s;const i=Sg(),a=v=>{var y;r||(m(new qb(v)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>Nv.isFocused()&&(t.networkMode==="always"||Sh.isOnline())&&t.canRun(),h=()=>Bb(t.networkMode)&&t.canRun(),f=v=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,v),s==null||s(),i.reject(v))},x=()=>new Promise(v=>{var y;s=_=>{(r||d())&&v(_)},(y=t.onPause)==null||y.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(r)return;let v;const y=n===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(f).catch(_=>{var M;if(r)return;const S=t.retry??(eo?0:3),C=t.retryDelay??_O,R=typeof C=="function"?C(n,_):C,D=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,_);if(e||!D){m(_);return}n++,(M=t.onFail)==null||M.call(t,n,_),gO(R).then(()=>d()?void 0:x()).then(()=>{e?m(_):b()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():x().then(b),i)}}function EO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var gt=EO(),Fi,oS,Gb=(oS=class{constructor(){pe(this,Fi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wg(this.gcTime)&&te(this,Fi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(eo?1/0:5*60*1e3))}clearGcTimeout(){O(this,Fi)&&(clearTimeout(O(this,Fi)),te(this,Fi,void 0))}},Fi=new WeakMap,oS),pa,ga,bn,Lt,zc,Ui,Bn,Vr,aS,SO=(aS=class extends Gb{constructor(n){super();pe(this,Bn);pe(this,pa);pe(this,ga);pe(this,bn);pe(this,Lt);pe(this,zc);pe(this,Ui);te(this,Ui,!1),te(this,zc,n.defaultOptions),this.setOptions(n.options),this.observers=[],te(this,bn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,te(this,pa,TO(this.options)),this.state=n.state??O(this,pa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=O(this,Lt))==null?void 0:n.promise}setOptions(n){this.options={...O(this,zc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,bn).remove(this)}setData(n,r){const s=Eg(this.state.data,n,this.options);return Te(this,Bn,Vr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Te(this,Bn,Vr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=O(this,Lt))==null?void 0:s.promise;return(i=O(this,Lt))==null||i.cancel(n),r?r.then(Cn).catch(Cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,pa))}isActive(){return this.observers.some(n=>Gn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Ub(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Lt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Lt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),O(this,bn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(O(this,Lt)&&(O(this,Ui)?O(this,Lt).cancel({revert:!0}):O(this,Lt).cancelRetry()),this.scheduleGc()),O(this,bn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,Bn,Vr).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(O(this,Lt))return O(this,Lt).continueRetry(),O(this,Lt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(x=>x.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(te(this,Ui,!0),s.signal)})},a=()=>{const m=zb(this.options,r),x={queryKey:this.queryKey,meta:this.meta};return i(x),te(this,Ui,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(d=this.options.behavior)==null||d.onFetch(l,this),te(this,ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Te(this,Bn,Vr).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var x,b,v,y;Qm(m)&&m.silent||Te(this,Bn,Vr).call(this,{type:"error",error:m}),Qm(m)||((b=(x=O(this,bn).config).onError)==null||b.call(x,m,this),(y=(v=O(this,bn).config).onSettled)==null||y.call(v,this.state.data,m,this)),this.scheduleGc()};return te(this,Lt,Hb({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var x,b,v,y;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(_){c(_);return}(b=(x=O(this,bn).config).onSuccess)==null||b.call(x,m,this),(y=(v=O(this,bn).config).onSettled)==null||y.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,x)=>{Te(this,Bn,Vr).call(this,{type:"failed",failureCount:m,error:x})},onPause:()=>{Te(this,Bn,Vr).call(this,{type:"pause"})},onContinue:()=>{Te(this,Bn,Vr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Lt).start()}},pa=new WeakMap,ga=new WeakMap,bn=new WeakMap,Lt=new WeakMap,zc=new WeakMap,Ui=new WeakMap,Bn=new WeakSet,Vr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Wb(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Qm(i)&&i.revert&&O(this,ga)?{...O(this,ga),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),gt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),O(this,bn).notify({query:this,type:"updated",action:n})})},aS);function Wb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Bb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function TO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ur,lS,bO=(lS=class extends Ga{constructor(e={}){super();pe(this,ur);this.config=e,te(this,ur,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??bv(s,n);let a=this.get(i);return a||(a=new SO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){O(this,ur).has(e.queryHash)||(O(this,ur).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,ur).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,ur).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,ur).get(e)}getAll(){return[...O(this,ur).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>R_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>R_(e,r)):n}notify(e){gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){gt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){gt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ur=new WeakMap,lS),dr,Qt,$i,hr,Ss,cS,CO=(cS=class extends Gb{constructor(n){super();pe(this,hr);pe(this,dr);pe(this,Qt);pe(this,$i);this.mutationId=n.mutationId,te(this,Qt,n.mutationCache),te(this,dr,[]),this.state=n.state||Kb(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){O(this,dr).includes(n)||(O(this,dr).push(n),this.clearGcTimeout(),O(this,Qt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){te(this,dr,O(this,dr).filter(r=>r!==n)),this.scheduleGc(),O(this,Qt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){O(this,dr).length||(this.state.status==="pending"?this.scheduleGc():O(this,Qt).remove(this))}continue(){var n;return((n=O(this,$i))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,d,h,f,m,x,b,v,y,_,S,C,R,D,M,T,E;te(this,$i,Hb({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(N,P)=>{Te(this,hr,Ss).call(this,{type:"failed",failureCount:N,error:P})},onPause:()=>{Te(this,hr,Ss).call(this,{type:"pause"})},onContinue:()=>{Te(this,hr,Ss).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Qt).canRun(this)}));const r=this.state.status==="pending",s=!O(this,$i).canStart();try{if(!r){Te(this,hr,Ss).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=O(this,Qt).config).onMutate)==null?void 0:a.call(i,n,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));P!==this.state.context&&Te(this,hr,Ss).call(this,{type:"pending",context:P,variables:n,isPaused:s})}const N=await O(this,$i).start();return await((h=(d=O(this,Qt).config).onSuccess)==null?void 0:h.call(d,N,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,N,n,this.state.context)),await((b=(x=O(this,Qt).config).onSettled)==null?void 0:b.call(x,N,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,N,null,n,this.state.context)),Te(this,hr,Ss).call(this,{type:"success",data:N}),N}catch(N){try{throw await((S=(_=O(this,Qt).config).onError)==null?void 0:S.call(_,N,n,this.state.context,this)),await((R=(C=this.options).onError)==null?void 0:R.call(C,N,n,this.state.context)),await((M=(D=O(this,Qt).config).onSettled)==null?void 0:M.call(D,void 0,N,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,void 0,N,n,this.state.context)),N}finally{Te(this,hr,Ss).call(this,{type:"error",error:N})}}finally{O(this,Qt).runNext(this)}}},dr=new WeakMap,Qt=new WeakMap,$i=new WeakMap,hr=new WeakSet,Ss=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),gt.batch(()=>{O(this,dr).forEach(s=>{s.onMutationUpdate(n)}),O(this,Qt).notify({mutation:this,type:"updated",action:n})})},cS);function Kb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mn,Bc,uS,NO=(uS=class extends Ga{constructor(e={}){super();pe(this,mn);pe(this,Bc);this.config=e,te(this,mn,new Map),te(this,Bc,Date.now())}build(e,n,r){const s=new CO({mutationCache:this,mutationId:++Ou(this,Bc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Zu(e),r=O(this,mn).get(n)??[];r.push(e),O(this,mn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Zu(e);if(O(this,mn).has(n)){const s=(r=O(this,mn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?O(this,mn).delete(n):O(this,mn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=O(this,mn).get(Zu(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=O(this,mn).get(Zu(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...O(this,mn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>A_(n,r))}findAll(e={}){return this.getAll().filter(n=>A_(e,n))}notify(e){gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return gt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Cn))))}},mn=new WeakMap,Bc=new WeakMap,uS);function Zu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function D_(t){return{onFetch:(e,n)=>{var h,f,m,x,b;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((x=e.state.data)==null?void 0:x.pages)||[],a=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const y=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=zb(e.options,e.fetchOptions),S=async(C,R,D)=>{if(v)return Promise.reject();if(R==null&&C.pages.length)return Promise.resolve(C);const M={queryKey:e.queryKey,pageParam:R,direction:D?"backward":"forward",meta:e.options.meta};y(M);const T=await _(M),{maxPages:E}=e.options,N=D?vO:yO;return{pages:N(C.pages,T,E),pageParams:N(C.pageParams,R,E)}};if(s&&i.length){const C=s==="backward",R=C?IO:O_,D={pages:i,pageParams:a},M=R(r,D);l=await S(D,M,C)}else{const C=t??i.length;do{const R=c===0?a[0]??r.initialPageParam:O_(r,l);if(c>0&&R==null)break;l=await S(l,R),c++}while(c<C)}return l};e.options.persister?e.fetchFn=()=>{var v,y;return(y=(v=e.options).persister)==null?void 0:y.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function O_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function IO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ot,Ds,Os,ya,va,Ms,xa,wa,dS,PO=(dS=class{constructor(t={}){pe(this,ot);pe(this,Ds);pe(this,Os);pe(this,ya);pe(this,va);pe(this,Ms);pe(this,xa);pe(this,wa);te(this,ot,t.queryCache||new bO),te(this,Ds,t.mutationCache||new NO),te(this,Os,t.defaultOptions||{}),te(this,ya,new Map),te(this,va,new Map),te(this,Ms,0)}mount(){Ou(this,Ms)._++,O(this,Ms)===1&&(te(this,xa,Nv.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,ot).onFocus())})),te(this,wa,Sh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,ot).onOnline())})))}unmount(){var t,e;Ou(this,Ms)._--,O(this,Ms)===0&&((t=O(this,xa))==null||t.call(this),te(this,xa,void 0),(e=O(this,wa))==null||e.call(this),te(this,wa,void 0))}isFetching(t){return O(this,ot).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Ds).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,ot).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=O(this,ot).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(na(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return O(this,ot).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,ot).get(r.queryHash),i=s==null?void 0:s.state.data,a=pO(e,i);if(a!==void 0)return O(this,ot).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return gt.batch(()=>O(this,ot).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,ot).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,ot);gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,ot),r={type:"active",...t};return gt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=gt.batch(()=>O(this,ot).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Cn).catch(Cn)}invalidateQueries(t={},e={}){return gt.batch(()=>{if(O(this,ot).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=gt.batch(()=>O(this,ot).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Cn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Cn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,ot).build(this,e);return n.isStaleByTime(na(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Cn).catch(Cn)}fetchInfiniteQuery(t){return t.behavior=D_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Cn).catch(Cn)}ensureInfiniteQueryData(t){return t.behavior=D_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sh.isOnline()?O(this,Ds).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,ot)}getMutationCache(){return O(this,Ds)}getDefaultOptions(){return O(this,Os)}setDefaultOptions(t){te(this,Os,t)}setQueryDefaults(t,e){O(this,ya).set(to(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,ya).values()];let n={};return e.forEach(r=>{bc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){O(this,va).set(to(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,va).values()];let n={};return e.forEach(r=>{bc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Os).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=bv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Cv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Os).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,ot).clear(),O(this,Ds).clear()}},ot=new WeakMap,Ds=new WeakMap,Os=new WeakMap,ya=new WeakMap,va=new WeakMap,Ms=new WeakMap,xa=new WeakMap,wa=new WeakMap,dS),rn,je,qc,Yt,zi,_a,Ls,fr,Hc,Ea,Sa,Bi,qi,Vs,Ta,Fe,Ml,Tg,bg,Cg,Ng,Ig,Pg,Rg,Qb,hS,RO=(hS=class extends Ga{constructor(e,n){super();pe(this,Fe);pe(this,rn);pe(this,je);pe(this,qc);pe(this,Yt);pe(this,zi);pe(this,_a);pe(this,Ls);pe(this,fr);pe(this,Hc);pe(this,Ea);pe(this,Sa);pe(this,Bi);pe(this,qi);pe(this,Vs);pe(this,Ta,new Set);this.options=n,te(this,rn,e),te(this,fr,null),te(this,Ls,Sg()),this.options.experimental_prefetchInRender||O(this,Ls).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,je).addObserver(this),M_(O(this,je),this.options)?Te(this,Fe,Ml).call(this):this.updateResult(),Te(this,Fe,Ng).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ag(O(this,je),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ag(O(this,je),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,Fe,Ig).call(this),Te(this,Fe,Pg).call(this),O(this,je).removeObserver(this)}setOptions(e,n){const r=this.options,s=O(this,je);if(this.options=O(this,rn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gn(this.options.enabled,O(this,je))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,Fe,Rg).call(this),O(this,je).setOptions(this.options),r._defaulted&&!Eh(this.options,r)&&O(this,rn).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,je),observer:this});const i=this.hasListeners();i&&L_(O(this,je),s,this.options,r)&&Te(this,Fe,Ml).call(this),this.updateResult(n),i&&(O(this,je)!==s||Gn(this.options.enabled,O(this,je))!==Gn(r.enabled,O(this,je))||na(this.options.staleTime,O(this,je))!==na(r.staleTime,O(this,je)))&&Te(this,Fe,Tg).call(this);const a=Te(this,Fe,bg).call(this);i&&(O(this,je)!==s||Gn(this.options.enabled,O(this,je))!==Gn(r.enabled,O(this,je))||a!==O(this,Vs))&&Te(this,Fe,Cg).call(this,a)}getOptimisticResult(e){const n=O(this,rn).getQueryCache().build(O(this,rn),e),r=this.createResult(n,e);return jO(this,r)&&(te(this,Yt,r),te(this,_a,this.options),te(this,zi,O(this,je).state)),r}getCurrentResult(){return O(this,Yt)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){O(this,Ta).add(e)}getCurrentQuery(){return O(this,je)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=O(this,rn).defaultQueryOptions(e),r=O(this,rn).getQueryCache().build(O(this,rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Te(this,Fe,Ml).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,Yt)))}createResult(e,n){var E;const r=O(this,je),s=this.options,i=O(this,Yt),a=O(this,zi),l=O(this,_a),d=e!==r?e.state:O(this,qc),{state:h}=e;let f={...h},m=!1,x;if(n._optimisticResults){const N=this.hasListeners(),P=!N&&M_(e,n),k=N&&L_(e,r,n,s);(P||k)&&(f={...f,...Wb(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:v,status:y}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(a==null?void 0:a.data)&&n.select===O(this,Hc))x=O(this,Ea);else try{te(this,Hc,n.select),x=n.select(f.data),x=Eg(i==null?void 0:i.data,x,n),te(this,Ea,x),te(this,fr,null)}catch(N){te(this,fr,N)}else x=f.data;if(n.placeholderData!==void 0&&x===void 0&&y==="pending"){let N;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))N=i.data;else if(N=typeof n.placeholderData=="function"?n.placeholderData((E=O(this,Sa))==null?void 0:E.state.data,O(this,Sa)):n.placeholderData,n.select&&N!==void 0)try{N=n.select(N),te(this,fr,null)}catch(P){te(this,fr,P)}N!==void 0&&(y="success",x=Eg(i==null?void 0:i.data,N,n),m=!0)}O(this,fr)&&(b=O(this,fr),x=O(this,Ea),v=Date.now(),y="error");const _=f.fetchStatus==="fetching",S=y==="pending",C=y==="error",R=S&&_,D=x!==void 0,T={status:y,fetchStatus:f.fetchStatus,isPending:S,isSuccess:y==="success",isError:C,isInitialLoading:R,isLoading:R,data:x,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:C&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:C&&D,isStale:Iv(e,n),refetch:this.refetch,promise:O(this,Ls)};if(this.options.experimental_prefetchInRender){const N=j=>{T.status==="error"?j.reject(T.error):T.data!==void 0&&j.resolve(T.data)},P=()=>{const j=te(this,Ls,T.promise=Sg());N(j)},k=O(this,Ls);switch(k.status){case"pending":e.queryHash===r.queryHash&&N(k);break;case"fulfilled":(T.status==="error"||T.data!==k.value)&&P();break;case"rejected":(T.status!=="error"||T.error!==k.reason)&&P();break}}return T}updateResult(e){const n=O(this,Yt),r=this.createResult(O(this,je),this.options);if(te(this,zi,O(this,je).state),te(this,_a,this.options),O(this,zi).data!==void 0&&te(this,Sa,O(this,je)),Eh(r,n))return;te(this,Yt,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!O(this,Ta).size)return!0;const c=new Set(l??O(this,Ta));return this.options.throwOnError&&c.add("error"),Object.keys(O(this,Yt)).some(d=>{const h=d;return O(this,Yt)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Te(this,Fe,Qb).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,Fe,Ng).call(this)}},rn=new WeakMap,je=new WeakMap,qc=new WeakMap,Yt=new WeakMap,zi=new WeakMap,_a=new WeakMap,Ls=new WeakMap,fr=new WeakMap,Hc=new WeakMap,Ea=new WeakMap,Sa=new WeakMap,Bi=new WeakMap,qi=new WeakMap,Vs=new WeakMap,Ta=new WeakMap,Fe=new WeakSet,Ml=function(e){Te(this,Fe,Rg).call(this);let n=O(this,je).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Cn)),n},Tg=function(){Te(this,Fe,Ig).call(this);const e=na(this.options.staleTime,O(this,je));if(eo||O(this,Yt).isStale||!wg(e))return;const r=Ub(O(this,Yt).dataUpdatedAt,e)+1;te(this,Bi,setTimeout(()=>{O(this,Yt).isStale||this.updateResult()},r))},bg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,je)):this.options.refetchInterval)??!1},Cg=function(e){Te(this,Fe,Pg).call(this),te(this,Vs,e),!(eo||Gn(this.options.enabled,O(this,je))===!1||!wg(O(this,Vs))||O(this,Vs)===0)&&te(this,qi,setInterval(()=>{(this.options.refetchIntervalInBackground||Nv.isFocused())&&Te(this,Fe,Ml).call(this)},O(this,Vs)))},Ng=function(){Te(this,Fe,Tg).call(this),Te(this,Fe,Cg).call(this,Te(this,Fe,bg).call(this))},Ig=function(){O(this,Bi)&&(clearTimeout(O(this,Bi)),te(this,Bi,void 0))},Pg=function(){O(this,qi)&&(clearInterval(O(this,qi)),te(this,qi,void 0))},Rg=function(){const e=O(this,rn).getQueryCache().build(O(this,rn),this.options);if(e===O(this,je))return;const n=O(this,je);te(this,je,e),te(this,qc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Qb=function(e){gt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(O(this,Yt))}),O(this,rn).getQueryCache().notify({query:O(this,je),type:"observerResultsUpdated"})})},hS);function AO(t,e){return Gn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function M_(t,e){return AO(t,e)||t.state.data!==void 0&&Ag(t,e,e.refetchOnMount)}function Ag(t,e,n){if(Gn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Iv(t,e)}return!1}function L_(t,e,n,r){return(t!==e||Gn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Iv(t,n)}function Iv(t,e){return Gn(e.enabled,t)!==!1&&t.isStaleByTime(na(e.staleTime,t))}function jO(t,e){return!Eh(t.getCurrentResult(),e)}var Fs,Us,sn,zr,Zr,Nd,jg,fS,kO=(fS=class extends Ga{constructor(n,r){super();pe(this,Zr);pe(this,Fs);pe(this,Us);pe(this,sn);pe(this,zr);te(this,Fs,n),this.setOptions(r),this.bindMethods(),Te(this,Zr,Nd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=O(this,Fs).defaultMutationOptions(n),Eh(this.options,r)||O(this,Fs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,sn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&to(r.mutationKey)!==to(this.options.mutationKey)?this.reset():((s=O(this,sn))==null?void 0:s.state.status)==="pending"&&O(this,sn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=O(this,sn))==null||n.removeObserver(this)}onMutationUpdate(n){Te(this,Zr,Nd).call(this),Te(this,Zr,jg).call(this,n)}getCurrentResult(){return O(this,Us)}reset(){var n;(n=O(this,sn))==null||n.removeObserver(this),te(this,sn,void 0),Te(this,Zr,Nd).call(this),Te(this,Zr,jg).call(this)}mutate(n,r){var s;return te(this,zr,r),(s=O(this,sn))==null||s.removeObserver(this),te(this,sn,O(this,Fs).getMutationCache().build(O(this,Fs),this.options)),O(this,sn).addObserver(this),O(this,sn).execute(n)}},Fs=new WeakMap,Us=new WeakMap,sn=new WeakMap,zr=new WeakMap,Zr=new WeakSet,Nd=function(){var r;const n=((r=O(this,sn))==null?void 0:r.state)??Kb();te(this,Us,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},jg=function(n){gt.batch(()=>{var r,s,i,a,l,c,d,h;if(O(this,zr)&&this.hasListeners()){const f=O(this,Us).variables,m=O(this,Us).context;(n==null?void 0:n.type)==="success"?((s=(r=O(this,zr)).onSuccess)==null||s.call(r,n.data,f,m),(a=(i=O(this,zr)).onSettled)==null||a.call(i,n.data,null,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=O(this,zr)).onError)==null||c.call(l,n.error,f,m),(h=(d=O(this,zr)).onSettled)==null||h.call(d,void 0,n.error,f,m))}this.listeners.forEach(f=>{f(O(this,Us))})})},fS),Yb=g.createContext(void 0),Pv=t=>{const e=g.useContext(Yb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},DO=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(Yb.Provider,{value:t,children:e})),Xb=g.createContext(!1),OO=()=>g.useContext(Xb);Xb.Provider;function MO(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var LO=g.createContext(MO()),VO=()=>g.useContext(LO);function Jb(t,e){return typeof t=="function"?t(...e):!!t}function kg(){}var FO=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},UO=t=>{g.useEffect(()=>{t.clearReset()},[t])},$O=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&Jb(n,[t.error,r]),zO=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},BO=(t,e)=>t.isLoading&&t.isFetching&&!e,qO=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,V_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function HO(t,e,n){var h,f,m,x,b;const r=Pv(),s=OO(),i=VO(),a=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",zO(a),FO(a,i),UO(i);const l=!r.getQueryCache().get(a.queryHash),[c]=g.useState(()=>new e(r,a)),d=c.getOptimisticResult(a);if(g.useSyncExternalStore(g.useCallback(v=>{const y=s?kg:c.subscribe(gt.batchCalls(v));return c.updateResult(),y},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),qO(a,d))throw V_(a,c,i);if($O({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw d.error;if((x=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,a,d),a.experimental_prefetchInRender&&!eo&&BO(d,s)){const v=l?V_(a,c,i):(b=r.getQueryCache().get(a.queryHash))==null?void 0:b.promise;v==null||v.catch(kg).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?d:c.trackResult(d)}function $t(t,e){return HO(t,RO)}function Wo(t,e){const n=Pv(),[r]=g.useState(()=>new kO(n,t));g.useEffect(()=>{r.setOptions(t)},[r,t]);const s=g.useSyncExternalStore(g.useCallback(a=>r.subscribe(gt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((a,l)=>{r.mutate(a,l).catch(kg)},[r]);if(s.error&&Jb(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function Zb(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Ge(t,e,n){const r=localStorage.getItem("token"),s={};n&&(s["Content-Type"]="application/json"),r&&(s.Authorization=`Bearer ${r}`);const i=await fetch(e,{method:t,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include"});return await Zb(i),i}const GO=({on401:t})=>async({queryKey:e})=>{const n=localStorage.getItem("token"),r={};n&&(r.Authorization=`Bearer ${n}`);const s=await fetch(e.join("/"),{headers:r,credentials:"include"});return t==="returnNull"&&s.status===401?null:(await Zb(s),await s.json())},ze=new PO({defaultOptions:{queries:{queryFn:GO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),WO=1,KO=1e6,QO=4e3;let Ym=0;function YO(){return Ym=(Ym+1)%Number.MAX_SAFE_INTEGER,Ym.toString()}const Xm=new Map,F_=(t,e)=>{if(Xm.has(t))return;const n=setTimeout(()=>{Xm.delete(t),tc({type:"REMOVE_TOAST",toastId:t})},KO);Xm.set(t,n)},XO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,WO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?F_(n):t.toasts.forEach(r=>{F_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Id=[];let Pd={toasts:[]};function tc(t){Pd=XO(Pd,t),Id.forEach(e=>{e(Pd)})}function JO({...t}){const e=YO(),n=i=>tc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>tc({type:"DISMISS_TOAST",toastId:e}),s=t.variant==="destructive"?1/0:t.duration!==void 0?t.duration:QO;return tc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,duration:s,onOpenChange:i=>{i||r()}}}),t.variant!=="destructive"&&s!==1/0&&setTimeout(()=>{r()},s),{id:e,dismiss:r,update:n}}function Gt(){const[t,e]=g.useState(Pd);return g.useEffect(()=>(Id.push(e),()=>{const n=Id.indexOf(e);n>-1&&Id.splice(n,1)}),[t]),{...t,toast:JO,dismiss:n=>tc({type:"DISMISS_TOAST",toastId:n})}}function Y(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function U_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function yf(...t){return e=>{let n=!1;const r=t.map(s=>{const i=U_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():U_(t[s],null)}}}}function ke(...t){return g.useCallback(yf(...t),t)}function ZO(t,e){const n=g.createContext(e),r=i=>{const{children:a,...l}=i,c=g.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=g.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Ln(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var _;const{scope:m,children:x,...b}=f,v=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,y=g.useMemo(()=>b,Object.values(b));return o.jsx(v.Provider,{value:y,children:x})};d.displayName=i+"Provider";function h(f,m){var v;const x=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,b=g.useContext(x);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,eM(s,...e)]}function eM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function no(t){const e=nM(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(rM);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var tM=no("Slot");function nM(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=iM(s),l=sM(i,s.props);return s.type!==g.Fragment&&(l.ref=r?yf(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var eC=Symbol("radix.slottable");function tC(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=eC,e}function rM(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===eC}function sM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function iM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vf(t){const e=t+"CollectionProvider",[n,r]=Ln(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:y,children:_}=v,S=lr.useRef(null),C=lr.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:C,collectionRef:S,children:_})};a.displayName=e;const l=t+"CollectionSlot",c=no(l),d=lr.forwardRef((v,y)=>{const{scope:_,children:S}=v,C=i(l,_),R=ke(y,C.collectionRef);return o.jsx(c,{ref:R,children:S})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=no(h),x=lr.forwardRef((v,y)=>{const{scope:_,children:S,...C}=v,R=lr.useRef(null),D=ke(y,R),M=i(h,_);return lr.useEffect(()=>(M.itemMap.set(R,{ref:R,...C}),()=>void M.itemMap.delete(R))),o.jsx(m,{[f]:"",ref:D,children:S})});x.displayName=h;function b(v){const y=i(t+"CollectionConsumer",v);return lr.useCallback(()=>{const S=y.collectionRef.current;if(!S)return[];const C=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((M,T)=>C.indexOf(M.ref.current)-C.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},b,r]}var oM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=oM.reduce((t,e)=>{const n=no(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Rv(t,e){t&&go.flushSync(()=>t.dispatchEvent(e))}function Bt(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function aM(t,e=globalThis==null?void 0:globalThis.document){const n=Bt(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var lM="DismissableLayer",Dg="dismissableLayer.update",cM="dismissableLayer.pointerDownOutside",uM="dismissableLayer.focusOutside",$_,nC=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wa=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(nC),[h,f]=g.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=g.useState({}),b=ke(e,T=>f(T)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(y),S=h?v.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,R=S>=_,D=hM(T=>{const E=T.target,N=[...d.branches].some(P=>P.contains(E));!R||N||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},m),M=fM(T=>{const E=T.target;[...d.branches].some(P=>P.contains(E))||(i==null||i(T),a==null||a(T),T.defaultPrevented||l==null||l())},m);return aM(T=>{S===d.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&($_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),z_(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$_)}},[h,m,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),z_())},[h,d]),g.useEffect(()=>{const T=()=>x({});return document.addEventListener(Dg,T),()=>document.removeEventListener(Dg,T)},[]),o.jsx(we.div,{...c,ref:b,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:Y(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Y(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Y(t.onPointerDownCapture,D.onPointerDownCapture)})});Wa.displayName=lM;var dM="DismissableLayerBranch",rC=g.forwardRef((t,e)=>{const n=g.useContext(nC),r=g.useRef(null),s=ke(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(we.div,{...t,ref:s})});rC.displayName=dM;function hM(t,e=globalThis==null?void 0:globalThis.document){const n=Bt(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){sC(cM,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function fM(t,e=globalThis==null?void 0:globalThis.document){const n=Bt(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&sC(uM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function z_(){const t=new CustomEvent(Dg);document.dispatchEvent(t)}function sC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Rv(s,i):s.dispatchEvent(i)}var mM=Wa,pM=rC,qt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},gM="Portal",Jc=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);qt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?VD.createPortal(o.jsx(we.div,{...r,ref:e}),a):null});Jc.displayName=gM;function yM(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var sr=t=>{const{present:e,children:n}=t,r=vM(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ke(r.ref,xM(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};sr.displayName="Presence";function vM(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=yM(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=ed(r.current);i.current=l==="mounted"?d:"none"},[l]),qt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,x=ed(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),qt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=x=>{const v=ed(r.current).includes(x.animationName);if(x.target===e&&v&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},m=x=>{x.target===e&&(i.current=ed(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function ed(t){return(t==null?void 0:t.animationName)||"none"}function xM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function oi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=wM({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=Bt(n),c=g.useCallback(d=>{if(i){const f=typeof d=="function"?d(t):d;f!==t&&l(f)}else s(d)},[i,t,s,l]);return[a,c]}function wM({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),i=Bt(e);return g.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var _M="VisuallyHidden",Zc=g.forwardRef((t,e)=>o.jsx(we.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Zc.displayName=_M;var EM=Zc,Av="ToastProvider",[jv,SM,TM]=vf("Toast"),[iC,hq]=Ln("Toast",[TM]),[bM,xf]=iC(Av),oC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=g.useState(null),[d,h]=g.useState(0),f=g.useRef(!1),m=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Av}\`. Expected non-empty \`string\`.`),o.jsx(jv.Provider,{scope:e,children:o.jsx(bM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>h(x=>x+1),[]),onToastRemove:g.useCallback(()=>h(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};oC.displayName=Av;var aC="ToastViewport",CM=["F8"],Og="toast.viewportPause",Mg="toast.viewportResume",lC=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=CM,label:s="Notifications ({hotkey})",...i}=t,a=xf(aC,n),l=SM(n),c=g.useRef(null),d=g.useRef(null),h=g.useRef(null),f=g.useRef(null),m=ke(e,f,a.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=a.toastCount>0;g.useEffect(()=>{const y=_=>{var C;r.length!==0&&r.every(R=>_[R]||_.code===R)&&((C=f.current)==null||C.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),g.useEffect(()=>{const y=c.current,_=f.current;if(b&&y&&_){const S=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Og);_.dispatchEvent(M),a.isClosePausedRef.current=!0}},C=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Mg);_.dispatchEvent(M),a.isClosePausedRef.current=!1}},R=M=>{!y.contains(M.relatedTarget)&&C()},D=()=>{y.contains(document.activeElement)||C()};return y.addEventListener("focusin",S),y.addEventListener("focusout",R),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",D),window.addEventListener("blur",S),window.addEventListener("focus",C),()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",R),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",D),window.removeEventListener("blur",S),window.removeEventListener("focus",C)}}},[b,a.isClosePausedRef]);const v=g.useCallback(({tabbingDirection:y})=>{const S=l().map(C=>{const R=C.ref.current,D=[R,...FM(R)];return y==="forwards"?D:D.reverse()});return(y==="forwards"?S.reverse():S).flat()},[l]);return g.useEffect(()=>{const y=f.current;if(y){const _=S=>{var D,M,T;const C=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!C){const E=document.activeElement,N=S.shiftKey;if(S.target===y&&N){(D=d.current)==null||D.focus();return}const j=v({tabbingDirection:N?"backwards":"forwards"}),A=j.findIndex(H=>H===E);Jm(j.slice(A+1))?S.preventDefault():N?(M=d.current)==null||M.focus():(T=h.current)==null||T.focus()}};return y.addEventListener("keydown",_),()=>y.removeEventListener("keydown",_)}},[l,v]),o.jsxs(pM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&o.jsx(Lg,{ref:d,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});Jm(y)}}),o.jsx(jv.Slot,{scope:n,children:o.jsx(we.ol,{tabIndex:-1,...i,ref:m})}),b&&o.jsx(Lg,{ref:h,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});Jm(y)}})]})});lC.displayName=aC;var cC="ToastFocusProxy",Lg=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=xf(cC,n);return o.jsx(Zc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Lg.displayName=cC;var wf="Toast",NM="toast.swipeStart",IM="toast.swipeMove",PM="toast.swipeCancel",RM="toast.swipeEnd",uC=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=oi({prop:r,defaultProp:s,onChange:i});return o.jsx(sr,{present:n||l,children:o.jsx(kM,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Bt(t.onPause),onResume:Bt(t.onResume),onSwipeStart:Y(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Y(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});uC.displayName=wf;var[AM,jM]=iC(wf,{onClose(){}}),kM=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:x,...b}=t,v=xf(wf,n),[y,_]=g.useState(null),S=ke(e,H=>_(H)),C=g.useRef(null),R=g.useRef(null),D=s||v.duration,M=g.useRef(0),T=g.useRef(D),E=g.useRef(0),{onToastAdd:N,onToastRemove:P}=v,k=Bt(()=>{var ce;(y==null?void 0:y.contains(document.activeElement))&&((ce=v.viewport)==null||ce.focus()),a()}),j=g.useCallback(H=>{!H||H===1/0||(window.clearTimeout(E.current),M.current=new Date().getTime(),E.current=window.setTimeout(k,H))},[k]);g.useEffect(()=>{const H=v.viewport;if(H){const ce=()=>{j(T.current),d==null||d()},J=()=>{const oe=new Date().getTime()-M.current;T.current=T.current-oe,window.clearTimeout(E.current),c==null||c()};return H.addEventListener(Og,J),H.addEventListener(Mg,ce),()=>{H.removeEventListener(Og,J),H.removeEventListener(Mg,ce)}}},[v.viewport,D,c,d,j]),g.useEffect(()=>{i&&!v.isClosePausedRef.current&&j(D)},[i,D,v.isClosePausedRef,j]),g.useEffect(()=>(N(),()=>P()),[N,P]);const A=g.useMemo(()=>y?yC(y):null,[y]);return v.viewport?o.jsxs(o.Fragment,{children:[A&&o.jsx(DM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),o.jsx(AM,{scope:n,onClose:k,children:go.createPortal(o.jsx(jv.ItemSlot,{scope:n,children:o.jsx(mM,{asChild:!0,onEscapeKeyDown:Y(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||k(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Y(t.onKeyDown,H=>{H.key==="Escape"&&(l==null||l(H.nativeEvent),H.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:Y(t.onPointerDown,H=>{H.button===0&&(C.current={x:H.clientX,y:H.clientY})}),onPointerMove:Y(t.onPointerMove,H=>{if(!C.current)return;const ce=H.clientX-C.current.x,J=H.clientY-C.current.y,oe=!!R.current,V=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,Q=V?$(0,ce):0,U=V?0:$(0,J),X=H.pointerType==="touch"?10:2,de={x:Q,y:U},be={originalEvent:H,delta:de};oe?(R.current=de,td(IM,f,be,{discrete:!1})):B_(de,v.swipeDirection,X)?(R.current=de,td(NM,h,be,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ce)>X||Math.abs(J)>X)&&(C.current=null)}),onPointerUp:Y(t.onPointerUp,H=>{const ce=R.current,J=H.target;if(J.hasPointerCapture(H.pointerId)&&J.releasePointerCapture(H.pointerId),R.current=null,C.current=null,ce){const oe=H.currentTarget,V={originalEvent:H,delta:ce};B_(ce,v.swipeDirection,v.swipeThreshold)?td(RM,x,V,{discrete:!0}):td(PM,m,V,{discrete:!0}),oe.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),DM=t=>{const{__scopeToast:e,children:n,...r}=t,s=xf(wf,e),[i,a]=g.useState(!1),[l,c]=g.useState(!1);return LM(()=>a(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(Jc,{asChild:!0,children:o.jsx(Zc,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},OM="ToastTitle",dC=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});dC.displayName=OM;var MM="ToastDescription",hC=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});hC.displayName=MM;var fC="ToastAction",mC=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(gC,{altText:n,asChild:!0,children:o.jsx(kv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${fC}\`. Expected non-empty \`string\`.`),null)});mC.displayName=fC;var pC="ToastClose",kv=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=jM(pC,n);return o.jsx(gC,{asChild:!0,children:o.jsx(we.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,s.onClose)})})});kv.displayName=pC;var gC=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function yC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),VM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...yC(r))}}),e}function td(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Rv(s,i):s.dispatchEvent(i)}var B_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function LM(t=()=>{}){const e=Bt(t);qt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function VM(t){return t.nodeType===t.ELEMENT_NODE}function FM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var UM=oC,vC=lC,xC=uC,wC=dC,_C=hC,EC=mC,SC=kv;function TC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=TC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=TC(t))&&(r&&(r+=" "),r+=e);return r}const q_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,H_=bC,eu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return H_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=q_(h)||q_(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...x}=h;return Object.entries(x).every(b=>{let[v,y]=b;return Array.isArray(y)?y.includes({...i,...l}[v]):{...i,...l}[v]===y})?[...d,f,m]:d},[]);return H_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...zM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:CC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(BM,{ref:i,iconNode:e,className:CC(`lucide-${$M(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=Ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=Ee("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=Ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=Ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Ee("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=Ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=Ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=Ee("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=Ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=Ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=Ee("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=Ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Ee("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=Ee("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Ov="-",o4=t=>{const e=l4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Ov);return l[0]===""&&l.length!==1&&l.shift(),jC(l,e)||a4(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},jC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?jC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ov);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Z_=/^\[(.+)\]$/,a4=t=>{if(Z_.test(t)){const e=Z_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},l4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return u4(Object.entries(t.classGroups),n).forEach(([i,a])=>{zg(a,r,i,e)}),r},zg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:eE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(c4(s)){zg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{zg(a,eE(e,i),n,r)})})},eE=(t,e)=>{let n=t;return e.split(Ov).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},c4=t=>t.isThemeGetter,u4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,d4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},kC="!",h4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let y=0;y<l.length;y++){let _=l[y];if(d===0){if(_===s&&(r||l.slice(y,y+i)===e)){c.push(l.slice(h,y)),h=y+i;continue}if(_==="/"){f=y;continue}}_==="["?d++:_==="]"&&d--}const m=c.length===0?l:l.substring(h),x=m.startsWith(kC),b=x?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},f4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},m4=t=>({cache:d4(t.cacheSize),parseClassName:h4(t),...o4(t)}),p4=/\s+/,g4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(p4);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:x}=n(d);let b=!!x,v=r(b?m.substring(0,x):m);if(!v){if(!b){l=d+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=d+(l.length>0?" "+l:l);continue}b=!1}const y=f4(h).join(":"),_=f?y+kC:y,S=_+v;if(i.includes(S))continue;i.push(S);const C=s(v,b);for(let R=0;R<C.length;++R){const D=C[R];i.push(_+D)}l=d+(l.length>0?" "+l:l)}return l};function y4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=DC(e))&&(r&&(r+=" "),r+=n);return r}const DC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=DC(t[r]))&&(n&&(n+=" "),n+=e);return n};function v4(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=m4(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=g4(c,n);return s(c,h),h}return function(){return i(y4.apply(null,arguments))}}const Ye=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},OC=/^\[(?:([a-z-]+):)?(.+)\]$/i,x4=/^\d+\/\d+$/,w4=new Set(["px","full","screen"]),_4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,T4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,b4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lr=t=>ra(t)||w4.has(t)||x4.test(t),ws=t=>Ka(t,"length",k4),ra=t=>!!t&&!Number.isNaN(Number(t)),tp=t=>Ka(t,"number",ra),Il=t=>!!t&&Number.isInteger(Number(t)),C4=t=>t.endsWith("%")&&ra(t.slice(0,-1)),Se=t=>OC.test(t),_s=t=>_4.test(t),N4=new Set(["length","size","percentage"]),I4=t=>Ka(t,N4,MC),P4=t=>Ka(t,"position",MC),R4=new Set(["image","url"]),A4=t=>Ka(t,R4,O4),j4=t=>Ka(t,"",D4),Pl=()=>!0,Ka=(t,e,n)=>{const r=OC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},k4=t=>E4.test(t)&&!S4.test(t),MC=()=>!1,D4=t=>T4.test(t),O4=t=>b4.test(t),M4=()=>{const t=Ye("colors"),e=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),s=Ye("borderColor"),i=Ye("borderRadius"),a=Ye("borderSpacing"),l=Ye("borderWidth"),c=Ye("contrast"),d=Ye("grayscale"),h=Ye("hueRotate"),f=Ye("invert"),m=Ye("gap"),x=Ye("gradientColorStops"),b=Ye("gradientColorStopPositions"),v=Ye("inset"),y=Ye("margin"),_=Ye("opacity"),S=Ye("padding"),C=Ye("saturate"),R=Ye("scale"),D=Ye("sepia"),M=Ye("skew"),T=Ye("space"),E=Ye("translate"),N=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Se,e],j=()=>[Se,e],A=()=>["",Lr,ws],H=()=>["auto",ra,Se],ce=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Se],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[ra,Se];return{cacheSize:500,separator:":",theme:{colors:[Pl],spacing:[Lr,ws],blur:["none","",_s,Se],brightness:U(),borderColor:[t],borderRadius:["none","","full",_s,Se],borderSpacing:j(),borderWidth:A(),contrast:U(),grayscale:$(),hueRotate:U(),invert:$(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[C4,ws],inset:k(),margin:k(),opacity:U(),padding:j(),saturate:U(),scale:U(),sepia:$(),skew:U(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[_s]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ce(),Se]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Il,Se]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Il,Se]}],"grid-cols":[{"grid-cols":[Pl]}],"col-start-end":[{col:["auto",{span:["full",Il,Se]},Se]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Pl]}],"row-start-end":[{row:["auto",{span:[Il,Se]},Se]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[_s]},_s]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_s,ws]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tp]}],"font-family":[{font:[Pl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",ra,tp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lr,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr,ws]}],"underline-offset":[{"underline-offset":["auto",Lr,Se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ce(),P4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",I4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},A4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Lr,Se]}],"outline-w":[{outline:[Lr,ws]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Lr,ws]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",_s,j4]}],"shadow-color":[{shadow:[Pl]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",_s,Se]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Il,Se]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Lr,ws,tp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L4=v4(M4);function me(...t){return L4(bC(t))}const V4=UM,LC=g.forwardRef(({className:t,...e},n)=>o.jsx(vC,{ref:n,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));LC.displayName=vC.displayName;const F4=eu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),VC=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(xC,{ref:r,className:me(F4({variant:e}),t),...n}));VC.displayName=xC.displayName;const U4=g.forwardRef(({className:t,...e},n)=>o.jsx(EC,{ref:n,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));U4.displayName=EC.displayName;const FC=g.forwardRef(({className:t,...e},n)=>o.jsx(SC,{ref:n,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(nu,{className:"h-4 w-4"})}));FC.displayName=SC.displayName;const UC=g.forwardRef(({className:t,...e},n)=>o.jsx(wC,{ref:n,className:me("text-sm font-semibold",t),...e}));UC.displayName=wC.displayName;const $C=g.forwardRef(({className:t,...e},n)=>o.jsx(_C,{ref:n,className:me("text-sm opacity-90",t),...e}));$C.displayName=_C.displayName;function $4(){const{toasts:t}=Gt();return o.jsxs(V4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(VC,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(UC,{children:n}),r&&o.jsx($C,{children:r})]}),s,o.jsx(FC,{})]},e)}),o.jsx(LC,{})]})}var z4=bS[" useId ".trim().toString()]||(()=>{}),B4=0;function Yr(t){const[e,n]=g.useState(z4());return qt(()=>{n(r=>r??String(B4++))},[t]),e?`radix-${e}`:""}const q4=["top","right","bottom","left"],ai=Math.min,gn=Math.max,Ch=Math.round,nd=Math.floor,Sr=t=>({x:t,y:t}),H4={left:"right",right:"left",bottom:"top",top:"bottom"},G4={start:"end",end:"start"};function Bg(t,e,n){return gn(t,ai(e,n))}function ss(t,e){return typeof t=="function"?t(e):t}function is(t){return t.split("-")[0]}function Qa(t){return t.split("-")[1]}function Mv(t){return t==="x"?"y":"x"}function Lv(t){return t==="y"?"height":"width"}function li(t){return["top","bottom"].includes(is(t))?"y":"x"}function Vv(t){return Mv(li(t))}function W4(t,e,n){n===void 0&&(n=!1);const r=Qa(t),s=Vv(t),i=Lv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Nh(a)),[a,Nh(a)]}function K4(t){const e=Nh(t);return[qg(t),e,qg(e)]}function qg(t){return t.replace(/start|end/g,e=>G4[e])}function Q4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function Y4(t,e,n,r){const s=Qa(t);let i=Q4(is(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(qg)))),i}function Nh(t){return t.replace(/left|right|bottom|top/g,e=>H4[e])}function X4(t){return{top:0,right:0,bottom:0,left:0,...t}}function zC(t){return typeof t!="number"?X4(t):{top:t,right:t,bottom:t,left:t}}function Ih(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function tE(t,e,n){let{reference:r,floating:s}=t;const i=li(e),a=Vv(e),l=Lv(a),c=is(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:h,y:r.y-s.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-s.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Qa(e)){case"start":x[a]-=m*(n&&d?-1:1);break;case"end":x[a]+=m*(n&&d?-1:1);break}return x}const J4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=tE(d,r,c),m=r,x={},b=0;for(let v=0;v<l.length;v++){const{name:y,fn:_}=l[v],{x:S,y:C,data:R,reset:D}=await _({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});h=S??h,f=C??f,x={...x,[y]:{...x[y],...R}},D&&b<=50&&(b++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(d=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=tE(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:x}};async function Cc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:x=0}=ss(e,t),b=zC(x),y=l[m?f==="floating"?"reference":"floating":f],_=Ih(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),S=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},D=Ih(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:C,strategy:c}):S);return{top:(_.top-D.top+b.top)/R.y,bottom:(D.bottom-_.bottom+b.bottom)/R.y,left:(_.left-D.left+b.left)/R.x,right:(D.right-_.right+b.right)/R.x}}const Z4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=ss(t,e)||{};if(d==null)return{};const f=zC(h),m={x:n,y:r},x=Vv(s),b=Lv(x),v=await a.getDimensions(d),y=x==="y",_=y?"top":"left",S=y?"bottom":"right",C=y?"clientHeight":"clientWidth",R=i.reference[b]+i.reference[x]-m[x]-i.floating[b],D=m[x]-i.reference[x],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let T=M?M[C]:0;(!T||!await(a.isElement==null?void 0:a.isElement(M)))&&(T=l.floating[C]||i.floating[b]);const E=R/2-D/2,N=T/2-v[b]/2-1,P=ai(f[_],N),k=ai(f[S],N),j=P,A=T-v[b]-k,H=T/2-v[b]/2+E,ce=Bg(j,H,A),J=!c.arrow&&Qa(s)!=null&&H!==ce&&i.reference[b]/2-(H<j?P:k)-v[b]/2<0,oe=J?H<j?H-j:H-A:0;return{[x]:m[x]+oe,data:{[x]:ce,centerOffset:H-ce-oe,...J&&{alignmentOffset:oe}},reset:J}}}),eL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...y}=ss(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=is(s),S=li(l),C=is(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),D=m||(C||!v?[Nh(l)]:K4(l)),M=b!=="none";!m&&M&&D.push(...Y4(l,v,b,R));const T=[l,...D],E=await Cc(e,y),N=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&N.push(E[_]),f){const H=W4(s,a,R);N.push(E[H[0]],E[H[1]])}if(P=[...P,{placement:s,overflows:N}],!N.every(H=>H<=0)){var k,j;const H=(((k=i.flip)==null?void 0:k.index)||0)+1,ce=T[H];if(ce)return{data:{index:H,overflows:P},reset:{placement:ce}};let J=(j=P.filter(oe=>oe.overflows[0]<=0).sort((oe,V)=>oe.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!J)switch(x){case"bestFit":{var A;const oe=(A=P.filter(V=>{if(M){const $=li(V.placement);return $===S||$==="y"}return!0}).map(V=>[V.placement,V.overflows.filter($=>$>0).reduce(($,Q)=>$+Q,0)]).sort((V,$)=>V[1]-$[1])[0])==null?void 0:A[0];oe&&(J=oe);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function nE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rE(t){return q4.some(e=>t[e]>=0)}const tL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ss(t,e);switch(r){case"referenceHidden":{const i=await Cc(e,{...s,elementContext:"reference"}),a=nE(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rE(a)}}}case"escaped":{const i=await Cc(e,{...s,altBoundary:!0}),a=nE(i,n.floating);return{data:{escapedOffsets:a,escaped:rE(a)}}}default:return{}}}}};async function nL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=is(n),l=Qa(n),c=li(n)==="y",d=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,f=ss(e,t);let{mainAxis:m,crossAxis:x,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(x=l==="end"?b*-1:b),c?{x:x*h,y:m*d}:{x:m*d,y:x*h}}const rL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await nL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},sL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:_,y:S}=y;return{x:_,y:S}}},...c}=ss(t,e),d={x:n,y:r},h=await Cc(e,c),f=li(is(s)),m=Mv(f);let x=d[m],b=d[f];if(i){const y=m==="y"?"top":"left",_=m==="y"?"bottom":"right",S=x+h[y],C=x-h[_];x=Bg(S,x,C)}if(a){const y=f==="y"?"top":"left",_=f==="y"?"bottom":"right",S=b+h[y],C=b-h[_];b=Bg(S,b,C)}const v=l.fn({...e,[m]:x,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:a}}}}}},iL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ss(t,e),h={x:n,y:r},f=li(s),m=Mv(f);let x=h[m],b=h[f];const v=ss(l,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const C=m==="y"?"height":"width",R=i.reference[m]-i.floating[C]+y.mainAxis,D=i.reference[m]+i.reference[C]-y.mainAxis;x<R?x=R:x>D&&(x=D)}if(d){var _,S;const C=m==="y"?"width":"height",R=["top","left"].includes(is(s)),D=i.reference[f]-i.floating[C]+(R&&((_=a.offset)==null?void 0:_[f])||0)+(R?0:y.crossAxis),M=i.reference[f]+i.reference[C]+(R?0:((S=a.offset)==null?void 0:S[f])||0)-(R?y.crossAxis:0);b<D?b=D:b>M&&(b=M)}return{[m]:x,[f]:b}}}},oL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=ss(t,e),h=await Cc(e,d),f=is(s),m=Qa(s),x=li(s)==="y",{width:b,height:v}=i.floating;let y,_;f==="top"||f==="bottom"?(y=f,_=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,y=m==="end"?"top":"bottom");const S=v-h.top-h.bottom,C=b-h.left-h.right,R=ai(v-h[y],S),D=ai(b-h[_],C),M=!e.middlewareData.shift;let T=R,E=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=S),M&&!m){const P=gn(h.left,0),k=gn(h.right,0),j=gn(h.top,0),A=gn(h.bottom,0);x?E=b-2*(P!==0||k!==0?P+k:gn(h.left,h.right)):T=v-2*(j!==0||A!==0?j+A:gn(h.top,h.bottom))}await c({...e,availableWidth:E,availableHeight:T});const N=await a.getDimensions(l.floating);return b!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function _f(){return typeof window<"u"}function Ya(t){return BC(t)?(t.nodeName||"").toLowerCase():"#document"}function _n(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function kr(t){var e;return(e=(BC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BC(t){return _f()?t instanceof Node||t instanceof _n(t).Node:!1}function tr(t){return _f()?t instanceof Element||t instanceof _n(t).Element:!1}function Ar(t){return _f()?t instanceof HTMLElement||t instanceof _n(t).HTMLElement:!1}function sE(t){return!_f()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _n(t).ShadowRoot}function ru(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=nr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function aL(t){return["table","td","th"].includes(Ya(t))}function Ef(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Fv(t){const e=Uv(),n=tr(t)?nr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lL(t){let e=ci(t);for(;Ar(e)&&!ka(e);){if(Fv(e))return e;if(Ef(e))return null;e=ci(e)}return null}function Uv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ka(t){return["html","body","#document"].includes(Ya(t))}function nr(t){return _n(t).getComputedStyle(t)}function Sf(t){return tr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ci(t){if(Ya(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sE(t)&&t.host||kr(t);return sE(e)?e.host:e}function qC(t){const e=ci(t);return ka(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ar(e)&&ru(e)?e:qC(e)}function Nc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=qC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=_n(s);if(i){const l=Hg(a);return e.concat(a,a.visualViewport||[],ru(s)?s:[],l&&n?Nc(l):[])}return e.concat(s,Nc(s,[],n))}function Hg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function HC(t){const e=nr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ar(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Ch(n)!==i||Ch(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function $v(t){return tr(t)?t:t.contextElement}function sa(t){const e=$v(t);if(!Ar(e))return Sr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=HC(e);let a=(i?Ch(n.width):n.width)/r,l=(i?Ch(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const cL=Sr(0);function GC(t){const e=_n(t);return!Uv()||!e.visualViewport?cL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==_n(t)?!1:e}function so(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=$v(t);let a=Sr(1);e&&(r?tr(r)&&(a=sa(r)):a=sa(t));const l=uL(i,n,r)?GC(i):Sr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=_n(i),x=r&&tr(r)?_n(r):r;let b=m,v=Hg(b);for(;v&&r&&x!==b;){const y=sa(v),_=v.getBoundingClientRect(),S=nr(v),C=_.left+(v.clientLeft+parseFloat(S.paddingLeft))*y.x,R=_.top+(v.clientTop+parseFloat(S.paddingTop))*y.y;c*=y.x,d*=y.y,h*=y.x,f*=y.y,c+=C,d+=R,b=_n(v),v=Hg(b)}}return Ih({width:h,height:f,x:c,y:d})}function zv(t,e){const n=Sf(t).scrollLeft;return e?e.left+n:so(kr(t)).left+n}function WC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:zv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function dL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=kr(r),l=e?Ef(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Sr(1);const h=Sr(0),f=Ar(r);if((f||!f&&!i)&&((Ya(r)!=="body"||ru(a))&&(c=Sf(r)),Ar(r))){const x=so(r);d=sa(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const m=a&&!f&&!i?WC(a,c,!0):Sr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function hL(t){return Array.from(t.getClientRects())}function fL(t){const e=kr(t),n=Sf(t),r=t.ownerDocument.body,s=gn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=gn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+zv(t);const l=-n.scrollTop;return nr(r).direction==="rtl"&&(a+=gn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function mL(t,e){const n=_n(t),r=kr(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const d=Uv();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function pL(t,e){const n=so(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ar(t)?sa(t):Sr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function iE(t,e,n){let r;if(e==="viewport")r=mL(t,n);else if(e==="document")r=fL(kr(t));else if(tr(e))r=pL(e,n);else{const s=GC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ih(r)}function KC(t,e){const n=ci(t);return n===e||!tr(n)||ka(n)?!1:nr(n).position==="fixed"||KC(n,e)}function gL(t,e){const n=e.get(t);if(n)return n;let r=Nc(t,[],!1).filter(l=>tr(l)&&Ya(l)!=="body"),s=null;const i=nr(t).position==="fixed";let a=i?ci(t):t;for(;tr(a)&&!ka(a);){const l=nr(a),c=Fv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ru(a)&&!c&&KC(t,a))?r=r.filter(h=>h!==a):s=l,a=ci(a)}return e.set(t,r),r}function yL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Ef(e)?[]:gL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=iE(e,h,s);return d.top=gn(f.top,d.top),d.right=ai(f.right,d.right),d.bottom=ai(f.bottom,d.bottom),d.left=gn(f.left,d.left),d},iE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vL(t){const{width:e,height:n}=HC(t);return{width:e,height:n}}function xL(t,e,n){const r=Ar(e),s=kr(e),i=n==="fixed",a=so(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Sr(0);if(r||!r&&!i)if((Ya(e)!=="body"||ru(s))&&(l=Sf(e)),r){const m=so(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=zv(s));const d=s&&!r&&!i?WC(s,l):Sr(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function np(t){return nr(t).position==="static"}function oE(t,e){if(!Ar(t)||nr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return kr(t)===n&&(n=n.ownerDocument.body),n}function QC(t,e){const n=_n(t);if(Ef(t))return n;if(!Ar(t)){let s=ci(t);for(;s&&!ka(s);){if(tr(s)&&!np(s))return s;s=ci(s)}return n}let r=oE(t,e);for(;r&&aL(r)&&np(r);)r=oE(r,e);return r&&ka(r)&&np(r)&&!Fv(r)?n:r||lL(t)||n}const wL=async function(t){const e=this.getOffsetParent||QC,n=this.getDimensions,r=await n(t.floating);return{reference:xL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _L(t){return nr(t).direction==="rtl"}const EL={convertOffsetParentRelativeRectToViewportRelativeRect:dL,getDocumentElement:kr,getClippingRect:yL,getOffsetParent:QC,getElementRects:wL,getClientRects:hL,getDimensions:vL,getScale:sa,isElement:tr,isRTL:_L};function YC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function SL(t,e){let n=null,r;const s=kr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:x}=d;if(l||e(),!m||!x)return;const b=nd(f),v=nd(s.clientWidth-(h+m)),y=nd(s.clientHeight-(f+x)),_=nd(h),C={rootMargin:-b+"px "+-v+"px "+-y+"px "+-_+"px",threshold:gn(0,ai(1,c))||1};let R=!0;function D(M){const T=M[0].intersectionRatio;if(T!==c){if(!R)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!YC(d,t.getBoundingClientRect())&&a(),R=!1}try{n=new IntersectionObserver(D,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,C)}n.observe(t)}return a(!0),i}function TL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=$v(t),h=s||i?[...d?Nc(d):[],...Nc(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=d&&l?SL(d,n):null;let m=-1,x=null;a&&(x=new ResizeObserver(_=>{let[S]=_;S&&S.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=x)==null||C.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let b,v=c?so(t):null;c&&y();function y(){const _=so(t);v&&!YC(v,_)&&n(),v=_,b=requestAnimationFrame(y)}return n(),()=>{var _;h.forEach(S=>{s&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),f==null||f(),(_=x)==null||_.disconnect(),x=null,c&&cancelAnimationFrame(b)}}const bL=rL,CL=sL,NL=eL,IL=oL,PL=tL,aE=Z4,RL=iL,AL=(t,e,n)=>{const r=new Map,s={platform:EL,...n},i={...s.platform,_c:r};return J4(t,e,{...s,platform:i})};var Ad=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Ph(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ph(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ph(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function XC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function lE(t,e){const n=XC(t);return Math.round(e*n)/n}function rp(t){const e=g.useRef(t);return Ad(()=>{e.current=t}),e}function jL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,x]=g.useState(r);Ph(m,r)||x(r);const[b,v]=g.useState(null),[y,_]=g.useState(null),S=g.useCallback(V=>{V!==M.current&&(M.current=V,v(V))},[]),C=g.useCallback(V=>{V!==T.current&&(T.current=V,_(V))},[]),R=i||b,D=a||y,M=g.useRef(null),T=g.useRef(null),E=g.useRef(h),N=c!=null,P=rp(c),k=rp(s),j=rp(d),A=g.useCallback(()=>{if(!M.current||!T.current)return;const V={placement:e,strategy:n,middleware:m};k.current&&(V.platform=k.current),AL(M.current,T.current,V).then($=>{const Q={...$,isPositioned:j.current!==!1};H.current&&!Ph(E.current,Q)&&(E.current=Q,go.flushSync(()=>{f(Q)}))})},[m,e,n,k,j]);Ad(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[d]);const H=g.useRef(!1);Ad(()=>(H.current=!0,()=>{H.current=!1}),[]),Ad(()=>{if(R&&(M.current=R),D&&(T.current=D),R&&D){if(P.current)return P.current(R,D,A);A()}},[R,D,A,P,N]);const ce=g.useMemo(()=>({reference:M,floating:T,setReference:S,setFloating:C}),[S,C]),J=g.useMemo(()=>({reference:R,floating:D}),[R,D]),oe=g.useMemo(()=>{const V={position:n,left:0,top:0};if(!J.floating)return V;const $=lE(J.floating,h.x),Q=lE(J.floating,h.y);return l?{...V,transform:"translate("+$+"px, "+Q+"px)",...XC(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Q}},[n,l,J.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:A,refs:ce,elements:J,floatingStyles:oe}),[h,A,ce,J,oe])}const kL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?aE({element:r.current,padding:s}).fn(n):{}:r?aE({element:r,padding:s}).fn(n):{}}}},DL=(t,e)=>({...bL(t),options:[t,e]}),OL=(t,e)=>({...CL(t),options:[t,e]}),ML=(t,e)=>({...RL(t),options:[t,e]}),LL=(t,e)=>({...NL(t),options:[t,e]}),VL=(t,e)=>({...IL(t),options:[t,e]}),FL=(t,e)=>({...PL(t),options:[t,e]}),UL=(t,e)=>({...kL(t),options:[t,e]});var $L="Arrow",JC=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(we.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});JC.displayName=$L;var zL=JC;function Bv(t){const[e,n]=g.useState(void 0);return qt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var qv="Popper",[ZC,Xa]=Ln(qv),[BL,eN]=ZC(qv),tN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(BL,{scope:e,anchor:r,onAnchorChange:s,children:n})};tN.displayName=qv;var nN="PopperAnchor",rN=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=eN(nN,n),a=g.useRef(null),l=ke(e,a);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(we.div,{...s,ref:l})});rN.displayName=nN;var Hv="PopperContent",[qL,HL]=ZC(Hv),sN=g.forwardRef((t,e)=>{var se,B,ee,ue,ve,Le;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:b,...v}=t,y=eN(Hv,n),[_,S]=g.useState(null),C=ke(e,St=>S(St)),[R,D]=g.useState(null),M=Bv(R),T=(M==null?void 0:M.width)??0,E=(M==null?void 0:M.height)??0,N=r+(i!=="center"?"-"+i:""),P=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},k=Array.isArray(d)?d:[d],j=k.length>0,A={padding:P,boundary:k.filter(WL),altBoundary:j},{refs:H,floatingStyles:ce,placement:J,isPositioned:oe,middlewareData:V}=jL({strategy:"fixed",placement:N,whileElementsMounted:(...St)=>TL(...St,{animationFrame:x==="always"}),elements:{reference:y.anchor},middleware:[DL({mainAxis:s+E,alignmentAxis:a}),c&&OL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?ML():void 0,...A}),c&&LL({...A}),VL({...A,apply:({elements:St,rects:nn,availableWidth:Dr,availableHeight:ps})=>{const{width:bi,height:tm}=nn.reference,Ci=St.floating.style;Ci.setProperty("--radix-popper-available-width",`${Dr}px`),Ci.setProperty("--radix-popper-available-height",`${ps}px`),Ci.setProperty("--radix-popper-anchor-width",`${bi}px`),Ci.setProperty("--radix-popper-anchor-height",`${tm}px`)}}),R&&UL({element:R,padding:l}),KL({arrowWidth:T,arrowHeight:E}),m&&FL({strategy:"referenceHidden",...A})]}),[$,Q]=aN(J),U=Bt(b);qt(()=>{oe&&(U==null||U())},[oe,U]);const X=(se=V.arrow)==null?void 0:se.x,de=(B=V.arrow)==null?void 0:B.y,be=((ee=V.arrow)==null?void 0:ee.centerOffset)!==0,[qe,$e]=g.useState();return qt(()=>{_&&$e(window.getComputedStyle(_).zIndex)},[_]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ce,transform:oe?ce.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:qe,"--radix-popper-transform-origin":[(ue=V.transformOrigin)==null?void 0:ue.x,(ve=V.transformOrigin)==null?void 0:ve.y].join(" "),...((Le=V.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(qL,{scope:n,placedSide:$,onArrowChange:D,arrowX:X,arrowY:de,shouldHideArrow:be,children:o.jsx(we.div,{"data-side":$,"data-align":Q,...v,ref:C,style:{...v.style,animation:oe?void 0:"none"}})})})});sN.displayName=Hv;var iN="PopperArrow",GL={top:"bottom",right:"left",bottom:"top",left:"right"},oN=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=HL(iN,r),a=GL[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(zL,{...s,ref:n,style:{...s.style,display:"block"}})})});oN.displayName=iN;function WL(t){return t!==null}var KL=t=>({name:"transformOrigin",options:t,fn(e){var y,_,S;const{placement:n,rects:r,middlewareData:s}=e,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=aN(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,x=(((S=s.arrow)==null?void 0:S.y)??0)+c/2;let b="",v="";return d==="bottom"?(b=a?f:`${m}px`,v=`${-c}px`):d==="top"?(b=a?f:`${m}px`,v=`${r.floating.height+c}px`):d==="right"?(b=`${-c}px`,v=a?f:`${x}px`):d==="left"&&(b=`${r.floating.width+c}px`,v=a?f:`${x}px`),{data:{x:b,y:v}}}});function aN(t){const[e,n="center"]=t.split("-");return[e,n]}var lN=tN,Gv=rN,Wv=sN,Kv=oN,[Tf,fq]=Ln("Tooltip",[Xa]),Qv=Xa(),cN="TooltipProvider",QL=700,cE="tooltip.open",[YL,uN]=Tf(cN),dN=t=>{const{__scopeTooltip:e,delayDuration:n=QL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(YL,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};dN.displayName=cN;var hN="Tooltip",[mq,bf]=Tf(hN),Gg="TooltipTrigger",XL=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=bf(Gg,n),i=uN(Gg,n),a=Qv(n),l=g.useRef(null),c=ke(e,l,s.onTriggerChange),d=g.useRef(!1),h=g.useRef(!1),f=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Gv,{asChild:!0,...a,children:o.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Y(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Y(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Y(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Y(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:Y(t.onBlur,s.onClose),onClick:Y(t.onClick,s.onClose)})})});XL.displayName=Gg;var JL="TooltipPortal",[pq,ZL]=Tf(JL,{forceMount:void 0}),Da="TooltipContent",fN=g.forwardRef((t,e)=>{const n=ZL(Da,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=bf(Da,t.__scopeTooltip);return o.jsx(sr,{present:r||a.open,children:a.disableHoverableContent?o.jsx(mN,{side:s,...i,ref:e}):o.jsx(eV,{side:s,...i,ref:e})})}),eV=g.forwardRef((t,e)=>{const n=bf(Da,t.__scopeTooltip),r=uN(Da,t.__scopeTooltip),s=g.useRef(null),i=ke(e,s),[a,l]=g.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,m=g.useCallback(()=>{l(null),f(!1)},[f]),x=g.useCallback((b,v)=>{const y=b.currentTarget,_={x:b.clientX,y:b.clientY},S=iV(_,y.getBoundingClientRect()),C=oV(_,S),R=aV(v.getBoundingClientRect()),D=cV([...C,...R]);l(D),f(!0)},[f]);return g.useEffect(()=>()=>m(),[m]),g.useEffect(()=>{if(c&&h){const b=y=>x(y,h),v=y=>x(y,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",v)}}},[c,h,x,m]),g.useEffect(()=>{if(a){const b=v=>{const y=v.target,_={x:v.clientX,y:v.clientY},S=(c==null?void 0:c.contains(y))||(h==null?void 0:h.contains(y)),C=!lV(_,a);S?m():C&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,a,d,m]),o.jsx(mN,{...t,ref:i})}),[tV,nV]=Tf(hN,{isInside:!1}),rV=tC("TooltipContent"),mN=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=bf(Da,n),d=Qv(n),{onClose:h}=c;return g.useEffect(()=>(document.addEventListener(cE,h),()=>document.removeEventListener(cE,h)),[h]),g.useEffect(()=>{if(c.trigger){const f=m=>{const x=m.target;x!=null&&x.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(Wv,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(rV,{children:r}),o.jsx(tV,{scope:n,isInside:!0,children:o.jsx(EM,{id:c.contentId,role:"tooltip",children:s||r})})]})})});fN.displayName=Da;var pN="TooltipArrow",sV=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qv(n);return nV(pN,n).isInside?null:o.jsx(Kv,{...s,...r,ref:e})});sV.displayName=pN;function iV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function oV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function aV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function lV(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,d=e[a].x,h=e[a].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function cV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),uV(e)}function uV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var dV=dN,gN=fN;const hV=dV,fV=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(gN,{ref:r,sideOffset:e,className:me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));fV.displayName=gN.displayName;const yN=g.createContext(void 0);function mV({children:t}){const{data:e,isLoading:n,error:r,refetch:s}=$t({queryKey:["/api/users/me"],queryFn:async()=>{if(!localStorage.getItem("token"))return null;try{return(await Ge("GET","/api/users/me")).json()}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),null}},enabled:!0,retry:!1,refetchOnMount:!0,refetchOnWindowFocus:!1}),c={user:e||null,login:async(d,h)=>{const m=await(await Ge("POST","/api/auth/login",{email:d,password:h})).json();return localStorage.setItem("token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),await s(),m},registerSchool:async d=>{const f=await(await Ge("POST","/api/auth/register-school",d)).json();localStorage.setItem("token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),await s()},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),ze.clear(),s()},isLoading:n};return lr.createElement(yN.Provider,{value:c},t)}function Cf(){const t=g.useContext(yN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Yv=eu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?tM:"button";return o.jsx(a,{className:me(Yv({variant:e,size:n,className:t})),ref:i,...s})});G.displayName="Button";var sp="focusScope.autoFocusOnMount",ip="focusScope.autoFocusOnUnmount",uE={bubbles:!1,cancelable:!0},pV="FocusScope",Nf=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Bt(s),h=Bt(i),f=g.useRef(null),m=ke(e,v=>c(v)),x=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(C){if(x.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:Ts(f.current,{select:!0})},y=function(C){if(x.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||Ts(f.current,{select:!0}))},_=function(C){if(document.activeElement===document.body)for(const D of C)D.removedNodes.length>0&&Ts(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const S=new MutationObserver(_);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),S.disconnect()}}},[r,l,x.paused]),g.useEffect(()=>{if(l){hE.add(x);const v=document.activeElement;if(!l.contains(v)){const _=new CustomEvent(sp,uE);l.addEventListener(sp,d),l.dispatchEvent(_),_.defaultPrevented||(gV(_V(vN(l)),{select:!0}),document.activeElement===v&&Ts(l))}return()=>{l.removeEventListener(sp,d),setTimeout(()=>{const _=new CustomEvent(ip,uE);l.addEventListener(ip,h),l.dispatchEvent(_),_.defaultPrevented||Ts(v??document.body,{select:!0}),l.removeEventListener(ip,h),hE.remove(x)},0)}}},[l,d,h,x]);const b=g.useCallback(v=>{if(!n&&!r||x.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(y&&_){const S=v.currentTarget,[C,R]=yV(S);C&&R?!v.shiftKey&&_===R?(v.preventDefault(),n&&Ts(C,{select:!0})):v.shiftKey&&_===C&&(v.preventDefault(),n&&Ts(R,{select:!0})):_===S&&v.preventDefault()}},[n,r,x.paused]);return o.jsx(we.div,{tabIndex:-1,...a,ref:m,onKeyDown:b})});Nf.displayName=pV;function gV(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ts(r,{select:e}),document.activeElement!==n)return}function yV(t){const e=vN(t),n=dE(e,t),r=dE(e.reverse(),t);return[n,r]}function vN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dE(t,e){for(const n of t)if(!vV(n,{upTo:e}))return n}function vV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xV(t){return t instanceof HTMLInputElement&&"select"in t}function Ts(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&xV(t)&&e&&t.select()}}var hE=wV();function wV(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fE(t,e),t.unshift(e)},remove(e){var n;t=fE(t,e),(n=t[0])==null||n.resume()}}}function fE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function _V(t){return t.filter(e=>e.tagName!=="A")}var op=0;function Xv(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??mE()),document.body.insertAdjacentElement("beforeend",t[1]??mE()),op++,()=>{op===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),op--}},[])}function mE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vr=function(){return vr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vr.apply(this,arguments)};function xN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function EV(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var jd="right-scroll-bar-position",kd="width-before-scroll-bar",SV="with-scroll-bars-hidden",TV="--removed-body-scroll-bar-size";function ap(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function bV(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var CV=typeof window<"u"?g.useLayoutEffect:g.useEffect,pE=new WeakMap;function NV(t,e){var n=bV(null,function(r){return t.forEach(function(s){return ap(s,r)})});return CV(function(){var r=pE.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||ap(l,null)}),i.forEach(function(l){s.has(l)||ap(l,a)})}pE.set(n,t)},[t]),n}function IV(t){return t}function PV(t,e){e===void 0&&(e=IV);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function RV(t){t===void 0&&(t={});var e=PV(null);return e.options=vr({async:!0,ssr:!1},t),e}var wN=function(t){var e=t.sideCar,n=xN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,vr({},n))};wN.isSideCarExport=!0;function AV(t,e){return t.useMedium(e),wN}var _N=RV(),lp=function(){},If=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:lp,onWheelCapture:lp,onTouchMoveCapture:lp}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,x=t.noIsolation,b=t.inert,v=t.allowPinchZoom,y=t.as,_=y===void 0?"div":y,S=t.gapMode,C=xN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,D=NV([n,e]),M=vr(vr({},C),s);return g.createElement(g.Fragment,null,h&&g.createElement(R,{sideCar:_N,removeScrollBar:d,shards:f,noIsolation:x,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:S}),a?g.cloneElement(g.Children.only(l),vr(vr({},M),{ref:D})):g.createElement(_,vr({},M,{className:c,ref:D}),l))});If.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};If.classNames={fullWidth:kd,zeroRight:jd};var jV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=jV();return e&&t.setAttribute("nonce",e),t}function DV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function OV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var MV=function(){var t=0,e=null;return{add:function(n){t==0&&(e=kV())&&(DV(e,n),OV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LV=function(){var t=MV();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EN=function(){var t=LV(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},VV={left:0,top:0,right:0,gap:0},cp=function(t){return parseInt(t||"",10)||0},FV=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[cp(n),cp(r),cp(s)]},UV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return VV;var e=FV(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},$V=EN(),ia="data-scroll-locked",zV=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(SV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jd,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(kd,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(jd," .").concat(jd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kd," .").concat(kd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(TV,": ").concat(l,`px;
  }
`)},gE=function(){var t=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(t)?t:0},BV=function(){g.useEffect(function(){return document.body.setAttribute(ia,(gE()+1).toString()),function(){var t=gE()-1;t<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,t.toString())}},[])},qV=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;BV();var i=g.useMemo(function(){return UV(s)},[s]);return g.createElement($V,{styles:zV(i,!e,s,n?"":"!important")})},Wg=!1;if(typeof window<"u")try{var rd=Object.defineProperty({},"passive",{get:function(){return Wg=!0,!0}});window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{Wg=!1}var No=Wg?{passive:!1}:!1,HV=function(t){return t.tagName==="TEXTAREA"},SN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!HV(t)&&n[e]==="visible")},GV=function(t){return SN(t,"overflowY")},WV=function(t){return SN(t,"overflowX")},yE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=TN(t,r);if(s){var i=bN(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},KV=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},QV=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},TN=function(t,e){return t==="v"?GV(e):WV(e)},bN=function(t,e){return t==="v"?KV(e):QV(e)},YV=function(t,e){return t==="h"&&e==="rtl"?-1:1},XV=function(t,e,n,r,s){var i=YV(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{var x=bN(t,l),b=x[0],v=x[1],y=x[2],_=v-y-i*b;(b||_)&&TN(t,l)&&(f+=_,m+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(d=!0),d},sd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vE=function(t){return[t.deltaX,t.deltaY]},xE=function(t){return t&&"current"in t?t.current:t},JV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ZV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},eF=0,Io=[];function tF(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(eF++)[0],i=g.useState(EN)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=EV([t.lockRef.current],(t.shards||[]).map(xE),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var _=sd(v),S=n.current,C="deltaX"in v?v.deltaX:S[0]-_[0],R="deltaY"in v?v.deltaY:S[1]-_[1],D,M=v.target,T=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in v&&T==="h"&&M.type==="range")return!1;var E=yE(T,M);if(!E)return!0;if(E?D=T:(D=T==="v"?"h":"v",E=yE(T,M)),!E)return!1;if(!r.current&&"changedTouches"in v&&(C||R)&&(r.current=D),!D)return!0;var N=r.current||D;return XV(N,y,v,N==="h"?C:R,!0)},[]),c=g.useCallback(function(v){var y=v;if(!(!Io.length||Io[Io.length-1]!==i)){var _="deltaY"in y?vE(y):sd(y),S=e.current.filter(function(D){return D.name===y.type&&(D.target===y.target||y.target===D.shadowParent)&&JV(D.delta,_)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var C=(a.current.shards||[]).map(xE).filter(Boolean).filter(function(D){return D.contains(y.target)}),R=C.length>0?l(y,C[0]):!a.current.noIsolation;R&&y.cancelable&&y.preventDefault()}}},[]),d=g.useCallback(function(v,y,_,S){var C={name:v,delta:y,target:_,should:S,shadowParent:nF(_)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=g.useCallback(function(v){n.current=sd(v),r.current=void 0},[]),f=g.useCallback(function(v){d(v.type,vE(v),v.target,l(v,t.lockRef.current))},[]),m=g.useCallback(function(v){d(v.type,sd(v),v.target,l(v,t.lockRef.current))},[]);g.useEffect(function(){return Io.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,No),document.addEventListener("touchmove",c,No),document.addEventListener("touchstart",h,No),function(){Io=Io.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,No),document.removeEventListener("touchmove",c,No),document.removeEventListener("touchstart",h,No)}},[]);var x=t.removeScrollBar,b=t.inert;return g.createElement(g.Fragment,null,b?g.createElement(i,{styles:ZV(s)}):null,x?g.createElement(qV,{gapMode:t.gapMode}):null)}function nF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const rF=AV(_N,tF);var Pf=g.forwardRef(function(t,e){return g.createElement(If,vr({},t,{ref:e,sideCar:rF}))});Pf.classNames=If.classNames;var sF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Po=new WeakMap,id=new WeakMap,od={},up=0,CN=function(t){return t&&(t.host||CN(t.parentNode))},iF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CN(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},oF=function(t,e,n,r){var s=iF(e,Array.isArray(t)?t:[t]);od[n]||(od[n]=new WeakMap);var i=od[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var x=m.getAttribute(r),b=x!==null&&x!=="false",v=(Po.get(m)||0)+1,y=(i.get(m)||0)+1;Po.set(m,v),i.set(m,y),a.push(m),v===1&&b&&id.set(m,!0),y===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),l.clear(),up++,function(){a.forEach(function(f){var m=Po.get(f)-1,x=i.get(f)-1;Po.set(f,m),i.set(f,x),m||(id.has(f)||f.removeAttribute(r),id.delete(f)),x||f.removeAttribute(n)}),up--,up||(Po=new WeakMap,Po=new WeakMap,id=new WeakMap,od={})}},Jv=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=sF(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),oF(r,s,n,"aria-hidden")):function(){return null}},Zv="Dialog",[NN,IN]=Ln(Zv),[aF,ir]=NN(Zv),PN=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=g.useRef(null),c=g.useRef(null),[d=!1,h]=oi({prop:r,defaultProp:s,onChange:i});return o.jsx(aF,{scope:e,triggerRef:l,contentRef:c,contentId:Yr(),titleId:Yr(),descriptionId:Yr(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};PN.displayName=Zv;var RN="DialogTrigger",AN=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ir(RN,n),i=ke(e,s.triggerRef);return o.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":nx(s.open),...r,ref:i,onClick:Y(t.onClick,s.onOpenToggle)})});AN.displayName=RN;var ex="DialogPortal",[lF,jN]=NN(ex,{forceMount:void 0}),kN=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ir(ex,e);return o.jsx(lF,{scope:e,forceMount:n,children:g.Children.map(r,a=>o.jsx(sr,{present:n||i.open,children:o.jsx(Jc,{asChild:!0,container:s,children:a})}))})};kN.displayName=ex;var Rh="DialogOverlay",DN=g.forwardRef((t,e)=>{const n=jN(Rh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ir(Rh,t.__scopeDialog);return i.modal?o.jsx(sr,{present:r||i.open,children:o.jsx(uF,{...s,ref:e})}):null});DN.displayName=Rh;var cF=no("DialogOverlay.RemoveScroll"),uF=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ir(Rh,n);return o.jsx(Pf,{as:cF,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(we.div,{"data-state":nx(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),io="DialogContent",ON=g.forwardRef((t,e)=>{const n=jN(io,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ir(io,t.__scopeDialog);return o.jsx(sr,{present:r||i.open,children:i.modal?o.jsx(dF,{...s,ref:e}):o.jsx(hF,{...s,ref:e})})});ON.displayName=io;var dF=g.forwardRef((t,e)=>{const n=ir(io,t.__scopeDialog),r=g.useRef(null),s=ke(e,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return Jv(i)},[]),o.jsx(MN,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Y(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Y(t.onFocusOutside,i=>i.preventDefault())})}),hF=g.forwardRef((t,e)=>{const n=ir(io,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return o.jsx(MN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MN=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=ir(io,n),c=g.useRef(null),d=ke(e,c);return Xv(),o.jsxs(o.Fragment,{children:[o.jsx(Nf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Wa,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":nx(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(mF,{titleId:l.titleId}),o.jsx(gF,{contentRef:c,descriptionId:l.descriptionId})]})]})}),tx="DialogTitle",LN=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ir(tx,n);return o.jsx(we.h2,{id:s.titleId,...r,ref:e})});LN.displayName=tx;var VN="DialogDescription",FN=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ir(VN,n);return o.jsx(we.p,{id:s.descriptionId,...r,ref:e})});FN.displayName=VN;var UN="DialogClose",$N=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ir(UN,n);return o.jsx(we.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,()=>s.onOpenChange(!1))})});$N.displayName=UN;function nx(t){return t?"open":"closed"}var zN="DialogTitleWarning",[fF,BN]=ZO(zN,{contentName:io,titleName:tx,docsSlug:"dialog"}),mF=({titleId:t})=>{const e=BN(zN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pF="DialogDescriptionWarning",gF=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BN(pF).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},qN=PN,HN=AN,GN=kN,rx=DN,sx=ON,ix=LN,ox=FN,ax=$N;const $r=qN,yF=HN,vF=GN,WN=g.forwardRef(({className:t,...e},n)=>o.jsx(rx,{ref:n,className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));WN.displayName=rx.displayName;const mr=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(vF,{children:[o.jsx(WN,{}),o.jsxs(sx,{ref:r,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(ax,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(nu,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mr.displayName=sx.displayName;const pr=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});pr.displayName="DialogHeader";const gr=g.forwardRef(({className:t,...e},n)=>o.jsx(ix,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",t),...e}));gr.displayName=ix.displayName;const lx=g.forwardRef(({className:t,...e},n)=>o.jsx(ox,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));lx.displayName=ox.displayName;const fe=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));fe.displayName="Input";var xF="Label",KN=g.forwardRef((t,e)=>o.jsx(we.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));KN.displayName=xF;var QN=KN;const wF=eu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=g.forwardRef(({className:t,...e},n)=>o.jsx(QN,{ref:n,className:me(wF(),t),...e}));ne.displayName=QN.displayName;function wE(t,[e,n]){return Math.min(n,Math.max(e,t))}var _F=g.createContext(void 0);function cx(t){const e=g.useContext(_F);return t||e||"ltr"}function ux(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var EF=[" ","Enter","ArrowUp","ArrowDown"],SF=[" ","Enter"],su="Select",[Rf,Af,TF]=vf(su),[Ja,gq]=Ln(su,[TF,Xa]),jf=Xa(),[bF,xi]=Ja(su),[CF,NF]=Ja(su),YN=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:x,form:b}=t,v=jf(e),[y,_]=g.useState(null),[S,C]=g.useState(null),[R,D]=g.useState(!1),M=cx(d),[T=!1,E]=oi({prop:r,defaultProp:s,onChange:i}),[N,P]=oi({prop:a,defaultProp:l,onChange:c}),k=g.useRef(null),j=y?b||!!y.closest("form"):!0,[A,H]=g.useState(new Set),ce=Array.from(A).map(J=>J.props.value).join(";");return o.jsx(lN,{...v,children:o.jsxs(bF,{required:x,scope:e,trigger:y,onTriggerChange:_,valueNode:S,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:D,contentId:Yr(),value:N,onValueChange:P,open:T,onOpenChange:E,dir:M,triggerPointerDownPosRef:k,disabled:m,children:[o.jsx(Rf.Provider,{scope:e,children:o.jsx(CF,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(J=>{H(oe=>new Set(oe).add(J))},[]),onNativeOptionRemove:g.useCallback(J=>{H(oe=>{const V=new Set(oe);return V.delete(J),V})},[]),children:n})}),j?o.jsxs(_I,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:J=>P(J.target.value),disabled:m,form:b,children:[N===void 0?o.jsx("option",{value:""}):null,Array.from(A)]},ce):null]})})};YN.displayName=su;var XN="SelectTrigger",JN=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=jf(n),a=xi(XN,n),l=a.disabled||r,c=ke(e,a.onTriggerChange),d=Af(n),h=g.useRef("touch"),[f,m,x]=EI(v=>{const y=d().filter(C=>!C.disabled),_=y.find(C=>C.value===a.value),S=SI(y,v,_);S!==void 0&&a.onValueChange(S.value)}),b=v=>{l||(a.onOpenChange(!0),x()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(Gv,{asChild:!0,...i,children:o.jsx(we.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":wI(a.value)?"":void 0,...s,ref:c,onClick:Y(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&b(v)}),onPointerDown:Y(s.onPointerDown,v=>{h.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:Y(s.onKeyDown,v=>{const y=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(y&&v.key===" ")&&EF.includes(v.key)&&(b(),v.preventDefault())})})})});JN.displayName=XN;var ZN="SelectValue",eI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=xi(ZN,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=ke(e,c.onValueNodeChange);return qt(()=>{d(h)},[d,h]),o.jsx(we.span,{...l,ref:f,style:{pointerEvents:"none"},children:wI(c.value)?o.jsx(o.Fragment,{children:a}):i})});eI.displayName=ZN;var IF="SelectIcon",tI=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(we.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});tI.displayName=IF;var PF="SelectPortal",nI=t=>o.jsx(Jc,{asChild:!0,...t});nI.displayName=PF;var oo="SelectContent",rI=g.forwardRef((t,e)=>{const n=xi(oo,t.__scopeSelect),[r,s]=g.useState();if(qt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?go.createPortal(o.jsx(sI,{scope:t.__scopeSelect,children:o.jsx(Rf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(iI,{...t,ref:e})});rI.displayName=oo;var $n=10,[sI,wi]=Ja(oo),RF="SelectContentImpl",AF=no("SelectContent.RemoveScroll"),iI=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:b,hideWhenDetached:v,avoidCollisions:y,..._}=t,S=xi(oo,n),[C,R]=g.useState(null),[D,M]=g.useState(null),T=ke(e,se=>R(se)),[E,N]=g.useState(null),[P,k]=g.useState(null),j=Af(n),[A,H]=g.useState(!1),ce=g.useRef(!1);g.useEffect(()=>{if(C)return Jv(C)},[C]),Xv();const J=g.useCallback(se=>{const[B,...ee]=j().map(Le=>Le.ref.current),[ue]=ee.slice(-1),ve=document.activeElement;for(const Le of se)if(Le===ve||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===B&&D&&(D.scrollTop=0),Le===ue&&D&&(D.scrollTop=D.scrollHeight),Le==null||Le.focus(),document.activeElement!==ve))return},[j,D]),oe=g.useCallback(()=>J([E,C]),[J,E,C]);g.useEffect(()=>{A&&oe()},[A,oe]);const{onOpenChange:V,triggerPointerDownPosRef:$}=S;g.useEffect(()=>{if(C){let se={x:0,y:0};const B=ue=>{var ve,Le;se={x:Math.abs(Math.round(ue.pageX)-(((ve=$.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(ue.pageY)-(((Le=$.current)==null?void 0:Le.y)??0))}},ee=ue=>{se.x<=10&&se.y<=10?ue.preventDefault():C.contains(ue.target)||V(!1),document.removeEventListener("pointermove",B),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",ee,{capture:!0})}}},[C,V,$]),g.useEffect(()=>{const se=()=>V(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[V]);const[Q,U]=EI(se=>{const B=j().filter(ve=>!ve.disabled),ee=B.find(ve=>ve.ref.current===document.activeElement),ue=SI(B,se,ee);ue&&setTimeout(()=>ue.ref.current.focus())}),X=g.useCallback((se,B,ee)=>{const ue=!ce.current&&!ee;(S.value!==void 0&&S.value===B||ue)&&(N(se),ue&&(ce.current=!0))},[S.value]),de=g.useCallback(()=>C==null?void 0:C.focus(),[C]),be=g.useCallback((se,B,ee)=>{const ue=!ce.current&&!ee;(S.value!==void 0&&S.value===B||ue)&&k(se)},[S.value]),qe=r==="popper"?Kg:oI,$e=qe===Kg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:b,hideWhenDetached:v,avoidCollisions:y}:{};return o.jsx(sI,{scope:n,content:C,viewport:D,onViewportChange:M,itemRefCallback:X,selectedItem:E,onItemLeave:de,itemTextRefCallback:be,focusSelectedItem:oe,selectedItemText:P,position:r,isPositioned:A,searchRef:Q,children:o.jsx(Pf,{as:AF,allowPinchZoom:!0,children:o.jsx(Nf,{asChild:!0,trapped:S.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Y(s,se=>{var B;(B=S.trigger)==null||B.focus({preventScroll:!0}),se.preventDefault()}),children:o.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:o.jsx(qe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:se=>se.preventDefault(),..._,...$e,onPlaced:()=>H(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Y(_.onKeyDown,se=>{const B=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!B&&se.key.length===1&&U(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ue=j().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ue=ue.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const ve=se.target,Le=ue.indexOf(ve);ue=ue.slice(Le+1)}setTimeout(()=>J(ue)),se.preventDefault()}})})})})})})});iI.displayName=RF;var jF="SelectItemAlignedPosition",oI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=xi(oo,n),a=wi(oo,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=ke(e,T=>h(T)),m=Af(n),x=g.useRef(!1),b=g.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:_,focusSelectedItem:S}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&y&&_){const T=i.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),P=_.getBoundingClientRect();if(i.dir!=="rtl"){const ve=P.left-E.left,Le=N.left-ve,St=T.left-Le,nn=T.width+St,Dr=Math.max(nn,E.width),ps=window.innerWidth-$n,bi=wE(Le,[$n,Math.max($n,ps-Dr)]);l.style.minWidth=nn+"px",l.style.left=bi+"px"}else{const ve=E.right-P.right,Le=window.innerWidth-N.right-ve,St=window.innerWidth-T.right-Le,nn=T.width+St,Dr=Math.max(nn,E.width),ps=window.innerWidth-$n,bi=wE(Le,[$n,Math.max($n,ps-Dr)]);l.style.minWidth=nn+"px",l.style.right=bi+"px"}const k=m(),j=window.innerHeight-$n*2,A=v.scrollHeight,H=window.getComputedStyle(d),ce=parseInt(H.borderTopWidth,10),J=parseInt(H.paddingTop,10),oe=parseInt(H.borderBottomWidth,10),V=parseInt(H.paddingBottom,10),$=ce+J+A+V+oe,Q=Math.min(y.offsetHeight*5,$),U=window.getComputedStyle(v),X=parseInt(U.paddingTop,10),de=parseInt(U.paddingBottom,10),be=T.top+T.height/2-$n,qe=j-be,$e=y.offsetHeight/2,se=y.offsetTop+$e,B=ce+J+se,ee=$-B;if(B<=be){const ve=k.length>0&&y===k[k.length-1].ref.current;l.style.bottom="0px";const Le=d.clientHeight-v.offsetTop-v.offsetHeight,St=Math.max(qe,$e+(ve?de:0)+Le+oe),nn=B+St;l.style.height=nn+"px"}else{const ve=k.length>0&&y===k[0].ref.current;l.style.top="0px";const St=Math.max(be,ce+v.offsetTop+(ve?X:0)+$e)+ee;l.style.height=St+"px",v.scrollTop=B-be+v.offsetTop}l.style.margin=`${$n}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,y,_,i.dir,r]);qt(()=>C(),[C]);const[R,D]=g.useState();qt(()=>{d&&D(window.getComputedStyle(d).zIndex)},[d]);const M=g.useCallback(T=>{T&&b.current===!0&&(C(),S==null||S(),b.current=!1)},[C,S]);return o.jsx(DF,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx(we.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});oI.displayName=jF;var kF="SelectPopperPosition",Kg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=$n,...i}=t,a=jf(n);return o.jsx(Wv,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kg.displayName=kF;var[DF,dx]=Ja(oo,{}),Qg="SelectViewport",aI=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=wi(Qg,n),a=dx(Qg,n),l=ke(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Rf.Slot,{scope:n,children:o.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Y(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const x=Math.abs(c.current-h.scrollTop);if(x>0){const b=window.innerHeight-$n*2,v=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),_=Math.max(v,y);if(_<b){const S=_+x,C=Math.min(b,S),R=S-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});aI.displayName=Qg;var lI="SelectGroup",[OF,MF]=Ja(lI),LF=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Yr();return o.jsx(OF,{scope:n,id:s,children:o.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:e})})});LF.displayName=lI;var cI="SelectLabel",uI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=MF(cI,n);return o.jsx(we.div,{id:s.id,...r,ref:e})});uI.displayName=cI;var Ah="SelectItem",[VF,dI]=Ja(Ah),hI=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=xi(Ah,n),c=wi(Ah,n),d=l.value===r,[h,f]=g.useState(i??""),[m,x]=g.useState(!1),b=ke(e,S=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,S,r,s)}),v=Yr(),y=g.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(VF,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:g.useCallback(S=>{f(C=>C||((S==null?void 0:S.textContent)??"").trim())},[]),children:o.jsx(Rf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(we.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:b,onFocus:Y(a.onFocus,()=>x(!0)),onBlur:Y(a.onBlur,()=>x(!1)),onClick:Y(a.onClick,()=>{y.current!=="mouse"&&_()}),onPointerUp:Y(a.onPointerUp,()=>{y.current==="mouse"&&_()}),onPointerDown:Y(a.onPointerDown,S=>{y.current=S.pointerType}),onPointerMove:Y(a.onPointerMove,S=>{var C;y.current=S.pointerType,s?(C=c.onItemLeave)==null||C.call(c):y.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(a.onPointerLeave,S=>{var C;S.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:Y(a.onKeyDown,S=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&S.key===" "||(SF.includes(S.key)&&_(),S.key===" "&&S.preventDefault())})})})})});hI.displayName=Ah;var Ll="SelectItemText",fI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=xi(Ll,n),l=wi(Ll,n),c=dI(Ll,n),d=NF(Ll,n),[h,f]=g.useState(null),m=ke(e,_=>f(_),c.onItemTextChange,_=>{var S;return(S=l.itemTextRefCallback)==null?void 0:S.call(l,_,c.value,c.disabled)}),x=h==null?void 0:h.textContent,b=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=d;return qt(()=>(v(b),()=>y(b)),[v,y,b]),o.jsxs(o.Fragment,{children:[o.jsx(we.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?go.createPortal(i.children,a.valueNode):null]})});fI.displayName=Ll;var mI="SelectItemIndicator",pI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return dI(mI,n).isSelected?o.jsx(we.span,{"aria-hidden":!0,...r,ref:e}):null});pI.displayName=mI;var Yg="SelectScrollUpButton",gI=g.forwardRef((t,e)=>{const n=wi(Yg,t.__scopeSelect),r=dx(Yg,t.__scopeSelect),[s,i]=g.useState(!1),a=ke(e,r.onScrollButtonChange);return qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(vI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});gI.displayName=Yg;var Xg="SelectScrollDownButton",yI=g.forwardRef((t,e)=>{const n=wi(Xg,t.__scopeSelect),r=dx(Xg,t.__scopeSelect),[s,i]=g.useState(!1),a=ke(e,r.onScrollButtonChange);return qt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(vI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yI.displayName=Xg;var vI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=wi("SelectScrollButton",n),a=g.useRef(null),l=Af(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),qt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(we.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Y(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Y(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Y(s.onPointerLeave,()=>{c()})})}),FF="SelectSeparator",xI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(we.div,{"aria-hidden":!0,...r,ref:e})});xI.displayName=FF;var Jg="SelectArrow",UF=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=jf(n),i=xi(Jg,n),a=wi(Jg,n);return i.open&&a.position==="popper"?o.jsx(Kv,{...s,...r,ref:e}):null});UF.displayName=Jg;function wI(t){return t===""||t===void 0}var _I=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=g.useRef(null),i=ke(e,s),a=ux(n);return g.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx(Zc,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});_I.displayName="BubbleSelect";function EI(t){const e=Bt(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function SI(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=$F(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function $F(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zF=YN,TI=JN,BF=eI,qF=tI,HF=nI,bI=rI,GF=aI,CI=uI,NI=hI,WF=fI,KF=pI,II=gI,PI=yI,RI=xI;const xr=zF,wr=BF,Kn=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(TI,{ref:r,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(qF,{asChild:!0,children:o.jsx(Dv,{className:"h-4 w-4 opacity-50"})})]}));Kn.displayName=TI.displayName;const AI=g.forwardRef(({className:t,...e},n)=>o.jsx(II,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(WM,{className:"h-4 w-4"})}));AI.displayName=II.displayName;const jI=g.forwardRef(({className:t,...e},n)=>o.jsx(PI,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Dv,{className:"h-4 w-4"})}));jI.displayName=PI.displayName;const Qn=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(HF,{children:o.jsxs(bI,{ref:s,className:me("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(AI,{}),o.jsx(GF,{className:me("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(jI,{})]})}));Qn.displayName=bI.displayName;const QF=g.forwardRef(({className:t,...e},n)=>o.jsx(CI,{ref:n,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));QF.displayName=CI.displayName;const Oe=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(NI,{ref:r,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(KF,{children:o.jsx(tu,{className:"h-4 w-4"})})}),o.jsx(WF,{children:e})]}));Oe.displayName=NI.displayName;const YF=g.forwardRef(({className:t,...e},n)=>o.jsx(RI,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));YF.displayName=RI.displayName;function XF({open:t,onOpenChange:e,mode:n="login"}){const{login:r,registerSchool:s}=Cf(),{toast:i}=Gt(),[a,l]=g.useState(n),[c,d]=g.useState(!1);g.useState(null);const[h,f]=g.useState({email:"",password:""}),[m,x]=g.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"}),b=async y=>{y.preventDefault(),d(!0);try{const _=await r(h.email,h.password);e(!1),f({email:"",password:""}),_!=null&&_.message&&i({title:"Welcome!",description:_.message})}catch(_){i({title:"Error",description:_.message,variant:"destructive"})}finally{d(!1)}},v=async y=>{y.preventDefault(),d(!0);try{if(m.plan!=="free"&&m.plan!=="free_trial"){localStorage.setItem("pendingRegistration",JSON.stringify(m)),e(!1),window.location.href=`/register?plan=${m.plan}`;return}await s(m),e(!1),x({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"})}catch(_){i({title:"Error",description:_.message,variant:"destructive"})}finally{d(!1)}};return o.jsx($r,{open:t,onOpenChange:e,children:o.jsxs(mr,{className:"max-w-md",children:[o.jsxs(pr,{children:[o.jsx(gr,{className:"text-center",children:a==="login"?"Sign In to PassPilot":a==="set-password"?"Set Your Password":"Register Your School"}),o.jsx(lx,{className:"text-center",children:a==="login"?"Enter your email and password. New teachers: choose any password to get started.":"Create a new school account to get started"})]}),a==="login"?o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Email Address"}),o.jsx(fe,{type:"email",id:"email",placeholder:"teacher@school.edu",value:h.email,onChange:y=>f({...h,email:y.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(fe,{type:"password",id:"password",placeholder:"Enter password (new teachers: choose your password)",value:h.password,onChange:y=>f({...h,password:y.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(G,{type:"submit",className:"w-full",disabled:c,"data-testid":"button-login",children:c?"Signing In...":"Sign In"})]}):o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(fe,{type:"text",id:"schoolName",placeholder:"Lincoln Elementary School",value:m.schoolName,onChange:y=>x({...m,schoolName:y.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(fe,{type:"text",id:"adminName",placeholder:"Principal Smith",value:m.adminName,onChange:y=>x({...m,adminName:y.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(fe,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:m.adminEmail,onChange:y=>x({...m,adminEmail:y.target.value}),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Password"}),o.jsx(fe,{type:"password",id:"adminPassword",placeholder:"••••••••",value:m.adminPassword,onChange:y=>x({...m,adminPassword:y.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"plan",children:"Choose Plan"}),o.jsxs(xr,{value:m.plan,onValueChange:y=>x({...m,plan:y}),children:[o.jsx(Kn,{"data-testid":"select-plan",children:o.jsx(wr,{placeholder:"Select a plan"})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"free",children:"Demo Plan (Free)"}),o.jsx(Oe,{value:"free_trial",children:"30-Day Free Trial"}),o.jsx(Oe,{value:"basic",children:"Basic - 3 Teachers ($6/month)"}),o.jsx(Oe,{value:"small_school",children:"Small School - 10 Teachers ($35/month)"}),o.jsx(Oe,{value:"medium_school",children:"Medium School - 25 Teachers ($75/month)"}),o.jsx(Oe,{value:"large_school",children:"Large School - 50 Teachers ($120/month)"}),o.jsx(Oe,{value:"unlimited",children:"Unlimited Teachers ($180/month)"})]})]})]}),o.jsx(G,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:c,"data-testid":"button-register",children:c?"Registering...":"Register School"})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:a==="login"?o.jsxs(o.Fragment,{children:["Don't have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("register"),"data-testid":"button-switch-register",children:"Register School"})]}):o.jsxs(o.Fragment,{children:["Already have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("login"),"data-testid":"button-switch-login",children:"Sign In"})]})})})]})})}function JF(){const[,t]=ds(),[e,n]=g.useState(!1),[r,s]=g.useState("login"),i=a=>{s(a),n(!0)};return o.jsxs("div",{className:"min-h-screen",children:[o.jsxs("section",{className:"bg-gradient-to-br from-primary to-blue-700 text-white min-h-screen flex items-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1580582932707-520aed937b7b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:o.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center mx-auto mb-6",children:o.jsx("i",{className:"fas fa-id-card text-primary text-2xl"})}),o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"PassPilot"}),o.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Streamline Student Pass Management with Real-Time Tracking"}),o.jsx("p",{className:"text-lg mb-12 opacity-80 max-w-2xl mx-auto",children:"Designed specifically for teachers and schools to efficiently manage bathroom passes, track student movements, and maintain classroom safety with intelligent reporting."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[o.jsx(G,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(G,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(G,{onClick:()=>i("login"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-login",children:"Log In"})]}),o.jsx("div",{className:"flex justify-center mb-12",children:o.jsx(G,{onClick:()=>t("/login"),variant:"link",className:"text-white hover:text-gray-200 underline text-lg","data-testid":"button-forgot-password-landing",children:"Forgot your password?"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-clock text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Real-Time Tracking"}),o.jsx("p",{className:"text-sm opacity-80",children:"Monitor student movements instantly with live updates"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-chart-line text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Smart Reports"}),o.jsx("p",{className:"text-sm opacity-80",children:"Generate detailed analytics and export data easily"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-shield-alt text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Secure & Safe"}),o.jsx("p",{className:"text-sm opacity-80",children:"Protect student data with enterprise-grade security"})]})]})]})})]}),o.jsx("section",{className:"py-20 bg-background",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-6",children:"Everything You Need for Efficient Pass Management"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"PassPilot provides comprehensive tools for teachers and administrators to maintain student safety while reducing classroom disruptions."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-clipboard-list text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Live Pass Tracking"}),o.jsx("p",{className:"text-muted-foreground",children:"See which students are currently out of class with real-time status updates and duration tracking."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-users text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Multi-Grade Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage multiple grade levels and classrooms with easy switching between student rosters."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-accent rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-cloud-upload-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Easy Data Import"}),o.jsx("p",{className:"text-muted-foreground",children:"Import student rosters from Google Classroom, Clever, or upload CSV files for quick setup."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-chart-bar text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Detailed Reports"}),o.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports with filtering options and export to CSV or PDF formats."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-mobile-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Mobile Friendly"}),o.jsx("p",{className:"text-muted-foreground",children:"Access PassPilot from any device with a responsive design optimized for tablets and phones."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-cogs text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Admin Controls"}),o.jsx("p",{className:"text-muted-foreground",children:"School administrators can manage teacher accounts, billing, and configure system settings."})]})]})]})}),o.jsx("section",{className:"py-20 bg-primary text-primary-foreground",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Transform Your Classroom Management?"}),o.jsx("p",{className:"text-xl mb-12 opacity-90 max-w-2xl mx-auto",children:"Join thousands of teachers and schools already using PassPilot to create safer, more organized learning environments."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsx(G,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(G,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-6 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(G,{variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-schedule-demo",children:"Schedule Demo"})]})]})}),o.jsx("footer",{className:"bg-gray-900 text-white py-12",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx("i",{className:"fas fa-id-card text-white text-sm"})}),o.jsx("span",{className:"text-xl font-bold",children:"PassPilot"})]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Streamlining student pass management for modern classrooms."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Features"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Pricing"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Security"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Help Center"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Contact Us"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Training"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"About"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy"})}),o.jsx("li",{children:o.jsx("a",{href:"#",className:"hover:text-white",children:"Terms"})})]})]})]}),o.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8 text-center text-sm text-gray-400",children:o.jsx("p",{children:"© 2024 PassPilot. All rights reserved."})})]})}),o.jsx(XF,{open:e,onOpenChange:n,mode:r})]})}const ae=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ae.displayName="Card";const Pe=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("flex flex-col space-y-1.5 p-6",t),...e}));Pe.displayName="CardHeader";const Re=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-2xl font-semibold leading-none tracking-tight",t),...e}));Re.displayName="CardTitle";const Xr=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Xr.displayName="CardDescription";const le=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("p-6 pt-0",t),...e}));le.displayName="CardContent";const ZF=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("flex items-center p-6 pt-0",t),...e}));ZF.displayName="CardFooter";const e6=eu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function jn({className:t,variant:e,...n}){return o.jsx("div",{className:me(e6({variant:e}),t),...n})}const t6=()=>{};var _E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},n6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},DI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;c||(x=64,a||(m=64)),r.push(n[h],n[f],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):n6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new r6;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),f!==64){const b=d<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s6=function(t){const e=kI(t);return DI.encodeByteArray(e,!0)},jh=function(t){return s6(t).replace(/\./g,"")},OI=function(t){try{return DI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=()=>i6().__FIREBASE_DEFAULTS__,a6=()=>{if(typeof process>"u"||typeof _E>"u")return;const t=_E.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OI(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return t6()||o6()||a6()||l6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MI=t=>{var e,n;return(n=(e=kf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},c6=t=>{const e=MI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},LI=()=>{var t;return(t=kf())==null?void 0:t.config},VI=t=>{var e;return(e=kf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[jh(JSON.stringify(n)),jh(JSON.stringify(a)),""].join(".")}const nc={};function h6(){const t={prod:[],emulator:[]};for(const e of Object.keys(nc))nc[e]?t.emulator.push(e):t.prod.push(e);return t}function f6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let EE=!1;function UI(t,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||nc[t]===e||nc[t]||EE)return;nc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=h6().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{EE=!0,a()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=f6(r),x=n("text"),b=document.getElementById(x)||document.createElement("span"),v=n("learnmore"),y=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),S=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const C=m.element;l(C),h(y,v);const R=d();c(S,_),C.append(S,b,y,R),document.body.appendChild(C)}i?(b.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function p6(){var e;const t=(e=kf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x6(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w6(){return!p6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _6(){try{return typeof indexedDB=="object"}catch{return!1}}function E6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S6,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?T6(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new hs(s,l,r)}}function T6(t,e){return t.replace(b6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const b6=/\{\$([^}]+)}/g;function C6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(SE(i)&&SE(a)){if(!ao(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function SE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N6(t,e){const n=new I6(t,e);return n.subscribe.bind(n)}class I6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dp),s.error===void 0&&(s.error=dp),s.complete===void 0&&(s.complete=dp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new u6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j6(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:A6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A6(t){return t===ki?void 0:t}function j6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const D6={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},O6=Ne.INFO,M6={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},L6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=M6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hx{constructor(e){this.name=e,this._logLevel=O6,this._logHandler=L6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const V6=(t,e)=>e.some(n=>t instanceof n);let TE,bE;function F6(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U6(){return bE||(bE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $I=new WeakMap,Zg=new WeakMap,zI=new WeakMap,hp=new WeakMap,fx=new WeakMap;function $6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Js(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&$I.set(n,t)}).catch(()=>{}),fx.set(e,t),e}function z6(t){if(Zg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Zg.set(t,e)}let ey={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function B6(t){ey=t(ey)}function q6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fp(this),e,...n);return zI.set(r,e.sort?e.sort():[e]),Js(r)}:U6().includes(t)?function(...e){return t.apply(fp(this),e),Js($I.get(this))}:function(...e){return Js(t.apply(fp(this),e))}}function H6(t){return typeof t=="function"?q6(t):(t instanceof IDBTransaction&&z6(t),V6(t,F6())?new Proxy(t,ey):t)}function Js(t){if(t instanceof IDBRequest)return $6(t);if(hp.has(t))return hp.get(t);const e=H6(t);return e!==t&&(hp.set(t,e),fx.set(e,t)),e}const fp=t=>fx.get(t);function G6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Js(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Js(a.result),c.oldVersion,c.newVersion,Js(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const W6=["get","getKey","getAll","getAllKeys","count"],K6=["put","add","delete","clear"],mp=new Map;function CE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=K6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||W6.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return mp.set(e,i),i}B6(t=>({...t,get:(e,n,r)=>CE(e,n)||t.get(e,n,r),has:(e,n)=>!!CE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ty="@firebase/app",NE="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new hx("@firebase/app"),X6="@firebase/app-compat",J6="@firebase/analytics-compat",Z6="@firebase/analytics",e3="@firebase/app-check-compat",t3="@firebase/app-check",n3="@firebase/auth",r3="@firebase/auth-compat",s3="@firebase/database",i3="@firebase/data-connect",o3="@firebase/database-compat",a3="@firebase/functions",l3="@firebase/functions-compat",c3="@firebase/installations",u3="@firebase/installations-compat",d3="@firebase/messaging",h3="@firebase/messaging-compat",f3="@firebase/performance",m3="@firebase/performance-compat",p3="@firebase/remote-config",g3="@firebase/remote-config-compat",y3="@firebase/storage",v3="@firebase/storage-compat",x3="@firebase/firestore",w3="@firebase/ai",_3="@firebase/firestore-compat",E3="firebase",S3="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="[DEFAULT]",T3={[ty]:"fire-core",[X6]:"fire-core-compat",[Z6]:"fire-analytics",[J6]:"fire-analytics-compat",[t3]:"fire-app-check",[e3]:"fire-app-check-compat",[n3]:"fire-auth",[r3]:"fire-auth-compat",[s3]:"fire-rtdb",[i3]:"fire-data-connect",[o3]:"fire-rtdb-compat",[a3]:"fire-fn",[l3]:"fire-fn-compat",[c3]:"fire-iid",[u3]:"fire-iid-compat",[d3]:"fire-fcm",[h3]:"fire-fcm-compat",[f3]:"fire-perf",[m3]:"fire-perf-compat",[p3]:"fire-rc",[g3]:"fire-rc-compat",[y3]:"fire-gcs",[v3]:"fire-gcs-compat",[x3]:"fire-fst",[_3]:"fire-fst-compat",[w3]:"fire-vertex","fire-js":"fire-js",[E3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Map,b3=new Map,ry=new Map;function IE(t,e){try{t.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(ry.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;ry.set(e,t);for(const n of kh.values())IE(n,t);for(const n of b3.values())IE(n,t);return!0}function mx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new iu("app","Firebase",C3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=S3;function BI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ny,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zs.create("bad-app-name",{appName:String(s)});if(n||(n=LI()),!n)throw Zs.create("no-options");const i=kh.get(s);if(i){if(ao(n,i.options)&&ao(r,i.config))return i;throw Zs.create("duplicate-app",{appName:s})}const a=new k6(s);for(const c of ry.values())a.addComponent(c);const l=new N3(n,r,a);return kh.set(s,l),l}function qI(t=ny){const e=kh.get(t);if(!e&&t===ny&&LI())return BI();if(!e)throw Zs.create("no-app",{appName:t});return e}function ei(t,e,n){let r=T3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(a.join(" "));return}Oa(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="firebase-heartbeat-database",P3=1,Ic="firebase-heartbeat-store";let pp=null;function HI(){return pp||(pp=G6(I3,P3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zs.create("idb-open",{originalErrorMessage:t.message})})),pp}async function R3(t){try{const n=(await HI()).transaction(Ic),r=await n.objectStore(Ic).get(GI(t));return await n.done,r}catch(e){if(e instanceof hs)os.warn(e.message);else{const n=Zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function PE(t,e){try{const r=(await HI()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(e,GI(t)),await r.done}catch(n){if(n instanceof hs)os.warn(n.message);else{const r=Zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function GI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1024,j3=30;class k3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=RE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>j3){const a=M3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=RE(),{heartbeatsToSend:r,unsentEntries:s}=D3(this._heartbeatsCache.heartbeats),i=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return os.warn(n),""}}}function RE(){return new Date().toISOString().substring(0,10)}function D3(t,e=A3){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),AE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),AE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _6()?E6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function AE(t){return jh(JSON.stringify({version:2,heartbeats:t})).length}function M3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){Oa(new lo("platform-logger",e=>new Q6(e),"PRIVATE")),Oa(new lo("heartbeat",e=>new k3(e),"PRIVATE")),ei(ty,NE,t),ei(ty,NE,"esm2020"),ei("fire-js","")}L3("");var V3="firebase",F3="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(V3,F3,"app");function WI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U3=WI,KI=new iu("auth","Firebase",WI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new hx("@firebase/auth");function $3(t,...e){Dh.logLevel<=Ne.WARN&&Dh.warn(`Auth (${el}): ${t}`,...e)}function Dd(t,...e){Dh.logLevel<=Ne.ERROR&&Dh.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,...e){throw gx(t,...e)}function Tr(t,...e){return gx(t,...e)}function px(t,e,n){const r={...U3(),[e]:n};return new iu("auth","Firebase",r).create(e,{appName:t.name})}function br(t){return px(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mn(t,"argument-error"),px(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KI.create(t,...e)}function ge(t,e,...n){if(!t)throw gx(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dd(e),new Error(e)}function as(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function B3(){return jE()==="http:"||jE()==="https:"}function jE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B3()||y6()||"connection"in navigator)?navigator.onLine:!0}function H3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.shortDelay=e,this.longDelay=n,as(n>e,"Short delay should be less than long delay!"),this.isMobile=m6()||v6()}get(){return q3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e){as(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K3=new au(3e4,6e4);function _i(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ei(t,e,n,r,s={}){return YI(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=ou({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return g6()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Za(t.emulatorConfig.host)&&(d.credentials="include"),QI.fetch()(await XI(t,t.config.apiHost,n,l),d)})}async function YI(t,e,n){t._canInitEmulator=!1;const r={...G3,...e};try{const s=new Y3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ad(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ad(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw px(t,h,d);Mn(t,h)}}catch(s){if(s instanceof hs)throw s;Mn(t,"network-request-failed",{message:String(s)})}}async function lu(t,e,n,r,s={}){const i=await Ei(t,e,n,r,s);return"mfaPendingCredential"in i&&Mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function XI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?yx(t.config,s):`${t.config.apiScheme}://${s}`;return W3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Q3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),K3.get())})}}function ad(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tr(t,e,r);return s.customData._tokenResponse=n,s}function kE(t){return t!==void 0&&t.enterprise!==void 0}class X3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Q3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function J3(t,e){return Ei(t,"GET","/v2/recaptchaConfig",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){return Ei(t,"POST","/v1/accounts:delete",e)}async function Oh(t,e){return Ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e5(t,e=!1){const n=Et(t),r=await n.getIdToken(e),s=vx(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rc(gp(s.auth_time)),issuedAtTime:rc(gp(s.iat)),expirationTime:rc(gp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gp(t){return Number(t)*1e3}function vx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dd("JWT malformed, contained fewer than 3 sections"),null;try{const s=OI(n);return s?JSON.parse(s):(Dd("Failed to decode base64 JWT payload"),null)}catch(s){return Dd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function DE(t){const e=vx(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hs&&t5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function t5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Pc(t,Oh(e,{idToken:n}));ge(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?JI(s.providerUserInfo):[],a=s5(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function r5(t){const e=Et(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function s5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function JI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(t,e){const n=await YI(t,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await XI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Za(t.emulatorConfig.host)&&(c.credentials="include"),QI.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function o5(t,e){return Ei(t,"POST","/v2/accounts:revokeToken",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await i5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new oa;return r&&(ge(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new n5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Pc(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return e5(this,e)}reload(){return r5(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Pc(this,Z3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:x,providerData:b,stsTokenManager:v}=n;ge(f&&v,e,"internal-error");const y=oa.fromJSON(this.name,v);ge(typeof f=="string",e,"internal-error"),Es(r,e.name),Es(s,e.name),ge(typeof m=="boolean",e,"internal-error"),ge(typeof x=="boolean",e,"internal-error"),Es(i,e.name),Es(a,e.name),Es(l,e.name),Es(c,e.name),Es(d,e.name),Es(h,e.name);const _=new Yn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:y,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(_.providerData=b.map(S=>({...S}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new oa;s.updateFromServerResponse(n);const i=new Yn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?JI(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new oa;l.updateFromIdToken(r);const c=new Yn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function Kr(t){as(t instanceof Function,"Expected a class definition");let e=OE.get(t);return e?(as(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZI.type="NONE";const ME=ZI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e,n){return`firebase:${t}:${e}:${n}`}class aa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Od(this.userKey,s.apiKey,i),this.fullPersistenceKey=Od("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?Yn._fromGetAccountInfoResponse(this.auth,n,e):null}return Yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new aa(Kr(ME),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Kr(ME);const a=Od(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Oh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Yn._fromGetAccountInfoResponse(e,m,h)}else f=Yn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new aa(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new aa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iP(e))return"Blackberry";if(oP(e))return"Webos";if(tP(e))return"Safari";if((e.includes("chrome/")||nP(e))&&!e.includes("edge/"))return"Chrome";if(sP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eP(t=Ht()){return/firefox\//i.test(t)}function tP(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nP(t=Ht()){return/crios\//i.test(t)}function rP(t=Ht()){return/iemobile/i.test(t)}function sP(t=Ht()){return/android/i.test(t)}function iP(t=Ht()){return/blackberry/i.test(t)}function oP(t=Ht()){return/webos/i.test(t)}function xx(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function a5(t=Ht()){var e;return xx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function l5(){return x6()&&document.documentMode===10}function aP(t=Ht()){return xx(t)||sP(t)||oP(t)||iP(t)||/windows phone/i.test(t)||rP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e=[]){let n;switch(t){case"Browser":n=LE(Ht());break;case"Worker":n=`${LE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e={}){return Ei(t,"GET","/v2/passwordPolicy",_i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=6;class h5{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??d5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new c5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(br(this));const n=e?Et(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u5(this),n=new h5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await o5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kr(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[Kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fs(t){return Et(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=N6(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m5(t){Df=t}function cP(t){return Df.loadJS(t)}function p5(){return Df.recaptchaEnterpriseScript}function g5(){return Df.gapiScript}function y5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class v5{constructor(){this.enterprise=new x5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class x5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const w5="recaptcha-enterprise",uP="NO_RECAPTCHA";class _5{constructor(e){this.type=w5,this.auth=fs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{J3(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new X3(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;kE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(uP)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new v5().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&kE(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=p5();c.length!==0&&(c+=l),cP(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function FE(t,e,n,r=!1,s=!1){const i=new _5(t);let a;if(s)a=uP;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function oy(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await FE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await FE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t,e){const n=mx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ao(i,e??{}))return s;Mn(s,"already-initialized")}return n.initialize({options:e})}function S5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function T5(t,e,n){const r=fs(t);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=dP(e),{host:a,port:l}=b5(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(ao(d,r.config.emulator)&&ao(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Za(a)?(FI(`${i}//${a}${c}`),UI("Auth",!0)):C5()}function dP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function b5(t){const e=dP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:UE(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:UE(a)}}}function UE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function C5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function N5(t,e){return Ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t,e){return lu(t,"POST","/v1/accounts:signInWithPassword",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){return lu(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}async function R5(t,e){return lu(t,"POST","/v1/accounts:signInWithEmailLink",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends wx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Rc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Rc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(e,n,"signInWithPassword",I5);case"emailLink":return P5(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return oy(e,r,"signUpPassword",N5);case"emailLink":return R5(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(t,e){return lu(t,"POST","/v1/accounts:signInWithIdp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="http://localhost";class co extends wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new co(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return la(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,la(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,la(e,n)}buildRequest(){const e={requestUri:A5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function k5(t){const e=Vl(Fl(t)).link,n=e?Vl(Fl(e)).deep_link_id:null,r=Vl(Fl(t)).deep_link_id;return(r?Vl(Fl(r)).link:null)||r||n||e||t}class _x{constructor(e){const n=Vl(Fl(e)),r=n.apiKey??null,s=n.oobCode??null,i=j5(n.mode??null);ge(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=k5(e);try{return new _x(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,n){return Rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_x.parseLink(n);return ge(r,"argument-error"),Rc._fromEmailAndCode(e,r.code,r.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Ex{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends cu{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return co._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Br.credential(n,r)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends cu{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends cu{constructor(){super("twitter.com")}static credential(e,n){return co._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t,e){return lu(t,"POST","/v1/accounts:signUp",_i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Yn._fromIdTokenResponse(e,r,s),a=$E(r);return new uo({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=$E(r);return new uo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function $E(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends hs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Lh(e,n,r,s)}}function hP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(t,i,e,r):i})}async function O5(t,e,n=!1){const r=await Pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return uo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M5(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(br(r));const s="reauthenticate";try{const i=await Pc(t,hP(r,s,e,t),n);ge(i.idToken,r,"internal-error");const a=vx(i.idToken);ge(a,r,"internal-error");const{sub:l}=a;return ge(t.uid===l,r,"user-mismatch"),uo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,e,n=!1){if(yn(t.app))return Promise.reject(br(t));const r="signIn",s=await hP(t,r,e),i=await uo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function L5(t,e){return fP(fs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t){const e=fs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function V5(t,e,n){if(yn(t.app))return Promise.reject(br(t));const r=fs(t),a=await oy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",D5).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&mP(t),c}),l=await uo._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function F5(t,e,n){return yn(t.app)?Promise.reject(br(t)):L5(Et(t),tl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mP(t),r})}function U5(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function $5(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function z5(t){return Et(t).signOut()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=1e3,q5=10;class gP extends pP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);l5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,q5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},B5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gP.type="LOCAL";const H5=gP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP extends pP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yP.type="SESSION";const vP=yP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Of(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await G5(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Sx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function K5(t){Cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function Q5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function X5(){return xP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="firebaseLocalStorageDb",J5=1,Fh="firebaseLocalStorage",_P="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mf(t,e){return t.transaction([Fh],e?"readwrite":"readonly").objectStore(Fh)}function Z5(){const t=indexedDB.deleteDatabase(wP);return new uu(t).toPromise()}function ay(){const t=indexedDB.open(wP,J5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fh,{keyPath:_P})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fh)?e(r):(r.close(),await Z5(),e(await ay()))})})}async function zE(t,e,n){const r=Mf(t,!0).put({[_P]:e,value:n});return new uu(r).toPromise()}async function eU(t,e){const n=Mf(t,!1).get(e),r=await new uu(n).toPromise();return r===void 0?null:r.value}function BE(t,e){const n=Mf(t,!0).delete(e);return new uu(n).toPromise()}const tU=800,nU=3;class EP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(X5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Q5(),!this.activeServiceWorker)return;this.sender=new W5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await zE(e,Vh,"1"),await BE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mf(s,!1).getAll();return new uu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EP.type="LOCAL";const rU=EP;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t,e){return e?Kr(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return la(e,this._buildIdpRequest())}_linkToIdToken(e,n){return la(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return la(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sU(t){return fP(t.auth,new Tx(t),t.bypassAuthState)}function iU(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),M5(n,new Tx(t),t.bypassAuthState)}async function oU(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),O5(n,new Tx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sU;case"linkViaPopup":case"linkViaRedirect":return oU;case"reauthViaPopup":case"reauthViaRedirect":return iU;default:Mn(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=new au(2e3,1e4);class Ko extends TP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){as(this.filter.length===1,"Popup operations only handle one event");const e=Sx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aU.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="pendingRedirect",Md=new Map;class cU extends TP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await uU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uU(t,e){const n=CP(e),r=bP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function dU(t,e){return bP(t)._set(CP(e),"true")}function hU(t,e){Md.set(t._key(),e)}function bP(t){return Kr(t._redirectPersistence)}function CP(t){return Od(lU,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t,e,n){return mU(t,e,n)}async function mU(t,e,n){if(yn(t.app))return Promise.reject(br(t));const r=fs(t);z3(t,e,Ex),await r._initializationPromise;const s=SP(r,n);return await dU(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function pU(t,e){return await fs(t)._initializationPromise,NP(t,e,!1)}async function NP(t,e,n=!1){if(yn(t.app))return Promise.reject(br(t));const r=fs(t),s=SP(r,e),a=await new cU(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=10*60*1e3;class yU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IP(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gU&&this.cachedEventUids.clear(),this.cachedEventUids.has(qE(e))}saveEventToCache(e){this.cachedEventUids.add(qE(e)),this.lastProcessedEventTime=Date.now()}}function qE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e={}){return Ei(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_U=/^https?/;async function EU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xU(t);for(const n of e)try{if(SU(n))return}catch{}Mn(t,"unauthorized-domain")}function SU(t){const e=sy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!_U.test(n))return!1;if(wU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new au(3e4,6e4);function HE(){const t=Cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bU(t){return new Promise((e,n)=>{var s,i,a;function r(){HE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HE(),n(Tr(t,"network-request-failed"))},timeout:TU.get()})}if((i=(s=Cr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Cr().gapi)!=null&&a.load)r();else{const l=y5("iframefcb");return Cr()[l]=()=>{gapi.load?r():n(Tr(t,"network-request-failed"))},cP(`${g5()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function CU(t){return Ld=Ld||bU(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=new au(5e3,15e3),IU="__/auth/iframe",PU="emulator/auth/iframe",RU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jU(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yx(e,PU):`https://${t.config.authDomain}/${IU}`,r={apiKey:e.apiKey,appName:t.name,v:el},s=AU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ou(r).slice(1)}`}async function kU(t){const e=await CU(t),n=Cr().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:jU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Tr(t,"network-request-failed"),l=Cr().setTimeout(()=>{i(a)},NU.get());function c(){Cr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OU=500,MU=600,LU="_blank",VU="http://localhost";class GE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FU(t,e,n,r=OU,s=MU){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...DU,width:r.toString(),height:s.toString(),top:i,left:a},d=Ht().toLowerCase();n&&(l=nP(d)?LU:n),eP(d)&&(e=e||VU,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,b])=>`${m}${x}=${b},`,"");if(a5(d)&&l!=="_self")return UU(e||"",l),new GE(null);const f=window.open(e||"",l,h);ge(f,t,"popup-blocked");try{f.focus()}catch{}return new GE(f)}function UU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U="__/auth/handler",zU="emulator/auth/handler",BU=encodeURIComponent("fac");async function WE(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:el,eventId:s};if(e instanceof Ex){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",C6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof cu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${BU}=${encodeURIComponent(c)}`:"";return`${qU(t)}?${ou(l).slice(1)}${d}`}function qU({config:t}){return t.emulator?yx(t,zU):`https://${t.authDomain}/${$U}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="webStorageSupport";class HU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vP,this._completeRedirectFn=NP,this._overrideRedirectResult=hU}async _openPopup(e,n,r,s){var a;as((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await WE(e,n,r,sy(),s);return FU(e,i,Sx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await WE(e,n,r,sy(),s);return K5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(as(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kU(e),r=new yU(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yp,{type:yp},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[yp];i!==void 0&&n(!!i),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aP()||tP()||xx()}}const GU=HU;var KE="@firebase/auth",QE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QU(t){Oa(new lo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lP(t)},d=new f5(r,s,i,c);return S5(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new lo("auth-internal",e=>{const n=fs(e.getProvider("auth").getImmediate());return(r=>new WU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(KE,QE,KU(t)),ei(KE,QE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=5*60,XU=VI("authIdTokenMaxAge")||YU;let YE=null;const JU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XU)return;const s=n==null?void 0:n.token;YE!==s&&(YE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZU(t=qI()){const e=mx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=E5(t,{popupRedirectResolver:GU,persistence:[rU,H5,vP]}),r=VI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=JU(i.toString());$5(n,a,()=>a(n.currentUser)),U5(n,l=>a(l))}}const s=MI("auth");return s&&T5(n,`http://${s}`),n}function e9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}m5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",e9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QU("Browser");var XE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,PP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,E){function N(){}N.prototype=E.prototype,T.D=E.prototype,T.prototype=new N,T.prototype.constructor=T,T.C=function(P,k,j){for(var A=Array(arguments.length-2),H=2;H<arguments.length;H++)A[H-2]=arguments[H];return E.prototype[k].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,N){N||(N=0);var P=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)P[k]=E.charCodeAt(N++)|E.charCodeAt(N++)<<8|E.charCodeAt(N++)<<16|E.charCodeAt(N++)<<24;else for(k=0;16>k;++k)P[k]=E[N++]|E[N++]<<8|E[N++]<<16|E[N++]<<24;E=T.g[0],N=T.g[1],k=T.g[2];var j=T.g[3],A=E+(j^N&(k^j))+P[0]+3614090360&4294967295;E=N+(A<<7&4294967295|A>>>25),A=j+(k^E&(N^k))+P[1]+3905402710&4294967295,j=E+(A<<12&4294967295|A>>>20),A=k+(N^j&(E^N))+P[2]+606105819&4294967295,k=j+(A<<17&4294967295|A>>>15),A=N+(E^k&(j^E))+P[3]+3250441966&4294967295,N=k+(A<<22&4294967295|A>>>10),A=E+(j^N&(k^j))+P[4]+4118548399&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(k^E&(N^k))+P[5]+1200080426&4294967295,j=E+(A<<12&4294967295|A>>>20),A=k+(N^j&(E^N))+P[6]+2821735955&4294967295,k=j+(A<<17&4294967295|A>>>15),A=N+(E^k&(j^E))+P[7]+4249261313&4294967295,N=k+(A<<22&4294967295|A>>>10),A=E+(j^N&(k^j))+P[8]+1770035416&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(k^E&(N^k))+P[9]+2336552879&4294967295,j=E+(A<<12&4294967295|A>>>20),A=k+(N^j&(E^N))+P[10]+4294925233&4294967295,k=j+(A<<17&4294967295|A>>>15),A=N+(E^k&(j^E))+P[11]+2304563134&4294967295,N=k+(A<<22&4294967295|A>>>10),A=E+(j^N&(k^j))+P[12]+1804603682&4294967295,E=N+(A<<7&4294967295|A>>>25),A=j+(k^E&(N^k))+P[13]+4254626195&4294967295,j=E+(A<<12&4294967295|A>>>20),A=k+(N^j&(E^N))+P[14]+2792965006&4294967295,k=j+(A<<17&4294967295|A>>>15),A=N+(E^k&(j^E))+P[15]+1236535329&4294967295,N=k+(A<<22&4294967295|A>>>10),A=E+(k^j&(N^k))+P[1]+4129170786&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^k&(E^N))+P[6]+3225465664&4294967295,j=E+(A<<9&4294967295|A>>>23),A=k+(E^N&(j^E))+P[11]+643717713&4294967295,k=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(k^j))+P[0]+3921069994&4294967295,N=k+(A<<20&4294967295|A>>>12),A=E+(k^j&(N^k))+P[5]+3593408605&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^k&(E^N))+P[10]+38016083&4294967295,j=E+(A<<9&4294967295|A>>>23),A=k+(E^N&(j^E))+P[15]+3634488961&4294967295,k=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(k^j))+P[4]+3889429448&4294967295,N=k+(A<<20&4294967295|A>>>12),A=E+(k^j&(N^k))+P[9]+568446438&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^k&(E^N))+P[14]+3275163606&4294967295,j=E+(A<<9&4294967295|A>>>23),A=k+(E^N&(j^E))+P[3]+4107603335&4294967295,k=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(k^j))+P[8]+1163531501&4294967295,N=k+(A<<20&4294967295|A>>>12),A=E+(k^j&(N^k))+P[13]+2850285829&4294967295,E=N+(A<<5&4294967295|A>>>27),A=j+(N^k&(E^N))+P[2]+4243563512&4294967295,j=E+(A<<9&4294967295|A>>>23),A=k+(E^N&(j^E))+P[7]+1735328473&4294967295,k=j+(A<<14&4294967295|A>>>18),A=N+(j^E&(k^j))+P[12]+2368359562&4294967295,N=k+(A<<20&4294967295|A>>>12),A=E+(N^k^j)+P[5]+4294588738&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^k)+P[8]+2272392833&4294967295,j=E+(A<<11&4294967295|A>>>21),A=k+(j^E^N)+P[11]+1839030562&4294967295,k=j+(A<<16&4294967295|A>>>16),A=N+(k^j^E)+P[14]+4259657740&4294967295,N=k+(A<<23&4294967295|A>>>9),A=E+(N^k^j)+P[1]+2763975236&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^k)+P[4]+1272893353&4294967295,j=E+(A<<11&4294967295|A>>>21),A=k+(j^E^N)+P[7]+4139469664&4294967295,k=j+(A<<16&4294967295|A>>>16),A=N+(k^j^E)+P[10]+3200236656&4294967295,N=k+(A<<23&4294967295|A>>>9),A=E+(N^k^j)+P[13]+681279174&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^k)+P[0]+3936430074&4294967295,j=E+(A<<11&4294967295|A>>>21),A=k+(j^E^N)+P[3]+3572445317&4294967295,k=j+(A<<16&4294967295|A>>>16),A=N+(k^j^E)+P[6]+76029189&4294967295,N=k+(A<<23&4294967295|A>>>9),A=E+(N^k^j)+P[9]+3654602809&4294967295,E=N+(A<<4&4294967295|A>>>28),A=j+(E^N^k)+P[12]+3873151461&4294967295,j=E+(A<<11&4294967295|A>>>21),A=k+(j^E^N)+P[15]+530742520&4294967295,k=j+(A<<16&4294967295|A>>>16),A=N+(k^j^E)+P[2]+3299628645&4294967295,N=k+(A<<23&4294967295|A>>>9),A=E+(k^(N|~j))+P[0]+4096336452&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~k))+P[7]+1126891415&4294967295,j=E+(A<<10&4294967295|A>>>22),A=k+(E^(j|~N))+P[14]+2878612391&4294967295,k=j+(A<<15&4294967295|A>>>17),A=N+(j^(k|~E))+P[5]+4237533241&4294967295,N=k+(A<<21&4294967295|A>>>11),A=E+(k^(N|~j))+P[12]+1700485571&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~k))+P[3]+2399980690&4294967295,j=E+(A<<10&4294967295|A>>>22),A=k+(E^(j|~N))+P[10]+4293915773&4294967295,k=j+(A<<15&4294967295|A>>>17),A=N+(j^(k|~E))+P[1]+2240044497&4294967295,N=k+(A<<21&4294967295|A>>>11),A=E+(k^(N|~j))+P[8]+1873313359&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~k))+P[15]+4264355552&4294967295,j=E+(A<<10&4294967295|A>>>22),A=k+(E^(j|~N))+P[6]+2734768916&4294967295,k=j+(A<<15&4294967295|A>>>17),A=N+(j^(k|~E))+P[13]+1309151649&4294967295,N=k+(A<<21&4294967295|A>>>11),A=E+(k^(N|~j))+P[4]+4149444226&4294967295,E=N+(A<<6&4294967295|A>>>26),A=j+(N^(E|~k))+P[11]+3174756917&4294967295,j=E+(A<<10&4294967295|A>>>22),A=k+(E^(j|~N))+P[2]+718787259&4294967295,k=j+(A<<15&4294967295|A>>>17),A=N+(j^(k|~E))+P[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var N=E-this.blockSize,P=this.B,k=this.h,j=0;j<E;){if(k==0)for(;j<=N;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<E;)if(P[k++]=T.charCodeAt(j++),k==this.blockSize){s(this,P),k=0;break}}else for(;j<E;)if(P[k++]=T[j++],k==this.blockSize){s(this,P),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var N=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=N&255,N/=256;for(this.u(T),T=Array(16),E=N=0;4>E;++E)for(var P=0;32>P;P+=8)T[N++]=this.g[E]>>>P&255;return T};function i(T,E){var N=l;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=E(T)}function a(T,E){this.h=E;for(var N=[],P=!0,k=T.length-1;0<=k;k--){var j=T[k]|0;P&&j==E||(N[k]=j,P=!1)}this.g=N}var l={};function c(T){return-128<=T&&128>T?i(T,function(E){return new a([E|0],0>E?-1:0)}):new a([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return y(d(-T));for(var E=[],N=1,P=0;T>=N;P++)E[P]=T/N|0,N*=4294967296;return new a(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return y(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(E,8)),P=f,k=0;k<T.length;k+=8){var j=Math.min(8,T.length-k),A=parseInt(T.substring(k,k+j),E);8>j?(j=d(Math.pow(E,j)),P=P.j(j).add(d(A))):(P=P.j(N),P=P.add(d(A)))}return P}var f=c(0),m=c(1),x=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-y(this).m();for(var T=0,E=1,N=0;N<this.g.length;N++){var P=this.i(N);T+=(0<=P?P:4294967296+P)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(v(this))return"-"+y(this).toString(T);for(var E=d(Math.pow(T,6)),N=this,P="";;){var k=R(N,E).g;N=_(N,k.j(E));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(T);if(N=k,b(N))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=_(this,T),v(T)?-1:b(T)?0:1};function y(T){for(var E=T.g.length,N=[],P=0;P<E;P++)N[P]=~T.g[P];return new a(N,~T.h).add(m)}t.abs=function(){return v(this)?y(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),N=[],P=0,k=0;k<=E;k++){var j=P+(this.i(k)&65535)+(T.i(k)&65535),A=(j>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);P=A>>>16,j&=65535,A&=65535,N[k]=A<<16|j}return new a(N,N[N.length-1]&-2147483648?-1:0)};function _(T,E){return T.add(y(E))}t.j=function(T){if(b(this)||b(T))return f;if(v(this))return v(T)?y(this).j(y(T)):y(y(this).j(T));if(v(T))return y(this.j(y(T)));if(0>this.l(x)&&0>T.l(x))return d(this.m()*T.m());for(var E=this.g.length+T.g.length,N=[],P=0;P<2*E;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<T.g.length;k++){var j=this.i(P)>>>16,A=this.i(P)&65535,H=T.i(k)>>>16,ce=T.i(k)&65535;N[2*P+2*k]+=A*ce,S(N,2*P+2*k),N[2*P+2*k+1]+=j*ce,S(N,2*P+2*k+1),N[2*P+2*k+1]+=A*H,S(N,2*P+2*k+1),N[2*P+2*k+2]+=j*H,S(N,2*P+2*k+2)}for(P=0;P<E;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=E;P<2*E;P++)N[P]=0;return new a(N,0)};function S(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function C(T,E){this.g=T,this.h=E}function R(T,E){if(b(E))throw Error("division by zero");if(b(T))return new C(f,f);if(v(T))return E=R(y(T),E),new C(y(E.g),y(E.h));if(v(E))return E=R(T,y(E)),new C(y(E.g),E.h);if(30<T.g.length){if(v(T)||v(E))throw Error("slowDivide_ only works with positive integers.");for(var N=m,P=E;0>=P.l(T);)N=D(N),P=D(P);var k=M(N,1),j=M(P,1);for(P=M(P,2),N=M(N,2);!b(P);){var A=j.add(P);0>=A.l(T)&&(k=k.add(N),j=A),P=M(P,1),N=M(N,1)}return E=_(T,k.j(E)),new C(k,E)}for(k=f;0<=T.l(E);){for(N=Math.max(1,Math.floor(T.m()/E.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=d(N),A=j.j(E);v(A)||0<A.l(T);)N-=P,j=d(N),A=j.j(E);b(j)&&(j=m),k=k.add(j),T=_(T,A)}return new C(k,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),N=[],P=0;P<E;P++)N[P]=this.i(P)&T.i(P);return new a(N,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),N=[],P=0;P<E;P++)N[P]=this.i(P)|T.i(P);return new a(N,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),N=[],P=0;P<E;P++)N[P]=this.i(P)^T.i(P);return new a(N,this.h^T.h)};function D(T){for(var E=T.g.length+1,N=[],P=0;P<E;P++)N[P]=T.i(P)<<1|T.i(P-1)>>>31;return new a(N,T.h)}function M(T,E){var N=E>>5;E%=32;for(var P=T.g.length-N,k=[],j=0;j<P;j++)k[j]=0<E?T.i(j+N)>>>E|T.i(j+N+1)<<32-E:T.i(j+N);return new a(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PP=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ti=a}).apply(typeof XE<"u"?XE:typeof self<"u"?self:typeof window<"u"?window:{});var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RP,Ul,AP,Vd,ly,jP,kP,DP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,w){return u==Array.prototype||u==Object.prototype||(u[p]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ld=="object"&&ld];for(var p=0;p<u.length;++p){var w=u[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var w=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var L=u[I];if(!(L in w))break e;w=w[L]}u=u[u.length-1],I=w[u],p=p(I),p!=I&&p!=null&&e(w,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var w=0,I=!1,L={next:function(){if(!I&&w<u.length){var F=w++;return{value:p(F,u[F]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function d(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function h(u,p,w){return u.call.apply(u.bind,arguments)}function f(u,p,w){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,w){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function x(u,p){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function b(u,p){function w(){}w.prototype=p.prototype,u.aa=p.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(I,L,F){for(var K=Array(arguments.length-2),He=2;He<arguments.length;He++)K[He-2]=arguments[He];return p.prototype[L].apply(I,K)}}function v(u){const p=u.length;if(0<p){const w=Array(p);for(let I=0;I<p;I++)w[I]=u[I];return w}return[]}function y(u,p){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(c(I)){const L=u.length||0,F=I.length||0;u.length=L+F;for(let K=0;K<F;K++)u[L+K]=I[K]}else u.push(I)}}class _{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(u){return/^[\s\xa0]*$/.test(u)}function C(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var D=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function M(u,p,w){for(const I in u)p.call(w,u[I],I,u)}function T(u,p){for(const w in u)p.call(void 0,u[w],w,u)}function E(u){const p={};for(const w in u)p[w]=u[w];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,p){let w,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(w in I)u[w]=I[w];for(let F=0;F<N.length;F++)w=N[F],Object.prototype.hasOwnProperty.call(I,w)&&(u[w]=I[w])}}function k(u){var p=1;u=u.split(":");const w=[];for(;0<p&&u.length;)w.push(u.shift()),p--;return u.length&&w.push(u.join(":")),w}function j(u){l.setTimeout(()=>{throw u},0)}function A(){var u=$;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class H{constructor(){this.h=this.g=null}add(p,w){const I=ce.get();I.set(p,w),this.h?this.h.next=I:this.g=I,this.h=I}}var ce=new _(()=>new J,u=>u.reset());class J{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,V=!1,$=new H,Q=()=>{const u=l.Promise.resolve(void 0);oe=()=>{u.then(U)}};var U=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(w){j(w)}var p=ce;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}V=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};l.addEventListener("test",w,p),l.removeEventListener("test",w,p)}catch{}return u}();function qe(u,p){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(D){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else w=="mouseover"?p=u.fromElement:w=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:$e[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qe.aa.h.call(this)}}b(qe,de);var $e={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),B=0;function ee(u,p,w,I,L){this.listener=u,this.proxy=null,this.src=p,this.type=w,this.capture=!!I,this.ha=L,this.key=++B,this.da=this.fa=!1}function ue(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,p,w,I,L){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var K=St(u,p,I,L);return-1<K?(p=u[K],w||(p.fa=!1)):(p=new ee(p,this.src,F,!!I,L),p.fa=w,u.push(p)),p};function Le(u,p){var w=p.type;if(w in u.g){var I=u.g[w],L=Array.prototype.indexOf.call(I,p,void 0),F;(F=0<=L)&&Array.prototype.splice.call(I,L,1),F&&(ue(p),u.g[w].length==0&&(delete u.g[w],u.h--))}}function St(u,p,w,I){for(var L=0;L<u.length;++L){var F=u[L];if(!F.da&&F.listener==p&&F.capture==!!w&&F.ha==I)return L}return-1}var nn="closure_lm_"+(1e6*Math.random()|0),Dr={};function ps(u,p,w,I,L){if(Array.isArray(p)){for(var F=0;F<p.length;F++)ps(u,p[F],w,I,L);return null}return w=xw(w),u&&u[se]?u.K(p,w,d(I)?!!I.capture:!!I,L):bi(u,p,w,!1,I,L)}function bi(u,p,w,I,L,F){if(!p)throw Error("Invalid event type");var K=d(L)?!!L.capture:!!L,He=rm(u);if(He||(u[nn]=He=new ve(u)),w=He.add(p,w,I,K,F),w.proxy)return w;if(I=tm(),w.proxy=I,I.src=u,I.listener=w,u.addEventListener)be||(L=K),L===void 0&&(L=!1),u.addEventListener(p.toString(),I,L);else if(u.attachEvent)u.attachEvent(vw(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function tm(){function u(w){return p.call(u.src,u.listener,w)}const p=Fj;return u}function Ci(u,p,w,I,L){if(Array.isArray(p))for(var F=0;F<p.length;F++)Ci(u,p[F],w,I,L);else I=d(I)?!!I.capture:!!I,w=xw(w),u&&u[se]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],w=St(F,w,I,L),-1<w&&(ue(F[w]),Array.prototype.splice.call(F,w,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=rm(u))&&(p=u.g[p.toString()],u=-1,p&&(u=St(p,w,I,L)),(w=-1<u?p[u]:null)&&nm(w))}function nm(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[se])Le(p.i,u);else{var w=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(w,I,u.capture):p.detachEvent?p.detachEvent(vw(w),I):p.addListener&&p.removeListener&&p.removeListener(I),(w=rm(p))?(Le(w,u),w.h==0&&(w.src=null,p[nn]=null)):ue(u)}}}function vw(u){return u in Dr?Dr[u]:Dr[u]="on"+u}function Fj(u,p){if(u.da)u=!0;else{p=new qe(p,this);var w=u.listener,I=u.ha||u.src;u.fa&&nm(u),u=w.call(I,p)}return u}function rm(u){return u=u[nn],u instanceof ve?u:null}var sm="__closure_events_fn_"+(1e9*Math.random()>>>0);function xw(u){return typeof u=="function"?u:(u[sm]||(u[sm]=function(p){return u.handleEvent(p)}),u[sm])}function At(){X.call(this),this.i=new ve(this),this.M=this,this.F=null}b(At,X),At.prototype[se]=!0,At.prototype.removeEventListener=function(u,p,w,I){Ci(this,u,p,w,I)};function Wt(u,p){var w,I=u.F;if(I)for(w=[];I;I=I.F)w.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new de(p,u);else if(p instanceof de)p.target=p.target||u;else{var L=p;p=new de(I,u),P(p,L)}if(L=!0,w)for(var F=w.length-1;0<=F;F--){var K=p.g=w[F];L=xu(K,I,!0,p)&&L}if(K=p.g=u,L=xu(K,I,!0,p)&&L,L=xu(K,I,!1,p)&&L,w)for(F=0;F<w.length;F++)K=p.g=w[F],L=xu(K,I,!1,p)&&L}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var w=u.g[p],I=0;I<w.length;I++)ue(w[I]);delete u.g[p],u.h--}}this.F=null},At.prototype.K=function(u,p,w,I){return this.i.add(String(u),p,!1,w,I)},At.prototype.L=function(u,p,w,I){return this.i.add(String(u),p,!0,w,I)};function xu(u,p,w,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,F=0;F<p.length;++F){var K=p[F];if(K&&!K.da&&K.capture==w){var He=K.listener,Tt=K.ha||K.src;K.fa&&Le(u.i,K),L=He.call(Tt,I)!==!1&&L}}return L&&!I.defaultPrevented}function ww(u,p,w){if(typeof u=="function")w&&(u=m(u,w));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(u,p||0)}function _w(u){u.g=ww(()=>{u.g=null,u.i&&(u.i=!1,_w(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Uj extends X{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:_w(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(u){X.call(this),this.h=u,this.g={}}b(al,X);var Ew=[];function Sw(u){M(u.g,function(p,w){this.g.hasOwnProperty(w)&&nm(p)},u),u.g={}}al.prototype.N=function(){al.aa.N.call(this),Sw(this)},al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var im=l.JSON.stringify,$j=l.JSON.parse,zj=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function om(){}om.prototype.h=null;function Tw(u){return u.h||(u.h=u.i())}function bw(){}var ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function am(){de.call(this,"d")}b(am,de);function lm(){de.call(this,"c")}b(lm,de);var Ni={},Cw=null;function wu(){return Cw=Cw||new At}Ni.La="serverreachability";function Nw(u){de.call(this,Ni.La,u)}b(Nw,de);function cl(u){const p=wu();Wt(p,new Nw(p))}Ni.STAT_EVENT="statevent";function Iw(u,p){de.call(this,Ni.STAT_EVENT,u),this.stat=p}b(Iw,de);function Kt(u){const p=wu();Wt(p,new Iw(p,u))}Ni.Ma="timingevent";function Pw(u,p){de.call(this,Ni.Ma,u),this.size=p}b(Pw,de);function ul(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},p)}function dl(){this.g=!0}dl.prototype.xa=function(){this.g=!1};function Bj(u,p,w,I,L,F){u.info(function(){if(u.g)if(F)for(var K="",He=F.split("&"),Tt=0;Tt<He.length;Tt++){var Ve=He[Tt].split("=");if(1<Ve.length){var jt=Ve[0];Ve=Ve[1];var kt=jt.split("_");K=2<=kt.length&&kt[1]=="type"?K+(jt+"="+Ve+"&"):K+(jt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+w+`
`+K})}function qj(u,p,w,I,L,F,K){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+w+`
`+F+" "+K})}function Eo(u,p,w,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Gj(u,w)+(I?" "+I:"")})}function Hj(u,p){u.info(function(){return"TIMEOUT: "+p})}dl.prototype.info=function(){};function Gj(u,p){if(!u.g)return p;if(!p)return null;try{var w=JSON.parse(p);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var I=w[u];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return im(w)}catch{return p}}var _u={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cm;function Eu(){}b(Eu,om),Eu.prototype.g=function(){return new XMLHttpRequest},Eu.prototype.i=function(){return{}},cm=new Eu;function gs(u,p,w,I){this.j=u,this.i=p,this.l=w,this.R=I||1,this.U=new al(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Aw}function Aw(){this.i=null,this.g="",this.h=!1}var jw={},um={};function dm(u,p,w){u.L=1,u.v=Cu(Or(p)),u.m=w,u.P=!0,kw(u,null)}function kw(u,p){u.F=Date.now(),Su(u),u.A=Or(u.v);var w=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Ww(w.i,"t",I),u.C=0,w=u.j.J,u.h=new Aw,u.g=d0(u.j,w?p:null,!u.m),0<u.O&&(u.M=new Uj(m(u.Y,u,u.g),u.O)),p=u.U,w=u.g,I=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ew[0]=L.toString()),L=Ew);for(var F=0;F<L.length;F++){var K=ps(w,L[F],I||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.H?E(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),cl(),Bj(u.i,u.u,u.A,u.l,u.R,u.m)}gs.prototype.ca=function(u){u=u.target;const p=this.M;p&&Mr(u)==3?p.j():this.Y(u)},gs.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Mr(this.g);var p=this.g.Ba();const bo=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||e0(this.g)))){this.J||kt!=4||p==7||(p==8||0>=bo?cl(3):cl(2)),hm(this);var w=this.g.Z();this.X=w;t:if(Dw(this)){var I=e0(this.g);u="";var L=I.length,F=Mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),hl(this);var K="";break t}this.h.i=new l.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(F&&p==L-1)});I.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=w==200,qj(this.i,this.u,this.A,this.l,this.R,kt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Tt=this.g;if((He=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(He)){var Ve=He;break t}}Ve=null}if(w=Ve)Eo(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fm(this,w);else{this.o=!1,this.s=3,Kt(12),Ii(this),hl(this);break e}}if(this.P){w=!0;let Vn;for(;!this.J&&this.C<K.length;)if(Vn=Wj(this,K),Vn==um){kt==4&&(this.s=4,Kt(14),w=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==jw){this.s=4,Kt(15),Eo(this.i,this.l,K,"[Invalid Chunk]"),w=!1;break}else Eo(this.i,this.l,Vn,null),fm(this,Vn);if(Dw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||K.length!=0||this.h.h||(this.s=1,Kt(16),w=!1),this.o=this.o&&w,!w)Eo(this.i,this.l,K,"[Invalid Chunked Response]"),Ii(this),hl(this);else if(0<K.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),xm(jt),jt.M=!0,Kt(11))}}else Eo(this.i,this.l,K,null),fm(this,K);kt==4&&Ii(this),this.o&&!this.J&&(kt==4?a0(this.j,this):(this.o=!1,Su(this)))}else uk(this.g),w==400&&0<K.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Ii(this),hl(this)}}}catch{}finally{}};function Dw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Wj(u,p){var w=u.C,I=p.indexOf(`
`,w);return I==-1?um:(w=Number(p.substring(w,I)),isNaN(w)?jw:(I+=1,I+w>p.length?um:(p=p.slice(I,I+w),u.C=I+w,p)))}gs.prototype.cancel=function(){this.J=!0,Ii(this)};function Su(u){u.S=Date.now()+u.I,Ow(u,u.I)}function Ow(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ul(m(u.ba,u),p)}function hm(u){u.B&&(l.clearTimeout(u.B),u.B=null)}gs.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Hj(this.i,this.A),this.L!=2&&(cl(),Kt(17)),Ii(this),this.s=2,hl(this)):Ow(this,this.S-u)};function hl(u){u.j.G==0||u.J||a0(u.j,u)}function Ii(u){hm(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Sw(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function fm(u,p){try{var w=u.j;if(w.G!=0&&(w.g==u||mm(w.h,u))){if(!u.K&&mm(w.h,u)&&w.G==3){try{var I=w.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)ju(w),Ru(w);else break e;vm(w),Kt(18)}}else w.za=L[1],0<w.za-w.T&&37500>L[2]&&w.F&&w.v==0&&!w.C&&(w.C=ul(m(w.Za,w),6e3));if(1>=Vw(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Ri(w,11)}else if((u.K||w.g==u)&&ju(w),!S(p))for(L=w.Da.g.parse(p),p=0;p<L.length;p++){let Ve=L[p];if(w.T=Ve[0],Ve=Ve[1],w.G==2)if(Ve[0]=="c"){w.K=Ve[1],w.ia=Ve[2];const jt=Ve[3];jt!=null&&(w.la=jt,w.j.info("VER="+w.la));const kt=Ve[4];kt!=null&&(w.Aa=kt,w.j.info("SVER="+w.Aa));const bo=Ve[5];bo!=null&&typeof bo=="number"&&0<bo&&(I=1.5*bo,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const Vn=u.g;if(Vn){const Du=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var F=I.h;F.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(pm(F,F.h),F.h=null))}if(I.D){const wm=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;wm&&(I.ya=wm,Qe(I.I,I.D,wm))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var K=u;if(I.qa=u0(I,I.J?I.ia:null,I.W),K.K){Fw(I.h,K);var He=K,Tt=I.L;Tt&&(He.I=Tt),He.B&&(hm(He),Su(He)),I.g=K}else i0(I);0<w.i.length&&Au(w)}else Ve[0]!="stop"&&Ve[0]!="close"||Ri(w,7);else w.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Ri(w,7):ym(w):Ve[0]!="noop"&&w.l&&w.l.ta(Ve),w.v=0)}}cl(4)}catch{}}var Kj=class{constructor(u,p){this.g=u,this.map=p}};function Mw(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vw(u){return u.h?1:u.g?u.g.size:0}function mm(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function pm(u,p){u.g?u.g.add(p):u.h=p}function Fw(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Mw.prototype.cancel=function(){if(this.i=Uw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Uw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const w of u.g.values())p=p.concat(w.D);return p}return v(u.i)}function Qj(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],w=u.length,I=0;I<w;I++)p.push(u[I]);return p}p=[],w=0;for(I in u)p[w++]=u[I];return p}function Yj(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var w=0;w<u;w++)p.push(w);return p}p=[],w=0;for(const I in u)p[w++]=I;return p}}}function $w(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var w=Yj(u),I=Qj(u),L=I.length,F=0;F<L;F++)p.call(void 0,I[F],w&&w[F],u)}var zw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xj(u,p){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var I=u[w].indexOf("="),L=null;if(0<=I){var F=u[w].substring(0,I);L=u[w].substring(I+1)}else F=u[w];p(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pi){this.h=u.h,Tu(this,u.j),this.o=u.o,this.g=u.g,bu(this,u.s),this.l=u.l;var p=u.i,w=new pl;w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),Bw(this,w),this.m=u.m}else u&&(p=String(u).match(zw))?(this.h=!1,Tu(this,p[1]||"",!0),this.o=fl(p[2]||""),this.g=fl(p[3]||"",!0),bu(this,p[4]),this.l=fl(p[5]||"",!0),Bw(this,p[6]||"",!0),this.m=fl(p[7]||"")):(this.h=!1,this.i=new pl(null,this.h))}Pi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(ml(p,qw,!0),":");var w=this.g;return(w||p=="file")&&(u.push("//"),(p=this.o)&&u.push(ml(p,qw,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(ml(w,w.charAt(0)=="/"?ek:Zj,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",ml(w,nk)),u.join("")};function Or(u){return new Pi(u)}function Tu(u,p,w){u.j=w?fl(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function bu(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Bw(u,p,w){p instanceof pl?(u.i=p,rk(u.i,u.h)):(w||(p=ml(p,tk)),u.i=new pl(p,u.h))}function Qe(u,p,w){u.i.set(p,w)}function Cu(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function fl(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ml(u,p,w){return typeof u=="string"?(u=encodeURI(u).replace(p,Jj),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jj(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qw=/[#\/\?@]/g,Zj=/[#\?:]/g,ek=/[#\?]/g,tk=/[#\?@]/g,nk=/#/g;function pl(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ys(u){u.g||(u.g=new Map,u.h=0,u.i&&Xj(u.i,function(p,w){u.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}t=pl.prototype,t.add=function(u,p){ys(this),this.i=null,u=So(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(p),this.h+=1,this};function Hw(u,p){ys(u),p=So(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Gw(u,p){return ys(u),p=So(u,p),u.g.has(p)}t.forEach=function(u,p){ys(this),this.g.forEach(function(w,I){w.forEach(function(L){u.call(p,L,I,this)},this)},this)},t.na=function(){ys(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),w=[];for(let I=0;I<p.length;I++){const L=u[I];for(let F=0;F<L.length;F++)w.push(p[I])}return w},t.V=function(u){ys(this);let p=[];if(typeof u=="string")Gw(this,u)&&(p=p.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)p=p.concat(u[w])}return p},t.set=function(u,p){return ys(this),this.i=null,u=So(this,u),Gw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ww(u,p,w){Hw(u,p),0<w.length&&(u.i=null,u.g.set(So(u,p),v(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var w=0;w<p.length;w++){var I=p[w];const F=encodeURIComponent(String(I)),K=this.V(I);for(I=0;I<K.length;I++){var L=F;K[I]!==""&&(L+="="+encodeURIComponent(String(K[I]))),u.push(L)}}return this.i=u.join("&")};function So(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function rk(u,p){p&&!u.j&&(ys(u),u.i=null,u.g.forEach(function(w,I){var L=I.toLowerCase();I!=L&&(Hw(this,I),Ww(this,L,w))},u)),u.j=p}function sk(u,p){const w=new dl;if(l.Image){const I=new Image;I.onload=x(vs,w,"TestLoadImage: loaded",!0,p,I),I.onerror=x(vs,w,"TestLoadImage: error",!1,p,I),I.onabort=x(vs,w,"TestLoadImage: abort",!1,p,I),I.ontimeout=x(vs,w,"TestLoadImage: timeout",!1,p,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function ik(u,p){const w=new dl,I=new AbortController,L=setTimeout(()=>{I.abort(),vs(w,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(F=>{clearTimeout(L),F.ok?vs(w,"TestPingServer: ok",!0,p):vs(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),vs(w,"TestPingServer: error",!1,p)})}function vs(u,p,w,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(w)}catch{}}function ok(){this.g=new zj}function ak(u,p,w){const I=w||"";try{$w(u,function(L,F){let K=L;d(L)&&(K=im(L)),p.push(I+F+"="+encodeURIComponent(K))})}catch(L){throw p.push(I+"type="+encodeURIComponent("_badmap")),L}}function Nu(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Nu,om),Nu.prototype.g=function(){return new Iu(this.l,this.j)},Nu.prototype.i=function(u){return function(){return u}}({});function Iu(u,p){At.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Iu,At),t=Iu.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,yl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?gl(this):yl(this),this.readyState==3&&Kw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,gl(this))},t.Qa=function(u){this.g&&(this.response=u,gl(this))},t.ga=function(){this.g&&gl(this)};function gl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,yl(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=p.next();return u.join(`\r
`)};function yl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qw(u){let p="";return M(u,function(w,I){p+=I,p+=":",p+=w,p+=`\r
`}),p}function gm(u,p,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=Qw(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Qe(u,p,w))}function it(u){At.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(it,At);var lk=/^https?$/i,ck=["POST","PUT"];t=it.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cm.g(),this.v=this.o?Tw(this.o):Tw(cm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){Yw(this,F);return}if(u=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)w.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())w.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(F=>F.toLowerCase()=="content-type"),L=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ck,p,void 0))||I||L||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of w)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zw(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){Yw(this,F)}};function Yw(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Xw(u),Pu(u)}function Xw(u){u.A||(u.A=!0,Wt(u,"complete"),Wt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Wt(this,"complete"),Wt(this,"abort"),Pu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pu(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jw(this):this.bb())},t.bb=function(){Jw(this)};function Jw(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Mr(u)!=4||u.Z()!=2)){if(u.u&&Mr(u)==4)ww(u.Ea,0,u);else if(Wt(u,"readystatechange"),Mr(u)==4){u.h=!1;try{const K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var I;if(I=K===0){var L=String(u.D).match(zw)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),I=!lk.test(L?L.toLowerCase():"")}w=I}if(w)Wt(u,"complete"),Wt(u,"success");else{u.m=6;try{var F=2<Mr(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Xw(u)}}finally{Pu(u)}}}}function Pu(u,p){if(u.g){Zw(u);const w=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Wt(u,"ready");try{w.onreadystatechange=I}catch{}}}function Zw(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Mr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),$j(p)}};function e0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uk(u){const p={};u=(u.g&&2<=Mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(S(u[I]))continue;var w=k(u[I]);const L=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const F=p[L]||[];p[L]=F,F.push(w)}T(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vl(u,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||p}function t0(u){this.Aa=0,this.i=[],this.j=new dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vl("baseRetryDelayMs",5e3,u),this.cb=vl("retryDelaySeedMs",1e4,u),this.Wa=vl("forwardChannelMaxRetries",2,u),this.wa=vl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Mw(u&&u.concurrentRequestLimit),this.Da=new ok,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=t0.prototype,t.la=8,t.G=1,t.connect=function(u,p,w,I){Kt(0),this.W=u,this.H=p||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=u0(this,null,this.W),Au(this)};function ym(u){if(n0(u),u.G==3){var p=u.U++,w=Or(u.I);if(Qe(w,"SID",u.K),Qe(w,"RID",p),Qe(w,"TYPE","terminate"),xl(u,w),p=new gs(u,u.j,p),p.L=2,p.v=Cu(Or(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!w&&l.Image&&(new Image().src=p.v,w=!0),w||(p.g=d0(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Su(p)}c0(u)}function Ru(u){u.g&&(xm(u),u.g.cancel(),u.g=null)}function n0(u){Ru(u),u.u&&(l.clearTimeout(u.u),u.u=null),ju(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Au(u){if(!Lw(u.h)&&!u.s){u.s=!0;var p=u.Ga;oe||Q(),V||(oe(),V=!0),$.add(p,u),u.B=0}}function dk(u,p){return Vw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ul(m(u.Ga,u,p),l0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new gs(this,this.j,u);let F=this.o;if(this.S&&(F?(F=E(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=s0(this,L,p),w=Or(this.I),Qe(w,"RID",u),Qe(w,"CVER",22),this.D&&Qe(w,"X-HTTP-Session-Id",this.D),xl(this,w),F&&(this.O?p="headers="+encodeURIComponent(String(Qw(F)))+"&"+p:this.m&&gm(w,this.m,F)),pm(this.h,L),this.Ua&&Qe(w,"TYPE","init"),this.P?(Qe(w,"$req",p),Qe(w,"SID","null"),L.T=!0,dm(L,w,null)):dm(L,w,p),this.G=2}}else this.G==3&&(u?r0(this,u):this.i.length==0||Lw(this.h)||r0(this))};function r0(u,p){var w;p?w=p.l:w=u.U++;const I=Or(u.I);Qe(I,"SID",u.K),Qe(I,"RID",w),Qe(I,"AID",u.T),xl(u,I),u.m&&u.o&&gm(I,u.m,u.o),w=new gs(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),p&&(u.i=p.D.concat(u.i)),p=s0(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pm(u.h,w),dm(w,I,p)}function xl(u,p){u.H&&M(u.H,function(w,I){Qe(p,I,w)}),u.l&&$w({},function(w,I){Qe(p,I,w)})}function s0(u,p,w){w=Math.min(u.i.length,w);var I=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let F=-1;for(;;){const K=["count="+w];F==-1?0<w?(F=L[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let He=!0;for(let Tt=0;Tt<w;Tt++){let Ve=L[Tt].g;const jt=L[Tt].map;if(Ve-=F,0>Ve)F=Math.max(0,L[Tt].g-100),He=!1;else try{ak(jt,K,"req"+Ve+"_")}catch{I&&I(jt)}}if(He){I=K.join("&");break e}}}return u=u.i.splice(0,w),p.D=u,I}function i0(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;oe||Q(),V||(oe(),V=!0),$.add(p,u),u.v=0}}function vm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ul(m(u.Fa,u),l0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,o0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ul(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Ru(this),o0(this))};function xm(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function o0(u){u.g=new gs(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Or(u.qa);Qe(p,"RID","rpc"),Qe(p,"SID",u.K),Qe(p,"AID",u.T),Qe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(p,"TO",u.ja),Qe(p,"TYPE","xmlhttp"),xl(u,p),u.m&&u.o&&gm(p,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Cu(Or(p)),w.m=null,w.P=!0,kw(w,u)}t.Za=function(){this.C!=null&&(this.C=null,Ru(this),vm(this),Kt(19))};function ju(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function a0(u,p){var w=null;if(u.g==p){ju(u),xm(u),u.g=null;var I=2}else if(mm(u.h,p))w=p.D,Fw(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){w=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;I=wu(),Wt(I,new Pw(I,w)),Au(u)}else i0(u);else if(L=p.s,L==3||L==0&&0<p.X||!(I==1&&dk(u,p)||I==2&&vm(u)))switch(w&&0<w.length&&(p=u.h,p.i=p.i.concat(w)),L){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function l0(u,p){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*p}function Ri(u,p){if(u.j.info("Error code "+p),p==2){var w=m(u.fb,u),I=u.Xa;const L=!I;I=new Pi(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tu(I,"https"),Cu(I),L?sk(I.toString(),w):ik(I.toString(),w)}else Kt(2);u.G=0,u.l&&u.l.sa(p),c0(u),n0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function c0(u){if(u.G=0,u.ka=[],u.l){const p=Uw(u.h);(p.length!=0||u.i.length!=0)&&(y(u.ka,p),y(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function u0(u,p,w){var I=w instanceof Pi?Or(w):new Pi(w);if(I.g!="")p&&(I.g=p+"."+I.g),bu(I,I.s);else{var L=l.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var F=new Pi(null);I&&Tu(F,I),p&&(F.g=p),L&&bu(F,L),w&&(F.l=w),I=F}return w=u.D,p=u.ya,w&&p&&Qe(I,w,p),Qe(I,"VER",u.la),xl(u,I),I}function d0(u,p,w){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new it(new Nu({eb:w})):new it(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function h0(){}t=h0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ku(){}ku.prototype.g=function(u,p){return new fn(u,p)};function fn(u,p){At.call(this),this.g=new t0(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!S(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new To(this)}b(fn,At),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){ym(this.g)},fn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=im(u),u=w);p.i.push(new Kj(p.Ya++,u)),p.G==3&&Au(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,ym(this.g),delete this.g,fn.aa.N.call(this)};function f0(u){am.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const w in p){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}b(f0,am);function m0(){lm.call(this),this.status=1}b(m0,lm);function To(u){this.g=u}b(To,h0),To.prototype.ua=function(){Wt(this.g,"a")},To.prototype.ta=function(u){Wt(this.g,new f0(u))},To.prototype.sa=function(u){Wt(this.g,new m0)},To.prototype.ra=function(){Wt(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,DP=function(){return new ku},kP=function(){return wu()},jP=Ni,ly={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_u.NO_ERROR=0,_u.TIMEOUT=8,_u.HTTP_ERROR=6,Vd=_u,Rw.COMPLETE="complete",AP=Rw,bw.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",At.prototype.listen=At.prototype.K,Ul=bw,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,RP=it}).apply(typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{});const JE="@firebase/firestore",ZE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new hx("@firebase/firestore");function Ro(){return ho.logLevel}function re(t,...e){if(ho.logLevel<=Ne.DEBUG){const n=e.map(bx);ho.debug(`Firestore (${nl}): ${t}`,...n)}}function ls(t,...e){if(ho.logLevel<=Ne.ERROR){const n=e.map(bx);ho.error(`Firestore (${nl}): ${t}`,...n)}}function Ma(t,...e){if(ho.logLevel<=Ne.WARN){const n=e.map(bx);ho.warn(`Firestore (${nl}): ${t}`,...n)}}function bx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,OP(t,r,n)}function OP(t,e,n){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ls(r),new Error(r)}function Ue(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||OP(e,s,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class n9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r9{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new MP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class s9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new s9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new e1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new e1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=a9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function cy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return vp(s)===vp(i)?Ie(s,i):vp(s)?1:-1}return Ie(t.length,e.length)}const l9=55296,c9=57343;function vp(t){const e=t.charCodeAt(0);return e>=l9&&e<=c9}function La(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="__name__";class cr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=cr.isNumericId(e),s=cr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cr.extractNumericId(e).compare(cr.extractNumericId(n)):cy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class We extends cr{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new We(n)}static emptyPath(){return new We([])}}const u9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends cr{construct(e,n,r){return new Nt(e,n,r)}static isValidIdentifier(e){return u9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t1}static keyField(){return new Nt([t1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(We.fromString(e))}static fromName(e){return new he(We.fromString(e).popFirst(5))}static empty(){return new he(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e,n){if(!n)throw new Z(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d9(t,e,n,r){if(e===!0&&r===!0)throw new Z(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n1(t){if(!he.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r1(t){if(he.isDocumentKey(t))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function Jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lf(t);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!VP(t))throw new Z(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=-62135596800,i1=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i1);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<s1)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i1}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:mt("string",Je._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Je(0,0))}static max(){return new xe(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=-1;function h9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ui(s,he.empty(),e)}function f9(t){return new ui(t.readTime,t.key,Ac)}class ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ui(xe.min(),he.empty(),Ac)}static max(){return new ui(xe.max(),he.empty(),Ac)}}function m9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==p9)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function y9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=-1;function Ff(t){return t==null}function Uh(t){return t===0&&1/t==-1/0}function v9(t){return typeof t=="number"&&Number.isInteger(t)&&!Uh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="";function x9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o1(e)),e=w9(t.get(n),e);return o1(e)}function w9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case FP:n+="";break;default:n+=i}}return n}function o1(t){return t+FP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Si(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cd(this.root,e,this.comparator,!1)}getReverseIterator(){return new cd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cd(this.root,e,this.comparator,!0)}}class cd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=s??Ct.EMPTY,this.right=i??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ct(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ct.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l1(this.data.getIterator())}getIteratorFrom(e){return new l1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class l1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new vt(Nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $P("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const _9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=_9.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hi(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="server_timestamp",BP="__type__",qP="__previous_value__",HP="__local_write_time__";function Ix(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[BP])==null?void 0:r.stringValue)===zP}function Uf(t){const e=t.mapValue.fields[qP];return Ix(e)?Uf(e):e}function jc(t){const e=di(t.mapValue.fields[HP].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const $h="(default)";class kc{constructor(e,n){this.projectId=e,this.database=n||$h}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="__type__",WP="__max__",ud={mapValue:{fields:{__type__:{stringValue:WP}}}},KP="__vector__",zh="value";function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ix(t)?4:T9(t)?9007199254740991:S9(t)?10:11:ye(28295,{value:t})}function jr(t,e){if(t===e)return!0;const n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jc(t).isEqual(jc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=di(s.timestampValue),l=di(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hi(s.bytesValue).isEqual(hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=lt(s.doubleValue),l=lt(i.doubleValue);return a===l?Uh(a)===Uh(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(a1(a)!==a1(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!jr(a[c],l[c])))return!1;return!0}(t,e);default:return ye(52216,{left:t})}}function Dc(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=fi(t),r=fi(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lt(i.integerValue||i.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return c1(t.timestampValue,e.timestampValue);case 4:return c1(jc(t),jc(e));case 5:return cy(t.stringValue,e.stringValue);case 6:return function(i,a){const l=hi(i),c=hi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ie(l[d],c[d]);if(h!==0)return h}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ie(lt(i.latitude),lt(a.latitude));return l!==0?l:Ie(lt(i.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u1(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,x,b,v;const l=i.fields||{},c=a.fields||{},d=(m=l[zh])==null?void 0:m.arrayValue,h=(x=c[zh])==null?void 0:x.arrayValue,f=Ie(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:u1(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===ud.mapValue&&a===ud.mapValue)return 0;if(i===ud.mapValue)return 1;if(a===ud.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=cy(c[f],h[f]);if(m!==0)return m;const x=Va(l[c[f]],d[h[f]]);if(x!==0)return x}return Ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function c1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=di(t),r=di(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function u1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Va(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Fa(t){return uy(t)}function uy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=uy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${uy(n.fields[a])}`;return s+"}"}(t.mapValue):ye(61005,{value:t})}function Fd(t){switch(fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Fd(e):16;case 5:return 2*t.stringValue.length;case 6:return hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Fd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Si(r.fields,(i,a)=>{s+=i.length+Fd(a)}),s}(t.mapValue);default:throw ye(13486,{value:t})}}function d1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dy(t){return!!t&&"integerValue"in t}function Px(t){return!!t&&"arrayValue"in t}function h1(t){return!!t&&"nullValue"in t}function f1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function S9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[GP])==null?void 0:r.stringValue)===KP}function sc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return{...t}}function T9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=Nt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=sc(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ud(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Si(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(sc(this.value))}}function QP(t){const e=[];return Si(t.fields,(n,r)=>{const s=new Nt([n]);if(Ud(r)){const i=QP(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,xe.min(),xe.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,xe.min(),xe.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.position=e,this.inclusive=n}}function m1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),n.key):r=Va(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function p1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function b9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{}class ft extends YP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new N9(e,n,r):n==="array-contains"?new R9(e,r):n==="in"?new A9(e,r):n==="not-in"?new j9(e,r):n==="array-contains-any"?new k9(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I9(e,r):new P9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Va(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends YP{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rr(e,n)}matches(e){return XP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XP(t){return t.op==="and"}function JP(t){return C9(t)&&XP(t)}function C9(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function hy(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(JP(t))return t.filters.map(e=>hy(e)).join(",");{const e=t.filters.map(n=>hy(n)).join(",");return`${t.op}(${e})`}}function ZP(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&jr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&ZP(a,s.filters[l]),!0):!1}(t,e):void ye(19439)}function eR(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(eR).join(" ,")+"}"}(t):"Filter"}class N9 extends ft{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class I9 extends ft{constructor(e,n){super(e,"in",n),this.keys=tR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class P9 extends ft{constructor(e,n){super(e,"not-in",n),this.keys=tR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class R9 extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Px(n)&&Dc(n.arrayValue,this.value)}}class A9 extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}}class j9 extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}}class k9 extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Px(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function g1(t,e=null,n=[],r=[],s=null,i=null,a=null){return new D9(t,e,n,r,s,i,a)}function Rx(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fa(r)).join(",")),e.Te=n}return e.Te}function Ax(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p1(t.startAt,e.startAt)&&p1(t.endAt,e.endAt)}function fy(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O9(t,e,n,r,s,i,a,l){return new il(t,e,n,r,s,i,a,l)}function jx(t){return new il(t)}function y1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nR(t){return t.collectionGroup!==null}function ic(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new vt(Nt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Oc(i,r))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Oc(Nt.keyField(),r))}return e.Ie}function Nr(t){const e=_e(t);return e.Ee||(e.Ee=M9(e,ic(t))),e.Ee}function M9(t,e){if(t.limitType==="F")return g1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Oc(s.field,i)});const n=t.endAt?new Bh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bh(t.startAt.position,t.startAt.inclusive):null;return g1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function my(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function py(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return Ax(Nr(t),Nr(e))&&t.limitType===e.limitType}function rR(t){return`${Rx(Nr(t))}|lt:${t.limitType}`}function Ao(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>eR(s)).join(", ")}]`),Ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fa(s)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function zf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ic(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=m1(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,ic(r),s)||r.endAt&&!function(a,l,c){const d=m1(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,ic(r),s))}(t,e)}function L9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sR(t){return(e,n)=>{let r=!1;for(const s of ic(t)){const i=V9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function V9(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Va(c,d):ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Si(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return UP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=new st(he.comparator);function cs(){return F9}const iR=new st(he.comparator);function $l(...t){let e=iR;for(const n of t)e=e.insert(n.key,n);return e}function oR(t){let e=iR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Li(){return oc()}function aR(){return oc()}function oc(){return new yo(t=>t.toString(),(t,e)=>t.isEqual(e))}const U9=new st(he.comparator),$9=new vt(he.comparator);function Ae(...t){let e=$9;for(const n of t)e=e.add(n);return e}const z9=new vt(Ie);function B9(){return z9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function lR(t){return{integerValue:""+t}}function q9(t,e){return v9(e)?lR(e):kx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this._=void 0}}function H9(t,e,n){return t instanceof qh?function(s,i){const a={fields:{[BP]:{stringValue:zP},[HP]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ix(i)&&(i=Uf(i)),i&&(a.fields[qP]=i),{mapValue:a}}(n,e):t instanceof Mc?uR(t,e):t instanceof Lc?dR(t,e):function(s,i){const a=cR(s,i),l=v1(a)+v1(s.Ae);return dy(a)&&dy(s.Ae)?lR(l):kx(s.serializer,l)}(t,e)}function G9(t,e,n){return t instanceof Mc?uR(t,e):t instanceof Lc?dR(t,e):n}function cR(t,e){return t instanceof Hh?function(r){return dy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qh extends Bf{}class Mc extends Bf{constructor(e){super(),this.elements=e}}function uR(t,e){const n=hR(e);for(const r of t.elements)n.some(s=>jr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Lc extends Bf{constructor(e){super(),this.elements=e}}function dR(t,e){let n=hR(e);for(const r of t.elements)n=n.filter(s=>!jr(s,r));return{arrayValue:{values:n}}}class Hh extends Bf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function v1(t){return lt(t.integerValue||t.doubleValue)}function hR(t){return Px(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function W9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mc&&s instanceof Mc||r instanceof Lc&&s instanceof Lc?La(r.elements,s.elements,jr):r instanceof Hh&&s instanceof Hh?jr(r.Ae,s.Ae):r instanceof qh&&s instanceof qh}(t.transform,e.transform)}class K9{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qf{}function fR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dx(t.key,Zn.none()):new hu(t.key,t.data,Zn.none());{const n=t.data,r=ln.empty();let s=new vt(Nt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ti(t.key,r,new xn(s.toArray()),Zn.none())}}function Q9(t,e,n){t instanceof hu?function(s,i,a){const l=s.value.clone(),c=w1(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(s,i,a){if(!$d(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=w1(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(mR(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ac(t,e,n,r){return t instanceof hu?function(i,a,l,c){if(!$d(i.precondition,a))return l;const d=i.value.clone(),h=_1(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(i,a,l,c){if(!$d(i.precondition,a))return l;const d=_1(i.fieldTransforms,c,a),h=a.data;return h.setAll(mR(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return $d(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function Y9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=cR(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function x1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&La(r,s,(i,a)=>W9(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends qf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ti extends qf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w1(t,e,n){const r=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,G9(a,l,n[s]))}return r}function _1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,H9(i,a,e))}return r}class Dx extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X9 extends qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Q9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aR();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=fR(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(n,r)=>x1(n,r))&&La(this.baseMutations,e.baseMutations,(n,r)=>x1(n,r))}}class Ox{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return U9}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Ox(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,De;function t$(t){switch(t){case z.OK:return ye(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function pR(t){if(t===void 0)return ls("GRPC error has no .code"),z.UNKNOWN;switch(t){case dt.OK:return z.OK;case dt.CANCELLED:return z.CANCELLED;case dt.UNKNOWN:return z.UNKNOWN;case dt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case dt.INTERNAL:return z.INTERNAL;case dt.UNAVAILABLE:return z.UNAVAILABLE;case dt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case dt.NOT_FOUND:return z.NOT_FOUND;case dt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case dt.ABORTED:return z.ABORTED;case dt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case dt.DATA_LOSS:return z.DATA_LOSS;default:return ye(39323,{code:t})}}(De=dt||(dt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$=new ti([4294967295,4294967295],0);function E1(t){const e=n$().encode(t),n=new PP;return n.update(e),new Uint8Array(n.digest())}function S1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ti([n,r],0),new ti([s,i],0)]}class Mx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ti.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ti.fromNumber(r)));return s.compare(r$)===1&&(s=new ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=E1(e),[r,s]=S1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Mx(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=E1(e),[r,s]=S1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hf(xe.min(),s,new st(Ie),cs(),Ae())}}class fu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class gR{constructor(e,n){this.targetId=e,this.Ce=n}}class yR{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class T1{constructor(){this.ve=0,this.Fe=b1(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye(38017,{changeType:i})}}),new fu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=b1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class s${constructor(e){this.Ge=e,this.ze=new Map,this.je=cs(),this.Je=dd(),this.He=dd(),this.Ye=new st(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(fy(i))if(r===0){const a=new he(i.path);this.et(n,a,Ut.newNoDocument(a,xe.min()))}else Ue(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=hi(r).toUint8Array()}catch(c){if(c instanceof $P)return Ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Mx(a,s,i)}catch(c){return Ma(c instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&fy(l.target)){const c=new he(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Ut.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Hf(e,n,this.Ye,this.je,r);return this.je=cs(),this.Je=dd(),this.He=dd(),this.Ye=new st(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new T1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dd(){return new st(he.comparator)}function b1(){return new st(he.comparator)}const i$={asc:"ASCENDING",desc:"DESCENDING"},o$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a$={and:"AND",or:"OR"};class l${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||Ff(e)?e:{value:e}}function Gh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c$(t,e){return Gh(t,e.toTimestamp())}function Ir(t){return Ue(!!t,49232),xe.fromTimestamp(function(n){const r=di(n);return new Je(r.seconds,r.nanos)}(t))}function Lx(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=function(s){return new We(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xR(t){const e=We.fromString(t);return Ue(TR(e),10190,{key:e.toString()}),e}function vy(t,e){return Lx(t.databaseId,e.path)}function xp(t,e){const n=xR(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(_R(n))}function wR(t,e){return Lx(t.databaseId,e)}function u$(t){const e=xR(t);return e.length===4?We.emptyPath():_R(e)}function xy(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function C1(t,e,n){return{name:vy(t,e),fields:n.value.mapValue.fields}}function d$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),Rt.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?z.UNKNOWN:pR(d.code);return new Z(h,d.message||"")}(a);n=new yR(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xp(t,r.document.name),i=Ir(r.document.updateTime),a=r.document.createTime?Ir(r.document.createTime):xe.min(),l=new ln({mapValue:{fields:r.document.fields}}),c=Ut.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new zd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xp(t,r.document),i=r.readTime?Ir(r.readTime):xe.min(),a=Ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new zd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xp(t,r.document),i=r.removedTargetIds||[];n=new zd([],i,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new e$(s,i),l=r.targetId;n=new gR(l,a)}}return n}function h$(t,e){let n;if(e instanceof hu)n={update:C1(t,e.key,e.value)};else if(e instanceof Dx)n={delete:vy(t,e.key)};else if(e instanceof Ti)n={update:C1(t,e.key,e.data),updateMask:_$(e.fieldMask)};else{if(!(e instanceof X9))return ye(16599,{Vt:e.type});n={verify:vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof qh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Lc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hh)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:c$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ye(27497)}(t,e.precondition)),n}function f$(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Ir(s.updateTime):Ir(i);return a.isEqual(xe.min())&&(a=Ir(i)),new K9(a,s.transformResults||[])}(n,e))):[]}function m$(t,e){return{documents:[wR(t,e.path)]}}function p$(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wR(t,s);const i=function(d){if(d.length!==0)return SR(rr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:jo(m.field),direction:v$(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=gy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function g$(t){let e=u$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ue(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=ER(f);return m instanceof rr&&JP(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(b){return new Oc(ko(b.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Ff(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,x=f.values||[];return new Bh(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,x=f.values||[];return new Bh(x,m)}(n.endAt)),O9(e,s,a,i,l,"F",c,d)}function y$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ER(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ko(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ko(n.unaryFilter.field);return ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(ko(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>ER(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(t):ye(30097,{filter:t})}function v$(t){return i$[t]}function x$(t){return o$[t]}function w$(t){return a$[t]}function jo(t){return{fieldPath:t.canonicalString()}}function ko(t){return Nt.fromServerFormat(t.fieldPath)}function SR(t){return t instanceof ft?function(n){if(n.op==="=="){if(f1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(h1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(h1(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:x$(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>SR(s));return r.length===1?r[0]:{compositeFilter:{op:w$(n.op),filters:r}}}(t):ye(54877,{filter:t})}function _$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=xe.min(),a=xe.min(),l=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.yt=e}}function S$(t){const e=g$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?py(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(){this.Cn=new b$}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ui.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class b${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(We.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bR=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(bR,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ua(0)}static cr(){return new Ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="LruGarbageCollector",C$=1048576;function P1([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class N${constructor(e){this.Ir=e,this.buffer=new vt(P1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(I1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?re(I1,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)})}}class P${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Vf.ce);const r=new N$(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(N1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Ro()<=Ne.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function R$(t,e){return new P$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(){this.changes=new yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ac(r.mutation,s,xn.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Li();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=$l();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=cs();const a=oc(),l=function(){return oc()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ti)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ac(h.mutation,d,h.mutation.getFieldMask(),Je.now())):a.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new j$(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=oc();let s=new st((a,l)=>a-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||xn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Ae()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=aR();h.forEach(m=>{if(!i.has(m)){const x=fR(n.get(m),r.get(m));x!==null&&f.set(m,x),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Li());let l=Ac,c=i;return a.next(d=>q.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ae())).next(h=>({batchId:l,changes:oR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let s=$l();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=$l();return this.indexManager.getCollectionParents(e,i).next(l=>q.forEach(l,c=>{const d=function(f,m){return new il(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Ut.newInvalidDocument(h)))});let l=$l();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&ac(h.mutation,d,xn.empty(),Je.now()),zf(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ir(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:S$(s.bundledQuery),readTime:Ir(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this.overlays=new st(he.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Li();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Li(),i=n.length+1,a=new he(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new st((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Li(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Li(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Z9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.Qr=new vt(xt.$r),this.Ur=new vt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new We([])),r=new xt(n,e),s=new xt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new We([])),r=new xt(n,e),s=new xt(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(xt.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new J9(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new xt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Nx:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),s=new xt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Ie);return n.forEach(s=>{const i=new xt(s,0),a=new xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const a=new xt(new he(i),0);let l=new vt(Ie);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xt(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e){this.ri=e,this.docs=function(){return new st(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=cs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ut.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cs();const a=n.path,l=new he(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||m9(f9(h),r)<=0||(s.has(h.key)||zf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ye(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new F$(this)}getSize(e){return q.resolve(this.size)}}class F$ extends A${constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.persistence=e,this.si=new yo(n=>Rx(n),Ax),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Vx,this.targetCount=0,this.ai=Ua.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ua(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vf(0),this.li=!1,this.li=!0,this.hi=new M$,this.referenceDelegate=e(this),this.Pi=new U$(this),this.indexManager=new T$,this.remoteDocumentCache=function(s){return new V$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new E$(n),this.Ii=new D$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new O$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new L$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new $$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $$ extends g9{constructor(e){super(),this.currentSequenceNumber=e}}class Fx{constructor(e){this.persistence=e,this.Ri=new Vx,this.Vi=null}static mi(e){return new Fx(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=he.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wh{constructor(e,n){this.persistence=e,this.pi=new yo(r=>x9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=R$(this,n)}static mi(e,n){return new Wh(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fd(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ux(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return w6()?8:y9(Ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new z$;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ro()<=Ne.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Ro()<=Ne.DEBUG&&re("QueryEngine","Query:",Ao(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ro()<=Ne.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):q.resolve())}ys(e,n){if(y1(n))return q.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=py(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ae(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,py(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return y1(n)||s.isEqual(xe.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?q.resolve(null):(Ro()<=Ne.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ao(n)),this.vs(e,a,n,h9(s,Ac)).next(l=>l))})}Ds(e,n){let r=new vt(sR(e));return n.forEach((s,i)=>{zf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ro()<=Ne.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.ps.getDocumentsMatchingQuery(e,n,ui.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LocalStore",q$=3e8;class H${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new st(Ie),this.xs=new yo(i=>Rx(i),Ax),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function G$(t,e,n,r){return new H$(t,e,n,r)}async function NR(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ae();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function W$(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let x=q.resolve();return m.forEach(b=>{x=x.next(()=>h.getEntry(c,b)).next(v=>{const y=d.docVersions.get(b);Ue(y!==null,48541),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function IR(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function K$(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(Rt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(f,x),function(v,y,_){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=q$?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,x,h)&&l.push(n.Pi.updateTargetData(i,x))});let c=cs(),d=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Q$(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(xe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function Q$(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=cs();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):re($x,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function Y$(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Nx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X$(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Bs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function wy(t,e,n){const r=_e(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sl(a))throw a;re($x,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function R1(t,e,n){const r=_e(t);let s=xe.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=_e(c),m=f.xs.get(h);return m!==void 0?q.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,Nr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:xe.min(),n?i:Ae())).next(l=>(J$(r,L9(e),l),{documents:l,Qs:i})))}function J$(t,e,n){let r=t.Os.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class A1{constructor(){this.activeTargetIds=B9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z${constructor(){this.Mo=new A1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="ConnectivityMonitor";class k1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(j1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(j1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd=null;function _y(){return hd===null?hd=function(){return 268435456+Math.round(2147483648*Math.random())}():hd++,"0x"+hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",t8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class n8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=_y(),l=this.zo(e,n.toUriEncodedString());re(wp,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=Za(d);return this.Jo(e,l,c,r,h).then(f=>(re(wp,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Ma(wp,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=t8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class s8 extends n8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=_y();return new Promise((l,c)=>{const d=new RP;d.setWithCredentials(!0),d.listenOnce(AP.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Vd.NO_ERROR:const f=d.getResponseJson();re(Mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Vd.TIMEOUT:re(Mt,`RPC '${e}' ${a} timed out`),c(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const m=d.getStatus();if(re(Mt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const v=function(_){const S=_.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(S)>=0?S:z.UNKNOWN}(b.status);c(new Z(v,b.message))}else c(new Z(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Z(z.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{re(Mt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);re(Mt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=_y(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=DP(),l=kP(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");re(Mt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,x=!1;const b=new r8({Yo:y=>{x?re(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(m||(re(Mt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),re(Mt,`RPC '${e}' stream ${s} sending:`,y),f.send(y))},Zo:()=>f.close()}),v=(y,_,S)=>{y.listen(_,C=>{try{S(C)}catch(R){setTimeout(()=>{throw R},0)}})};return v(f,Ul.EventType.OPEN,()=>{x||(re(Mt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),v(f,Ul.EventType.CLOSE,()=>{x||(x=!0,re(Mt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),v(f,Ul.EventType.ERROR,y=>{x||(x=!0,Ma(Mt,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),b.a_(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ul.EventType.MESSAGE,y=>{var _;if(!x){const S=y.data[0];Ue(!!S,16349);const C=S,R=(C==null?void 0:C.error)||((_=C[0])==null?void 0:_.error);if(R){re(Mt,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let M=function(N){const P=dt[N];if(P!==void 0)return pR(P)}(D),T=R.message;M===void 0&&(M=z.INTERNAL,T="Unknown error status: "+D+" with message "+R.message),x=!0,b.a_(new Z(M,T)),f.close()}else re(Mt,`RPC '${e}' stream ${s} received:`,S),b.u_(S)}}),v(l,jP.STAT_EVENT,y=>{y.stat===ly.PROXY?re(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):y.stat===ly.NOPROXY&&re(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return new l$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="PersistentStream";class RR{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ls(n.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return re(D1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(re(D1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i8 extends RR{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=d$(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Ir(a.readTime):xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xy(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=fy(c)?{documents:m$(i,c)}:{query:p$(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=vR(i,a.resumeToken);const d=gy(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){l.readTime=Gh(i,a.snapshotVersion.toTimestamp());const d=gy(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=y$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xy(this.serializer),n.removeTarget=e,this.q_(n)}}class o8 extends RR{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=f$(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>h$(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{}class l8 extends a8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,yy(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,yy(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class c8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class u8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{vo(this)&&(re(fo,"Restarting streams for network reachability change."),await async function(c){const d=_e(c);d.Ea.add(4),await mu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Wf(d)}(this))})}),this.Ra=new c8(r,s)}}async function Wf(t){if(vo(t))for(const e of t.da)await e(!0)}async function mu(t){for(const e of t.da)await e(!1)}function AR(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Hx(n)?qx(n):ol(n).O_()&&Bx(n,e))}function zx(t,e){const n=_e(t),r=ol(n);n.Ia.delete(e),r.O_()&&jR(n,e),n.Ia.size===0&&(r.O_()?r.L_():vo(n)&&n.Ra.set("Unknown"))}function Bx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).Y_(e)}function jR(t,e){t.Va.Ue(e),ol(t).Z_(e)}function qx(t){t.Va=new s$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.Ra.ua()}function Hx(t){return vo(t)&&!ol(t).x_()&&t.Ia.size>0}function vo(t){return _e(t).Ea.size===0}function kR(t){t.Va=void 0}async function d8(t){t.Ra.set("Online")}async function h8(t){t.Ia.forEach((e,n)=>{Bx(t,e)})}async function f8(t,e){kR(t),Hx(t)?(t.Ra.ha(e),qx(t)):t.Ra.set("Unknown")}async function m8(t,e,n){if(t.Ra.set("Online"),e instanceof yR&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){re(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(t,r)}else if(e instanceof zd?t.Va.Ze(e):e instanceof gR?t.Va.st(e):t.Va.tt(e),!n.isEqual(xe.min()))try{const r=await IR(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Rt.EMPTY_BYTE_STRING,h.snapshotVersion)),jR(i,c);const f=new Bs(h.target,c,d,h.sequenceNumber);Bx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){re(fo,"Failed to raise snapshot:",r),await Kh(t,r)}}async function Kh(t,e,n){if(!sl(e))throw e;t.Ea.add(1),await mu(t),t.Ra.set("Offline"),n||(n=()=>IR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re(fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wf(t)})}function DR(t,e){return e().catch(n=>Kh(t,n,e))}async function Kf(t){const e=_e(t),n=mi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nx;for(;p8(e);)try{const s=await Y$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,g8(e,s)}catch(s){await Kh(e,s)}OR(e)&&MR(e)}function p8(t){return vo(t)&&t.Ta.length<10}function g8(t,e){t.Ta.push(e);const n=mi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function OR(t){return vo(t)&&!mi(t).x_()&&t.Ta.length>0}function MR(t){mi(t).start()}async function y8(t){mi(t).ra()}async function v8(t){const e=mi(t);for(const n of t.Ta)e.ea(n.mutations)}async function x8(t,e,n){const r=t.Ta.shift(),s=Ox.from(r,e,n);await DR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Kf(t)}async function w8(t,e){e&&mi(t).X_&&await async function(r,s){if(function(a){return t$(a)&&a!==z.ABORTED}(s.code)){const i=r.Ta.shift();mi(r).B_(),await DR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Kf(r)}}(t,e),OR(t)&&MR(t)}async function O1(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),re(fo,"RemoteStore received new credentials");const r=vo(n);n.Ea.add(3),await mu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wf(n)}async function _8(t,e){const n=_e(t);e?(n.Ea.delete(2),await Wf(n)):e||(n.Ea.add(2),await mu(n),n.Ra.set("Unknown"))}function ol(t){return t.ma||(t.ma=function(n,r,s){const i=_e(n);return i.sa(),new i8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:d8.bind(null,t),t_:h8.bind(null,t),r_:f8.bind(null,t),H_:m8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Hx(t)?qx(t):t.Ra.set("Unknown")):(await t.ma.stop(),kR(t))})),t.ma}function mi(t){return t.fa||(t.fa=function(n,r,s){const i=_e(n);return i.sa(),new o8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:y8.bind(null,t),r_:w8.bind(null,t),ta:v8.bind(null,t),na:x8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Kf(t)):(await t.fa.stop(),t.Ta.length>0&&(re(fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Gx(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wx(t,e){if(ls("AsyncQueue",`${e}: ${t}`),sl(t))return new Z(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{static emptySet(e){return new ca(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=$l(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ca)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ca;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.ga=new st(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new $a(e,n,ca.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class S8{constructor(){this.queries=L1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=L1(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function L1(){return new yo(t=>rR(t),$f)}async function T8(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new E8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Wx(a,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Kx(n)}async function b8(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function C8(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Kx(n)}function N8(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Kx(t){t.Ca.forEach(e=>{e.next()})}var Ey,V1;(V1=Ey||(Ey={})).Ma="default",V1.Cache="cache";class I8{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.key=e}}class VR{constructor(e){this.key=e}}class P8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=sR(e),this.tu=new ca(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new M1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),x=zf(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),v=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let y=!1;m&&x?m.data.isEqual(x.data)?b!==v&&(r.track({type:3,doc:x}),y=!0):this.su(m,x)||(r.track({type:2,doc:x}),y=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),y=!0):m&&!x&&(r.track({type:1,doc:m}),y=!0,(c||d)&&(l=!0)),y&&(x?(a=a.add(x),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(x,b){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:y})}};return v(x)-v(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new $a(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new M1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new VR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new LR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qx="SyncEngine";class R8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class A8{constructor(e){this.key=e,this.hu=!1}}class j8{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new yo(l=>rR(l),$f),this.Iu=new Map,this.Eu=new Set,this.du=new st(he.comparator),this.Au=new Map,this.Ru=new Vx,this.Vu={},this.mu=new Map,this.fu=Ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k8(t,e,n=!0){const r=qR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await FR(r,e,n,!0),s}async function D8(t,e){const n=qR(t);await FR(n,e,!0,!1)}async function FR(t,e,n,r){const s=await X$(t.localStore,Nr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await O8(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&AR(t.remoteStore,s),l}async function O8(t,e,n,r,s){t.pu=(f,m,x)=>async function(v,y,_,S){let C=y.view.ru(_);C.Cs&&(C=await R1(v.localStore,y.query,!1).then(({documents:T})=>y.view.ru(T,C)));const R=S&&S.targetChanges.get(y.targetId),D=S&&S.targetMismatches.get(y.targetId)!=null,M=y.view.applyChanges(C,v.isPrimaryClient,R,D);return U1(v,y.targetId,M.au),M.snapshot}(t,f,m,x);const i=await R1(t.localStore,e,!0),a=new P8(e,i.Qs),l=a.ru(i.documents),c=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);U1(t,n,d.au);const h=new R8(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function M8(t,e,n){const r=_e(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!$f(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zx(r.remoteStore,s.targetId),Sy(r,s.targetId)}).catch(rl)):(Sy(r,s.targetId),await wy(r.localStore,s.targetId,!0))}async function L8(t,e){const n=_e(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zx(n.remoteStore,r.targetId))}async function V8(t,e,n){const r=H8(t);try{const s=await function(a,l){const c=_e(a),d=Je.now(),h=l.reduce((x,b)=>x.add(b.key),Ae());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let b=cs(),v=Ae();return c.Ns.getEntries(x,h).next(y=>{b=y,b.forEach((_,S)=>{S.isValidDocument()||(v=v.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,b)).next(y=>{f=y;const _=[];for(const S of l){const C=Y9(S,f.get(S.key).overlayedDocument);C!=null&&_.push(new Ti(S.key,C,QP(C.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,_,l)}).next(y=>{m=y;const _=y.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(x,y.batchId,_)})}).then(()=>({batchId:m.batchId,changes:oR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new st(Ie)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await pu(r,s.changes),await Kf(r.remoteStore)}catch(s){const i=Wx(s,"Failed to persist write");n.reject(i)}}async function UR(t,e){const n=_e(t);try{const r=await K$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ue(a.hu,14607):s.removedDocuments.size>0&&(Ue(a.hu,42227),a.hu=!1))}),await pu(n,r,e)}catch(r){await rl(r)}}function F1(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=_e(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&Kx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F8(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new st(he.comparator);a=a.insert(i,Ut.newNoDocument(i,xe.min()));const l=Ae().add(i),c=new Hf(xe.min(),new Map,new st(Ie),a,l);await UR(r,c),r.du=r.du.remove(i),r.Au.delete(e),Yx(r)}else await wy(r.localStore,e,!1).then(()=>Sy(r,e,n)).catch(rl)}async function U8(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await W$(n.localStore,e);zR(n,r,null),$R(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,s)}catch(s){await rl(s)}}async function $8(t,e,n){const r=_e(t);try{const s=await function(a,l){const c=_e(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ue(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);zR(r,e,n),$R(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,s)}catch(s){await rl(s)}}function $R(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function zR(t,e,n){const r=_e(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Sy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||BR(t,r)})}function BR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Yx(t))}function U1(t,e,n){for(const r of n)r instanceof LR?(t.Ru.addReference(r.key,e),z8(t,r)):r instanceof VR?(re(Qx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||BR(t,r.key)):ye(19791,{wu:r})}function z8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(re(Qx,"New document in limbo: "+n),t.Eu.add(r),Yx(t))}function Yx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(We.fromString(e)),r=t.fu.next();t.Au.set(r,new A8(n)),t.du=t.du.insert(n,r),AR(t.remoteStore,new Bs(Nr(jx(n.path)),r,"TargetPurposeLimboResolution",Vf.ce))}}async function pu(t,e,n){const r=_e(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Ux.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(d,m=>q.forEach(m.Es,x=>h.persistence.referenceDelegate.addReference(f,m.targetId,x)).next(()=>q.forEach(m.ds,x=>h.persistence.referenceDelegate.removeReference(f,m.targetId,x)))))}catch(f){if(!sl(f))throw f;re($x,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const x=h.Ms.get(m),b=x.snapshotVersion,v=x.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function B8(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){re(Qx,"User change. New user:",e.toKey());const r=await NR(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Z(z.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ls)}}function q8(t,e){const n=_e(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function qR(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F8.bind(null,e),e.Pu.H_=C8.bind(null,e.eventManager),e.Pu.yu=N8.bind(null,e.eventManager),e}function H8(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$8.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return G$(this.persistence,new B$,e.initialUser,this.serializer)}Cu(e){return new CR(Fx.mi,this.serializer)}Du(e){return new Z$}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class G8 extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof Wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I$(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new CR(r=>Wh.mi(r,n),this.serializer)}}class Ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B8.bind(null,this.syncEngine),await _8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S8}()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),r=function(i){return new s8(i)}(e.databaseInfo);return function(i,a,l,c){return new l8(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new u8(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>F1(this.syncEngine,n,0),function(){return k1.v()?new k1:new e8}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new j8(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);re(fo,"RemoteStore shutting down."),i.Ea.add(5),await mu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="FirestoreClient";class K8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=Cx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{re(pi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(re(pi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ep(t,e){t.asyncQueue.verifyOperationInProgress(),re(pi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await NR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Q8(t);re(pi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>O1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>O1(e.remoteStore,s)),t._onlineComponents=e}async function Q8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(pi,"Using user provided OfflineComponentProvider");try{await Ep(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ma("Error using user provided cache. Falling back to memory cache: "+n),await Ep(t,new Qh)}}else re(pi,"Using default OfflineComponentProvider"),await Ep(t,new G8(void 0));return t._offlineComponents}async function HR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(pi,"Using user provided OnlineComponentProvider"),await $1(t,t._uninitializedComponentsProvider._online)):(re(pi,"Using default OnlineComponentProvider"),await $1(t,new Ty))),t._onlineComponents}function Y8(t){return HR(t).then(e=>e.syncEngine)}async function z1(t){const e=await HR(t),n=e.eventManager;return n.onListen=k8.bind(null,e.syncEngine),n.onUnlisten=M8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L8.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firestore.googleapis.com",q1=!0;class H1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WR,this.ssl=q1}else this.host=e.host,this.ssl=e.ssl??q1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<C$)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new t9;switch(r.type){case"firstParty":return new i9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B1.get(n);r&&(re("ComponentProvider","Removing Datastore"),B1.delete(n),r.terminate())}(this),Promise.resolve()}}function X8(t,e,n,r={}){var d;t=Jr(t,Qf);const s=Za(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(FI(`https://${l}`),UI("Firestore",!0)),i.host!==WR&&i.host!==l&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!ao(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Vt.MOCK_USER;else{h=d6(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vt(m)}t._authCredentials=new n9(new MP(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,ut._jsonSchema))return new ut(e,r||null,new he(We.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:mt("string",ut._jsonSchemaVersion),referencePath:mt("string")};class ni extends xo{constructor(e,n,r){super(e,n,jx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new he(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function J8(t,e,...n){if(t=Et(t),LP("collection","path",e),t instanceof Qf){const r=We.fromString(e,...n);return r1(r),new ni(t,null,r)}{if(!(t instanceof ut||t instanceof ni))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return r1(r),new ni(t.firestore,null,r)}}function Sp(t,e,...n){if(t=Et(t),arguments.length===1&&(e=Cx.newId()),LP("doc","path",e),t instanceof Qf){const r=We.fromString(e,...n);return n1(r),new ut(t,null,new he(r))}{if(!(t instanceof ut||t instanceof ni))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return n1(r),new ut(t.firestore,t instanceof ni?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="AsyncQueue";class W1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PR(this,"async_queue_retry"),this._c=()=>{const r=_p();r&&re(G1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Wi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;re(G1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",K1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Gx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:K1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function K1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class za extends Qf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new W1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W1(e),this._firestoreClient=void 0,await e}}}function Z8(t,e){const n=typeof t=="object"?t:qI(),r=typeof t=="string"?t:$h,s=mx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=c6("firestore");i&&X8(s,...i)}return s}function KR(t){if(t._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ez(t),t._firestoreClient}function ez(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new E9(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new K8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Rt.fromBase64String(e))}catch(n){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:mt("string",Pn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pr._jsonSchemaVersion}}static fromJSON(e){if(du(e,Pr._jsonSchema))return new Pr(e.latitude,e.longitude)}}Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:mt("string",Pr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,Rr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rr(e.vectorValues);throw new Z(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rr._jsonSchemaVersion="firestore/vectorValue/1.0",Rr._jsonSchema={type:mt("string",Rr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=/^__.*__$/;class nz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class QR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:t})}}class Jx{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YR(this.Ac)&&tz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gf(e)}Cc(e,n,r,s=!1){return new Jx({Ac:e,methodName:n,Dc:r,path:Nt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zx(t){const e=t._freezeSettings(),n=Gf(t._databaseId);return new rz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sz(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);ew("Data must be an object, but it was:",a,r);const l=XR(r,a);let c,d;if(i.merge)c=new xn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=by(e,f,n);if(!a.contains(m))throw new Z(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ZR(h,m)||h.push(m)}c=new xn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new nz(new ln(l),c,d)}class Xf extends Xx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function iz(t,e,n,r){const s=t.Cc(1,e,n);ew("Data must be an object, but it was:",s,r);const i=[],a=ln.empty();Si(r,(c,d)=>{const h=tw(e,c,n);d=Et(d);const f=s.yc(h);if(d instanceof Xf)i.push(h);else{const m=gu(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new xn(i);return new QR(a,l,s.fieldTransforms)}function oz(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[by(e,r,n)],c=[s];if(i.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(by(e,i[m])),c.push(i[m+1]);const d=[],h=ln.empty();for(let m=l.length-1;m>=0;--m)if(!ZR(d,l[m])){const x=l[m];let b=c[m];b=Et(b);const v=a.yc(x);if(b instanceof Xf)d.push(x);else{const y=gu(b,v);y!=null&&(d.push(x),h.set(x,y))}}const f=new xn(d);return new QR(h,f,a.fieldTransforms)}function az(t,e,n,r=!1){return gu(n,t.Cc(r?4:3,e))}function gu(t,e){if(JR(t=Et(t)))return ew("Unsupported field value:",e,t),XR(t,e);if(t instanceof Xx)return function(r,s){if(!YR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=gu(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Gh(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gh(s.serializer,i)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:vR(s.serializer,r._byteString)};if(r instanceof ut){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Rr)return function(a,l){return{mapValue:{fields:{[GP]:{stringValue:KP},[zh]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return kx(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Lf(r)}`)}(t,e)}function XR(t,e){const n={};return UP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Si(t,(r,s)=>{const i=gu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function JR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Pr||t instanceof Pn||t instanceof ut||t instanceof Xx||t instanceof Rr)}function ew(t,e,n){if(!JR(n)||!VP(n)){const r=Lf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function by(t,e,n){if((e=Et(e))instanceof Yf)return e._internalPath;if(typeof e=="string")return tw(t,e);throw Yh("Field path arguments must be of type string or ",t,!1,void 0,n)}const lz=new RegExp("[~\\*/\\[\\]]");function tw(t,e,n){if(e.search(lz)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yf(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yh(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(z.INVALID_ARGUMENT,l+t+c)}function ZR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cz extends eA{data(){return super.data()}}function nw(t,e){return typeof e=="string"?tw(t,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rw{}class tA extends rw{}function dz(t,e,...n){let r=[];e instanceof rw&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof iw).length,l=i.filter(c=>c instanceof sw).length;if(a>1||a>0&&l>0)throw new Z(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class sw extends tA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sw(e,n,r)}_apply(e){const n=this._parse(e);return nA(e._query,n),new xo(e.firestore,e.converter,my(e._query,n))}_parse(e){const n=Zx(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X1(f,h);const b=[];for(const v of f)b.push(Y1(c,i,v));m={arrayValue:{values:b}}}else m=Y1(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X1(f,h),m=az(l,a,f,h==="in"||h==="not-in");return ft.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class iw extends rw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new iw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)nA(a,c),a=my(a,c)}(e._query,n),new xo(e.firestore,e.converter,my(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ow extends tA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ow(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(i,a)}(e._query,this._field,this._direction);return new xo(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new il(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function hz(t,e="asc"){const n=e,r=nw("orderBy",t);return ow._create(r,n)}function Y1(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new Z(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nR(e)&&n.indexOf("/")!==-1)throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(We.fromString(n));if(!he.isDocumentKey(r))throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return d1(t,new he(r))}if(n instanceof ut)return d1(t,n._key);throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lf(n)}.`)}function X1(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nA(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class fz{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Si(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[zh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>lt(a.doubleValue));return new Rr(n)}convertGeoPoint(e){return new Pr(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const n=di(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Ue(TR(r),9688,{name:e});const s=new kc(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(n)||ls(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ki extends eA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ki._jsonSchema={type:mt("string",Ki._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Bd extends Ki{data(e={}){return super.data(e)}}class ua{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bd(this._firestore,this._userDataWriter,r.key,r,new Bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:pz(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ua._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}ua._jsonSchemaVersion="firestore/querySnapshot/1.0",ua._jsonSchema={type:mt("string",ua._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class rA extends fz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function gz(t,e,n){t=Jr(t,ut);const r=Jr(t.firestore,za),s=mz(t.converter,e);return aw(r,[sz(Zx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Zn.none())])}function yz(t,e,n,...r){t=Jr(t,ut);const s=Jr(t.firestore,za),i=Zx(s);let a;return a=typeof(e=Et(e))=="string"||e instanceof Yf?oz(i,"updateDoc",t._key,e,n,r):iz(i,"updateDoc",t._key,e),aw(s,[a.toMutation(t._key,Zn.exists(!0))])}function vz(t){return aw(Jr(t.firestore,za),[new Dx(t._key,Zn.none())])}function xz(t,...e){var c,d,h;t=Et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Q1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Q1(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof ut)a=Jr(t.firestore,za),l=jx(t._key.path),i={next:f=>{e[r]&&e[r](wz(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Jr(t,xo);a=Jr(f.firestore,za),l=f._query;const m=new rA(a);i={next:x=>{e[r]&&e[r](new ua(a,m,f,x))},error:e[r+1],complete:e[r+2]},uz(t._query)}return function(m,x,b,v){const y=new W8(v),_=new I8(x,y,b);return m.asyncQueue.enqueueAndForget(async()=>T8(await z1(m),_)),()=>{y.Nu(),m.asyncQueue.enqueueAndForget(async()=>b8(await z1(m),_))}}(KR(a),l,s,i)}function aw(t,e){return function(r,s){const i=new Wi;return r.asyncQueue.enqueueAndForget(async()=>V8(await Y8(r),s,i)),i.promise}(KR(t),e)}function wz(t,e,n){const r=n.docs.get(e._key),s=new rA(t);return new Ki(t,s,e._key,r,new Bl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){nl=s})(el),Oa(new lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new za(new r9(r.getProvider("auth-internal")),new o9(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ei(JE,ZE,e),ei(JE,ZE,"esm2020")})();const _z={apiKey:"AIzaSyBr7Vti_UUKtHV3wCA0FfNPmvT1AYC0yFM",authDomain:"passpilot-55c3d.firebaseapp.com",projectId:"passpilot-55c3d",storageBucket:"passpilot-55c3d.firebasestorage.app",appId:"1:134904289902:web:e62d187d4ef81703cfe47f"};let Tp=null,Do=null,ql=null;try{Tp=BI(_z),Do=ZU(Tp),ql=Z8(Tp),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const Ez=new Br;class Qo{constructor(){}static getInstance(){return Qo.instance||(Qo.instance=new Qo),Qo.instance}isConfigured(){return!0}async signInWithGoogle(){if(!this.isConfigured())throw new Error("Firebase not configured");return fU(Do,Ez)}async handleRedirectResult(){if(!this.isConfigured())throw new Error("Firebase not configured");return pU(Do)}async signInWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return F5(Do,e,n)}async createUserWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return V5(Do,e,n)}async signOut(){if(!this.isConfigured())throw new Error("Firebase not configured");return z5(Do)}async setDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Sp(ql,e);return gz(r,n)}async updateDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Sp(ql,e);return yz(r,n)}async deleteDocument(e){if(!this.isConfigured())throw new Error("Firebase not configured");const n=Sp(ql,e);return vz(n)}onSnapshot(e,n){if(!this.isConfigured())return console.warn("Firebase not configured, using mock data"),()=>{};const r=J8(ql,e),s=dz(r,hz("createdAt","desc"));return xz(s,i=>{const a=i.docs.map(l=>({id:l.id,...l.data()}));n(a)})}}const Sz=Qo.getInstance();function Tz(){const{data:t=[],isLoading:e}=$t({queryKey:["/api/passes/active"],refetchInterval:5e3});return{passes:t,isLoading:e}}function J1({user:t,selectedGrades:e=new Set}){const{passes:n,isLoading:r}=Tz(),[s,i]=g.useState("all");if(r)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const a=f=>{const m=new Date,x=new Date(f),b=m.getTime()-x.getTime();return`${Math.floor(b/(1e3*60))} min`},l=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),c=f=>{const m=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],x=f.length%m.length;return m[x]},d=f=>{switch(f){case"nurse":return o.jsx(jn,{variant:"outline",className:"bg-red-50 text-red-600 border-red-200",children:"Nurse"});case"discipline":return o.jsx(jn,{variant:"outline",className:"bg-orange-50 text-orange-600 border-orange-200",children:"Discipline"});case"general":default:return o.jsx(jn,{variant:"outline",className:"bg-blue-50 text-blue-600 border-blue-200",children:"General"})}},h=n.filter(f=>{var b;const m=s==="all"||f.passType===s,x=e.size===0||e.has((b=f.student)==null?void 0:b.grade);return m&&x});return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Current Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Students currently checked out"})]}),o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),o.jsx("span",{className:"text-muted-foreground",children:"Live updates enabled"})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h.length," of ",n.length," passes"]}),e.size>0&&o.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["Viewing grades: ",Array.from(e).sort().join(", ")]}),e.size===0&&o.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"No grades selected - select grades in Roster tab to view passes"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by type:"}),o.jsxs(xr,{value:s,onValueChange:i,children:[o.jsx(Kn,{className:"w-32",children:o.jsx(wr,{})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"all",children:"All Types"}),o.jsx(Oe,{value:"general",children:"General"}),o.jsx(Oe,{value:"nurse",children:"Nurse"}),o.jsx(Oe,{value:"discipline",children:"Discipline"})]})]})]})]}),o.jsx("div",{className:"space-y-3","data-testid":"active-passes-list",children:h.length===0?o.jsx(ae,{children:o.jsxs(le,{className:"p-6 text-center",children:[o.jsx("i",{className:"fas fa-check-circle text-secondary text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.length===0?"All students are in class":`No ${s==="all"?"":s+" "}passes currently active`})]})}):h.map(f=>{var m,x,b,v,y;return o.jsx(ae,{className:"shadow-sm","data-testid":`pass-card-${f.id}`,children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c(((m=f.student)==null?void 0:m.name)||"")}`,children:o.jsx("span",{className:"text-sm font-medium","data-testid":`student-initials-${f.id}`,children:l(((x=f.student)==null?void 0:x.name)||"")})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("h3",{className:"font-medium text-foreground","data-testid":`student-name-${f.id}`,children:(b=f.student)==null?void 0:b.name}),d(f.passType)]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Grade ",o.jsx("span",{"data-testid":`student-grade-${f.id}`,children:(v=f.student)==null?void 0:v.grade})," • Out for ",o.jsx("span",{"data-testid":`pass-duration-${f.id}`,children:a(f.checkoutTime)})]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Issued by: ",o.jsx("span",{className:"font-medium",children:((y=f.teacher)==null?void 0:y.name)||"Unknown Teacher"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked out"}),o.jsx("p",{className:"text-sm font-medium text-foreground","data-testid":`checkout-time-${f.id}`,children:new Date(f.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})})},f.id)})})]})}var bp="rovingFocusGroup.onEntryFocus",bz={bubbles:!1,cancelable:!0},Jf="RovingFocusGroup",[Cy,sA,Cz]=vf(Jf),[Nz,iA]=Ln(Jf,[Cz]),[Iz,Pz]=Nz(Jf),oA=g.forwardRef((t,e)=>o.jsx(Cy.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Cy.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Rz,{...t,ref:e})})}));oA.displayName=Jf;var Rz=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=g.useRef(null),x=ke(e,m),b=cx(i),[v=null,y]=oi({prop:a,defaultProp:l,onChange:c}),[_,S]=g.useState(!1),C=Bt(d),R=sA(n),D=g.useRef(!1),[M,T]=g.useState(0);return g.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(bp,C),()=>E.removeEventListener(bp,C)},[C]),o.jsx(Iz,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(E=>y(E),[y]),onItemShiftTab:g.useCallback(()=>S(!0),[]),onFocusableItemAdd:g.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:g.useCallback(()=>T(E=>E-1),[]),children:o.jsx(we.div,{tabIndex:_||M===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...t.style},onMouseDown:Y(t.onMouseDown,()=>{D.current=!0}),onFocus:Y(t.onFocus,E=>{const N=!D.current;if(E.target===E.currentTarget&&N&&!_){const P=new CustomEvent(bp,bz);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=R().filter(J=>J.focusable),j=k.find(J=>J.active),A=k.find(J=>J.id===v),ce=[j,A,...k].filter(Boolean).map(J=>J.ref.current);cA(ce,h)}}D.current=!1}),onBlur:Y(t.onBlur,()=>S(!1))})})}),aA="RovingFocusGroupItem",lA=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Yr(),c=i||l,d=Pz(aA,n),h=d.currentTabStopId===c,f=sA(n),{onFocusableItemAdd:m,onFocusableItemRemove:x}=d;return g.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),o.jsx(Cy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(we.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Y(t.onMouseDown,b=>{r?d.onItemFocus(c):b.preventDefault()}),onFocus:Y(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Y(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=kz(b,d.orientation,d.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=f().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const S=_.indexOf(b.currentTarget);_=d.loop?Dz(_,S+1):_.slice(S+1)}setTimeout(()=>cA(_))}})})})});lA.displayName=aA;var Az={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function jz(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function kz(t,e,n){const r=jz(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Az[r]}function cA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Dz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Oz=oA,Mz=lA,Ny=["Enter"," "],Lz=["ArrowDown","PageUp","Home"],uA=["ArrowUp","PageDown","End"],Vz=[...Lz,...uA],Fz={ltr:[...Ny,"ArrowRight"],rtl:[...Ny,"ArrowLeft"]},Uz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},yu="Menu",[Vc,$z,zz]=vf(yu),[wo,dA]=Ln(yu,[zz,Xa,iA]),Zf=Xa(),hA=iA(),[Bz,_o]=wo(yu),[qz,vu]=wo(yu),fA=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=t,l=Zf(e),[c,d]=g.useState(null),h=g.useRef(!1),f=Bt(i),m=cx(s);return g.useEffect(()=>{const x=()=>{h.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>h.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),o.jsx(lN,{...l,children:o.jsx(Bz,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:d,children:o.jsx(qz,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:a,children:r})})})};fA.displayName=yu;var Hz="MenuAnchor",lw=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Zf(n);return o.jsx(Gv,{...s,...r,ref:e})});lw.displayName=Hz;var cw="MenuPortal",[Gz,mA]=wo(cw,{forceMount:void 0}),pA=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=_o(cw,e);return o.jsx(Gz,{scope:e,forceMount:n,children:o.jsx(sr,{present:n||i.open,children:o.jsx(Jc,{asChild:!0,container:s,children:r})})})};pA.displayName=cw;var kn="MenuContent",[Wz,uw]=wo(kn),gA=g.forwardRef((t,e)=>{const n=mA(kn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=_o(kn,t.__scopeMenu),a=vu(kn,t.__scopeMenu);return o.jsx(Vc.Provider,{scope:t.__scopeMenu,children:o.jsx(sr,{present:r||i.open,children:o.jsx(Vc.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(Kz,{...s,ref:e}):o.jsx(Qz,{...s,ref:e})})})})}),Kz=g.forwardRef((t,e)=>{const n=_o(kn,t.__scopeMenu),r=g.useRef(null),s=ke(e,r);return g.useEffect(()=>{const i=r.current;if(i)return Jv(i)},[]),o.jsx(dw,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Y(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Qz=g.forwardRef((t,e)=>{const n=_o(kn,t.__scopeMenu);return o.jsx(dw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Yz=no("MenuContent.ScrollLock"),dw=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:x,disableOutsideScroll:b,...v}=t,y=_o(kn,n),_=vu(kn,n),S=Zf(n),C=hA(n),R=$z(n),[D,M]=g.useState(null),T=g.useRef(null),E=ke(e,T,y.onContentChange),N=g.useRef(0),P=g.useRef(""),k=g.useRef(0),j=g.useRef(null),A=g.useRef("right"),H=g.useRef(0),ce=b?Pf:g.Fragment,J=b?{as:Yz,allowPinchZoom:!0}:void 0,oe=$=>{var se,B;const Q=P.current+$,U=R().filter(ee=>!ee.disabled),X=document.activeElement,de=(se=U.find(ee=>ee.ref.current===X))==null?void 0:se.textValue,be=U.map(ee=>ee.textValue),qe=lB(be,Q,de),$e=(B=U.find(ee=>ee.textValue===qe))==null?void 0:B.ref.current;(function ee(ue){P.current=ue,window.clearTimeout(N.current),ue!==""&&(N.current=window.setTimeout(()=>ee(""),1e3))})(Q),$e&&setTimeout(()=>$e.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),Xv();const V=g.useCallback($=>{var U,X;return A.current===((U=j.current)==null?void 0:U.side)&&uB($,(X=j.current)==null?void 0:X.area)},[]);return o.jsx(Wz,{scope:n,searchRef:P,onItemEnter:g.useCallback($=>{V($)&&$.preventDefault()},[V]),onItemLeave:g.useCallback($=>{var Q;V($)||((Q=T.current)==null||Q.focus(),M(null))},[V]),onTriggerLeave:g.useCallback($=>{V($)&&$.preventDefault()},[V]),pointerGraceTimerRef:k,onPointerGraceIntentChange:g.useCallback($=>{j.current=$},[]),children:o.jsx(ce,{...J,children:o.jsx(Nf,{asChild:!0,trapped:s,onMountAutoFocus:Y(i,$=>{var Q;$.preventDefault(),(Q=T.current)==null||Q.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Wa,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:x,children:o.jsx(Oz,{asChild:!0,...C,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:M,onEntryFocus:Y(c,$=>{_.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Wv,{role:"menu","aria-orientation":"vertical","data-state":jA(y.open),"data-radix-menu-content":"",dir:_.dir,...S,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:Y(v.onKeyDown,$=>{const U=$.target.closest("[data-radix-menu-content]")===$.currentTarget,X=$.ctrlKey||$.altKey||$.metaKey,de=$.key.length===1;U&&($.key==="Tab"&&$.preventDefault(),!X&&de&&oe($.key));const be=T.current;if($.target!==be||!Vz.includes($.key))return;$.preventDefault();const $e=R().filter(se=>!se.disabled).map(se=>se.ref.current);uA.includes($.key)&&$e.reverse(),oB($e)}),onBlur:Y(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(N.current),P.current="")}),onPointerMove:Y(t.onPointerMove,Fc($=>{const Q=$.target,U=H.current!==$.clientX;if($.currentTarget.contains(Q)&&U){const X=$.clientX>H.current?"right":"left";A.current=X,H.current=$.clientX}}))})})})})})})});gA.displayName=kn;var Xz="MenuGroup",hw=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{role:"group",...r,ref:e})});hw.displayName=Xz;var Jz="MenuLabel",yA=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{...r,ref:e})});yA.displayName=Jz;var Xh="MenuItem",Z1="menu.itemSelect",em=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=g.useRef(null),a=vu(Xh,t.__scopeMenu),l=uw(Xh,t.__scopeMenu),c=ke(e,i),d=g.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(Z1,{bubbles:!0,cancelable:!0});f.addEventListener(Z1,x=>r==null?void 0:r(x),{once:!0}),Rv(f,m),m.defaultPrevented?d.current=!1:a.onClose()}};return o.jsx(vA,{...s,ref:c,disabled:n,onClick:Y(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),d.current=!0},onPointerUp:Y(t.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Y(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Ny.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});em.displayName=Xh;var vA=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,a=uw(Xh,n),l=hA(n),c=g.useRef(null),d=ke(e,c),[h,f]=g.useState(!1),[m,x]=g.useState("");return g.useEffect(()=>{const b=c.current;b&&x((b.textContent??"").trim())},[i.children]),o.jsx(Vc.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(Mz,{asChild:!0,...l,focusable:!r,children:o.jsx(we.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Y(t.onPointerMove,Fc(b=>{r?a.onItemLeave(b):(a.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Y(t.onPointerLeave,Fc(b=>a.onItemLeave(b))),onFocus:Y(t.onFocus,()=>f(!0)),onBlur:Y(t.onBlur,()=>f(!1))})})})}),Zz="MenuCheckboxItem",xA=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return o.jsx(TA,{scope:t.__scopeMenu,checked:n,children:o.jsx(em,{role:"menuitemcheckbox","aria-checked":Jh(n)?"mixed":n,...s,ref:e,"data-state":mw(n),onSelect:Y(s.onSelect,()=>r==null?void 0:r(Jh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});xA.displayName=Zz;var wA="MenuRadioGroup",[eB,tB]=wo(wA,{value:void 0,onValueChange:()=>{}}),_A=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Bt(r);return o.jsx(eB,{scope:t.__scopeMenu,value:n,onValueChange:i,children:o.jsx(hw,{...s,ref:e})})});_A.displayName=wA;var EA="MenuRadioItem",SA=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=tB(EA,t.__scopeMenu),i=n===s.value;return o.jsx(TA,{scope:t.__scopeMenu,checked:i,children:o.jsx(em,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":mw(i),onSelect:Y(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});SA.displayName=EA;var fw="MenuItemIndicator",[TA,nB]=wo(fw,{checked:!1}),bA=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=nB(fw,n);return o.jsx(sr,{present:r||Jh(i.checked)||i.checked===!0,children:o.jsx(we.span,{...s,ref:e,"data-state":mw(i.checked)})})});bA.displayName=fw;var rB="MenuSeparator",CA=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});CA.displayName=rB;var sB="MenuArrow",NA=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Zf(n);return o.jsx(Kv,{...s,...r,ref:e})});NA.displayName=sB;var iB="MenuSub",[vq,IA]=wo(iB),Hl="MenuSubTrigger",PA=g.forwardRef((t,e)=>{const n=_o(Hl,t.__scopeMenu),r=vu(Hl,t.__scopeMenu),s=IA(Hl,t.__scopeMenu),i=uw(Hl,t.__scopeMenu),a=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},h=g.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return g.useEffect(()=>h,[h]),g.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(lw,{asChild:!0,...d,children:o.jsx(vA,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":jA(n.open),...t,ref:yf(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Y(t.onPointerMove,Fc(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Y(t.onPointerLeave,Fc(f=>{var x,b;h();const m=(x=n.content)==null?void 0:x.getBoundingClientRect();if(m){const v=(b=n.content)==null?void 0:b.dataset.side,y=v==="right",_=y?-5:5,S=m[y?"left":"right"],C=m[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:S,y:m.top},{x:C,y:m.top},{x:C,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Y(t.onKeyDown,f=>{var x;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||Fz[r.dir].includes(f.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),f.preventDefault())})})})});PA.displayName=Hl;var RA="MenuSubContent",AA=g.forwardRef((t,e)=>{const n=mA(kn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=_o(kn,t.__scopeMenu),a=vu(kn,t.__scopeMenu),l=IA(RA,t.__scopeMenu),c=g.useRef(null),d=ke(e,c);return o.jsx(Vc.Provider,{scope:t.__scopeMenu,children:o.jsx(sr,{present:r||i.open,children:o.jsx(Vc.Slot,{scope:t.__scopeMenu,children:o.jsx(dw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Y(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Y(t.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:Y(t.onKeyDown,h=>{var x;const f=h.currentTarget.contains(h.target),m=Uz[a.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(x=l.trigger)==null||x.focus(),h.preventDefault())})})})})})});AA.displayName=RA;function jA(t){return t?"open":"closed"}function Jh(t){return t==="indeterminate"}function mw(t){return Jh(t)?"indeterminate":t?"checked":"unchecked"}function oB(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function aB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function lB(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=aB(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function cB(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,d=e[a].x,h=e[a].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function uB(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return cB(n,e)}function Fc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var dB=fA,hB=lw,fB=pA,mB=gA,pB=hw,gB=yA,yB=em,vB=xA,xB=_A,wB=SA,_B=bA,EB=CA,SB=NA,TB=PA,bB=AA,pw="DropdownMenu",[CB,xq]=Ln(pw,[dA]),tn=dA(),[NB,kA]=CB(pw),DA=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=tn(e),d=g.useRef(null),[h=!1,f]=oi({prop:s,defaultProp:i,onChange:a});return o.jsx(NB,{scope:e,triggerId:Yr(),triggerRef:d,contentId:Yr(),open:h,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(dB,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};DA.displayName=pw;var OA="DropdownMenuTrigger",MA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=kA(OA,n),a=tn(n);return o.jsx(hB,{asChild:!0,...a,children:o.jsx(we.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:yf(e,i.triggerRef),onPointerDown:Y(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Y(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});MA.displayName=OA;var IB="DropdownMenuPortal",LA=t=>{const{__scopeDropdownMenu:e,...n}=t,r=tn(e);return o.jsx(fB,{...r,...n})};LA.displayName=IB;var VA="DropdownMenuContent",FA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=kA(VA,n),i=tn(n),a=g.useRef(!1);return o.jsx(mB,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Y(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Y(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FA.displayName=VA;var PB="DropdownMenuGroup",RB=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(pB,{...s,...r,ref:e})});RB.displayName=PB;var AB="DropdownMenuLabel",UA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(gB,{...s,...r,ref:e})});UA.displayName=AB;var jB="DropdownMenuItem",$A=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(yB,{...s,...r,ref:e})});$A.displayName=jB;var kB="DropdownMenuCheckboxItem",zA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(vB,{...s,...r,ref:e})});zA.displayName=kB;var DB="DropdownMenuRadioGroup",OB=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(xB,{...s,...r,ref:e})});OB.displayName=DB;var MB="DropdownMenuRadioItem",BA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(wB,{...s,...r,ref:e})});BA.displayName=MB;var LB="DropdownMenuItemIndicator",qA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(_B,{...s,...r,ref:e})});qA.displayName=LB;var VB="DropdownMenuSeparator",HA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(EB,{...s,...r,ref:e})});HA.displayName=VB;var FB="DropdownMenuArrow",UB=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(SB,{...s,...r,ref:e})});UB.displayName=FB;var $B="DropdownMenuSubTrigger",GA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(TB,{...s,...r,ref:e})});GA.displayName=$B;var zB="DropdownMenuSubContent",WA=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=tn(n);return o.jsx(bB,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WA.displayName=zB;var BB=DA,qB=MA,HB=LA,KA=FA,QA=UA,YA=$A,XA=zA,JA=BA,ZA=qA,ej=HA,tj=GA,nj=WA;const GB=BB,WB=qB,KB=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>o.jsxs(tj,{ref:s,className:me("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,o.jsx(GM,{className:"ml-auto"})]}));KB.displayName=tj.displayName;const QB=g.forwardRef(({className:t,...e},n)=>o.jsx(nj,{ref:n,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));QB.displayName=nj.displayName;const rj=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(HB,{children:o.jsx(KA,{ref:r,sideOffset:e,className:me("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));rj.displayName=KA.displayName;const qd=g.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(YA,{ref:r,className:me("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));qd.displayName=YA.displayName;const YB=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>o.jsxs(XA,{ref:s,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ZA,{children:o.jsx(tu,{className:"h-4 w-4"})})}),e]}));YB.displayName=XA.displayName;const XB=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(JA,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ZA,{children:o.jsx(QM,{className:"h-2 w-2 fill-current"})})}),e]}));XB.displayName=JA.displayName;const JB=g.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(QA,{ref:r,className:me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));JB.displayName=QA.displayName;const ZB=g.forwardRef(({className:t,...e},n)=>o.jsx(ej,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));ZB.displayName=ej.displayName;function e7({user:t,selectedGrades:e=new Set,currentGrade:n,onRemoveGrade:r}){const[s,i]=g.useState(n||(e.size>0?Array.from(e)[0]:"")),[a,l]=g.useState(""),[c,d]=g.useState(null),[h,f]=g.useState(!1);g.useEffect(()=>{n&&n!==s&&i(n)},[n]);const{toast:m}=Gt(),{data:x=[],isLoading:b}=$t({queryKey:["/api/students"]}),{data:v=[],isLoading:y}=$t({queryKey:["/api/passes/active"],refetchInterval:3e3}),{data:_=[]}=$t({queryKey:["/api/grades"]}),S=b||y,C=(t==null?void 0:t.assignedGrades)||[],R=_.filter(U=>e.has(U.name)&&(C.length===0||C.includes(U.name))),D=async(U,X,de="general",be="")=>{try{await Ge("POST","/api/passes",{studentId:U,passType:de,customReason:be||void 0}),ze.invalidateQueries({queryKey:["/api/passes/active"]}),ze.invalidateQueries({queryKey:["/api/students"]}),ze.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Pass created",description:`${X} has been marked out for ${be||(de==="nurse"?"Nurse":de==="discipline"?"Discipline":"General")}.`})}catch(qe){m({title:"Error",description:qe.message,variant:"destructive"})}},M=()=>{c&&a.trim()&&(D(c.id,c.name,"general",a.trim()),l(""),d(null),f(!1))},T=U=>{d(U),l(""),f(!0)},E=async(U,X)=>{try{await Ge("PUT",`/api/passes/${U}/return`,{}),ze.invalidateQueries({queryKey:["/api/passes/active"]}),ze.invalidateQueries({queryKey:["/api/students"]}),ze.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Student returned",description:`${X} has been marked as returned.`})}catch(de){m({title:"Error",description:de.message,variant:"destructive"})}},N=U=>U.split(" ").map(X=>X[0]).join("").toUpperCase().slice(0,2),P=U=>{const X=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],de=U.length%X.length;return X[de]},k=U=>{switch(U){case"nurse":return o.jsx(G_,{className:"w-4 h-4 text-red-500"});case"discipline":return o.jsx(bh,{className:"w-4 h-4 text-orange-500"});default:return o.jsx(ro,{className:"w-4 h-4 text-blue-500"})}},j=U=>{switch(U){case"nurse":return"Nurse";case"discipline":return"Discipline";default:return"General"}},A=U=>{switch(U){case"nurse":return"bg-red-100 text-red-700 border-red-200";case"discipline":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}},[H,ce]=g.useState(new Date);g.useEffect(()=>{const U=setInterval(()=>{ce(new Date)},3e3);return()=>clearInterval(U)},[]);const J=U=>{const X=new Date(U),de=H.getTime()-X.getTime(),be=Math.floor(de/(1e3*60));return`${Math.max(1,be)} min`};if(R.length===0)return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx(ae,{children:o.jsxs(le,{className:"p-6 text-center",children:[o.jsx(Wn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Grades Selected"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Click on grade cards in the Roster tab to add them to MyClass. Green cards in Roster are active here."})]})})]});if(S)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const oe=R.find(U=>U.name===s),V=oe?x.filter(U=>U.grade===oe.name):[],$=oe?v.filter(U=>{const X=x.find(de=>de.id===U.studentId);return X&&X.grade===oe.name}):[],Q=V.filter(U=>!v.some(X=>X.studentId===U.id));return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(U=>{x.filter(be=>be.grade===U.name);const X=v.filter(be=>{const qe=x.find($e=>$e.id===be.studentId);return qe&&qe.grade===U.name}).length,de=s===U.name;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(G,{variant:de?"default":"outline",size:"sm",onClick:()=>i(U.name),"data-testid":`tab-grade-${U.name}`,className:`flex items-center gap-2 ${de?"ring-2 ring-primary":""}`,children:[o.jsx(Wn,{className:"w-4 h-4"}),"Grade ",U.name,X>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:X})]}),o.jsx(G,{variant:"ghost",size:"sm",onClick:be=>{be.stopPropagation(),r==null||r(U.name)},"data-testid":`button-remove-grade-${U.name}`,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground hover:bg-red-100 dark:hover:bg-red-900/20",title:`Remove Grade ${U.name} from My Class`,children:o.jsx(nu,{className:"w-4 h-4"})})]},U.id)})})}),oe&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wn,{className:"h-5 w-5 text-blue-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Students"}),o.jsx("p",{className:"text-lg font-bold",children:V.length})]})]})})}),o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(s4,{className:"h-5 w-5 text-red-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Currently Out"}),o.jsx("p",{className:"text-lg font-bold text-red-600",children:$.length})]})]})})}),o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(J_,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:Q.length})]})]})})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(ro,{className:"w-5 h-5 text-red-600"}),"Currently Out - Grade ",oe.name]})}),o.jsx(le,{children:$.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No students are currently out of class"}):o.jsx("div",{className:"space-y-3",children:$.map(U=>{const X=x.find(de=>de.id===U.studentId);return X?o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${P(X.name)}`,children:N(X.name)}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-medium",children:X.name}),o.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border flex items-center gap-1 ${A(U.passType||"general")}`,children:[k(U.passType||"general"),j(U.passType||"general")]})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[U.customReason||`Out for ${J(U.checkoutTime)}`," • Since ",new Date(U.checkoutTime).toLocaleTimeString()]})]})]}),o.jsx(G,{onClick:()=>E(U.id,X.name),size:"sm","data-testid":`button-return-${U.id}`,children:"Mark Returned"})]},U.id):null})})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(J_,{className:"w-5 h-5 text-green-600"}),"Available Students - Grade ",oe.name]})}),o.jsx(le,{children:Q.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:V.length===0?`No students in Grade ${oe.name}. Add students in the Roster tab.`:"All students are currently out of class"}):o.jsx("div",{className:"grid gap-3",children:Q.map(U=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${P(U.name)}`,children:N(U.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:U.name}),U.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",U.studentId]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(G,{onClick:()=>D(U.id,U.name,"general"),size:"sm",variant:"outline","data-testid":`button-checkout-${U.id}`,children:"Mark Out"}),o.jsxs(GB,{children:[o.jsx(WB,{asChild:!0,children:o.jsx(G,{size:"sm",variant:"outline","data-testid":`button-special-checkout-${U.id}`,className:"px-2",children:o.jsx(Dv,{className:"w-4 h-4"})})}),o.jsxs(rj,{align:"end",children:[o.jsxs(qd,{onClick:()=>D(U.id,U.name,"nurse"),className:"flex items-center gap-2",children:[o.jsx(G_,{className:"w-4 h-4 text-red-500"}),"Nurse"]}),o.jsxs(qd,{onClick:()=>D(U.id,U.name,"discipline"),className:"flex items-center gap-2",children:[o.jsx(bh,{className:"w-4 h-4 text-orange-500"}),"Discipline"]}),o.jsxs(qd,{onClick:()=>T(U),className:"flex items-center gap-2",children:[o.jsx(ZM,{className:"w-4 h-4 text-blue-500"}),"Custom Reason"]})]})]})]})]},U.id))})})]})]}),!oe&&R.length>0&&o.jsx(ae,{children:o.jsxs(le,{className:"p-6 text-center",children:[o.jsx(Wn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a Grade"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on one of the grade tabs above to view and manage students."})]})}),o.jsx($r,{open:h,onOpenChange:f,children:o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsxs(gr,{children:["Custom Reason for ",c==null?void 0:c.name]})}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"customReason",children:"Reason for leaving class"}),o.jsx(fe,{id:"customReason",placeholder:"e.g., Library research, Guidance counselor, Office errand...",value:a,onChange:U=>l(U.target.value),onKeyDown:U=>{U.key==="Enter"&&M()},"data-testid":"input-custom-reason"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-cancel-custom-reason",children:"Cancel"}),o.jsx(G,{onClick:M,disabled:!a.trim(),"data-testid":"button-submit-custom-reason",children:"Mark Out"})]})]})]})})]})}function t7({user:t,selectedGrades:e=new Set,onGradeClick:n}){const[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),[d,h]=g.useState(!1),[f,m]=g.useState(null),[x,b]=g.useState(null),[v,y]=g.useState(null),[_,S]=g.useState(""),[C,R]=g.useState({name:"",grade:"",studentId:""}),[D,M]=g.useState({name:""}),[T,E]=g.useState(""),{toast:N}=Gt(),{data:P=[],isLoading:k}=$t({queryKey:["/api/students"]}),{data:j=[],isLoading:A}=$t({queryKey:["/api/grades"]}),H=k||A,ce=async B=>{if(B.preventDefault(),!D.name){N({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ge("POST","/api/grades",D),ze.invalidateQueries({queryKey:["/api/grades"]}),M({name:""}),c(!1),N({title:"Grade added",description:`Grade ${D.name} has been added.`})}catch(ee){N({title:"Error",description:ee.message,variant:"destructive"})}},J=B=>{b(B),M({name:B.name})},oe=async B=>{if(B.preventDefault(),!D.name||!x){N({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ge("PUT",`/api/grades/${x.id}`,D),ze.invalidateQueries({queryKey:["/api/grades"]}),M({name:""}),b(null),N({title:"Grade updated",description:`Grade has been updated to ${D.name}.`})}catch(ee){N({title:"Error",description:ee.message,variant:"destructive"})}},V=async(B,ee)=>{if(confirm(`Are you sure you want to delete grade "${ee}"? This will also delete all students in this grade.`))try{await Ge("DELETE",`/api/grades/${B}`,{}),ze.invalidateQueries({queryKey:["/api/grades"]}),ze.invalidateQueries({queryKey:["/api/students"]}),N({title:"Grade deleted",description:`Grade ${ee} has been deleted.`})}catch(ue){N({title:"Error",description:ue.message,variant:"destructive"})}},$=async B=>{if(B.preventDefault(),!C.name||!C.grade){N({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ge("POST","/api/students",C),ze.invalidateQueries({queryKey:["/api/students"]}),R({name:"",grade:"",studentId:""}),s(!1),N({title:"Student added",description:`${C.name} has been added to grade ${C.grade}.`})}catch(ee){N({title:"Error",description:ee.message,variant:"destructive"})}},Q=async B=>{if(B.preventDefault(),!T.trim()||!_){N({title:"Missing Information",description:"Please enter student names and select a grade.",variant:"destructive"});return}const ee=T.split(`
`).map(ue=>ue.trim()).filter(ue=>ue.length>0);if(ee.length===0){N({title:"No students to add",description:"Please enter at least one student name.",variant:"destructive"});return}try{const ue=ee.map(ve=>Ge("POST","/api/students",{name:ve,grade:_,studentId:""}));await Promise.all(ue),ze.invalidateQueries({queryKey:["/api/students"]}),E(""),S(""),a(!1),N({title:"Students added",description:`${ee.length} student${ee.length!==1?"s":""} have been added to grade ${_}.`})}catch(ue){N({title:"Error",description:ue.message,variant:"destructive"})}},U=B=>{m(B),R({name:B.name,grade:B.grade,studentId:B.studentId||""})},X=async B=>{if(B.preventDefault(),!C.name||!C.grade||!f){N({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ge("PUT",`/api/students/${f.id}`,C),ze.invalidateQueries({queryKey:["/api/students"]}),R({name:"",grade:"",studentId:""}),m(null),N({title:"Student updated",description:`${C.name} has been updated.`})}catch(ee){N({title:"Error",description:ee.message,variant:"destructive"})}},de=async(B,ee)=>{if(confirm(`Are you sure you want to delete ${ee}?`))try{await Ge("DELETE",`/api/students/${B}`,{}),ze.invalidateQueries({queryKey:["/api/students"]}),N({title:"Student deleted",description:`${ee} has been deleted.`})}catch(ue){N({title:"Error",description:ue.message,variant:"destructive"})}},be=B=>B.split(" ").map(ee=>ee[0]).join("").toUpperCase().slice(0,2),qe=B=>{const ee=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],ue=B.length%ee.length;return ee[ue]},$e=(t==null?void 0:t.assignedGrades)||[],se=$e.length===0?j:j.filter(B=>$e.includes(B.name));return H?o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})}):o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Student Roster"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Manage grades and students. Click on grade cards to add them to MyClass tab.",o.jsx("span",{className:"text-green-600 font-medium",children:" Green cards are active in MyClass."})]})]}),o.jsxs(ae,{className:"mb-6",children:[o.jsx(Pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(Wn,{className:"w-5 h-5"}),"Grade Levels"]}),o.jsxs($r,{open:l,onOpenChange:c,children:[o.jsx(yF,{asChild:!0,children:o.jsxs(G,{size:"sm","data-testid":"button-add-grade",children:[o.jsx(Q_,{className:"w-4 h-4 mr-2"}),"Add Grade"]})}),o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsx(gr,{children:"Add New Grade"})}),o.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"gradeName",children:"Grade Name"}),o.jsx(fe,{id:"gradeName",value:D.name,onChange:B=>M({name:B.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),o.jsx(G,{type:"submit","data-testid":"button-submit-grade",children:"Add Grade"})]})]})]})]})]})}),o.jsx(le,{children:se.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:$e.length===0?"No grades created yet. Add a grade to get started.":"No assigned grades found. Contact your admin to assign grades to your account."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:se.map(B=>{const ee=P.filter(ve=>ve.grade===B.name),ue=e.has(B.name);return o.jsx(ae,{className:`cursor-pointer hover:shadow-md transition-all border-2 ${ue?"border-green-500 bg-green-50 shadow-md":"hover:border-primary/20"}`,onClick:()=>n==null?void 0:n(B.name),"data-testid":`card-grade-${B.name}`,children:o.jsxs(le,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(JM,{className:`w-4 h-4 ${ue?"text-green-600":"text-primary"}`}),o.jsxs("h3",{className:`font-semibold ${ue?"text-green-700":""}`,children:["Grade ",B.name]}),ue&&o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(G,{size:"sm",variant:"ghost",onClick:ve=>{ve.stopPropagation(),y(B),h(!0)},className:"h-6 w-6 p-0","data-testid":`button-view-grade-${B.id}`,children:o.jsx(Rd,{className:"h-3 w-3"})}),o.jsx(G,{size:"sm",variant:"ghost",onClick:ve=>{ve.stopPropagation(),J(B)},className:"h-6 w-6 p-0","data-testid":`button-edit-grade-${B.id}`,children:o.jsx(X_,{className:"h-3 w-3"})}),o.jsx(G,{size:"sm",variant:"ghost",onClick:ve=>{ve.stopPropagation(),V(B.id,B.name)},className:"h-6 w-6 p-0 hover:text-red-600","data-testid":`button-delete-grade-${B.id}`,children:o.jsx(Ug,{className:"h-3 w-3"})})]})]}),o.jsxs("p",{className:`text-sm ${ue?"text-green-600":"text-muted-foreground"}`,children:[ee.length," student",ee.length!==1?"s":""]}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsx("p",{className:`text-xs ${ue?"text-green-600":"text-primary"}`,children:ue?"✓ Active in MyClass":"Click to add to MyClass →"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(G,{size:"sm",variant:"outline",onClick:ve=>{ve.stopPropagation(),R({name:"",grade:B.name,studentId:""}),s(!0)},className:"h-6 text-xs px-2","data-testid":`button-add-student-${B.name}`,children:"Add Student"}),o.jsx(G,{size:"sm",variant:"outline",onClick:ve=>{ve.stopPropagation(),S(B.name),a(!0)},className:"h-6 text-xs px-2","data-testid":`button-bulk-add-${B.name}`,children:"Bulk Add"})]})]})]})},B.id)})})})]}),o.jsx($r,{open:r,onOpenChange:s,children:o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsx(gr,{children:"Add New Student"})}),o.jsxs("form",{onSubmit:$,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentName",children:"Student Name"}),o.jsx(fe,{id:"studentName",value:C.name,onChange:B=>R({...C,name:B.target.value}),placeholder:"Enter student name","data-testid":"input-student-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentGrade",children:"Grade"}),o.jsxs(xr,{value:C.grade,onValueChange:B=>R({...C,grade:B}),children:[o.jsx(Kn,{"data-testid":"select-student-grade",children:o.jsx(wr,{placeholder:"Select a grade"})}),o.jsx(Qn,{children:se.map(B=>o.jsxs(Oe,{value:B.name,children:["Grade ",B.name]},B.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentId",children:"Student ID (Optional)"}),o.jsx(fe,{id:"studentId",value:C.studentId,onChange:B=>R({...C,studentId:B.target.value}),placeholder:"Enter student ID","data-testid":"input-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),o.jsx(G,{type:"submit","data-testid":"button-submit-student",children:"Add Student"})]})]})]})}),o.jsx($r,{open:i,onOpenChange:a,children:o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsx(gr,{children:"Bulk Add Students"})}),o.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"bulkGrade",children:"Grade"}),o.jsxs(xr,{value:_,onValueChange:S,children:[o.jsx(Kn,{"data-testid":"select-bulk-grade",children:o.jsx(wr,{placeholder:"Select a grade"})}),o.jsx(Qn,{children:se.map(B=>o.jsxs(Oe,{value:B.name,children:["Grade ",B.name]},B.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"bulkStudentNames",children:"Student Names (one per line)"}),o.jsx("textarea",{id:"bulkStudentNames",value:T,onChange:B=>E(B.target.value),placeholder:`Enter student names, one per line:
John Smith
Jane Doe
Alex Johnson`,className:"w-full h-32 p-3 border rounded-md resize-none","data-testid":"textarea-bulk-student-names"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter each student name on a new line"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(G,{type:"submit","data-testid":"button-submit-bulk-students",children:"Add Students"})]})]})]})}),x&&o.jsx($r,{open:!!x,onOpenChange:()=>b(null),children:o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsx(gr,{children:"Edit Grade"})}),o.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editGradeName",children:"Grade Name"}),o.jsx(fe,{id:"editGradeName",value:D.name,onChange:B=>M({name:B.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-edit-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>b(null),children:"Cancel"}),o.jsx(G,{type:"submit","data-testid":"button-update-grade",children:"Update Grade"})]})]})]})}),f&&o.jsx($r,{open:!!f,onOpenChange:()=>m(null),children:o.jsxs(mr,{children:[o.jsx(pr,{children:o.jsx(gr,{children:"Edit Student"})}),o.jsxs("form",{onSubmit:X,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentName",children:"Student Name"}),o.jsx(fe,{id:"editStudentName",value:C.name,onChange:B=>R({...C,name:B.target.value}),placeholder:"Enter student name","data-testid":"input-edit-student-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentGrade",children:"Grade"}),o.jsxs(xr,{value:C.grade,onValueChange:B=>R({...C,grade:B}),children:[o.jsx(Kn,{"data-testid":"select-edit-student-grade",children:o.jsx(wr,{placeholder:"Select a grade"})}),o.jsx(Qn,{children:se.map(B=>o.jsxs(Oe,{value:B.name,children:["Grade ",B.name]},B.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentId",children:"Student ID (Optional)"}),o.jsx(fe,{id:"editStudentId",value:C.studentId,onChange:B=>R({...C,studentId:B.target.value}),placeholder:"Enter student ID","data-testid":"input-edit-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>m(null),children:"Cancel"}),o.jsx(G,{type:"submit","data-testid":"button-update-student",children:"Update Student"})]})]})]})}),v&&o.jsx($r,{open:d,onOpenChange:h,children:o.jsxs(mr,{className:"max-w-4xl",children:[o.jsx(pr,{children:o.jsxs(gr,{children:["Grade ",v.name," - Full Roster"]})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{const B=P.filter(ee=>ee.grade===v.name);return B.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Wn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsxs("p",{className:"text-muted-foreground",children:["No students in Grade ",v.name," yet."]}),o.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[o.jsx(G,{onClick:()=>{R({name:"",grade:v.name,studentId:""}),h(!1),s(!0)},size:"sm",children:"Add Student"}),o.jsx(G,{onClick:()=>{S(v.name),h(!1),a(!0)},size:"sm",variant:"outline",children:"Bulk Add Students"})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[B.length," student",B.length!==1?"s":""," in Grade ",v.name]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{onClick:()=>{R({name:"",grade:v.name,studentId:""}),h(!1),s(!0)},size:"sm",children:[o.jsx(Q_,{className:"w-4 h-4 mr-2"}),"Add Student"]}),o.jsxs(G,{onClick:()=>{S(v.name),h(!1),a(!0)},size:"sm",variant:"outline",children:[o.jsx(Wn,{className:"w-4 h-4 mr-2"}),"Bulk Add"]})]})]}),B.map(ee=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${qe(ee.name)}`,children:be(ee.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:ee.name}),ee.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",ee.studentId]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(G,{size:"sm",variant:"ghost",onClick:()=>{U(ee),h(!1)},"data-testid":`button-edit-student-${ee.id}`,children:o.jsx(X_,{className:"h-4 w-4"})}),o.jsx(G,{size:"sm",variant:"ghost",onClick:()=>de(ee.id,ee.name),className:"hover:text-red-600","data-testid":`button-delete-student-${ee.id}`,children:o.jsx(Ug,{className:"h-4 w-4"})})]})]},ee.id))]})})()})]})})]})}function n7({user:t}){const[e,n]=g.useState(!1),[r,s]=g.useState(!1),[i,a]=g.useState(!1),{toast:l}=Gt(),c=async f=>{var x;const m=(x=f.target.files)==null?void 0:x[0];if(m){if(!m.name.endsWith(".csv")){l({title:"Invalid File Type",description:"Please upload a CSV file.",variant:"destructive"});return}n(!0);try{const b=new FormData;b.append("file",m);const v=await fetch("/api/upload/csv",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:b});if(!v.ok)throw new Error("Upload failed");const y=await v.json();ze.invalidateQueries({queryKey:["/api/students"]}),ze.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Upload Complete",description:`Successfully imported ${y.studentsAdded} students and ${y.gradesAdded} grades.`})}catch(b){l({title:"Upload Failed",description:b.message,variant:"destructive"})}finally{n(!1)}}},d=async()=>{n(!0);try{const m=await(await Ge("POST","/api/import/clever",{})).json();ze.invalidateQueries({queryKey:["/api/students"]}),ze.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Clever Import Complete",description:`Successfully imported ${m.studentsAdded} students from Clever.`}),s(!0)}catch{l({title:"Clever Import Failed",description:"Please check your Clever API credentials and try again.",variant:"destructive"})}finally{n(!1)}},h=async()=>{n(!0);try{const m=await(await Ge("POST","/api/import/google-classroom",{})).json();ze.invalidateQueries({queryKey:["/api/students"]}),ze.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Google Classroom Import Complete",description:`Successfully imported ${m.studentsAdded} students from Google Classroom.`}),a(!0)}catch{l({title:"Google Classroom Import Failed",description:"Please check your Google Classroom API credentials and try again.",variant:"destructive"})}finally{n(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Upload Student Data"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from multiple sources"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(Re,{children:"CSV File Upload"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"fileUpload",children:"Select CSV File"}),o.jsx(fe,{id:"fileUpload",type:"file",accept:".csv",onChange:c,disabled:e,"data-testid":"input-file-upload"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"mb-2",children:"CSV file should contain the following columns:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"name (required)"}),o.jsx("li",{children:"grade (required)"}),o.jsx("li",{children:"studentId (optional)"})]})]}),e&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary border-t-transparent rounded-full"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing upload..."})]})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center justify-between",children:["Clever Integration",r&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters directly from your Clever account. This will sync all students from your connected schools."}),o.jsx(G,{onClick:d,disabled:e,className:"w-full","data-testid":"button-clever-import",children:e?"Importing...":"Import from Clever"})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center justify-between",children:["Google Classroom Integration",i&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from your Google Classroom courses. All enrolled students will be added to your roster."}),o.jsx(G,{onClick:h,disabled:e,className:"w-full","data-testid":"button-google-classroom-import",children:e?"Importing...":"Import from Google Classroom"})]})})]})]})]})}function r7({user:t}){const{toast:e}=Gt(),[n,r]=g.useState({dateRange:"today",grade:"all",teacher:"all",passType:"all"}),[s,i]=g.useState({startDate:"",endDate:""}),a=(T,E)=>{if(!E)return null;const N=new Date(T),k=new Date(E).getTime()-N.getTime(),j=Math.round(k/(1e3*60));return j<1?1:j},{data:l=[],refetch:c}=$t({queryKey:["/api/passes",n],refetchInterval:3e3,queryFn:async()=>{const T=new URLSearchParams;if(n.dateRange&&n.dateRange!=="all"){const k=new Date;let j=new Date;switch(n.dateRange){case"today":j.setHours(0,0,0,0),T.append("dateStart",j.toISOString());break;case"week":j.setDate(k.getDate()-7),T.append("dateStart",j.toISOString());break;case"month":j.setMonth(k.getMonth()-1),T.append("dateStart",j.toISOString());break;case"custom":s.startDate&&T.append("dateStart",new Date(s.startDate+"T00:00:00").toISOString()),s.endDate&&T.append("dateEnd",new Date(s.endDate+"T23:59:59").toISOString());break}}n.grade&&n.grade!=="all"&&T.append("grade",n.grade),n.teacher&&n.teacher!==""&&n.teacher!=="all"&&T.append("teacherId",n.teacher),n.passType&&n.passType!=="all"&&T.append("passType",n.passType);const E=`/api/passes${T.toString()?"?"+T.toString():""}`,P=await(await Ge("GET",E)).json();return Array.isArray(P)?P:[]}}),{data:d=[]}=$t({queryKey:["/api/grades"]}),{data:h=[]}=$t({queryKey:["/api/teachers"]}),f=(t==null?void 0:t.assignedGrades)||[],m=f.length===0?d:d.filter(T=>f.includes(T.name)),x=()=>{c(),e({title:"Filters Applied",description:"Report data has been updated based on your filters."})},b=()=>{if(!l||l.length===0){e({title:"No Data",description:"No pass data available to export. Apply filters first.",variant:"destructive"});return}const T=["Student Name","Grade","Teacher","Pass Type","Custom Reason","Checkout Time","Return Time","Duration (min)"],E=l.map(A=>{var ce,J,oe;const H=A.returnTime?a(A.checkoutTime,A.returnTime)??A.duration:null;return[((ce=A.student)==null?void 0:ce.name)||"Unknown",((J=A.student)==null?void 0:J.grade)||"Unknown",((oe=A.teacher)==null?void 0:oe.name)||"Unknown",A.passType||"general",A.customReason||"",new Date(A.checkoutTime).toLocaleString(),A.returnTime?new Date(A.returnTime).toLocaleString():"Still Out",H!==null?H:"Still Out"]}),N=[T,...E].map(A=>A.map(H=>`"${H}"`).join(",")).join(`
`),P=new Blob([N],{type:"text/csv"}),k=window.URL.createObjectURL(P),j=document.createElement("a");j.href=k,j.download=`pass-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(j),j.click(),document.body.removeChild(j),window.URL.revokeObjectURL(k),e({title:"Export Complete",description:"Pass report has been downloaded as CSV."})},v=()=>{e({title:"Exporting PDF",description:"Your report is being exported as PDF..."})},_=l.filter(T=>T.status==="returned"&&T.returnTime).map(T=>{const E=a(T.checkoutTime,T.returnTime)??T.duration;return{...T,calculatedDuration:E}}).filter(T=>T.calculatedDuration!==null),S={totalPasses:l.length,avgDuration:_.length>0?Math.round(_.reduce((T,E)=>T+(E.calculatedDuration||0),0)/_.length*10)/10:0,peakHour:l.length>0?new Date(l.reduce((T,E)=>new Date(E.checkoutTime)>new Date(T.checkoutTime)?E:T).checkoutTime).toLocaleTimeString([],{hour:"numeric"}):"N/A",uniqueStudents:new Set(l.map(T=>T.studentId)).size},C={general:l.filter(T=>(T.passType||"general")==="general").length,nurse:l.filter(T=>T.passType==="nurse").length,discipline:l.filter(T=>T.passType==="discipline").length},R=new Date;R.setHours(0,0,0,0);const D=l.filter(T=>new Date(T.checkoutTime)>=R),M=D.length>0?D.sort((T,E)=>new Date(E.checkoutTime).getTime()-new Date(T.checkoutTime).getTime()).slice(0,10).map(T=>{var N;const E=a(T.checkoutTime,T.returnTime);return{id:T.id,studentName:((N=T.student)==null?void 0:N.name)||"Unknown Student",action:T.status==="returned"?`Returned after ${E!==null?E:T.duration&&T.duration>=1?T.duration:1} minutes`:`Checked out${T.customReason?` - ${T.customReason}`:T.passType&&T.passType!=="general"?` for ${T.passType}`:""}`,time:new Date(T.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),date:"Today",passType:T.passType||"general"}}):[];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Reports"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"View and export student pass usage data"})]}),o.jsx(ae,{className:"mb-6",children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Filters"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"dateRange",children:"Date Range"}),o.jsxs(xr,{value:n.dateRange,onValueChange:T=>r({...n,dateRange:T}),children:[o.jsx(Kn,{"data-testid":"select-date-range",children:o.jsx(wr,{placeholder:"Select date range"})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"today",children:"Today"}),o.jsx(Oe,{value:"week",children:"This Week"}),o.jsx(Oe,{value:"month",children:"This Month"}),o.jsx(Oe,{value:"custom",children:"Custom Range"})]})]})]}),n.dateRange==="custom"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"startDate",children:"Start Date"}),o.jsx(fe,{id:"startDate",type:"date",value:s.startDate,onChange:T=>i({...s,startDate:T.target.value}),"data-testid":"input-start-date"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"endDate",children:"End Date"}),o.jsx(fe,{id:"endDate",type:"date",value:s.endDate,onChange:T=>i({...s,endDate:T.target.value}),"data-testid":"input-end-date"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"gradeFilter",children:"Grade"}),o.jsxs(xr,{value:n.grade,onValueChange:T=>r({...n,grade:T}),children:[o.jsx(Kn,{"data-testid":"select-grade-filter",children:o.jsx(wr,{placeholder:"All Grades"})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"all",children:"All Grades"}),m.map(T=>o.jsxs(Oe,{value:T.name,children:["Grade ",T.name]},T.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherFilter",children:"Teacher"}),o.jsxs(xr,{value:n.teacher,onValueChange:T=>r({...n,teacher:T}),children:[o.jsx(Kn,{"data-testid":"select-teacher-filter",children:o.jsx(wr,{placeholder:"All Teachers"})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"all",children:"All Teachers"}),h.map(T=>o.jsx(Oe,{value:T.id,children:T.name},T.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"passTypeFilter",children:"Pass Type"}),o.jsxs(xr,{value:n.passType,onValueChange:T=>r({...n,passType:T}),children:[o.jsx(Kn,{"data-testid":"select-pass-type-filter",children:o.jsx(wr,{placeholder:"All Types"})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"all",children:"All Types"}),o.jsx(Oe,{value:"general",children:"General"}),o.jsx(Oe,{value:"nurse",children:"Nurse"}),o.jsx(Oe,{value:"discipline",children:"Discipline"})]})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx(G,{onClick:x,className:"w-full","data-testid":"button-apply-filters",children:"Apply Filters"})})]})]})}),o.jsx(ae,{className:"mb-6",children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Pass Type Breakdown"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"General"})]}),o.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-general-passes",children:C.general}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Bathroom/General"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Nurse"})]}),o.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"stat-nurse-passes",children:C.nurse}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Health Office"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Discipline"})]}),o.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"stat-discipline-passes",children:C.discipline}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Office/Admin"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary","data-testid":"stat-total-passes",children:S.totalPasses}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Passes"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-secondary","data-testid":"stat-avg-duration",children:S.avgDuration}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Minutes"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-accent","data-testid":"stat-peak-hour",children:S.peakHour}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Peak Hour"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-foreground","data-testid":"stat-unique-students",children:S.uniqueStudents}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Students"})]})})]}),o.jsx(ae,{className:"mb-6",children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Export Data"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(G,{onClick:b,className:"bg-secondary hover:bg-secondary/90","data-testid":"button-export-csv",children:[o.jsx("i",{className:"fas fa-file-csv mr-2"}),"Export CSV"]}),o.jsxs(G,{onClick:v,className:"bg-destructive hover:bg-destructive/90","data-testid":"button-export-pdf",children:[o.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Export PDF"]})]})]})})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-0",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Today's Activity"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Resets daily • View historical data using date filters above"})]})}),o.jsx("div",{className:"divide-y divide-border","data-testid":"recent-activity-list",children:M.length===0?o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("i",{className:"fas fa-history text-muted-foreground text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No activity today"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Historical data available using date filters above"})]}):M.map(T=>o.jsx("div",{className:"p-4","data-testid":`activity-${T.id}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary",children:T.studentName.split(" ").map(E=>E[0]).join("")})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:T.studentName}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${T.passType==="nurse"?"bg-red-100 text-red-700":T.passType==="discipline"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:T.passType==="nurse"?"Nurse":T.passType==="discipline"?"Discipline":"General"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:T.action})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:T.time}),o.jsx("p",{className:"text-xs text-muted-foreground",children:T.date})]})]})},T.id))})]})})]})}var gw="Switch",[s7,wq]=Ln(gw),[i7,o7]=s7(gw),sj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,x]=g.useState(null),b=ke(e,C=>x(C)),v=g.useRef(!1),y=m?h||!!m.closest("form"):!0,[_=!1,S]=oi({prop:s,defaultProp:i,onChange:d});return o.jsxs(i7,{scope:n,checked:_,disabled:l,children:[o.jsx(we.button,{type:"button",role:"switch","aria-checked":_,"aria-required":a,"data-state":aj(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:Y(t.onClick,C=>{S(R=>!R),y&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),y&&o.jsx(a7,{control:m,bubbles:!v.current,name:r,value:c,checked:_,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});sj.displayName=gw;var ij="SwitchThumb",oj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=o7(ij,n);return o.jsx(we.span,{"data-state":aj(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});oj.displayName=ij;var a7=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=g.useRef(null),a=ux(n),l=Bv(e);return g.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function aj(t){return t?"checked":"unchecked"}var lj=sj,l7=oj;const Iy=g.forwardRef(({className:t,...e},n)=>o.jsx(lj,{className:me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(l7,{className:me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Iy.displayName=lj.displayName;function c7({user:t}){const[e,n]=g.useState({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30}),[r,s]=g.useState(t.name||""),[i,a]=g.useState(!1),[l,c]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,h]=g.useState({current:!1,new:!1,confirm:!1}),[f,m]=g.useState(!1),{toast:x}=Gt();g.useEffect(()=>{n({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30})},[t]);const b=async()=>{try{r!==t.name&&await Ge("PUT","/api/users/me",{name:r}),await Ge("PUT","/api/users/settings",e),ze.invalidateQueries({queryKey:["/api/users/me"]}),x({title:"Settings Saved",description:"Your profile and settings have been updated successfully."})}catch(y){x({title:"Error",description:y.message,variant:"destructive"})}},v=async()=>{if(l.newPassword!==l.confirmPassword){x({title:"Error",description:"New passwords don't match",variant:"destructive"});return}if(l.newPassword.length<6){x({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}m(!0);try{await Ge("PUT","/api/users/me/password",{currentPassword:l.currentPassword,newPassword:l.newPassword}),x({title:"Password Changed",description:"Your password has been updated successfully."}),a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(y){x({title:"Error",description:y.message,variant:"destructive"})}finally{m(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Profile & Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your profile and configure your school settings"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx($g,{className:"w-5 h-5"}),"Profile Information"]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Email"}),o.jsx(fe,{value:t.email,readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-email"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Name"}),o.jsx(fe,{value:r,onChange:y=>s(y.target.value),placeholder:"Enter your name","data-testid":"input-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Role"}),o.jsx(fe,{value:t.isAdmin?"Administrator":"Teacher",readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-role"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Password"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(fe,{value:"••••••••",onChange:()=>{},readOnly:!0,disabled:!0,className:"bg-muted flex-1",type:"password"}),o.jsxs(G,{variant:"outline",onClick:()=>a(!0),"data-testid":"button-change-password",children:[o.jsx(W_,{className:"w-4 h-4 mr-2"}),"Change"]})]})]})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(t4,{className:"w-5 h-5"}),"School Information"]})}),o.jsx(le,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(fe,{id:"schoolName",value:e.schoolName,onChange:y=>n({...e,schoolName:y.target.value}),placeholder:"Enter school name","data-testid":"input-school-name"})]})})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(n4,{className:"w-5 h-5"}),"System Settings"]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Enable Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when students are out for extended periods"})]}),o.jsx(Iy,{checked:e.enableNotifications,onCheckedChange:y=>n({...e,enableNotifications:y}),"data-testid":"switch-notifications"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Auto-Return Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically mark students as returned after timeout"})]}),o.jsx(Iy,{checked:e.autoReturn,onCheckedChange:y=>n({...e,autoReturn:y}),"data-testid":"switch-auto-return"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"passTimeout",children:"Pass Timeout (minutes)"}),o.jsx(fe,{id:"passTimeout",type:"number",value:e.passTimeout,onChange:y=>n({...e,passTimeout:parseInt(y.target.value)||30}),min:"5",max:"180","data-testid":"input-pass-timeout"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Time before a pass is considered overdue (5-180 minutes)"})]})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(Re,{children:"Getting Started"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Go to the Roster tab and add your grade levels (6th, 7th, 8th, etc.)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use bulk add or individual student creation in the Roster tab"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Select Active Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on grade cards in Roster to make them active in MyClass (they'll turn green)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"4"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Manage Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the MyClass tab to issue and track student hall passes"})]})]})]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(G,{onClick:b,"data-testid":"button-save-settings",children:"Save Settings"})})]}),o.jsx($r,{open:i,onOpenChange:a,children:o.jsxs(mr,{className:"max-w-md",children:[o.jsxs(pr,{children:[o.jsxs(gr,{className:"flex items-center gap-2",children:[o.jsx(W_,{className:"w-5 h-5"}),"Change Password"]}),o.jsx(lx,{children:"Enter your current password and choose a new one"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"currentPassword",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(fe,{id:"currentPassword",type:d.current?"text":"password",value:l.currentPassword,onChange:y=>c({...l,currentPassword:y.target.value}),placeholder:"Enter current password","data-testid":"input-current-password"}),o.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,current:!d.current}),children:d.current?o.jsx(Zm,{className:"w-4 h-4"}):o.jsx(Rd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"newPassword",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(fe,{id:"newPassword",type:d.new?"text":"password",value:l.newPassword,onChange:y=>c({...l,newPassword:y.target.value}),placeholder:"Enter new password","data-testid":"input-new-password"}),o.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,new:!d.new}),children:d.new?o.jsx(Zm,{className:"w-4 h-4"}):o.jsx(Rd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(fe,{id:"confirmPassword",type:d.confirm?"text":"password",value:l.confirmPassword,onChange:y=>c({...l,confirmPassword:y.target.value}),placeholder:"Confirm new password","data-testid":"input-confirm-password"}),o.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,confirm:!d.confirm}),children:d.confirm?o.jsx(Zm,{className:"w-4 h-4"}):o.jsx(Rd,{className:"w-4 h-4"})})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx(G,{variant:"outline",onClick:()=>{a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})},disabled:f,children:"Cancel"}),o.jsx(G,{onClick:v,disabled:f||!l.currentPassword||!l.newPassword||!l.confirmPassword,"data-testid":"button-confirm-password-change",children:f?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})})]})}const u7=eu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Uc=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:me(u7({variant:e}),t),...n}));Uc.displayName="Alert";const d7=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:me("mb-1 font-medium leading-none tracking-tight",t),...e}));d7.displayName="AlertTitle";const $c=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:me("text-sm [&_p]:leading-relaxed",t),...e}));$c.displayName="AlertDescription";function h7({user:t}){var h;const{toast:e}=Gt(),n=Pv(),{data:r,isLoading:s}=$t({queryKey:["/api/subscription-status"],enabled:!!t}),i=Wo({mutationFn:()=>Ge("POST","/api/cancel-subscription"),onSuccess:f=>{e({title:"Subscription Cancelled",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Cancellation Failed",description:f.message||"Failed to cancel subscription",variant:"destructive"})}}),a=Wo({mutationFn:()=>Ge("POST","/api/reactivate-subscription"),onSuccess:f=>{e({title:"Subscription Reactivated",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Reactivation Failed",description:f.message||"Failed to reactivate subscription",variant:"destructive"})}});if(s)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6"}),o.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=(f,m="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:m}).format(f/100),d=[{name:"Basic",users:"3 users",price:"$6",annual:"$48/year",monthlySavings:"$24",features:["3 teacher licenses","Full feature access","Email support","All reporting tools"],current:!0},{name:"Small School",users:"10 users",price:"$35",annual:"$336/year",monthlySavings:"$84",features:["10 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Medium School",users:"25 users",price:"$75",annual:"$720/year",monthlySavings:"$180",features:["25 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Large School",users:"50 users",price:"$120",annual:"$1,152/year",monthlySavings:"$288",features:["50 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Unlimited",users:"Unlimited",price:"$180",annual:"$1,728/year",monthlySavings:"$432",features:["Unlimited teachers","Full feature access","Email support","All reporting tools"],current:!1}];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Billing & Subscription"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your subscription and billing information"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Fg,{className:"w-5 h-5 text-primary"}),o.jsx("h3",{className:"font-medium text-foreground",children:"Current Subscription"})]}),o.jsx(jn,{variant:r!=null&&r.hasActiveSubscription?"default":"secondary","data-testid":"subscription-status-badge",children:r!=null&&r.hasActiveSubscription?"Active":r!=null&&r.isTrialAccount?"Free Trial":"Free Plan"})]}),r!=null&&r.hasActiveSubscription?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Plan"}),o.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(h=r.plan)==null?void 0:h.replace("_"," ")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Amount"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c(r.amount,r.currency),o.jsxs("span",{className:"text-xs",children:["/",r.interval]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Teacher Licenses"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.maxTeachers===-1?"Unlimited":r.maxTeachers})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Next Billing"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:l(r.currentPeriodEnd)})]})]}),o.jsx("div",{className:"border-t pt-4",children:r.cancelled?o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Uc,{children:[o.jsx(IC,{className:"h-4 w-4"}),o.jsxs($c,{children:["Your subscription has been cancelled and will end on ",l(r.currentPeriodEnd),". You can reactivate it at any time before then."]})]}),o.jsxs(G,{onClick:()=>a.mutate(),disabled:a.isPending,className:"w-full","data-testid":"button-reactivate-subscription",children:[o.jsx(e4,{className:"w-4 h-4 mr-2"}),a.isPending?"Reactivating...":"Reactivate Subscription"]})]}):o.jsxs(G,{onClick:()=>{confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your current billing period.")&&i.mutate()},disabled:i.isPending,variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50","data-testid":"button-cancel-subscription",children:[o.jsx(nu,{className:"w-4 h-4 mr-2"}),i.isPending?"Cancelling...":"Cancel Subscription"]})})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:r!=null&&r.isTrialAccount?"You are currently on a free trial with unlimited access.":"You are on the free plan with limited features."}),o.jsx(G,{className:"w-full","data-testid":"button-upgrade-subscription",onClick:()=>window.open("/register","_blank"),children:"Upgrade to Paid Plan"})]})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-6",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Available Plans"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:d.map(f=>{const m=f.name.toLowerCase().replace(" ","_")===(r==null?void 0:r.plan);return o.jsx(ae,{className:m?"border-primary":"",children:o.jsx(le,{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"font-medium text-foreground mb-1",children:f.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:f.users}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:f.price}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"per month"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:f.annual}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium mb-4",children:["Save ",f.monthlySavings," annually"]}),o.jsx("ul",{className:"text-xs text-muted-foreground space-y-1 mb-6",children:f.features.map((x,b)=>o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 bg-primary rounded-full flex-shrink-0"}),x]},b))}),m?o.jsx(jn,{variant:"secondary",className:"w-full",children:"Current Plan"}):o.jsx(G,{className:"w-full",variant:"outline",onClick:()=>window.open("/register","_blank"),"data-testid":`button-select-${f.name.toLowerCase().replace(" ","-")}`,children:"Select Plan"})]})})},f.name)})})]})})]})]})}var yw="Checkbox",[f7,_q]=Ln(yw),[m7,p7]=f7(yw),cj=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,x]=g.useState(null),b=ke(e,R=>x(R)),v=g.useRef(!1),y=m?h||!!m.closest("form"):!0,[_=!1,S]=oi({prop:s,defaultProp:i,onChange:d}),C=g.useRef(_);return g.useEffect(()=>{const R=m==null?void 0:m.form;if(R){const D=()=>S(C.current);return R.addEventListener("reset",D),()=>R.removeEventListener("reset",D)}},[m,S]),o.jsxs(m7,{scope:n,state:_,disabled:l,children:[o.jsx(we.button,{type:"button",role:"checkbox","aria-checked":ri(_)?"mixed":_,"aria-required":a,"data-state":hj(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onKeyDown:Y(t.onKeyDown,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:Y(t.onClick,R=>{S(D=>ri(D)?!0:!D),y&&(v.current=R.isPropagationStopped(),v.current||R.stopPropagation())})}),y&&o.jsx(g7,{control:m,bubbles:!v.current,name:r,value:c,checked:_,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:ri(i)?!1:i})]})});cj.displayName=yw;var uj="CheckboxIndicator",dj=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=p7(uj,n);return o.jsx(sr,{present:r||ri(i.state)||i.state===!0,children:o.jsx(we.span,{"data-state":hj(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});dj.displayName=uj;var g7=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,a=g.useRef(null),l=ux(n),c=Bv(e);g.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&x){const b=new Event("click",{bubbles:r});h.indeterminate=ri(n),x.call(h,ri(n)?!1:n),h.dispatchEvent(b)}},[l,n,r]);const d=g.useRef(ri(n)?!1:n);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ri(t){return t==="indeterminate"}function hj(t){return ri(t)?"indeterminate":t?"checked":"unchecked"}var fj=cj,y7=dj;const mj=g.forwardRef(({className:t,...e},n)=>o.jsx(fj,{ref:n,className:me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:o.jsx(y7,{className:me("flex items-center justify-center text-current"),children:o.jsx(tu,{className:"h-4 w-4"})})}));mj.displayName=fj.displayName;function v7(){const t=Sz.isConfigured(),n=t?{icon:o.jsx(Gr,{className:"h-5 w-5 text-green-500"}),status:"Configured",variant:"default",message:"Firebase is properly configured and ready to use."}:{icon:o.jsx(PC,{className:"h-5 w-5 text-destructive"}),status:"Not Configured",variant:"destructive",message:"Firebase keys are missing. Please add your Firebase configuration in the secrets."};return o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[n.icon,"Firebase Integration"]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(jn,{variant:n.variant,children:n.status})}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.message}),t&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Configuration Details:"}),o.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsxs("div",{children:["Project ID: ","passpilot-55c3d"]}),o.jsxs("div",{children:["App ID: ","1:134904289902:web:e62d187d4ef81703cfe47f"]}),o.jsxs("div",{children:["API Key: ","••••••••"]})]})]}),!t&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[o.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(IC,{className:"h-4 w-4"}),"Required Environment Variables:"]}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:"• VITE_FIREBASE_API_KEY"}),o.jsx("li",{children:"• VITE_FIREBASE_PROJECT_ID"}),o.jsx("li",{children:"• VITE_FIREBASE_APP_ID"})]})]})]})})]})}var pj="AlertDialog",[x7,Eq]=Ln(pj,[IN]),ms=IN(),gj=t=>{const{__scopeAlertDialog:e,...n}=t,r=ms(e);return o.jsx(qN,{...r,...n,modal:!0})};gj.displayName=pj;var w7="AlertDialogTrigger",yj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(HN,{...s,...r,ref:e})});yj.displayName=w7;var _7="AlertDialogPortal",vj=t=>{const{__scopeAlertDialog:e,...n}=t,r=ms(e);return o.jsx(GN,{...r,...n})};vj.displayName=_7;var E7="AlertDialogOverlay",xj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(rx,{...s,...r,ref:e})});xj.displayName=E7;var da="AlertDialogContent",[S7,T7]=x7(da),b7=tC("AlertDialogContent"),wj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=ms(n),a=g.useRef(null),l=ke(e,a),c=g.useRef(null);return o.jsx(fF,{contentName:da,titleName:_j,docsSlug:"alert-dialog",children:o.jsx(S7,{scope:n,cancelRef:c,children:o.jsxs(sx,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Y(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(b7,{children:r}),o.jsx(N7,{contentRef:a})]})})})});wj.displayName=da;var _j="AlertDialogTitle",Ej=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(ix,{...s,...r,ref:e})});Ej.displayName=_j;var Sj="AlertDialogDescription",Tj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(ox,{...s,...r,ref:e})});Tj.displayName=Sj;var C7="AlertDialogAction",bj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(ax,{...s,...r,ref:e})});bj.displayName=C7;var Cj="AlertDialogCancel",Nj=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=T7(Cj,n),i=ms(n),a=ke(e,s);return o.jsx(ax,{...i,...r,ref:a})});Nj.displayName=Cj;var N7=({contentRef:t})=>{const e=`\`${da}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${da}\` by passing a \`${Sj}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${da}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},I7=gj,P7=yj,R7=vj,Ij=xj,Pj=wj,Rj=bj,Aj=Nj,jj=Ej,kj=Tj;const Cp=I7,Np=P7,A7=R7,Dj=g.forwardRef(({className:t,...e},n)=>o.jsx(Ij,{className:me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Dj.displayName=Ij.displayName;const Hd=g.forwardRef(({className:t,...e},n)=>o.jsxs(A7,{children:[o.jsx(Dj,{}),o.jsx(Pj,{ref:n,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Hd.displayName=Pj.displayName;const Gd=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});Gd.displayName="AlertDialogHeader";const Wd=({className:t,...e})=>o.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wd.displayName="AlertDialogFooter";const Kd=g.forwardRef(({className:t,...e},n)=>o.jsx(jj,{ref:n,className:me("text-lg font-semibold",t),...e}));Kd.displayName=jj.displayName;const Qd=g.forwardRef(({className:t,...e},n)=>o.jsx(kj,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Qd.displayName=kj.displayName;const Yd=g.forwardRef(({className:t,...e},n)=>o.jsx(Rj,{ref:n,className:me(Yv(),t),...e}));Yd.displayName=Rj.displayName;const Xd=g.forwardRef(({className:t,...e},n)=>o.jsx(Aj,{ref:n,className:me(Yv({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xd.displayName=Aj.displayName;function j7({user:t}){var T;const[e,n]=g.useState({schoolName:t.schoolName||"",enableNotifications:!0,autoReturn:!1,passTimeout:30}),[r,s]=g.useState(t.assignedGrades||[]),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(!1),{toast:f}=Gt(),{data:m=[]}=$t({queryKey:["/api/grades"]}),{data:x=[]}=$t({queryKey:["/api/admin/teachers"],enabled:t.isAdmin}),{data:b}=$t({queryKey:["/api/admin/school-info"],enabled:t.isAdmin}),v=async()=>{try{await Ge("PUT","/api/users/settings",{...e,assignedGrades:r}),ze.invalidateQueries({queryKey:["/api/users/me"]}),f({title:"Settings Saved",description:"Your settings have been updated successfully."})}catch(E){f({title:"Error",description:E.message,variant:"destructive"})}},y=(E,N)=>{s(N?[...r,E]:r.filter(P=>P!==E))},_=Wo({mutationFn:async E=>(await Ge("POST","/api/admin/teachers",E)).json(),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/teachers"]}),a(""),c(""),h(!1),f({title:"Teacher Added",description:"Teacher invitation sent. They'll set their password on first login."})},onError:E=>{f({title:"Error",description:E.message||"Failed to add teacher",variant:"destructive"})}}),S=Wo({mutationFn:async E=>{await Ge("DELETE",`/api/admin/teachers/${E}`)},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Removed",description:"Teacher has been removed from your school."})},onError:E=>{f({title:"Error",description:E.message||"Failed to remove teacher",variant:"destructive"})}}),C=Wo({mutationFn:async E=>(await Ge("PATCH",`/api/admin/teachers/${E}/promote`)).json(),onSuccess:E=>{ze.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Promoted",description:E.message||"Teacher has been promoted to admin."})},onError:E=>{f({title:"Error",description:E.message||"Failed to promote teacher",variant:"destructive"})}}),R=Wo({mutationFn:async E=>(await Ge("PATCH",`/api/admin/teachers/${E}/demote`)).json(),onSuccess:E=>{ze.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Admin Demoted",description:E.message||"Admin has been demoted to teacher."})},onError:E=>{f({title:"Error",description:E.message||"Failed to demote admin",variant:"destructive"})}}),D=()=>{if(!i||!l){f({title:"Error",description:"Please enter email and name",variant:"destructive"});return}const E=(b==null?void 0:b.maxTeachers)||1;if(x.length>=E){f({title:"User Limit Reached",description:`Your ${(b==null?void 0:b.plan)||"current"} plan allows ${E} teacher${E===1?"":"s"}. Upgrade to add more teachers.`,variant:"destructive"});return}_.mutate({email:i,name:l})},M=E=>{switch(E){case"free":return 10;case"basic_10":return 10;case"standard_25":return 25;case"premium_50":return 50;case"enterprise_unlimited":return"Unlimited";default:return 10}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Admin Panel"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure school settings and system administration"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(v7,{}),t.isAdmin&&o.jsxs(o.Fragment,{children:[o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(YM,{className:"w-5 h-5"}),"School Plan & Limits"]})}),o.jsx(le,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Current Plan"}),o.jsx(jn,{variant:"outline",className:"mt-1",children:((T=b==null?void 0:b.plan)==null?void 0:T.replace("_"," ").toUpperCase())||"FREE"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Teachers"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[x.length," / ",M((b==null?void 0:b.plan)||"free")]})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"School ID"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:(b==null?void 0:b.schoolId)||"Loading..."})]})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(ep,{className:"w-5 h-5"}),"Add New Teacher"]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[d?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacher-email",children:"Teacher Email"}),o.jsx(fe,{id:"teacher-email",type:"email",value:i,onChange:E=>a(E.target.value),placeholder:"teacher@school.edu","data-testid":"input-teacher-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacher-name",children:"Teacher Name"}),o.jsx(fe,{id:"teacher-name",value:l,onChange:E=>c(E.target.value),placeholder:"Teacher Name","data-testid":"input-teacher-name"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(G,{onClick:D,disabled:_.isPending,"data-testid":"button-confirm-add-teacher",children:_.isPending?"Adding...":"Add Teacher"}),o.jsx(G,{variant:"outline",onClick:()=>h(!1),"data-testid":"button-cancel-add-teacher",children:"Cancel"})]})]}):o.jsxs(G,{onClick:()=>h(!0),className:"w-full","data-testid":"button-add-teacher",children:[o.jsx(ep,{className:"w-4 h-4 mr-2"}),"Add Teacher"]}),(b==null?void 0:b.maxTeachers)&&x.length>=b.maxTeachers&&o.jsxs("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg flex items-center gap-2",children:[o.jsx(bh,{className:"w-4 h-4 text-amber-600"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["You've reached your plan limit of ",b.maxTeachers," teacher",b.maxTeachers===1?"":"s",". Upgrade your plan to add more teachers."]})]})]})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(Wn,{className:"w-5 h-5"}),"Current Teachers (",x.length,")"]})}),o.jsx(le,{children:o.jsx("div",{className:"space-y-3",children:x.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No teachers added yet. Add your first teacher above."}):x.map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`teacher-item-${E.email}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(RC,{className:"w-4 h-4 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:E.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:E.email})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{variant:E.status==="active"?"default":"secondary",children:E.status}),o.jsx(jn,{variant:E.isAdmin?"default":"outline",children:E.isAdmin?"Admin":"Teacher"}),(E.id!==(t==null?void 0:t.id)||x.filter(N=>N.isAdmin).length>1)&&o.jsxs(o.Fragment,{children:[E.isAdmin?o.jsxs(Cp,{children:[o.jsx(Np,{asChild:!0,children:o.jsx(G,{variant:"ghost",size:"sm",className:"text-orange-600 hover:text-orange-700","data-testid":`button-demote-admin-${E.email}`,children:o.jsx(i4,{className:"w-4 h-4"})})}),o.jsxs(Hd,{children:[o.jsxs(Gd,{children:[o.jsx(Kd,{children:"Demote Admin"}),o.jsxs(Qd,{children:["Are you sure you want to demote ",E.name," (",E.email,") from admin to teacher? They will lose admin privileges and cannot access admin functions."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsx(Yd,{onClick:()=>R.mutate(E.id),className:"bg-orange-600 text-white hover:bg-orange-700",children:"Demote to Teacher"})]})]})]}):o.jsxs(Cp,{children:[o.jsx(Np,{asChild:!0,children:o.jsx(G,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700","data-testid":`button-promote-teacher-${E.email}`,children:o.jsx(ep,{className:"w-4 h-4"})})}),o.jsxs(Hd,{children:[o.jsxs(Gd,{children:[o.jsx(Kd,{children:"Promote to Admin"}),o.jsxs(Qd,{children:["Are you sure you want to promote ",E.name," (",E.email,") to admin? They will gain full administrative privileges including the ability to manage other teachers and school settings."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsx(Yd,{onClick:()=>C.mutate(E.id),className:"bg-green-600 text-white hover:bg-green-700",children:"Promote to Admin"})]})]})]}),(!E.isAdmin||x.filter(N=>N.isAdmin).length>1)&&o.jsxs(Cp,{children:[o.jsx(Np,{asChild:!0,children:o.jsx(G,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive","data-testid":`button-remove-teacher-${E.email}`,children:o.jsx(Ug,{className:"w-4 h-4"})})}),o.jsxs(Hd,{children:[o.jsxs(Gd,{children:[o.jsxs(Kd,{children:["Remove ",E.isAdmin?"Admin":"Teacher"]}),o.jsxs(Qd,{children:["Are you sure you want to remove ",E.name," (",E.email,") from your school? This action cannot be undone and will revoke their access to all school data.",E.isAdmin&&" They will lose all administrative privileges."]})]}),o.jsxs(Wd,{children:[o.jsx(Xd,{children:"Cancel"}),o.jsxs(Yd,{onClick:()=>S.mutate(E.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Remove ",E.isAdmin?"Admin":"Teacher"]})]})]})]})]})]})]},E.id))})})]})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(Re,{children:"School Information"})}),o.jsx(le,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(fe,{id:"schoolName",value:e.schoolName,onChange:E=>n({...e,schoolName:E.target.value}),"data-testid":"input-school-name"})]})})})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(Re,{children:"Teacher Profile"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherName",children:"Name"}),o.jsx(fe,{id:"teacherName",value:t.name||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherEmail",children:"Email"}),o.jsx(fe,{id:"teacherEmail",value:t.email||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-email"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School"}),o.jsx(fe,{id:"schoolName",value:t.schoolName||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-school-name-readonly"})]})]})})]}),!t.isAdmin&&o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(Re,{children:"Grade Level Access"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which grade levels you want access to. You can manage students and passes for these grades."}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(E=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx(mj,{id:`grade-${E.id}`,checked:r.includes(E.name),onCheckedChange:N=>y(E.name,!!N),"data-testid":`checkbox-grade-${E.name}`}),o.jsxs(ne,{htmlFor:`grade-${E.id}`,className:"text-sm font-medium cursor-pointer",children:["Grade ",E.name]})]},E.id))}),m.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground bg-gray-50 dark:bg-gray-800 p-3 rounded",children:"No grades available yet. Add grades in the Roster tab first."}),r.length===0&&m.length>0&&o.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-3 rounded",children:"Please select at least one grade to access student management features."}),r.length>0&&o.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded",children:o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:["You have access to ",r.length," grade level",r.length!==1?"s":"",": ",r.join(", ")]})})]})})]}),o.jsx(G,{onClick:v,className:"w-full","data-testid":"button-save-settings",children:"Save Settings"})]})]})}function k7(){const[,t]=ds(),{data:e}=$t({queryKey:["/api/trial-status"],refetchInterval:6e4});if(!(e!=null&&e.isTrialAccount))return null;if(e.isExpired)return o.jsxs(Uc,{className:"mb-4 border-red-500 bg-red-50 dark:bg-red-950",children:[o.jsx(bh,{className:"h-4 w-4 text-red-600"}),o.jsxs($c,{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-red-800 dark:text-red-200 font-medium",children:"Your 30-day free trial has expired. Upgrade now to continue using PassPilot."}),o.jsxs(G,{size:"sm",className:"ml-4",onClick:()=>t("/register"),"data-testid":"button-upgrade-now",children:[o.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})]});const n=e.daysRemaining<=7,r=n?"bg-yellow-50 dark:bg-yellow-950":"bg-blue-50 dark:bg-blue-950",s=n?"border-yellow-500":"border-blue-500",i=n?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200",a=n?"text-yellow-600":"text-blue-600";return o.jsxs(Uc,{className:`mb-4 ${s} ${r}`,children:[o.jsx(ro,{className:`h-4 w-4 ${a}`}),o.jsxs($c,{className:"flex items-center justify-between",children:[o.jsx("span",{className:`${i} font-medium`,children:n?`⚠️ Trial expires in ${e.daysRemaining} day${e.daysRemaining!==1?"s":""}!`:`Free trial: ${e.daysRemaining} days remaining`}),o.jsxs("div",{className:"flex gap-2",children:[n&&o.jsxs(G,{size:"sm",variant:"outline",onClick:()=>t("/register"),"data-testid":"button-upgrade-trial",children:[o.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Upgrade"]}),o.jsx(G,{size:"sm",variant:"ghost",onClick:()=>t("/register"),"data-testid":"button-view-plans",children:"View Plans"})]})]})]})}function D7({user:t,enabled:e=!0}){const{toast:n}=Gt(),r=g.useRef(new Set),{data:s}=$t({queryKey:["/api/passes/active"],refetchInterval:e&&(t!=null&&t.enableNotifications)?3e4:!1,enabled:e&&(t==null?void 0:t.enableNotifications)});g.useEffect(()=>{if(!(t!=null&&t.enableNotifications)||!s)return;const i=t.passTimeout||30,a=new Date;s.forEach(l=>{if(!l.checkoutTime||r.current.has(l.id))return;const c=new Date(l.checkoutTime),d=Math.floor((a.getTime()-c.getTime())/(1e3*60));d>=i&&(r.current.add(l.id),n({title:"Pass Overdue",description:`${l.student.name} has been out for ${d} minutes (${l.passType} pass)`,variant:"destructive"}))})},[s,t==null?void 0:t.enableNotifications,t==null?void 0:t.passTimeout,n]),g.useEffect(()=>{if(!s)return;const i=new Set(s.map(l=>l.id));Array.from(r.current).forEach(l=>{i.has(l)||r.current.delete(l)})},[s])}function O7({user:t,onLogout:e}){const[n,r]=g.useState("passes");D7({user:t,enabled:t==null?void 0:t.enableNotifications});const[s,i]=g.useState(()=>{try{const h=localStorage.getItem(`selectedGrades_${t.id}`);return h?new Set(JSON.parse(h)):new Set}catch{return new Set}}),[a,l]=g.useState(()=>{try{return localStorage.getItem(`currentGrade_${t.id}`)||null}catch{return null}});g.useEffect(()=>{try{localStorage.setItem(`selectedGrades_${t.id}`,JSON.stringify(Array.from(s)))}catch(h){console.warn("Failed to save selected grades to localStorage:",h)}},[s,t.id]),g.useEffect(()=>{try{a?localStorage.setItem(`currentGrade_${t.id}`,a):localStorage.removeItem(`currentGrade_${t.id}`)}catch(h){console.warn("Failed to save current grade to localStorage:",h)}},[a,t.id]),Gt();const c=[{id:"passes",label:"Passes",icon:"fas fa-clipboard-list"},{id:"myclass",label:"My Class",icon:"fas fa-chalkboard-teacher"},{id:"roster",label:"Roster",icon:"fas fa-users"},{id:"upload",label:"Upload",icon:"fas fa-cloud-upload-alt"},{id:"reports",label:"Reports",icon:"fas fa-chart-bar"},{id:"profile",label:"Profile",icon:"fas fa-user"}];t.isAdmin&&(c.push({id:"admin",label:"Admin",icon:"fas fa-cog"}),c.push({id:"billing",label:"Billing",icon:"fas fa-credit-card"}));const d=()=>{switch(n){case"passes":return o.jsx(J1,{user:t,selectedGrades:s});case"myclass":return o.jsx(e7,{user:t,selectedGrades:s,currentGrade:a,onRemoveGrade:h=>{const f=new Set(s);if(f.delete(h),a===h){const m=Array.from(f);l(m.length>0?m[0]:null)}i(f)}});case"roster":return o.jsx(t7,{user:t,selectedGrades:s,onGradeClick:h=>{const f=new Set(s);s.has(h)?(f.delete(h),a===h&&l(null)):(f.add(h),l(h)),i(f)}});case"upload":return o.jsx(n7,{user:t});case"reports":return o.jsx(r7,{user:t});case"admin":return t.isAdmin?o.jsx(j7,{user:t}):null;case"profile":return o.jsx(c7,{user:t});case"billing":return t.isAdmin?o.jsx(h7,{user:t}):null;default:return o.jsx(J1,{user:t})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card shadow-sm border-b border-border px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"PassPilot"}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:t.schoolName||"School"}),o.jsx("span",{children:"•"}),o.jsx("span",{children:t.name||"Teacher"})]})]}),o.jsx(G,{onClick:e,variant:"outline",size:"sm",children:"Logout"})]})}),o.jsxs("main",{className:"pb-20 min-h-screen",children:[o.jsx("div",{className:"p-4",children:o.jsx(k7,{})}),d()]}),o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-40",children:o.jsx("div",{className:`grid h-16 ${c.length===6?"grid-cols-6":"grid-cols-7"}`,children:c.map(h=>o.jsxs(G,{variant:"ghost",className:`flex flex-col items-center justify-center h-full rounded-none ${n===h.id?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground"}`,onClick:()=>r(h.id),"data-testid":`button-tab-${h.id}`,children:[o.jsx("i",{className:`${h.icon} text-lg mb-1`}),o.jsx("span",{className:"text-xs",children:h.label})]},h.id))})})]})}function eS(){const{user:t,logout:e,isLoading:n}=Cf();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-orange-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):t?o.jsx(O7,{user:t,onLogout:e}):o.jsx(JF,{})}function M7(){const{login:t,registerSchool:e}=Cf(),{toast:n}=Gt();ds();const[r,s]=g.useState("login"),[i,a]=g.useState(!1),[l,c]=g.useState({email:"",password:""}),[d,h]=g.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free"}),[f,m]=g.useState({email:""}),x=async y=>{y.preventDefault(),a(!0);try{const _=await t(l.email,l.password);_!=null&&_.message&&n({title:"Welcome!",description:_.message})}catch(_){n({title:"Error",description:_.message,variant:"destructive"})}finally{a(!1)}},b=async y=>{y.preventDefault(),a(!0);try{await e(d),n({title:"Success!",description:"School registered successfully!"})}catch(_){n({title:"Error",description:_.message,variant:"destructive"})}finally{a(!1)}},v=async y=>{y.preventDefault(),a(!0);try{const _=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.email})}),S=await _.json();if(!_.ok)throw new Error(S.message);n({title:"Reset Email Sent",description:"Check your email for password reset instructions."}),s("login")}catch(_){n({title:"Error",description:_.message,variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ae,{className:"w-full max-w-md",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-id-card text-white text-2xl"})}),o.jsx(Re,{className:"text-2xl font-bold",children:r==="login"?"Sign In to PassPilot":r==="forgot-password"?"Reset Your Password":"Register Your School"})]}),o.jsx(le,{children:r==="login"?o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Email Address"}),o.jsx(fe,{type:"email",id:"email",placeholder:"teacher@school.edu",value:l.email,onChange:y=>c({...l,email:y.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(fe,{type:"password",id:"password",placeholder:"••••••••",value:l.password,onChange:y=>c({...l,password:y.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(G,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-login",children:i?"Signing In...":"Sign In"}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(G,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>s("forgot-password"),"data-testid":"button-forgot-password",children:"Forgot Password?"}),o.jsx(G,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>s("register"),"data-testid":"button-register-link",children:"Register School"})]})]}):r==="forgot-password"?o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"forgot-email",children:"Email Address"}),o.jsx(fe,{type:"email",id:"forgot-email",placeholder:"teacher@school.edu",value:f.email,onChange:y=>m({...f,email:y.target.value}),required:!0,"data-testid":"input-forgot-email"})]}),o.jsx(G,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-send-reset",children:i?"Sending Reset Email...":"Send Reset Email"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(G,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>s("login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]}):o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(fe,{type:"text",id:"schoolName",placeholder:"Lincoln Elementary School",value:d.schoolName,onChange:y=>h({...d,schoolName:y.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(fe,{type:"text",id:"adminName",placeholder:"Principal Smith",value:d.adminName,onChange:y=>h({...d,adminName:y.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(fe,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:d.adminEmail,onChange:y=>h({...d,adminEmail:y.target.value}),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Password"}),o.jsx(fe,{type:"password",id:"adminPassword",placeholder:"••••••••",value:d.adminPassword,onChange:y=>h({...d,adminPassword:y.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsx(G,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:i,"data-testid":"button-register",children:i?"Registering...":"Register School"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(G,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>s("login"),"data-testid":"button-back-to-login-from-register",children:"Back to Sign In"})})]})})]})})}var Oj="basil",L7=function(e){return e===3?"v3":e},Mj="https://js.stripe.com",V7="".concat(Mj,"/").concat(Oj,"/stripe.js"),F7=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,U7=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,tS="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",$7=function(e){return F7.test(e)||U7.test(e)},z7=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Mj,'"]')),n=0;n<e.length;n++){var r=e[n];if($7(r.src))return r}return null},nS=function(e){var n="",r=document.createElement("script");r.src="".concat(V7).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},B7=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:n})},Rl=null,fd=null,md=null,q7=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},H7=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},G7=function(e){return Rl!==null?Rl:(Rl=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(tS),window.Stripe){n(window.Stripe);return}try{var s=z7();if(s&&e)console.warn(tS);else if(!s)s=nS(e);else if(s&&md!==null&&fd!==null){var i;s.removeEventListener("load",md),s.removeEventListener("error",fd),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=nS(e)}md=H7(n,r),fd=q7(r),s.addEventListener("load",md),s.addEventListener("error",fd)}catch(a){r(a);return}}),Rl.catch(function(n){return Rl=null,Promise.reject(n)}))},W7=function(e,n,r){if(e===null)return null;var s=n[0],i=s.match(/^pk_test/),a=L7(e.version),l=Oj;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,n);return B7(c,r),c},Al,Lj=!1,Vj=function(){return Al||(Al=G7(null).catch(function(e){return Al=null,Promise.reject(e)}),Al)};Promise.resolve().then(function(){return Vj()}).catch(function(t){Lj||console.warn(t)});var K7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Lj=!0;var s=Date.now();return Vj().then(function(i){return W7(i,n,s)})};const Q7=K7("pk_live_51RtLjlBw14YCsyD6BiOwJkWZVUnznHUwGDJa0Sx5UwQwyQsXgLtq29TT6YJpygC7I4IE6KsXNaSc8yU6vH3mJclb00iOMfz4tJ"),rS=[{id:"free",name:"Demo Plan",price:0,maxTeachers:10,features:["10 teacher licenses","Full feature access","For demo purposes only","No time limit"]},{id:"free_trial",name:"30-Day Free Trial",price:0,maxTeachers:-1,features:["Unlimited teachers for 30 days","Full feature access","Real-time pass tracking","Comprehensive reporting","Email support"]},{id:"basic",name:"Basic",price:6,annualPrice:48,maxTeachers:3,features:["3 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1Rtco7Bw14YCsyD6u5jnXzsw",annualPriceId:"price_1Rtco7Bw14YCsyD6LEmSd5ek"},{id:"small_school",name:"Small School",price:35,annualPrice:336,maxTeachers:10,features:["10 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1Rtd13Bw14YCsyD6s94Aj95z",annualPriceId:"price_1Rtd13Bw14YCsyD6PiBLGG75"},{id:"medium_school",name:"Medium School",price:75,annualPrice:720,maxTeachers:25,features:["25 teacher licenses","Full feature access","Pass tracking & reports","Email support"],popular:!0,priceId:"price_1Rtd9rBw14YCsyD6oxHsrBRT",annualPriceId:"price_1RtdAHBw14YCsyD6D8cXpvJ3"},{id:"large_school",name:"Large School",price:120,annualPrice:1152,maxTeachers:50,features:["50 teacher licenses","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1RtdBlBw14YCsyD6kyVO5y78",annualPriceId:"price_1RtdBlBw14YCsyD66Lee6JnO"},{id:"unlimited",name:"Unlimited",price:180,annualPrice:1728,maxTeachers:-1,features:["Unlimited teachers","Full feature access","Pass tracking & reports","Email support"],priceId:"price_1RtdFUBw14YCsyD6nVyOraRH",annualPriceId:"price_1RtdGIBw14YCsyD6SRJqK3ED"}];function Y7(){const[t,e]=g.useState("plans"),[n,r]=g.useState(!1),[s,i]=g.useState(null),[a,l]=g.useState("monthly"),{registerSchool:c}=Cf(),{toast:d}=Gt(),[h,f]=g.useState({schoolName:"",district:"",adminName:"",adminEmail:"",adminPassword:"",selectedPlan:""});lr.useEffect(()=>{const y=localStorage.getItem("pendingRegistration"),S=new URLSearchParams(window.location.search).get("plan");if(y&&S)try{const C=JSON.parse(y),R=rS.find(D=>D.id===S);R&&(i(R),f({schoolName:C.schoolName||"",district:"",adminName:C.adminName||"",adminEmail:C.adminEmail||"",adminPassword:C.adminPassword||"",selectedPlan:R.id}),e("details"),localStorage.removeItem("pendingRegistration"))}catch(C){console.error("Error parsing pending registration data:",C),localStorage.removeItem("pendingRegistration")}},[]);const m=y=>{i(y),f(_=>({..._,selectedPlan:y.id})),e("details")},x=async y=>{y.preventDefault(),s&&(s.id==="free"?await b():e("payment"))},b=async()=>{r(!0);try{await c({schoolName:h.schoolName,adminName:h.adminName,adminEmail:h.adminEmail,adminPassword:h.adminPassword,plan:h.selectedPlan}),d({title:"Registration Successful!",description:"Your school has been registered. You can now start inviting teachers."})}catch(y){d({title:"Registration Failed",description:y.message,variant:"destructive"})}finally{r(!1)}},v=async()=>{if(!(!s||!s.priceId)){r(!0);try{const y=await Q7;if(!y)throw new Error("Stripe failed to load");const _=a==="annual"&&s.annualPriceId||s.priceId,S=await fetch("/api/create-subscription-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:_,schoolData:h})}),{sessionId:C}=await S.json(),{error:R}=await y.redirectToCheckout({sessionId:C});if(R)throw new Error(R.message)}catch(y){d({title:"Payment Failed",description:y.message,variant:"destructive"})}finally{r(!1)}}};return t==="plans"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-2xl flex items-center justify-center mx-auto mb-6",children:o.jsx(qM,{className:"text-white text-3xl"})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Choose Your PassPilot Plan"}),o.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8",children:"Professional hall pass management for schools of every size. Start with our free trial or choose a plan that fits your needs."}),o.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[o.jsx("span",{className:`text-sm ${a==="monthly"?"text-primary font-medium":"text-gray-500"}`,children:"Monthly"}),o.jsx("button",{onClick:()=>l(a==="monthly"?"annual":"monthly"),className:"relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","data-testid":"billing-toggle",children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a==="annual"?"translate-x-6":"translate-x-1"}`})}),o.jsxs("span",{className:`text-sm ${a==="annual"?"text-primary font-medium":"text-gray-500"}`,children:["Annual ",o.jsx("span",{className:"text-green-600",children:"(Save 20%)"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:rS.map(y=>o.jsxs(ae,{className:`relative cursor-pointer transition-all hover:shadow-lg ${y.popular?"ring-2 ring-primary scale-105":""}`,onClick:()=>m(y),"data-testid":`plan-${y.id}`,children:[y.popular&&o.jsx(jn,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary",children:"Most Popular"}),o.jsxs(Pe,{className:"text-center",children:[o.jsx(Re,{className:"text-lg",children:y.name}),o.jsx("div",{className:"text-3xl font-bold text-primary",children:a==="annual"&&y.annualPrice?o.jsxs(o.Fragment,{children:["$",y.annualPrice,o.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/year"})]}):o.jsxs(o.Fragment,{children:["$",y.price,o.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/month"})]})}),a==="annual"&&y.annualPrice&&o.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["$",Math.round(y.annualPrice/12),"/month • Save $",y.price*12-y.annualPrice]}),o.jsxs(Xr,{children:[y.maxTeachers===-1?"Unlimited":y.maxTeachers," teachers"]})]}),o.jsxs(le,{children:[o.jsx("ul",{className:"space-y-2",children:y.features.map((_,S)=>o.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[o.jsx(tu,{className:"w-4 h-4 text-green-500"}),_]},S))}),o.jsx(G,{className:"w-full mt-6",variant:y.popular?"default":"outline","data-testid":`select-plan-${y.id}`,children:y.price===0?"Start Free Trial":"Choose Plan"})]})]},y.id))}),o.jsx("div",{className:"text-center mt-12",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"All plans include secure data storage, FERPA compliance, and 24/7 uptime monitoring."})})]})}):t==="details"?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ae,{className:"w-full max-w-lg",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx(r4,{className:"text-white text-2xl"})}),o.jsx(Re,{className:"text-2xl font-bold",children:"School Registration"}),o.jsxs(Xr,{children:[s==null?void 0:s.name," Plan - ",(s==null?void 0:s.maxTeachers)===-1?"Unlimited":s==null?void 0:s.maxTeachers," Teachers"]})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name *"}),o.jsx(fe,{id:"schoolName",placeholder:"St. Francis Elementary",value:h.schoolName,onChange:y=>f(_=>({..._,schoolName:y.target.value})),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"district",children:"School District (Optional)"}),o.jsx(fe,{id:"district",placeholder:"Springfield School District",value:h.district,onChange:y=>f(_=>({..._,district:y.target.value})),"data-testid":"input-district"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name *"}),o.jsx(fe,{id:"adminName",placeholder:"John Smith",value:h.adminName,onChange:y=>f(_=>({..._,adminName:y.target.value})),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email *"}),o.jsx(fe,{type:"email",id:"adminEmail",placeholder:"admin@school.edu",value:h.adminEmail,onChange:y=>f(_=>({..._,adminEmail:y.target.value})),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Administrator Password *"}),o.jsx(fe,{type:"password",id:"adminPassword",placeholder:"••••••••",value:h.adminPassword,onChange:y=>f(_=>({..._,adminPassword:y.target.value})),required:!0,"data-testid":"input-admin-password"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>e("plans"),className:"flex-1","data-testid":"button-back",children:"Back to Plans"}),o.jsx(G,{type:"submit",disabled:n,className:"flex-1","data-testid":"button-continue",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(s==null?void 0:s.price)===0?"Complete Registration":"Continue to Payment"})]})]})})]})}):t==="payment"?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ae,{className:"w-full max-w-lg",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx(AC,{className:"text-white text-2xl"})}),o.jsx(Re,{className:"text-2xl font-bold",children:"Complete Your Purchase"}),o.jsxs(Xr,{children:[s==null?void 0:s.name," Plan - $",s==null?void 0:s.price,"/month"]})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Order Summary"}),o.jsx("div",{className:"flex justify-between",children:o.jsxs("span",{children:["School: ",h.schoolName]})}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Plan: ",s==null?void 0:s.name]}),o.jsxs("span",{children:["$",s==null?void 0:s.price,"/month"]})]}),o.jsx("div",{className:"flex justify-between",children:o.jsxs("span",{children:["Teachers: ",(s==null?void 0:s.maxTeachers)===-1?"Unlimited":s==null?void 0:s.maxTeachers]})})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(G,{type:"button",variant:"outline",onClick:()=>e("details"),className:"flex-1","data-testid":"button-back-to-details",children:"Back"}),o.jsx(G,{onClick:v,disabled:n,className:"flex-1","data-testid":"button-pay",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4 mr-2 animate-spin"}),"Redirecting..."]}):"Pay with Stripe"})]})]})})]})}):null}function X7(){const[,t]=ds(),[e,n]=g.useState({schoolName:"",district:"",adminName:"",adminEmail:"",adminPassword:""}),[r,s]=g.useState(!1),{toast:i}=Gt(),a=async c=>{c.preventDefault(),s(!0);try{const d=await Ge("POST","/api/auth/register-school",{...e,plan:"free_trial"}),h=await d.json();if(d.ok)h.requiresVerification?(i({title:"Registration Successful!",description:"Please check your email and click the verification link to activate your trial."}),t(`/verification-pending?school=${encodeURIComponent(h.schoolName)}&email=${encodeURIComponent(h.adminEmail)}`)):(localStorage.setItem("authToken",h.token),i({title:"Welcome to PassPilot!",description:"Your account has been created successfully."}),t("/trial-success"));else throw new Error(h.message||"Registration failed")}catch(d){let h=d.message||"An error occurred during registration";h.includes("trial account already exists")&&(h="A trial account already exists for your organization. Each school/district is limited to one trial account. Contact support if you need assistance."),i({title:"Registration Failed",description:h,variant:"destructive"})}finally{s(!1)}},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-4xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Start Your Free Trial"}),o.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-6",children:"Get full access to PassPilot for 30 days - completely free!"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{className:"border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"text-green-800 dark:text-green-200 flex items-center",children:[o.jsx(AC,{className:"w-5 h-5 mr-2"}),"What's Included in Your Trial"]})}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Unlimited Teachers"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Add as many teachers as you need during your trial"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Full Feature Access"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"All pass management, reporting, and admin features"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Real-time Tracking"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Live pass monitoring and student safety features"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200",children:"Email Support"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Get help when you need it during your trial"})]})]})]})]}),o.jsxs(Uc,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:[o.jsx(ro,{className:"h-4 w-4 text-blue-600"}),o.jsxs($c,{className:"text-blue-800 dark:text-blue-200",children:[o.jsx("strong",{children:"30-Day Trial Period:"})," Your trial starts immediately and runs for 30 full days. No credit card required to get started!"]})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(Re,{children:"School Information"}),o.jsx(Xr,{children:"Tell us about your school to start your free trial"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:a,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name *"}),o.jsx(fe,{id:"schoolName",placeholder:"Lincoln Elementary School",value:e.schoolName,onChange:c=>l("schoolName",c.target.value),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"district",children:"School District (Optional)"}),o.jsx(fe,{id:"district",placeholder:"Springfield School District",value:e.district,onChange:c=>l("district",c.target.value),"data-testid":"input-district"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name *"}),o.jsx(fe,{id:"adminName",placeholder:"Principal Smith",value:e.adminName,onChange:c=>l("adminName",c.target.value),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email *"}),o.jsx(fe,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:e.adminEmail,onChange:c=>l("adminEmail",c.target.value),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Password *"}),o.jsx(fe,{type:"password",id:"adminPassword",placeholder:"••••••••",value:e.adminPassword,onChange:c=>l("adminPassword",c.target.value),required:!0,"data-testid":"input-admin-password"})]}),o.jsx(G,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:r,"data-testid":"button-start-trial",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Starting Your Trial..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Wn,{className:"w-4 h-4 mr-2"}),"Start My 30-Day Free Trial"]})}),o.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("p",{children:["Already have an account?"," ",o.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>t("/login"),"data-testid":"button-login-link",children:"Sign In"})]}),o.jsxs("p",{className:"mt-2",children:["Want to see paid plans?"," ",o.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>t("/register"),"data-testid":"button-view-plans",children:"View All Plans"})]})]})]})})]})]})]})})}function J7(){const[,t]=ds(),[e,n]=g.useState(!0),{toast:r}=Gt();return g.useEffect(()=>{(async()=>{try{const a=new URLSearchParams(window.location.search).get("session_id");if(!a)throw new Error("No session ID found");const c=await(await fetch("/api/complete-registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:a})})).json();if(c.success)localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(c.user)),r({title:"Registration Complete!",description:c.message}),setTimeout(()=>{t("/")},2e3);else throw new Error(c.message||"Registration failed")}catch(i){console.error("Registration processing error:",i),r({title:"Registration Error",description:i.message,variant:"destructive"}),setTimeout(()=>{t("/register")},3e3)}finally{n(!1)}})()},[t,r]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs(ae,{className:"w-full max-w-md text-center",children:[o.jsxs(Pe,{children:[o.jsx("div",{className:"w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e?o.jsx(Th,{className:"w-10 h-10 text-white animate-spin"}):o.jsx(Gr,{className:"w-10 h-10 text-white"})}),o.jsx(Re,{className:"text-2xl font-bold text-green-800 dark:text-green-400",children:e?"Processing Registration...":"Registration Successful!"}),o.jsx(Xr,{children:e?"Please wait while we set up your school account.":"Your school has been successfully registered with PassPilot."})]}),o.jsx(le,{children:e?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Creating your school account..."}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Setting up admin access..."}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configuring subscription..."})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You will be redirected to your admin dashboard shortly, where you can:"}),o.jsxs("ul",{className:"text-sm text-left space-y-1 text-gray-600 dark:text-gray-400",children:[o.jsx("li",{children:"• Invite teachers to your school"}),o.jsx("li",{children:"• Set up grades and student rosters"}),o.jsx("li",{children:"• Configure pass tracking settings"}),o.jsx("li",{children:"• Access reporting and analytics"})]}),o.jsx(G,{onClick:()=>t("/"),className:"w-full","data-testid":"button-continue-to-app",children:"Continue to PassPilot"})]})})]})})}function Z7(){const[,t]=ds();return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-rose-100 dark:from-gray-900 dark:to-gray-800 p-4",children:o.jsxs(ae,{className:"w-full max-w-md text-center",children:[o.jsxs(Pe,{children:[o.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(PC,{className:"w-10 h-10 text-white"})}),o.jsx(Re,{className:"text-2xl font-bold text-red-800 dark:text-red-400",children:"Registration Cancelled"}),o.jsx(Xr,{children:"Your school registration was cancelled and no payment was processed."})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Don't worry - you can try again at any time. Your information was not saved."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(G,{onClick:()=>t("/register"),className:"w-full","data-testid":"button-try-again",children:"Try Registration Again"}),o.jsxs(G,{onClick:()=>t("/"),variant:"outline",className:"w-full","data-testid":"button-back-home",children:[o.jsx(NC,{className:"w-4 h-4 mr-2"}),"Back to Home"]})]}),o.jsx("div",{className:"mt-6 pt-4 border-t",children:o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Need help? Contact our support team at support@passpilot.com"})})]})})]})})}function eq(){const[,t]=ds();g.useEffect(()=>{ze.invalidateQueries()},[]);const e=()=>{t("/")};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-2xl",children:o.jsxs(ae,{className:"border-green-200 shadow-lg",children:[o.jsxs(Pe,{className:"text-center pb-6",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4",children:o.jsx(Gr,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),o.jsx(Re,{className:"text-3xl font-bold text-green-800 dark:text-green-200",children:"Welcome to PassPilot!"}),o.jsx(Xr,{className:"text-lg text-green-700 dark:text-green-300",children:"Your 30-day free trial has started successfully"})]}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-green-50 dark:bg-green-950 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[o.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-3",children:"Your Trial Includes:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(HM,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"30 days full access"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Wn,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Unlimited teachers"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"All premium features"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Gr,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Email support included"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:"Next Steps:"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Set up your grades and classes"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Configure the grade levels your school uses"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Invite your teachers"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add unlimited teachers to your school account"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-semibold text-blue-600 dark:text-blue-400 mt-0.5",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Add students and start tracking passes"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Import or manually add student rosters"})]})]})]})]}),o.jsx("div",{className:"pt-4",children:o.jsxs(G,{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-lg py-3","data-testid":"button-continue-to-app",children:["Get Started with PassPilot",o.jsx(Vg,{className:"w-5 h-5 ml-2"})]})}),o.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 pt-2",children:o.jsxs("p",{children:["Your trial will automatically remind you before it expires.",o.jsx("br",{}),"No credit card required until you decide to upgrade."]})})]})]})})})}function tq(){const[,t]=ds(),[e,n]=g.useState(24*60*60),r=new URLSearchParams(window.location.search),s=r.get("school"),i=r.get("email");g.useEffect(()=>{const l=setInterval(()=>{n(c=>c>0?c-1:0)},1e3);return()=>clearInterval(l)},[]);const a=l=>{const c=Math.floor(l/3600),d=Math.floor(l%3600/60);return`${c}h ${d}m`};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsxs(ae,{className:"w-full max-w-md",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(RC,{className:"w-8 h-8 text-blue-600"})}),o.jsx(Re,{className:"text-2xl",children:"Check Your Email"}),o.jsx(Xr,{children:"We've sent a verification link to activate your free trial"})]}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"A verification email has been sent to:"}),o.jsx("p",{className:"font-semibold text-gray-900","data-testid":"verification-email",children:i})]}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(KM,{className:"w-5 h-5 text-green-600"}),o.jsx("span",{className:"text-sm font-medium",children:"Registration Complete"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ro,{className:"w-5 h-5 text-blue-600"}),o.jsxs("span",{className:"text-sm",children:["Verification link expires in ",a(e)]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"What's Next?"}),o.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"1"}),"Check your email inbox (and spam folder)"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"2"}),"Click the verification link in the email"]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-bold mt-0.5",children:"3"}),"Log in to start your 30-day free trial"]})]})]}),s&&o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:"School:"})," ",s]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[o.jsx("span",{className:"font-medium",children:"Trial Length:"})," 30 days with unlimited teachers"]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Didn't receive the email? Check your spam folder or contact support."}),o.jsxs(G,{variant:"outline",onClick:()=>t("/trial"),className:"w-full","data-testid":"button-back",children:[o.jsx(NC,{className:"w-4 h-4 mr-2"}),"Back to Registration"]})]})]})]})})}function nq(){const{toast:t}=Gt(),[,e]=ds(),[n,r]=g.useState(!1),[s,i]=g.useState(""),[a,l]=g.useState({newPassword:"",confirmPassword:""});g.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("token");if(!h){t({title:"Invalid Reset Link",description:"This password reset link is invalid or missing the required token.",variant:"destructive"}),e("/login");return}i(h)},[]);const c=async d=>{d.preventDefault(),r(!0);try{if(!a.newPassword||!a.confirmPassword)throw new Error("Please fill in both password fields");if(a.newPassword.length<6)throw new Error("Password must be at least 6 characters long");if(a.newPassword!==a.confirmPassword)throw new Error("Passwords do not match");const h=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,newPassword:a.newPassword})}),f=await h.json();if(!h.ok)throw new Error(f.message);t({title:"Password Reset Successful",description:"Your password has been reset. You can now sign in with your new password."}),e("/login")}catch(h){t({title:"Error",description:h.message,variant:"destructive"})}finally{r(!1)}};return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ae,{className:"w-full max-w-md",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-lock text-white text-2xl"})}),o.jsx(Re,{className:"text-2xl font-bold",children:"Create New Password"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your new password below"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"newPassword",children:"New Password"}),o.jsx(fe,{type:"password",id:"newPassword",placeholder:"••••••••",value:a.newPassword,onChange:d=>l({...a,newPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-new-password"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 6 characters long"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsx(fe,{type:"password",id:"confirmPassword",placeholder:"••••••••",value:a.confirmPassword,onChange:d=>l({...a,confirmPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-confirm-password"})]}),o.jsx(G,{type:"submit",className:"w-full",disabled:n,"data-testid":"button-reset-password",children:n?"Resetting Password...":"Reset Password"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(G,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>e("/login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]})})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx(ae,{className:"w-full max-w-md",children:o.jsx(le,{className:"p-8 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})})}function rq({onBack:t}){const[e,n]=g.useState(null),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(!1),f={id:"1",name:"Emma Johnson",grade:"5th Grade",currentlyOut:!1,lastPass:"Yesterday, 2:30 PM - Returned 2:45 PM"},m=()=>{r.length>=3&&n(f)},x=async()=>{i&&(h(!0),setTimeout(()=>{h(!1),n(null),s(""),a(""),c(""),alert("Pass request sent to teacher for approval!")},1500))},b=()=>{n({...e,currentlyOut:!1}),alert("Welcome back! Pass completed.")};return e?e.currentlyOut?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(ae,{className:"shadow-lg border-orange-200",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ro,{className:"w-8 h-8 text-orange-600"})}),o.jsx(Re,{className:"text-xl",children:"You're Currently Out"}),o.jsx("p",{className:"text-slate-600",children:"Return from your pass when finished"})]}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[o.jsx("p",{className:"font-medium",children:e.name}),o.jsx("p",{className:"text-sm text-slate-600",children:e.grade}),o.jsx(jn,{className:"mt-2 bg-orange-100 text-orange-700",children:"Out for 8 minutes"})]}),o.jsxs(G,{onClick:b,className:"w-full bg-green-600 hover:bg-green-700",children:[o.jsx(Vg,{className:"w-4 h-4 mr-2"}),"I'm Back - End Pass"]}),o.jsxs(G,{variant:"ghost",onClick:()=>n(null),className:"w-full",children:[o.jsx(K_,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-12",children:o.jsxs(ae,{className:"shadow-lg",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx($g,{className:"w-8 h-8 text-blue-600"})}),o.jsxs(Re,{className:"text-xl",children:["Welcome, ",e.name]}),o.jsx("p",{className:"text-slate-600",children:e.grade})]}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm",children:[o.jsx("p",{className:"text-slate-600",children:"Last Pass:"}),o.jsx("p",{className:"font-medium",children:e.lastPass})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ne,{children:"Why do you need to leave?"}),o.jsxs(xr,{value:i,onValueChange:a,children:[o.jsx(Kn,{children:o.jsx(wr,{placeholder:"Select pass type..."})}),o.jsxs(Qn,{children:[o.jsx(Oe,{value:"restroom",children:"Restroom"}),o.jsx(Oe,{value:"water",children:"Water/Drink"}),o.jsx(Oe,{value:"nurse",children:"Nurse Visit"}),o.jsx(Oe,{value:"office",children:"Main Office"}),o.jsx(Oe,{value:"locker",children:"Locker"}),o.jsx(Oe,{value:"counselor",children:"Counselor"}),o.jsx(Oe,{value:"other",children:"Other (explain below)"})]})]})]}),i==="other"&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"custom-reason",children:"Please explain:"}),o.jsx(fe,{id:"custom-reason",placeholder:"Enter reason...",value:l,onChange:v=>c(v.target.value)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(G,{onClick:x,disabled:!i||d,className:"flex-1",children:d?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):o.jsxs(o.Fragment,{children:[o.jsx(Vg,{className:"w-4 h-4 mr-2"}),"Request Pass"]})}),o.jsx(G,{variant:"outline",onClick:()=>n(null),disabled:d,children:o.jsx(K_,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"text-center",children:o.jsx(G,{variant:"ghost",onClick:t,className:"text-sm",children:"← Teacher View"})})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(ae,{className:"shadow-lg",children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx(Re,{className:"text-2xl text-blue-600",children:"Student Pass Kiosk"}),o.jsx("p",{className:"text-slate-600",children:"Enter your Student ID to request a pass"})]}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"student-id",children:"Student ID"}),o.jsx(fe,{id:"student-id",placeholder:"Enter your student ID...",value:r,onChange:v=>s(v.target.value),className:"text-center text-xl",maxLength:10})]}),o.jsxs(G,{onClick:m,className:"w-full",disabled:r.length<3,children:[o.jsx($g,{className:"w-4 h-4 mr-2"}),"Sign In"]}),o.jsx("div",{className:"text-center",children:o.jsx(G,{variant:"ghost",onClick:t,className:"text-sm",children:"← Back to Teacher View"})})]})]})})})}function sq({onBack:t}){const[e,n]=g.useState([{id:"1",studentName:"Emma Johnson",grade:"5th Grade",passType:"restroom",customReason:"",requestTime:"2:45 PM",avatar:"EJ"},{id:"2",studentName:"Marcus Chen",grade:"5th Grade",passType:"nurse",customReason:"",requestTime:"2:43 PM",avatar:"MC"},{id:"3",studentName:"Sofia Rodriguez",grade:"5th Grade",passType:"other",customReason:"Need to get my inhaler from my backpack in locker",requestTime:"2:41 PM",avatar:"SR"}]),r=l=>{n(c=>c.filter(d=>d.id!==l))},s=l=>{n(c=>c.filter(d=>d.id!==l))},i=l=>{const c={restroom:{label:"Restroom",color:"bg-blue-50 text-blue-600 border-blue-200"},water:{label:"Water",color:"bg-cyan-50 text-cyan-600 border-cyan-200"},nurse:{label:"Nurse",color:"bg-red-50 text-red-600 border-red-200"},office:{label:"Office",color:"bg-purple-50 text-purple-600 border-purple-200"},locker:{label:"Locker",color:"bg-green-50 text-green-600 border-green-200"},counselor:{label:"Counselor",color:"bg-orange-50 text-orange-600 border-orange-200"},other:{label:"Other",color:"bg-slate-50 text-slate-600 border-slate-200"}},d=c[l]||c.other;return o.jsx(jn,{variant:"outline",className:d.color,children:d.label})},a=l=>{const c=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],d=l.length%c.length;return c[d]};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Pass Requests"}),o.jsx("p",{className:"text-slate-600",children:"Approve or deny student pass requests"})]}),o.jsx(G,{variant:"outline",onClick:t,children:"← Back to Demo"})]}),e.length===0?o.jsx(ae,{children:o.jsxs(le,{className:"p-12 text-center",children:[o.jsx(ro,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-slate-600 mb-2",children:"No Pending Requests"}),o.jsx("p",{className:"text-slate-500",children:"Student pass requests will appear here for approval"})]})}):o.jsx("div",{className:"space-y-4",children:e.map(l=>o.jsx(ae,{className:"border-orange-200 bg-orange-50/30",children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-medium ${a(l.studentName)}`,children:l.avatar}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-slate-800",children:l.studentName}),o.jsx("p",{className:"text-sm text-slate-600",children:l.grade})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i(l.passType),o.jsx("span",{className:"text-sm text-slate-500",children:l.requestTime})]}),l.customReason&&o.jsxs("p",{className:"text-sm text-slate-600 max-w-xs",children:['"',l.customReason,'"']})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{size:"sm",onClick:()=>r(l.id),className:"bg-green-600 hover:bg-green-700",children:[o.jsx(tu,{className:"w-4 h-4 mr-1"}),"Approve"]}),o.jsxs(G,{size:"sm",variant:"outline",onClick:()=>s(l.id),className:"border-red-300 text-red-600 hover:bg-red-50",children:[o.jsx(nu,{className:"w-4 h-4 mr-1"}),"Deny"]})]})]})]})})},l.id))}),o.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[o.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"How Student Self-Service Works:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsx("li",{children:"• Students use a classroom computer/tablet to request passes"}),o.jsx("li",{children:"• Teacher receives real-time notifications to approve/deny"}),o.jsx("li",{children:"• Approved students can leave; denied requests explain why"}),o.jsx("li",{children:"• Students return through the same kiosk to log back in"}),o.jsx("li",{children:"• All activity is tracked for reports and accountability"})]})]})]})}function iq(){const[t,e]=g.useState("menu");return t==="student"?o.jsx(rq,{onBack:()=>e("menu")}):t==="teacher"?o.jsx(sq,{onBack:()=>e("menu")}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto pt-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Student Self-Service Pass System Demo"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Experience how a student-operated kiosk system would work compared to teacher-managed passes"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[o.jsxs(ae,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("student"),children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx(XM,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),o.jsx(Re,{className:"text-xl",children:"Student Kiosk View"})]}),o.jsxs(le,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See what students would experience when requesting passes at a classroom computer or tablet."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:"• Enter student ID to sign in"}),o.jsx("li",{children:"• Select pass type and reason"}),o.jsx("li",{children:"• Submit request for teacher approval"}),o.jsx("li",{children:"• Return to mark pass complete"})]}),o.jsx(G,{className:"w-full mt-4",children:"Try Student View →"})]})]}),o.jsxs(ae,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("teacher"),children:[o.jsxs(Pe,{className:"text-center",children:[o.jsx(Y_,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),o.jsx(Re,{className:"text-xl",children:"Teacher Approval Panel"})]}),o.jsxs(le,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See how teachers would approve or deny student pass requests in real-time."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:"• View incoming student requests"}),o.jsx("li",{children:"• See pass type and reasons"}),o.jsx("li",{children:"• Approve or deny with one click"}),o.jsx("li",{children:"• Monitor all active passes"})]}),o.jsx(G,{className:"w-full mt-4",variant:"outline",children:"Try Teacher View →"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(ae,{className:"bg-green-50 border-green-200",children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"text-green-800 flex items-center gap-2",children:[o.jsx(Y_,{className:"w-5 h-5"}),"Student Self-Service Advantages"]})}),o.jsx(le,{children:o.jsxs("ul",{className:"text-green-700 space-y-2 text-sm",children:[o.jsx("li",{children:"• Reduces teacher interruptions during instruction"}),o.jsx("li",{children:"• Students take ownership of pass requests"}),o.jsx("li",{children:"• Automatic logging and accountability"}),o.jsx("li",{children:"• Scales well for larger classes"}),o.jsx("li",{children:"• Digital literacy for students"}),o.jsx("li",{children:"• Clear audit trail of all requests"})]})})]}),o.jsxs(ae,{className:"bg-orange-50 border-orange-200",children:[o.jsx(Pe,{children:o.jsxs(Re,{className:"text-orange-800 flex items-center gap-2",children:[o.jsx(Wn,{className:"w-5 h-5"}),"Implementation Considerations"]})}),o.jsx(le,{children:o.jsxs("ul",{className:"text-orange-700 space-y-2 text-sm",children:[o.jsx("li",{children:"• Requires dedicated device in each classroom"}),o.jsx("li",{children:"• Student ID system and training needed"}),o.jsx("li",{children:"• Teacher must monitor approval notifications"}),o.jsx("li",{children:"• May not work well for younger students"}),o.jsx("li",{children:"• Needs reliable internet connectivity"}),o.jsx("li",{children:"• Initial setup and device management"})]})})]})]}),o.jsx("div",{className:"text-center mt-12",children:o.jsx(ae,{className:"bg-blue-50 border-blue-200",children:o.jsxs(le,{className:"p-6",children:[o.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Hybrid Option"}),o.jsx("p",{className:"text-blue-700",children:"PassPilot could offer both modes - letting schools choose teacher-managed passes OR student self-service kiosks based on their preferences and classroom setup."})]})})})]})})}function oq(){return o.jsxs(mO,{children:[o.jsx(Un,{path:"/",component:eS}),o.jsx(Un,{path:"/login",component:M7}),o.jsx(Un,{path:"/register",component:Y7}),o.jsx(Un,{path:"/trial",component:X7}),o.jsx(Un,{path:"/verification-pending",component:tq}),o.jsx(Un,{path:"/registration-success",component:J7}),o.jsx(Un,{path:"/registration-cancelled",component:Z7}),o.jsx(Un,{path:"/trial-success",component:eq}),o.jsx(Un,{path:"/reset-password",component:nq}),o.jsx(Un,{path:"/kiosk-demo",component:iq}),o.jsx(Un,{children:o.jsx(eS,{})})]})}function aq(){return o.jsx(DO,{client:ze,children:o.jsx(hV,{children:o.jsxs(mV,{children:[o.jsx($4,{}),o.jsx(oq,{})]})})})}Ib(document.getElementById("root")).render(o.jsx(aq,{}));
