var w0=t=>{throw TypeError(t)};var bm=(t,e,n)=>e.has(t)||w0("Cannot "+n);var M=(t,e,n)=>(bm(t,e,"read from private field"),n?n.call(t):e.get(t)),ve=(t,e,n)=>e.has(t)?w0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ae=(t,e,n,r)=>(bm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ie=(t,e,n)=>(bm(t,e,"access private method"),n);var Lu=(t,e,n,r)=>({set _(s){ae(t,e,s,n)},get _(){return M(t,e,r)}});function Gk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function x1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var w1={exports:{}},ef={},_1={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),qk=Symbol.for("react.portal"),Kk=Symbol.for("react.fragment"),Qk=Symbol.for("react.strict_mode"),Yk=Symbol.for("react.profiler"),Xk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),e2=Symbol.for("react.suspense"),t2=Symbol.for("react.memo"),n2=Symbol.for("react.lazy"),_0=Symbol.iterator;function r2(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var E1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S1=Object.assign,T1={};function Wa(t,e,n){this.props=t,this.context=e,this.refs=T1,this.updater=n||E1}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b1(){}b1.prototype=Wa.prototype;function Oy(t,e,n){this.props=t,this.context=e,this.refs=T1,this.updater=n||E1}var My=Oy.prototype=new b1;My.constructor=Oy;S1(My,Wa.prototype);My.isPureReactComponent=!0;var E0=Array.isArray,N1=Object.prototype.hasOwnProperty,Ly={current:null},C1={key:!0,ref:!0,__self:!0,__source:!0};function I1(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)N1.call(e,r)&&!C1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Wc,type:t,key:i,ref:a,props:s,_owner:Ly.current}}function s2(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function i2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S0=/\/+/g;function Nm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i2(""+t.key):e.toString(36)}function vd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Wc:case qk:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Nm(a,0):r,E0(s)?(n="",t!=null&&(n=t.replace(S0,"$&/")+"/"),vd(s,e,n,"",function(d){return d})):s!=null&&(Vy(s)&&(s=s2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(S0,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",E0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Nm(i,l);a+=vd(i,e,n,c,s)}else if(c=r2(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Nm(i,l++),a+=vd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Vu(t,e,n){if(t==null)return t;var r=[],s=0;return vd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function o2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},xd={transition:null},a2={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Ly};function P1(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Vu,forEach:function(t,e,n){Vu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vu(t,function(){e++}),e},toArray:function(t){return Vu(t,function(e){return e})||[]},only:function(t){if(!Vy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=Wa;je.Fragment=Kk;je.Profiler=Yk;je.PureComponent=Oy;je.StrictMode=Qk;je.Suspense=e2;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a2;je.act=P1;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S1({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ly.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)N1.call(e,c)&&!C1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Wc,type:t.type,key:s,ref:i,props:r,_owner:a}};je.createContext=function(t){return t={$$typeof:Jk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xk,_context:t},t.Consumer=t};je.createElement=I1;je.createFactory=function(t){var e=I1.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:Zk,render:t}};je.isValidElement=Vy;je.lazy=function(t){return{$$typeof:n2,_payload:{_status:-1,_result:t},_init:o2}};je.memo=function(t,e){return{$$typeof:t2,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};je.unstable_act=P1;je.useCallback=function(t,e){return en.current.useCallback(t,e)};je.useContext=function(t){return en.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return en.current.useDeferredValue(t)};je.useEffect=function(t,e){return en.current.useEffect(t,e)};je.useId=function(){return en.current.useId()};je.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return en.current.useMemo(t,e)};je.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};je.useRef=function(t){return en.current.useRef(t)};je.useState=function(t){return en.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return en.current.useTransition()};je.version="18.3.1";_1.exports=je;var p=_1.exports;const gr=x1(p),A1=Gk({__proto__:null,default:gr},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2=p,c2=Symbol.for("react.element"),u2=Symbol.for("react.fragment"),d2=Object.prototype.hasOwnProperty,h2=l2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f2={key:!0,ref:!0,__self:!0,__source:!0};function j1(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)d2.call(e,r)&&!f2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:c2,type:t,key:i,ref:a,props:s,_owner:h2.current}}ef.Fragment=u2;ef.jsx=j1;ef.jsxs=j1;w1.exports=ef;var o=w1.exports,R1={exports:{}},Cn={},k1={exports:{}},D1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var Y=U.length;U.push($);e:for(;0<Y;){var F=Y-1>>>1,L=U[F];if(0<s(L,$))U[F]=$,U[Y]=L,Y=F;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],Y=U.pop();if(Y!==$){U[0]=Y;e:for(var F=0,L=U.length,K=L>>>1;F<K;){var fe=2*(F+1)-1,Re=U[fe],ke=fe+1,se=U[ke];if(0>s(Re,Y))ke<L&&0>s(se,Re)?(U[F]=se,U[ke]=Y,F=ke):(U[F]=Re,U[fe]=Y,F=fe);else if(ke<L&&0>s(se,Y))U[F]=se,U[ke]=Y,F=ke;else break e}}return $}function s(U,$){var Y=U.sortIndex-$.sortIndex;return Y!==0?Y:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,T=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=U)r(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(d)}}function I(U){if(x=!1,N(U),!T)if(n(c)!==null)T=!0,re(O);else{var $=n(d);$!==null&&ie(I,$.startTime-U)}}function O(U,$){T=!1,x&&(x=!1,b(v),v=-1),y=!0;var Y=m;try{for(N($),f=n(c);f!==null&&(!(f.expirationTime>$)||U&&!R());){var F=f.callback;if(typeof F=="function"){f.callback=null,m=f.priorityLevel;var L=F(f.expirationTime<=$);$=t.unstable_now(),typeof L=="function"?f.callback=L:f===n(c)&&r(c),N($)}else r(c);f=n(c)}if(f!==null)var K=!0;else{var fe=n(d);fe!==null&&ie(I,fe.startTime-$),K=!1}return K}finally{f=null,m=Y,y=!1}}var D=!1,E=null,v=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function k(){if(E!==null){var U=t.unstable_now();A=U;var $=!0;try{$=E(!0,U)}finally{$?j():(D=!1,E=null)}}else D=!1}var j;if(typeof _=="function")j=function(){_(k)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ue=G.port2;G.port1.onmessage=k,j=function(){ue.postMessage(null)}}else j=function(){w(k,0)};function re(U){E=U,D||(D=!0,j())}function ie(U,$){v=w(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,re(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var Y=m;m=$;try{return U()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=m;m=U;try{return $()}finally{m=Y}},t.unstable_scheduleCallback=function(U,$,Y){var F=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Y+L,U={id:h++,callback:$,priorityLevel:U,startTime:Y,expirationTime:L,sortIndex:-1},Y>F?(U.sortIndex=Y,e(d,U),n(c)===null&&U===n(d)&&(x?(b(v),v=-1):x=!0,ie(I,Y-F))):(U.sortIndex=L,e(c,U),T||y||(T=!0,re(O))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var $=m;return function(){var Y=m;m=$;try{return U.apply(this,arguments)}finally{m=Y}}}})(D1);k1.exports=D1;var m2=k1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2=p,Nn=m2;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O1=new Set,cc={};function fo(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(cc[t]=e,t=0;t<e.length;t++)O1.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=Object.prototype.hasOwnProperty,g2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T0={},b0={};function y2(t){return jp.call(b0,t)?!0:jp.call(T0,t)?!1:g2.test(t)?b0[t]=!0:(T0[t]=!0,!1)}function v2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x2(t,e,n,r){if(e===null||typeof e>"u"||v2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function Uy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fy,Uy);kt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fy,Uy);kt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fy,Uy);kt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $y(t,e,n,r){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x2(e,n,s,r)&&(n=null),r||s===null?y2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ds=p2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fu=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),By=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),zy=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Dp=Symbol.for("react.suspense_list"),Hy=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),V1=Symbol.for("react.offscreen"),N0=Symbol.iterator;function _l(t){return t===null||typeof t!="object"?null:(t=N0&&t[N0]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,Cm;function kl(t){if(Cm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cm=e&&e[1]||""}return`
`+Cm+t}var Im=!1;function Pm(t,e){if(!t||Im)return"";Im=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Im=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kl(t):""}function w2(t){switch(t.tag){case 5:return kl(t.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return t=Pm(t.type,!1),t;case 11:return t=Pm(t.type.render,!1),t;case 1:return t=Pm(t.type,!0),t;default:return""}}function Op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mo:return"Fragment";case Oo:return"Portal";case Rp:return"Profiler";case By:return"StrictMode";case kp:return"Suspense";case Dp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L1:return(t.displayName||"Context")+".Consumer";case M1:return(t._context.displayName||"Context")+".Provider";case zy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hy:return e=t.displayName||null,e!==null?e:Op(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return Op(t(e))}catch{}}return null}function _2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(e);case 8:return e===By?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E2(t){var e=F1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uu(t){t._valueTracker||(t._valueTracker=E2(t))}function U1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=F1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mp(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function C0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $1(t,e){e=e.checked,e!=null&&$y(t,"checked",e,!1)}function Lp(t,e){$1(t,e);var n=ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vp(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vp(t,e,n){(e!=="number"||th(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dl=Array.isArray;function Yo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ri(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function P0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Dl(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ri(n)}}function B1(t,e){var n=ri(e.value),r=ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function A0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function z1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?z1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $u,H1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($u=$u||document.createElement("div"),$u.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$u.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S2=["Webkit","ms","Moz","O"];Object.keys(ql).forEach(function(t){S2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ql[e]=ql[t]})});function W1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ql.hasOwnProperty(t)&&ql[t]?(""+e).trim():e+"px"}function G1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=W1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var T2=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $p(t,e){if(e){if(T2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zp=null;function Wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hp=null,Xo=null,Jo=null;function j0(t){if(t=Kc(t)){if(typeof Hp!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=of(e),Hp(t.stateNode,t.type,e))}}function q1(t){Xo?Jo?Jo.push(t):Jo=[t]:Xo=t}function K1(){if(Xo){var t=Xo,e=Jo;if(Jo=Xo=null,j0(t),e)for(t=0;t<e.length;t++)j0(e[t])}}function Q1(t,e){return t(e)}function Y1(){}var Am=!1;function X1(t,e,n){if(Am)return t(e,n);Am=!0;try{return Q1(t,e,n)}finally{Am=!1,(Xo!==null||Jo!==null)&&(Y1(),K1())}}function dc(t,e){var n=t.stateNode;if(n===null)return null;var r=of(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Wp=!1;if(ts)try{var El={};Object.defineProperty(El,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Wp=!1}function b2(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Kl=!1,nh=null,rh=!1,Gp=null,N2={onError:function(t){Kl=!0,nh=t}};function C2(t,e,n,r,s,i,a,l,c){Kl=!1,nh=null,b2.apply(N2,arguments)}function I2(t,e,n,r,s,i,a,l,c){if(C2.apply(this,arguments),Kl){if(Kl){var d=nh;Kl=!1,nh=null}else throw Error(Q(198));rh||(rh=!0,Gp=d)}}function mo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R0(t){if(mo(t)!==t)throw Error(Q(188))}function P2(t){var e=t.alternate;if(!e){if(e=mo(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return R0(s),t;if(i===r)return R0(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Z1(t){return t=P2(t),t!==null?eT(t):null}function eT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eT(t);if(e!==null)return e;t=t.sibling}return null}var tT=Nn.unstable_scheduleCallback,k0=Nn.unstable_cancelCallback,A2=Nn.unstable_shouldYield,j2=Nn.unstable_requestPaint,ut=Nn.unstable_now,R2=Nn.unstable_getCurrentPriorityLevel,Gy=Nn.unstable_ImmediatePriority,nT=Nn.unstable_UserBlockingPriority,sh=Nn.unstable_NormalPriority,k2=Nn.unstable_LowPriority,rT=Nn.unstable_IdlePriority,tf=null,Tr=null;function D2(t){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(tf,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:L2,O2=Math.log,M2=Math.LN2;function L2(t){return t>>>=0,t===0?32:31-(O2(t)/M2|0)|0}var Bu=64,zu=4194304;function Ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ol(l):(i&=a,i!==0&&(r=Ol(i)))}else a=n&~s,a!==0?r=Ol(a):i!==0&&(r=Ol(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),s=1<<n,r|=t[n],e&=~s;return r}function V2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-ir(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=V2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sT(){var t=Bu;return Bu<<=1,!(Bu&4194240)&&(Bu=64),t}function jm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function U2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ir(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var We=0;function iT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oT,Ky,aT,lT,cT,Kp=!1,Hu=[],zs=null,Hs=null,Ws=null,hc=new Map,fc=new Map,Ns=[],$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D0(t,e){switch(t){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function Sl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Kc(e),e!==null&&Ky(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function B2(t,e,n,r,s){switch(e){case"focusin":return zs=Sl(zs,t,e,n,r,s),!0;case"dragenter":return Hs=Sl(Hs,t,e,n,r,s),!0;case"mouseover":return Ws=Sl(Ws,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return hc.set(i,Sl(hc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fc.set(i,Sl(fc.get(i)||null,t,e,n,r,s)),!0}return!1}function uT(t){var e=ki(t.target);if(e!==null){var n=mo(e);if(n!==null){if(e=n.tag,e===13){if(e=J1(n),e!==null){t.blockedOn=e,cT(t.priority,function(){aT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zp=r,n.target.dispatchEvent(r),zp=null}else return e=Kc(n),e!==null&&Ky(e),t.blockedOn=n,!1;e.shift()}return!0}function O0(t,e,n){wd(t)&&n.delete(e)}function z2(){Kp=!1,zs!==null&&wd(zs)&&(zs=null),Hs!==null&&wd(Hs)&&(Hs=null),Ws!==null&&wd(Ws)&&(Ws=null),hc.forEach(O0),fc.forEach(O0)}function Tl(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,z2)))}function mc(t){function e(s){return Tl(s,t)}if(0<Hu.length){Tl(Hu[0],t);for(var n=1;n<Hu.length;n++){var r=Hu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zs!==null&&Tl(zs,t),Hs!==null&&Tl(Hs,t),Ws!==null&&Tl(Ws,t),hc.forEach(e),fc.forEach(e),n=0;n<Ns.length;n++)r=Ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ns.length&&(n=Ns[0],n.blockedOn===null);)uT(n),n.blockedOn===null&&Ns.shift()}var Zo=ds.ReactCurrentBatchConfig,oh=!0;function H2(t,e,n,r){var s=We,i=Zo.transition;Zo.transition=null;try{We=1,Qy(t,e,n,r)}finally{We=s,Zo.transition=i}}function W2(t,e,n,r){var s=We,i=Zo.transition;Zo.transition=null;try{We=4,Qy(t,e,n,r)}finally{We=s,Zo.transition=i}}function Qy(t,e,n,r){if(oh){var s=Qp(t,e,n,r);if(s===null)$m(t,e,r,ah,n),D0(t,r);else if(B2(s,t,e,n,r))r.stopPropagation();else if(D0(t,r),e&4&&-1<$2.indexOf(t)){for(;s!==null;){var i=Kc(s);if(i!==null&&oT(i),i=Qp(t,e,n,r),i===null&&$m(t,e,r,ah,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $m(t,e,r,null,n)}}var ah=null;function Qp(t,e,n,r){if(ah=null,t=Wy(r),t=ki(t),t!==null)if(e=mo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ah=t,null}function dT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R2()){case Gy:return 1;case nT:return 4;case sh:case k2:return 16;case rT:return 536870912;default:return 16}default:return 16}}var Us=null,Yy=null,_d=null;function hT(){if(_d)return _d;var t,e=Yy,n=e.length,r,s="value"in Us?Us.value:Us.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return _d=s.slice(t,1<r?1-r:void 0)}function Ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wu(){return!0}function M0(){return!1}function In(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wu:M0,this.isPropagationStopped=M0,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wu)},persist:function(){},isPersistent:Wu}),e}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xy=In(Ga),qc=st({},Ga,{view:0,detail:0}),G2=In(qc),Rm,km,bl,nf=st({},qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bl&&(bl&&t.type==="mousemove"?(Rm=t.screenX-bl.screenX,km=t.screenY-bl.screenY):km=Rm=0,bl=t),Rm)},movementY:function(t){return"movementY"in t?t.movementY:km}}),L0=In(nf),q2=st({},nf,{dataTransfer:0}),K2=In(q2),Q2=st({},qc,{relatedTarget:0}),Dm=In(Q2),Y2=st({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),X2=In(Y2),J2=st({},Ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z2=In(J2),eD=st({},Ga,{data:0}),V0=In(eD),tD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rD[t])?!!e[t]:!1}function Jy(){return sD}var iD=st({},qc,{key:function(t){if(t.key){var e=tD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jy,charCode:function(t){return t.type==="keypress"?Ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oD=In(iD),aD=st({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F0=In(aD),lD=st({},qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jy}),cD=In(lD),uD=st({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),dD=In(uD),hD=st({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fD=In(hD),mD=[9,13,27,32],Zy=ts&&"CompositionEvent"in window,Ql=null;ts&&"documentMode"in document&&(Ql=document.documentMode);var pD=ts&&"TextEvent"in window&&!Ql,fT=ts&&(!Zy||Ql&&8<Ql&&11>=Ql),U0=" ",$0=!1;function mT(t,e){switch(t){case"keyup":return mD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Lo=!1;function gD(t,e){switch(t){case"compositionend":return pT(e);case"keypress":return e.which!==32?null:($0=!0,U0);case"textInput":return t=e.data,t===U0&&$0?null:t;default:return null}}function yD(t,e){if(Lo)return t==="compositionend"||!Zy&&mT(t,e)?(t=hT(),_d=Yy=Us=null,Lo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fT&&e.locale!=="ko"?null:e.data;default:return null}}var vD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vD[t.type]:e==="textarea"}function gT(t,e,n,r){q1(r),e=lh(e,"onChange"),0<e.length&&(n=new Xy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yl=null,pc=null;function xD(t){CT(t,0)}function rf(t){var e=Uo(t);if(U1(e))return t}function wD(t,e){if(t==="change")return e}var yT=!1;if(ts){var Om;if(ts){var Mm="oninput"in document;if(!Mm){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),Mm=typeof z0.oninput=="function"}Om=Mm}else Om=!1;yT=Om&&(!document.documentMode||9<document.documentMode)}function H0(){Yl&&(Yl.detachEvent("onpropertychange",vT),pc=Yl=null)}function vT(t){if(t.propertyName==="value"&&rf(pc)){var e=[];gT(e,pc,t,Wy(t)),X1(xD,e)}}function _D(t,e,n){t==="focusin"?(H0(),Yl=e,pc=n,Yl.attachEvent("onpropertychange",vT)):t==="focusout"&&H0()}function ED(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(pc)}function SD(t,e){if(t==="click")return rf(e)}function TD(t,e){if(t==="input"||t==="change")return rf(e)}function bD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lr=typeof Object.is=="function"?Object.is:bD;function gc(t,e){if(lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jp.call(e,s)||!lr(t[s],e[s]))return!1}return!0}function W0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G0(t,e){var n=W0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W0(n)}}function xT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wT(){for(var t=window,e=th();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=th(t.document)}return e}function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ND(t){var e=wT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xT(n.ownerDocument.documentElement,n)){if(r!==null&&ev(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G0(n,i);var a=G0(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CD=ts&&"documentMode"in document&&11>=document.documentMode,Vo=null,Yp=null,Xl=null,Xp=!1;function q0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xp||Vo==null||Vo!==th(r)||(r=Vo,"selectionStart"in r&&ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xl&&gc(Xl,r)||(Xl=r,r=lh(Yp,"onSelect"),0<r.length&&(e=new Xy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vo)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fo={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Lm={},_T={};ts&&(_T=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function sf(t){if(Lm[t])return Lm[t];if(!Fo[t])return t;var e=Fo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _T)return Lm[t]=e[n];return t}var ET=sf("animationend"),ST=sf("animationiteration"),TT=sf("animationstart"),bT=sf("transitionend"),NT=new Map,K0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(t,e){NT.set(t,e),fo(e,[t])}for(var Vm=0;Vm<K0.length;Vm++){var Fm=K0[Vm],ID=Fm.toLowerCase(),PD=Fm[0].toUpperCase()+Fm.slice(1);gi(ID,"on"+PD)}gi(ET,"onAnimationEnd");gi(ST,"onAnimationIteration");gi(TT,"onAnimationStart");gi("dblclick","onDoubleClick");gi("focusin","onFocus");gi("focusout","onBlur");gi(bT,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Q0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I2(r,e,void 0,t),t.currentTarget=null}function CT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Q0(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Q0(s,l,d),i=c}}}if(rh)throw t=Gp,rh=!1,Gp=null,t}function Xe(t,e){var n=e[ng];n===void 0&&(n=e[ng]=new Set);var r=t+"__bubble";n.has(r)||(IT(e,t,2,!1),n.add(r))}function Um(t,e,n){var r=0;e&&(r|=4),IT(n,t,r,e)}var qu="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[qu]){t[qu]=!0,O1.forEach(function(n){n!=="selectionchange"&&(AD.has(n)||Um(n,!1,t),Um(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qu]||(e[qu]=!0,Um("selectionchange",!1,e))}}function IT(t,e,n,r){switch(dT(e)){case 1:var s=H2;break;case 4:s=W2;break;default:s=Qy}n=s.bind(null,e,n,t),s=void 0,!Wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $m(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ki(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}X1(function(){var d=i,h=Wy(n),f=[];e:{var m=NT.get(t);if(m!==void 0){var y=Xy,T=t;switch(t){case"keypress":if(Ed(n)===0)break e;case"keydown":case"keyup":y=oD;break;case"focusin":T="focus",y=Dm;break;case"focusout":T="blur",y=Dm;break;case"beforeblur":case"afterblur":y=Dm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=L0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=K2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=cD;break;case ET:case ST:case TT:y=X2;break;case bT:y=dD;break;case"scroll":y=G2;break;case"wheel":y=fD;break;case"copy":case"cut":case"paste":y=Z2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=F0}var x=(e&4)!==0,w=!x&&t==="scroll",b=x?m!==null?m+"Capture":null:m;x=[];for(var _=d,N;_!==null;){N=_;var I=N.stateNode;if(N.tag===5&&I!==null&&(N=I,b!==null&&(I=dc(_,b),I!=null&&x.push(vc(_,I,N)))),w)break;_=_.return}0<x.length&&(m=new y(m,T,null,n,h),f.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==zp&&(T=n.relatedTarget||n.fromElement)&&(ki(T)||T[ns]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=d,T=T?ki(T):null,T!==null&&(w=mo(T),T!==w||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=d),y!==T)){if(x=L0,I="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=F0,I="onPointerLeave",b="onPointerEnter",_="pointer"),w=y==null?m:Uo(y),N=T==null?m:Uo(T),m=new x(I,_+"leave",y,n,h),m.target=w,m.relatedTarget=N,I=null,ki(h)===d&&(x=new x(b,_+"enter",T,n,h),x.target=N,x.relatedTarget=w,I=x),w=I,y&&T)t:{for(x=y,b=T,_=0,N=x;N;N=No(N))_++;for(N=0,I=b;I;I=No(I))N++;for(;0<_-N;)x=No(x),_--;for(;0<N-_;)b=No(b),N--;for(;_--;){if(x===b||b!==null&&x===b.alternate)break t;x=No(x),b=No(b)}x=null}else x=null;y!==null&&Y0(f,m,y,x,!1),T!==null&&w!==null&&Y0(f,w,T,x,!0)}}e:{if(m=d?Uo(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var O=wD;else if(B0(m))if(yT)O=TD;else{O=ED;var D=_D}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=SD);if(O&&(O=O(t,d))){gT(f,O,n,h);break e}D&&D(t,m,d),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Vp(m,"number",m.value)}switch(D=d?Uo(d):window,t){case"focusin":(B0(D)||D.contentEditable==="true")&&(Vo=D,Yp=d,Xl=null);break;case"focusout":Xl=Yp=Vo=null;break;case"mousedown":Xp=!0;break;case"contextmenu":case"mouseup":case"dragend":Xp=!1,q0(f,n,h);break;case"selectionchange":if(CD)break;case"keydown":case"keyup":q0(f,n,h)}var E;if(Zy)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Lo?mT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(fT&&n.locale!=="ko"&&(Lo||v!=="onCompositionStart"?v==="onCompositionEnd"&&Lo&&(E=hT()):(Us=h,Yy="value"in Us?Us.value:Us.textContent,Lo=!0)),D=lh(d,v),0<D.length&&(v=new V0(v,t,null,n,h),f.push({event:v,listeners:D}),E?v.data=E:(E=pT(n),E!==null&&(v.data=E)))),(E=pD?gD(t,n):yD(t,n))&&(d=lh(d,"onBeforeInput"),0<d.length&&(h=new V0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=E))}CT(f,e)})}function vc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=dc(t,n),i!=null&&r.unshift(vc(t,i,s)),i=dc(t,e),i!=null&&r.push(vc(t,i,s))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y0(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=dc(n,i),c!=null&&a.unshift(vc(n,c,l))):s||(c=dc(n,i),c!=null&&a.push(vc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jD=/\r\n?/g,RD=/\u0000|\uFFFD/g;function X0(t){return(typeof t=="string"?t:""+t).replace(jD,`
`).replace(RD,"")}function Ku(t,e,n){if(e=X0(e),X0(t)!==e&&n)throw Error(Q(425))}function ch(){}var Jp=null,Zp=null;function eg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tg=typeof setTimeout=="function"?setTimeout:void 0,kD=typeof clearTimeout=="function"?clearTimeout:void 0,J0=typeof Promise=="function"?Promise:void 0,DD=typeof queueMicrotask=="function"?queueMicrotask:typeof J0<"u"?function(t){return J0.resolve(null).then(t).catch(OD)}:tg;function OD(t){setTimeout(function(){throw t})}function Bm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mc(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Er="__reactFiber$"+qa,xc="__reactProps$"+qa,ns="__reactContainer$"+qa,ng="__reactEvents$"+qa,MD="__reactListeners$"+qa,LD="__reactHandles$"+qa;function ki(t){var e=t[Er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[Er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z0(t);t!==null;){if(n=t[Er])return n;t=Z0(t)}return e}t=n,n=t.parentNode}return null}function Kc(t){return t=t[Er]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function of(t){return t[xc]||null}var rg=[],$o=-1;function yi(t){return{current:t}}function Ze(t){0>$o||(t.current=rg[$o],rg[$o]=null,$o--)}function Ke(t,e){$o++,rg[$o]=t.current,t.current=e}var si={},Wt=yi(si),dn=yi(!1),Qi=si;function Ca(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hn(t){return t=t.childContextTypes,t!=null}function uh(){Ze(dn),Ze(Wt)}function e_(t,e,n){if(Wt.current!==si)throw Error(Q(168));Ke(Wt,e),Ke(dn,n)}function PT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,_2(t)||"Unknown",s));return st({},n,r)}function dh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,Qi=Wt.current,Ke(Wt,t),Ke(dn,dn.current),!0}function t_(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=PT(t,e,Qi),r.__reactInternalMemoizedMergedChildContext=t,Ze(dn),Ze(Wt),Ke(Wt,t)):Ze(dn),Ke(dn,n)}var Hr=null,af=!1,zm=!1;function AT(t){Hr===null?Hr=[t]:Hr.push(t)}function VD(t){af=!0,AT(t)}function vi(){if(!zm&&Hr!==null){zm=!0;var t=0,e=We;try{var n=Hr;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hr=null,af=!1}catch(s){throw Hr!==null&&(Hr=Hr.slice(t+1)),tT(Gy,vi),s}finally{We=e,zm=!1}}return null}var Bo=[],zo=0,hh=null,fh=0,kn=[],Dn=0,Yi=null,qr=1,Kr="";function Ai(t,e){Bo[zo++]=fh,Bo[zo++]=hh,hh=t,fh=e}function jT(t,e,n){kn[Dn++]=qr,kn[Dn++]=Kr,kn[Dn++]=Yi,Yi=t;var r=qr;t=Kr;var s=32-ir(r)-1;r&=~(1<<s),n+=1;var i=32-ir(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qr=1<<32-ir(e)+s|n<<s|r,Kr=i+t}else qr=1<<i|n<<s|r,Kr=t}function tv(t){t.return!==null&&(Ai(t,1),jT(t,1,0))}function nv(t){for(;t===hh;)hh=Bo[--zo],Bo[zo]=null,fh=Bo[--zo],Bo[zo]=null;for(;t===Yi;)Yi=kn[--Dn],kn[Dn]=null,Kr=kn[--Dn],kn[Dn]=null,qr=kn[--Dn],kn[Dn]=null}var Sn=null,xn=null,et=!1,tr=null;function RT(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function n_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,xn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yi!==null?{id:qr,overflow:Kr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,xn=null,!0):!1;default:return!1}}function sg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ig(t){if(et){var e=xn;if(e){var n=e;if(!n_(t,e)){if(sg(t))throw Error(Q(418));e=Gs(n.nextSibling);var r=Sn;e&&n_(t,e)?RT(r,n):(t.flags=t.flags&-4097|2,et=!1,Sn=t)}}else{if(sg(t))throw Error(Q(418));t.flags=t.flags&-4097|2,et=!1,Sn=t}}}function r_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function Qu(t){if(t!==Sn)return!1;if(!et)return r_(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eg(t.type,t.memoizedProps)),e&&(e=xn)){if(sg(t))throw kT(),Error(Q(418));for(;e;)RT(t,e),e=Gs(e.nextSibling)}if(r_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=Sn?Gs(t.stateNode.nextSibling):null;return!0}function kT(){for(var t=xn;t;)t=Gs(t.nextSibling)}function Ia(){xn=Sn=null,et=!1}function rv(t){tr===null?tr=[t]:tr.push(t)}var FD=ds.ReactCurrentBatchConfig;function Nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Yu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s_(t){var e=t._init;return e(t._payload)}function DT(t){function e(b,_){if(t){var N=b.deletions;N===null?(b.deletions=[_],b.flags|=16):N.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function s(b,_){return b=Ys(b,_),b.index=0,b.sibling=null,b}function i(b,_,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<_?(b.flags|=2,_):N):(b.flags|=2,_)):(b.flags|=1048576,_)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,_,N,I){return _===null||_.tag!==6?(_=Ym(N,b.mode,I),_.return=b,_):(_=s(_,N),_.return=b,_)}function c(b,_,N,I){var O=N.type;return O===Mo?h(b,_,N.props.children,I,N.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ts&&s_(O)===_.type)?(I=s(_,N.props),I.ref=Nl(b,_,N),I.return=b,I):(I=Pd(N.type,N.key,N.props,null,b.mode,I),I.ref=Nl(b,_,N),I.return=b,I)}function d(b,_,N,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==N.containerInfo||_.stateNode.implementation!==N.implementation?(_=Xm(N,b.mode,I),_.return=b,_):(_=s(_,N.children||[]),_.return=b,_)}function h(b,_,N,I,O){return _===null||_.tag!==7?(_=Wi(N,b.mode,I,O),_.return=b,_):(_=s(_,N),_.return=b,_)}function f(b,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ym(""+_,b.mode,N),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fu:return N=Pd(_.type,_.key,_.props,null,b.mode,N),N.ref=Nl(b,null,_),N.return=b,N;case Oo:return _=Xm(_,b.mode,N),_.return=b,_;case Ts:var I=_._init;return f(b,I(_._payload),N)}if(Dl(_)||_l(_))return _=Wi(_,b.mode,N,null),_.return=b,_;Yu(b,_)}return null}function m(b,_,N,I){var O=_!==null?_.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return O!==null?null:l(b,_,""+N,I);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fu:return N.key===O?c(b,_,N,I):null;case Oo:return N.key===O?d(b,_,N,I):null;case Ts:return O=N._init,m(b,_,O(N._payload),I)}if(Dl(N)||_l(N))return O!==null?null:h(b,_,N,I,null);Yu(b,N)}return null}function y(b,_,N,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return b=b.get(N)||null,l(_,b,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Fu:return b=b.get(I.key===null?N:I.key)||null,c(_,b,I,O);case Oo:return b=b.get(I.key===null?N:I.key)||null,d(_,b,I,O);case Ts:var D=I._init;return y(b,_,N,D(I._payload),O)}if(Dl(I)||_l(I))return b=b.get(N)||null,h(_,b,I,O,null);Yu(_,I)}return null}function T(b,_,N,I){for(var O=null,D=null,E=_,v=_=0,C=null;E!==null&&v<N.length;v++){E.index>v?(C=E,E=null):C=E.sibling;var A=m(b,E,N[v],I);if(A===null){E===null&&(E=C);break}t&&E&&A.alternate===null&&e(b,E),_=i(A,_,v),D===null?O=A:D.sibling=A,D=A,E=C}if(v===N.length)return n(b,E),et&&Ai(b,v),O;if(E===null){for(;v<N.length;v++)E=f(b,N[v],I),E!==null&&(_=i(E,_,v),D===null?O=E:D.sibling=E,D=E);return et&&Ai(b,v),O}for(E=r(b,E);v<N.length;v++)C=y(E,b,v,N[v],I),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?v:C.key),_=i(C,_,v),D===null?O=C:D.sibling=C,D=C);return t&&E.forEach(function(R){return e(b,R)}),et&&Ai(b,v),O}function x(b,_,N,I){var O=_l(N);if(typeof O!="function")throw Error(Q(150));if(N=O.call(N),N==null)throw Error(Q(151));for(var D=O=null,E=_,v=_=0,C=null,A=N.next();E!==null&&!A.done;v++,A=N.next()){E.index>v?(C=E,E=null):C=E.sibling;var R=m(b,E,A.value,I);if(R===null){E===null&&(E=C);break}t&&E&&R.alternate===null&&e(b,E),_=i(R,_,v),D===null?O=R:D.sibling=R,D=R,E=C}if(A.done)return n(b,E),et&&Ai(b,v),O;if(E===null){for(;!A.done;v++,A=N.next())A=f(b,A.value,I),A!==null&&(_=i(A,_,v),D===null?O=A:D.sibling=A,D=A);return et&&Ai(b,v),O}for(E=r(b,E);!A.done;v++,A=N.next())A=y(E,b,v,A.value,I),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?v:A.key),_=i(A,_,v),D===null?O=A:D.sibling=A,D=A);return t&&E.forEach(function(k){return e(b,k)}),et&&Ai(b,v),O}function w(b,_,N,I){if(typeof N=="object"&&N!==null&&N.type===Mo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Fu:e:{for(var O=N.key,D=_;D!==null;){if(D.key===O){if(O=N.type,O===Mo){if(D.tag===7){n(b,D.sibling),_=s(D,N.props.children),_.return=b,b=_;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ts&&s_(O)===D.type){n(b,D.sibling),_=s(D,N.props),_.ref=Nl(b,D,N),_.return=b,b=_;break e}n(b,D);break}else e(b,D);D=D.sibling}N.type===Mo?(_=Wi(N.props.children,b.mode,I,N.key),_.return=b,b=_):(I=Pd(N.type,N.key,N.props,null,b.mode,I),I.ref=Nl(b,_,N),I.return=b,b=I)}return a(b);case Oo:e:{for(D=N.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===N.containerInfo&&_.stateNode.implementation===N.implementation){n(b,_.sibling),_=s(_,N.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=Xm(N,b.mode,I),_.return=b,b=_}return a(b);case Ts:return D=N._init,w(b,_,D(N._payload),I)}if(Dl(N))return T(b,_,N,I);if(_l(N))return x(b,_,N,I);Yu(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,_!==null&&_.tag===6?(n(b,_.sibling),_=s(_,N),_.return=b,b=_):(n(b,_),_=Ym(N,b.mode,I),_.return=b,b=_),a(b)):n(b,_)}return w}var Pa=DT(!0),OT=DT(!1),mh=yi(null),ph=null,Ho=null,sv=null;function iv(){sv=Ho=ph=null}function ov(t){var e=mh.current;Ze(mh),t._currentValue=e}function og(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ea(t,e){ph=t,sv=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(sv!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(ph===null)throw Error(Q(308));Ho=t,ph.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var Di=null;function av(t){Di===null?Di=[t]:Di.push(t)}function MT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,av(e)):(n.next=s.next,s.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bs=!1;function lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rs(t,n)}return s=r.interleaved,s===null?(e.next=e,av(r)):(e.next=s.next,s.next=e),r.interleaved=e,rs(t,n)}function Sd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}function i_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gh(t,e,n,r){var s=t.updateQueue;bs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,x=l;switch(m=e,y=n,x.tag){case 1:if(T=x.payload,typeof T=="function"){f=T.call(y,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=x.payload,m=typeof T=="function"?T.call(y,f,m):T,m==null)break e;f=st({},f,m);break e;case 2:bs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ji|=a,t.lanes=a,t.memoizedState=f}}function o_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Qc={},br=yi(Qc),wc=yi(Qc),_c=yi(Qc);function Oi(t){if(t===Qc)throw Error(Q(174));return t}function cv(t,e){switch(Ke(_c,e),Ke(wc,t),Ke(br,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Up(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Up(e,t)}Ze(br),Ke(br,e)}function Aa(){Ze(br),Ze(wc),Ze(_c)}function VT(t){Oi(_c.current);var e=Oi(br.current),n=Up(e,t.type);e!==n&&(Ke(wc,t),Ke(br,n))}function uv(t){wc.current===t&&(Ze(br),Ze(wc))}var nt=yi(0);function yh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hm=[];function dv(){for(var t=0;t<Hm.length;t++)Hm[t]._workInProgressVersionPrimary=null;Hm.length=0}var Td=ds.ReactCurrentDispatcher,Wm=ds.ReactCurrentBatchConfig,Xi=0,rt=null,yt=null,St=null,vh=!1,Jl=!1,Ec=0,UD=0;function Vt(){throw Error(Q(321))}function hv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!lr(t[n],e[n]))return!1;return!0}function fv(t,e,n,r,s,i){if(Xi=i,rt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?HD:WD,t=n(r,s),Jl){i=0;do{if(Jl=!1,Ec=0,25<=i)throw Error(Q(301));i+=1,St=yt=null,e.updateQueue=null,Td.current=GD,t=n(r,s)}while(Jl)}if(Td.current=xh,e=yt!==null&&yt.next!==null,Xi=0,St=yt=rt=null,vh=!1,e)throw Error(Q(300));return t}function mv(){var t=Ec!==0;return Ec=0,t}function pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?rt.memoizedState=St=t:St=St.next=t,St}function Wn(){if(yt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=St===null?rt.memoizedState:St.next;if(e!==null)St=e,yt=t;else{if(t===null)throw Error(Q(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},St===null?rt.memoizedState=St=t:St=St.next=t}return St}function Sc(t,e){return typeof e=="function"?e(t):e}function Gm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=yt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Xi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,rt.lanes|=h,Ji|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,lr(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,rt.lanes|=i,Ji|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);lr(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function FT(){}function UT(t,e){var n=rt,r=Wn(),s=e(),i=!lr(r.memoizedState,s);if(i&&(r.memoizedState=s,cn=!0),r=r.queue,pv(zT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Tc(9,BT.bind(null,n,r,s,e),void 0,null),Tt===null)throw Error(Q(349));Xi&30||$T(n,e,s)}return s}function $T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function BT(t,e,n,r){e.value=n,e.getSnapshot=r,HT(e)&&WT(t)}function zT(t,e,n){return n(function(){HT(e)&&WT(t)})}function HT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!lr(t,n)}catch{return!0}}function WT(t){var e=rs(t,1);e!==null&&or(e,t,1,-1)}function a_(t){var e=pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:t},e.queue=t,t=t.dispatch=zD.bind(null,rt,t),[e.memoizedState,t]}function Tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rt.updateQueue,e===null?(e={lastEffect:null,stores:null},rt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GT(){return Wn().memoizedState}function bd(t,e,n,r){var s=pr();rt.flags|=t,s.memoizedState=Tc(1|e,n,void 0,r===void 0?null:r)}function lf(t,e,n,r){var s=Wn();r=r===void 0?null:r;var i=void 0;if(yt!==null){var a=yt.memoizedState;if(i=a.destroy,r!==null&&hv(r,a.deps)){s.memoizedState=Tc(e,n,i,r);return}}rt.flags|=t,s.memoizedState=Tc(1|e,n,i,r)}function l_(t,e){return bd(8390656,8,t,e)}function pv(t,e){return lf(2048,8,t,e)}function qT(t,e){return lf(4,2,t,e)}function KT(t,e){return lf(4,4,t,e)}function QT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YT(t,e,n){return n=n!=null?n.concat([t]):null,lf(4,4,QT.bind(null,e,t),n)}function gv(){}function XT(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function JT(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZT(t,e,n){return Xi&21?(lr(n,e)||(n=sT(),rt.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function $D(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=Wm.transition;Wm.transition={};try{t(!1),e()}finally{We=n,Wm.transition=r}}function eb(){return Wn().memoizedState}function BD(t,e,n){var r=Qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tb(t))nb(e,n);else if(n=MT(t,e,n,r),n!==null){var s=Jt();or(n,t,r,s),rb(n,e,r)}}function zD(t,e,n){var r=Qs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tb(t))nb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,lr(l,a)){var c=e.interleaved;c===null?(s.next=s,av(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=MT(t,e,s,r),n!==null&&(s=Jt(),or(n,t,r,s),rb(n,e,r))}}function tb(t){var e=t.alternate;return t===rt||e!==null&&e===rt}function nb(t,e){Jl=vh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}var xh={readContext:Hn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},HD={readContext:Hn,useCallback:function(t,e){return pr().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:l_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bd(4194308,4,QT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return bd(4,2,t,e)},useMemo:function(t,e){var n=pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BD.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var e=pr();return t={current:t},e.memoizedState=t},useState:a_,useDebugValue:gv,useDeferredValue:function(t){return pr().memoizedState=t},useTransition:function(){var t=a_(!1),e=t[0];return t=$D.bind(null,t[1]),pr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rt,s=pr();if(et){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Tt===null)throw Error(Q(349));Xi&30||$T(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,l_(zT.bind(null,r,i,t),[t]),r.flags|=2048,Tc(9,BT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pr(),e=Tt.identifierPrefix;if(et){var n=Kr,r=qr;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ec++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WD={readContext:Hn,useCallback:XT,useContext:Hn,useEffect:pv,useImperativeHandle:YT,useInsertionEffect:qT,useLayoutEffect:KT,useMemo:JT,useReducer:Gm,useRef:GT,useState:function(){return Gm(Sc)},useDebugValue:gv,useDeferredValue:function(t){var e=Wn();return ZT(e,yt.memoizedState,t)},useTransition:function(){var t=Gm(Sc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:FT,useSyncExternalStore:UT,useId:eb,unstable_isNewReconciler:!1},GD={readContext:Hn,useCallback:XT,useContext:Hn,useEffect:pv,useImperativeHandle:YT,useInsertionEffect:qT,useLayoutEffect:KT,useMemo:JT,useReducer:qm,useRef:GT,useState:function(){return qm(Sc)},useDebugValue:gv,useDeferredValue:function(t){var e=Wn();return yt===null?e.memoizedState=t:ZT(e,yt.memoizedState,t)},useTransition:function(){var t=qm(Sc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:FT,useSyncExternalStore:UT,useId:eb,unstable_isNewReconciler:!1};function Jn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ag(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cf={isMounted:function(t){return(t=t._reactInternals)?mo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Qs(t),i=Xr(r,s);i.payload=e,n!=null&&(i.callback=n),e=qs(t,i,s),e!==null&&(or(e,t,s,r),Sd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=Qs(t),i=Xr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=qs(t,i,s),e!==null&&(or(e,t,s,r),Sd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=Qs(t),s=Xr(n,r);s.tag=2,e!=null&&(s.callback=e),e=qs(t,s,r),e!==null&&(or(e,t,r,n),Sd(e,t,r))}};function c_(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!gc(n,r)||!gc(s,i):!0}function sb(t,e,n){var r=!1,s=si,i=e.contextType;return typeof i=="object"&&i!==null?i=Hn(i):(s=hn(e)?Qi:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ca(t,s):si),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function u_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function lg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hn(i):(i=hn(e)?Qi:Wt.current,s.context=Ca(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ag(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cf.enqueueReplaceState(s,s.state,null),gh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",r=e;do n+=w2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Km(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qD=typeof WeakMap=="function"?WeakMap:Map;function ib(t,e,n){n=Xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_h||(_h=!0,xg=r),cg(t,e)},n}function ob(t,e,n){n=Xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cg(t,e),typeof r!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function d_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aO.bind(null,t,e,n),e.then(t,t))}function h_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xr(-1,1),e.tag=2,qs(n,e,1))),n.lanes|=1),t)}var KD=ds.ReactCurrentOwner,cn=!1;function Xt(t,e,n,r){e.child=t===null?OT(e,null,n,r):Pa(e,t.child,n,r)}function m_(t,e,n,r,s){n=n.render;var i=e.ref;return ea(e,s),r=fv(t,e,n,r,i,s),n=mv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(et&&n&&tv(e),e.flags|=1,Xt(t,e,r,s),e.child)}function p_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ab(t,e,i,r,s)):(t=Pd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:gc,n(a,r)&&t.ref===e.ref)return ss(t,e,s)}return e.flags|=1,t=Ys(i,r),t.ref=e.ref,t.return=e,e.child=t}function ab(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(gc(i,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,ss(t,e,s)}return ug(t,e,n,r,s)}function lb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Go,gn),gn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Go,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(Go,gn),gn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(Go,gn),gn|=r;return Xt(t,e,s,n),e.child}function cb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ug(t,e,n,r,s){var i=hn(n)?Qi:Wt.current;return i=Ca(e,i),ea(e,s),n=fv(t,e,n,r,i,s),r=mv(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ss(t,e,s)):(et&&r&&tv(e),e.flags|=1,Xt(t,e,n,s),e.child)}function g_(t,e,n,r,s){if(hn(n)){var i=!0;dh(e)}else i=!1;if(ea(e,s),e.stateNode===null)Nd(t,e),sb(e,n,r),lg(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Hn(d):(d=hn(n)?Qi:Wt.current,d=Ca(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&u_(e,a,r,d),bs=!1;var m=e.memoizedState;a.state=m,gh(e,r,a,s),c=e.memoizedState,l!==r||m!==c||dn.current||bs?(typeof h=="function"&&(ag(e,n,h,r),c=e.memoizedState),(l=bs||c_(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,LT(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Jn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Hn(c):(c=hn(n)?Qi:Wt.current,c=Ca(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&u_(e,a,r,c),bs=!1,m=e.memoizedState,a.state=m,gh(e,r,a,s);var T=e.memoizedState;l!==f||m!==T||dn.current||bs?(typeof y=="function"&&(ag(e,n,y,r),T=e.memoizedState),(d=bs||c_(e,n,d,r,m,T,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,T,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,T,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),a.props=r,a.state=T,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return dg(t,e,n,r,i,s)}function dg(t,e,n,r,s,i){cb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&t_(e,n,!1),ss(t,e,i);r=e.stateNode,KD.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pa(e,t.child,null,i),e.child=Pa(e,null,l,i)):Xt(t,e,l,i),e.memoizedState=r.state,s&&t_(e,n,!0),e.child}function ub(t){var e=t.stateNode;e.pendingContext?e_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&e_(t,e.context,!1),cv(t,e.containerInfo)}function y_(t,e,n,r,s){return Ia(),rv(s),e.flags|=256,Xt(t,e,n,r),e.child}var hg={dehydrated:null,treeContext:null,retryLane:0};function fg(t){return{baseLanes:t,cachePool:null,transitions:null}}function db(t,e,n){var r=e.pendingProps,s=nt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(nt,s&1),t===null)return ig(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=hf(a,r,0,null),t=Wi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fg(n),e.memoizedState=hg,t):yv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return QD(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ys(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ys(l,i):(i=Wi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?fg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=hg,r}return i=t.child,t=i.sibling,r=Ys(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function yv(t,e){return e=hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xu(t,e,n,r){return r!==null&&rv(r),Pa(e,t.child,null,n),t=yv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QD(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Km(Error(Q(422))),Xu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hf({mode:"visible",children:r.children},s,0,null),i=Wi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pa(e,t.child,null,a),e.child.memoizedState=fg(a),e.memoizedState=hg,i);if(!(e.mode&1))return Xu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Q(419)),r=Km(i,r,void 0),Xu(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=Tt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rs(t,s),or(r,t,s,-1))}return Sv(),r=Km(Error(Q(421))),Xu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xn=Gs(s.nextSibling),Sn=e,et=!0,tr=null,t!==null&&(kn[Dn++]=qr,kn[Dn++]=Kr,kn[Dn++]=Yi,qr=t.id,Kr=t.overflow,Yi=e),e=yv(e,r.children),e.flags|=4096,e)}function v_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),og(t.return,e,n)}function Qm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function hb(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xt(t,e,r.children,n),r=nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v_(t,n,e);else if(t.tag===19)v_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(nt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&yh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&yh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qm(e,!0,n,null,i);break;case"together":Qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Nd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YD(t,e,n){switch(e.tag){case 3:ub(e),Ia();break;case 5:VT(e);break;case 1:hn(e.type)&&dh(e);break;case 4:cv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(mh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(nt,nt.current&1),e.flags|=128,null):n&e.child.childLanes?db(t,e,n):(Ke(nt,nt.current&1),t=ss(t,e,n),t!==null?t.sibling:null);Ke(nt,nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(nt,nt.current),r)break;return null;case 22:case 23:return e.lanes=0,lb(t,e,n)}return ss(t,e,n)}var fb,mg,mb,pb;fb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mg=function(){};mb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Oi(br.current);var i=null;switch(n){case"input":s=Mp(t,s),r=Mp(t,r),i=[];break;case"select":s=st({},s,{value:void 0}),r=st({},r,{value:void 0}),i=[];break;case"textarea":s=Fp(t,s),r=Fp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ch)}$p(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(cc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(cc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};pb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Cl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XD(t,e,n){var r=e.pendingProps;switch(nv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return hn(e.type)&&uh(),Ft(e),null;case 3:return r=e.stateNode,Aa(),Ze(dn),Ze(Wt),dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(Eg(tr),tr=null))),mg(t,e),Ft(e),null;case 5:uv(e);var s=Oi(_c.current);if(n=e.type,t!==null&&e.stateNode!=null)mb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Ft(e),null}if(t=Oi(br.current),Qu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Er]=e,r[xc]=i,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(s=0;s<Ml.length;s++)Xe(Ml[s],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":C0(r,i),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",r);break;case"textarea":P0(r,i),Xe("invalid",r)}$p(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ku(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ku(r.textContent,l,t),s=["children",""+l]):cc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Xe("scroll",r)}switch(n){case"input":Uu(r),I0(r,i,!0);break;case"textarea":Uu(r),A0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ch)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=z1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Er]=e,t[xc]=r,fb(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bp(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),s=r;break;case"iframe":case"object":case"embed":Xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ml.length;s++)Xe(Ml[s],t);s=r;break;case"source":Xe("error",t),s=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),s=r;break;case"details":Xe("toggle",t),s=r;break;case"input":C0(t,r),s=Mp(t,r),Xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=st({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":P0(t,r),s=Fp(t,r),Xe("invalid",t);break;default:s=r}$p(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?G1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&H1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uc(t,c):typeof c=="number"&&uc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(cc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",t):c!=null&&$y(t,i,c,a))}switch(n){case"input":Uu(t),I0(t,r,!1);break;case"textarea":Uu(t),A0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ri(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)pb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Oi(_c.current),Oi(br.current),Qu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Er]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:Ku(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ku(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=e,e.stateNode=r}return Ft(e),null;case 13:if(Ze(nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&xn!==null&&e.mode&1&&!(e.flags&128))kT(),Ia(),e.flags|=98560,i=!1;else if(i=Qu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Er]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),i=!1}else tr!==null&&(Eg(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||nt.current&1?xt===0&&(xt=3):Sv())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Aa(),mg(t,e),t===null&&yc(e.stateNode.containerInfo),Ft(e),null;case 10:return ov(e.type._context),Ft(e),null;case 17:return hn(e.type)&&uh(),Ft(e),null;case 19:if(Ze(nt),i=e.memoizedState,i===null)return Ft(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Cl(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=yh(t),a!==null){for(e.flags|=128,Cl(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(nt,nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&ut()>Ra&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304)}else{if(!r)if(t=yh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!et)return Ft(e),null}else 2*ut()-i.renderingStartTime>Ra&&n!==1073741824&&(e.flags|=128,r=!0,Cl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ut(),e.sibling=null,n=nt.current,Ke(nt,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Ev(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function JD(t,e){switch(nv(e),e.tag){case 1:return hn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Aa(),Ze(dn),Ze(Wt),dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uv(e),null;case 13:if(Ze(nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(nt),null;case 4:return Aa(),null;case 10:return ov(e.type._context),null;case 22:case 23:return Ev(),null;case 24:return null;default:return null}}var Ju=!1,zt=!1,ZD=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Wo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lt(t,e,r)}else n.current=null}function pg(t,e,n){try{n()}catch(r){lt(t,e,r)}}var x_=!1;function eO(t,e){if(Jp=oh,t=wT(),ev(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zp={focusedElem:t,selectionRange:n},oh=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var x=T.memoizedProps,w=T.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Jn(e.type,x),w);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(I){lt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return T=x_,x_=!1,T}function Zl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pg(e,n,i)}s=s.next}while(s!==r)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gb(t){var e=t.alternate;e!==null&&(t.alternate=null,gb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Er],delete e[xc],delete e[ng],delete e[MD],delete e[LD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yb(t){return t.tag===5||t.tag===3||t.tag===4}function w_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ch));else if(r!==4&&(t=t.child,t!==null))for(yg(t,e,n),t=t.sibling;t!==null;)yg(t,e,n),t=t.sibling}function vg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vg(t,e,n),t=t.sibling;t!==null;)vg(t,e,n),t=t.sibling}var Pt=null,er=!1;function vs(t,e,n){for(n=n.child;n!==null;)vb(t,e,n),n=n.sibling}function vb(t,e,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(tf,n)}catch{}switch(n.tag){case 5:zt||Wo(n,e);case 6:var r=Pt,s=er;Pt=null,vs(t,e,n),Pt=r,er=s,Pt!==null&&(er?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(er?(t=Pt,n=n.stateNode,t.nodeType===8?Bm(t.parentNode,n):t.nodeType===1&&Bm(t,n),mc(t)):Bm(Pt,n.stateNode));break;case 4:r=Pt,s=er,Pt=n.stateNode.containerInfo,er=!0,vs(t,e,n),Pt=r,er=s;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&pg(n,e,a),s=s.next}while(s!==r)}vs(t,e,n);break;case 1:if(!zt&&(Wo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){lt(n,e,l)}vs(t,e,n);break;case 21:vs(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,vs(t,e,n),zt=r):vs(t,e,n);break;default:vs(t,e,n)}}function __(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZD),e.forEach(function(r){var s=cO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,er=!1;break e;case 3:Pt=l.stateNode.containerInfo,er=!0;break e;case 4:Pt=l.stateNode.containerInfo,er=!0;break e}l=l.return}if(Pt===null)throw Error(Q(160));vb(i,a,s),Pt=null,er=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){lt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xb(e,t),e=e.sibling}function xb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),mr(t),r&4){try{Zl(3,t,t.return),uf(3,t)}catch(x){lt(t,t.return,x)}try{Zl(5,t,t.return)}catch(x){lt(t,t.return,x)}}break;case 1:Qn(e,t),mr(t),r&512&&n!==null&&Wo(n,n.return);break;case 5:if(Qn(e,t),mr(t),r&512&&n!==null&&Wo(n,n.return),t.flags&32){var s=t.stateNode;try{uc(s,"")}catch(x){lt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$1(s,i),Bp(l,a);var d=Bp(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?G1(s,f):h==="dangerouslySetInnerHTML"?H1(s,f):h==="children"?uc(s,f):$y(s,h,f,d)}switch(l){case"input":Lp(s,i);break;case"textarea":B1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Yo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Yo(s,!!i.multiple,i.defaultValue,!0):Yo(s,!!i.multiple,i.multiple?[]:"",!1))}s[xc]=i}catch(x){lt(t,t.return,x)}}break;case 6:if(Qn(e,t),mr(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){lt(t,t.return,x)}}break;case 3:if(Qn(e,t),mr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(e.containerInfo)}catch(x){lt(t,t.return,x)}break;case 4:Qn(e,t),mr(t);break;case 13:Qn(e,t),mr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wv=ut())),r&4&&__(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(d=zt)||h,Qn(e,t),zt=d):Qn(e,t),mr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ce=t,h=t.child;h!==null;){for(f=ce=h;ce!==null;){switch(m=ce,y=m.child,m.tag){case 0:case 11:case 14:case 15:Zl(4,m,m.return);break;case 1:Wo(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(x){lt(r,n,x)}}break;case 5:Wo(m,m.return);break;case 22:if(m.memoizedState!==null){S_(f);continue}}y!==null?(y.return=m,ce=y):S_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=W1("display",a))}catch(x){lt(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(x){lt(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qn(e,t),mr(t),r&4&&__(t);break;case 21:break;default:Qn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yb(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uc(s,""),r.flags&=-33);var i=w_(t);vg(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=w_(t);yg(t,l,a);break;default:throw Error(Q(161))}}catch(c){lt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tO(t,e,n){ce=t,wb(t)}function wb(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ju;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||zt;l=Ju;var d=zt;if(Ju=a,(zt=c)&&!d)for(ce=s;ce!==null;)a=ce,c=a.child,a.tag===22&&a.memoizedState!==null?T_(s):c!==null?(c.return=a,ce=c):T_(s);for(;i!==null;)ce=i,wb(i),i=i.sibling;ce=s,Ju=l,zt=d}E_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):E_(t)}}function E_(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||uf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&o_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o_(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&mc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}zt||e.flags&512&&gg(e)}catch(m){lt(e,e.return,m)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function S_(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function T_(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uf(4,e)}catch(c){lt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){lt(e,s,c)}}var i=e.return;try{gg(e)}catch(c){lt(e,i,c)}break;case 5:var a=e.return;try{gg(e)}catch(c){lt(e,a,c)}}}catch(c){lt(e,e.return,c)}if(e===t){ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ce=l;break}ce=e.return}}var nO=Math.ceil,wh=ds.ReactCurrentDispatcher,vv=ds.ReactCurrentOwner,Bn=ds.ReactCurrentBatchConfig,$e=0,Tt=null,ft=null,Rt=0,gn=0,Go=yi(0),xt=0,bc=null,Ji=0,df=0,xv=0,ec=null,an=null,wv=0,Ra=1/0,zr=null,_h=!1,xg=null,Ks=null,Zu=!1,$s=null,Eh=0,tc=0,wg=null,Cd=-1,Id=0;function Jt(){return $e&6?ut():Cd!==-1?Cd:Cd=ut()}function Qs(t){return t.mode&1?$e&2&&Rt!==0?Rt&-Rt:FD.transition!==null?(Id===0&&(Id=sT()),Id):(t=We,t!==0||(t=window.event,t=t===void 0?16:dT(t.type)),t):1}function or(t,e,n,r){if(50<tc)throw tc=0,wg=null,Error(Q(185));Gc(t,n,r),(!($e&2)||t!==Tt)&&(t===Tt&&(!($e&2)&&(df|=n),xt===4&&Cs(t,Rt)),fn(t,r),n===1&&$e===0&&!(e.mode&1)&&(Ra=ut()+500,af&&vi()))}function fn(t,e){var n=t.callbackNode;F2(t,e);var r=ih(t,t===Tt?Rt:0);if(r===0)n!==null&&k0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&k0(n),e===1)t.tag===0?VD(b_.bind(null,t)):AT(b_.bind(null,t)),DD(function(){!($e&6)&&vi()}),n=null;else{switch(iT(r)){case 1:n=Gy;break;case 4:n=nT;break;case 16:n=sh;break;case 536870912:n=rT;break;default:n=sh}n=Ib(n,_b.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _b(t,e){if(Cd=-1,Id=0,$e&6)throw Error(Q(327));var n=t.callbackNode;if(ta()&&t.callbackNode!==n)return null;var r=ih(t,t===Tt?Rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sh(t,r);else{e=r;var s=$e;$e|=2;var i=Sb();(Tt!==t||Rt!==e)&&(zr=null,Ra=ut()+500,Hi(t,e));do try{iO();break}catch(l){Eb(t,l)}while(!0);iv(),wh.current=i,$e=s,ft!==null?e=0:(Tt=null,Rt=0,e=xt)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(r=s,e=_g(t,s))),e===1)throw n=bc,Hi(t,0),Cs(t,r),fn(t,ut()),n;if(e===6)Cs(t,r);else{if(s=t.current.alternate,!(r&30)&&!rO(s)&&(e=Sh(t,r),e===2&&(i=qp(t),i!==0&&(r=i,e=_g(t,i))),e===1))throw n=bc,Hi(t,0),Cs(t,r),fn(t,ut()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:ji(t,an,zr);break;case 3:if(Cs(t,r),(r&130023424)===r&&(e=wv+500-ut(),10<e)){if(ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tg(ji.bind(null,t,an,zr),e);break}ji(t,an,zr);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-ir(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nO(r/1960))-r,10<r){t.timeoutHandle=tg(ji.bind(null,t,an,zr),r);break}ji(t,an,zr);break;case 5:ji(t,an,zr);break;default:throw Error(Q(329))}}}return fn(t,ut()),t.callbackNode===n?_b.bind(null,t):null}function _g(t,e){var n=ec;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=Sh(t,e),t!==2&&(e=an,an=n,e!==null&&Eg(e)),t}function Eg(t){an===null?an=t:an.push.apply(an,t)}function rO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!lr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cs(t,e){for(e&=~xv,e&=~df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function b_(t){if($e&6)throw Error(Q(327));ta();var e=ih(t,0);if(!(e&1))return fn(t,ut()),null;var n=Sh(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=_g(t,r))}if(n===1)throw n=bc,Hi(t,0),Cs(t,e),fn(t,ut()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ji(t,an,zr),fn(t,ut()),null}function _v(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Ra=ut()+500,af&&vi())}}function Zi(t){$s!==null&&$s.tag===0&&!($e&6)&&ta();var e=$e;$e|=1;var n=Bn.transition,r=We;try{if(Bn.transition=null,We=1,t)return t()}finally{We=r,Bn.transition=n,$e=e,!($e&6)&&vi()}}function Ev(){gn=Go.current,Ze(Go)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kD(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(nv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uh();break;case 3:Aa(),Ze(dn),Ze(Wt),dv();break;case 5:uv(r);break;case 4:Aa();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:ov(r.type._context);break;case 22:case 23:Ev()}n=n.return}if(Tt=t,ft=t=Ys(t.current,null),Rt=gn=e,xt=0,bc=null,xv=df=Ji=0,an=ec=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Di=null}return t}function Eb(t,e){do{var n=ft;try{if(iv(),Td.current=xh,vh){for(var r=rt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vh=!1}if(Xi=0,St=yt=rt=null,Jl=!1,Ec=0,vv.current=null,n===null||n.return===null){xt=1,bc=e,ft=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Rt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=h_(a);if(y!==null){y.flags&=-257,f_(y,a,l,i,e),y.mode&1&&d_(i,d,e),e=y,c=d;var T=e.updateQueue;if(T===null){var x=new Set;x.add(c),e.updateQueue=x}else T.add(c);break e}else{if(!(e&1)){d_(i,d,e),Sv();break e}c=Error(Q(426))}}else if(et&&l.mode&1){var w=h_(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),f_(w,a,l,i,e),rv(ja(c,l));break e}}i=c=ja(c,l),xt!==4&&(xt=2),ec===null?ec=[i]:ec.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=ib(i,c,e);i_(i,b);break e;case 1:l=c;var _=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ks===null||!Ks.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=ob(i,l,e);i_(i,I);break e}}i=i.return}while(i!==null)}bb(n)}catch(O){e=O,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function Sb(){var t=wh.current;return wh.current=xh,t===null?xh:t}function Sv(){(xt===0||xt===3||xt===2)&&(xt=4),Tt===null||!(Ji&268435455)&&!(df&268435455)||Cs(Tt,Rt)}function Sh(t,e){var n=$e;$e|=2;var r=Sb();(Tt!==t||Rt!==e)&&(zr=null,Hi(t,e));do try{sO();break}catch(s){Eb(t,s)}while(!0);if(iv(),$e=n,wh.current=r,ft!==null)throw Error(Q(261));return Tt=null,Rt=0,xt}function sO(){for(;ft!==null;)Tb(ft)}function iO(){for(;ft!==null&&!A2();)Tb(ft)}function Tb(t){var e=Cb(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?bb(t):ft=e,vv.current=null}function bb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JD(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,ft=null;return}}else if(n=XD(n,e,gn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);xt===0&&(xt=5)}function ji(t,e,n){var r=We,s=Bn.transition;try{Bn.transition=null,We=1,oO(t,e,n,r)}finally{Bn.transition=s,We=r}return null}function oO(t,e,n,r){do ta();while($s!==null);if($e&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(U2(t,i),t===Tt&&(ft=Tt=null,Rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zu||(Zu=!0,Ib(sh,function(){return ta(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bn.transition,Bn.transition=null;var a=We;We=1;var l=$e;$e|=4,vv.current=null,eO(t,n),xb(n,t),ND(Zp),oh=!!Jp,Zp=Jp=null,t.current=n,tO(n),j2(),$e=l,We=a,Bn.transition=i}else t.current=n;if(Zu&&(Zu=!1,$s=t,Eh=s),i=t.pendingLanes,i===0&&(Ks=null),D2(n.stateNode),fn(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_h)throw _h=!1,t=xg,xg=null,t;return Eh&1&&t.tag!==0&&ta(),i=t.pendingLanes,i&1?t===wg?tc++:(tc=0,wg=t):tc=0,vi(),null}function ta(){if($s!==null){var t=iT(Eh),e=Bn.transition,n=We;try{if(Bn.transition=null,We=16>t?16:t,$s===null)var r=!1;else{if(t=$s,$s=null,Eh=0,$e&6)throw Error(Q(331));var s=$e;for($e|=4,ce=t.current;ce!==null;){var i=ce,a=i.child;if(ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ce=d;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:Zl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ce=f;else for(;ce!==null;){h=ce;var m=h.sibling,y=h.return;if(gb(h),h===d){ce=null;break}if(m!==null){m.return=y,ce=m;break}ce=y}}}var T=i.alternate;if(T!==null){var x=T.child;if(x!==null){T.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}ce=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ce=a;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ce=b;break e}ce=i.return}}var _=t.current;for(ce=_;ce!==null;){a=ce;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,ce=N;else e:for(a=_;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uf(9,l)}}catch(O){lt(l,l.return,O)}if(l===a){ce=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,ce=I;break e}ce=l.return}}if($e=s,vi(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(tf,t)}catch{}r=!0}return r}finally{We=n,Bn.transition=e}}return!1}function N_(t,e,n){e=ja(n,e),e=ib(t,e,1),t=qs(t,e,1),e=Jt(),t!==null&&(Gc(t,1,e),fn(t,e))}function lt(t,e,n){if(t.tag===3)N_(t,t,n);else for(;e!==null;){if(e.tag===3){N_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ks===null||!Ks.has(r))){t=ja(n,t),t=ob(e,t,1),e=qs(e,t,1),t=Jt(),e!==null&&(Gc(e,1,t),fn(e,t));break}}e=e.return}}function aO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(Rt&n)===n&&(xt===4||xt===3&&(Rt&130023424)===Rt&&500>ut()-wv?Hi(t,0):xv|=n),fn(t,e)}function Nb(t,e){e===0&&(t.mode&1?(e=zu,zu<<=1,!(zu&130023424)&&(zu=4194304)):e=1);var n=Jt();t=rs(t,e),t!==null&&(Gc(t,e,n),fn(t,n))}function lO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nb(t,n)}function cO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Nb(t,n)}var Cb;Cb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,YD(t,e,n);cn=!!(t.flags&131072)}else cn=!1,et&&e.flags&1048576&&jT(e,fh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Nd(t,e),t=e.pendingProps;var s=Ca(e,Wt.current);ea(e,n),s=fv(null,e,r,t,s,n);var i=mv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(i=!0,dh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lv(e),s.updater=cf,e.stateNode=s,s._reactInternals=e,lg(e,r,t,n),e=dg(null,e,r,!0,i,n)):(e.tag=0,et&&i&&tv(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Nd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dO(r),t=Jn(r,t),s){case 0:e=ug(null,e,r,t,n);break e;case 1:e=g_(null,e,r,t,n);break e;case 11:e=m_(null,e,r,t,n);break e;case 14:e=p_(null,e,r,Jn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),ug(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),g_(t,e,r,s,n);case 3:e:{if(ub(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,LT(t,e),gh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ja(Error(Q(423)),e),e=y_(t,e,r,n,s);break e}else if(r!==s){s=ja(Error(Q(424)),e),e=y_(t,e,r,n,s);break e}else for(xn=Gs(e.stateNode.containerInfo.firstChild),Sn=e,et=!0,tr=null,n=OT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ia(),r===s){e=ss(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return VT(e),t===null&&ig(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,eg(r,s)?a=null:i!==null&&eg(r,i)&&(e.flags|=32),cb(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&ig(e),null;case 13:return db(t,e,n);case 4:return cv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pa(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),m_(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ke(mh,r._currentValue),r._currentValue=a,i!==null)if(lr(i.value,a)){if(i.children===s.children&&!dn.current){e=ss(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),og(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),og(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ea(e,n),s=Hn(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=Jn(r,e.pendingProps),s=Jn(r.type,s),p_(t,e,r,s,n);case 15:return ab(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jn(r,s),Nd(t,e),e.tag=1,hn(r)?(t=!0,dh(e)):t=!1,ea(e,n),sb(e,r,s),lg(e,r,s,n),dg(null,e,r,!0,t,n);case 19:return hb(t,e,n);case 22:return lb(t,e,n)}throw Error(Q(156,e.tag))};function Ib(t,e){return tT(t,e)}function uO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new uO(t,e,n,r)}function Tv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dO(t){if(typeof t=="function")return Tv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zy)return 11;if(t===Hy)return 14}return 2}function Ys(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pd(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Tv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Mo:return Wi(n.children,s,i,e);case By:a=8,s|=8;break;case Rp:return t=Fn(12,n,e,s|2),t.elementType=Rp,t.lanes=i,t;case kp:return t=Fn(13,n,e,s),t.elementType=kp,t.lanes=i,t;case Dp:return t=Fn(19,n,e,s),t.elementType=Dp,t.lanes=i,t;case V1:return hf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M1:a=10;break e;case L1:a=9;break e;case zy:a=11;break e;case Hy:a=14;break e;case Ts:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Fn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Wi(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function hf(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=V1,t.lanes=n,t.stateNode={isHidden:!1},t}function Ym(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function Xm(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jm(0),this.expirationTimes=jm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bv(t,e,n,r,s,i,a,l,c){return t=new hO(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lv(i),t}function fO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Pb(t){if(!t)return si;t=t._reactInternals;e:{if(mo(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(hn(n))return PT(t,n,e)}return e}function Ab(t,e,n,r,s,i,a,l,c){return t=bv(n,r,!0,t,s,i,a,l,c),t.context=Pb(null),n=t.current,r=Jt(),s=Qs(n),i=Xr(r,s),i.callback=e??null,qs(n,i,s),t.current.lanes=s,Gc(t,s,r),fn(t,r),t}function ff(t,e,n,r){var s=e.current,i=Jt(),a=Qs(s);return n=Pb(n),e.context===null?e.context=n:e.pendingContext=n,e=Xr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qs(s,e,a),t!==null&&(or(t,s,a,i),Sd(t,s,a)),a}function Th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Nv(t,e){C_(t,e),(t=t.alternate)&&C_(t,e)}function mO(){return null}var jb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cv(t){this._internalRoot=t}mf.prototype.render=Cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));ff(t,e,null,null)};mf.prototype.unmount=Cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){ff(null,t,null,null)}),e[ns]=null}};function mf(t){this._internalRoot=t}mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=lT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ns.length&&e!==0&&e<Ns[n].priority;n++);Ns.splice(n,0,t),n===0&&uT(t)}};function Iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I_(){}function pO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Th(a);i.call(d)}}var a=Ab(e,r,t,0,null,!1,!1,"",I_);return t._reactRootContainer=a,t[ns]=a.current,yc(t.nodeType===8?t.parentNode:t),Zi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Th(c);l.call(d)}}var c=bv(t,0,!1,null,null,!1,!1,"",I_);return t._reactRootContainer=c,t[ns]=c.current,yc(t.nodeType===8?t.parentNode:t),Zi(function(){ff(e,c,n,r)}),c}function gf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Th(a);l.call(c)}}ff(e,a,t,s)}else a=pO(n,e,t,s,r);return Th(a)}oT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ol(e.pendingLanes);n!==0&&(qy(e,n|1),fn(e,ut()),!($e&6)&&(Ra=ut()+500,vi()))}break;case 13:Zi(function(){var r=rs(t,1);if(r!==null){var s=Jt();or(r,t,1,s)}}),Nv(t,1)}};Ky=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=Jt();or(e,t,134217728,n)}Nv(t,134217728)}};aT=function(t){if(t.tag===13){var e=Qs(t),n=rs(t,e);if(n!==null){var r=Jt();or(n,t,e,r)}Nv(t,e)}};lT=function(){return We};cT=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Hp=function(t,e,n){switch(e){case"input":if(Lp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=of(r);if(!s)throw Error(Q(90));U1(r),Lp(r,s)}}}break;case"textarea":B1(t,n);break;case"select":e=n.value,e!=null&&Yo(t,!!n.multiple,e,!1)}};Q1=_v;Y1=Zi;var gO={usingClientEntryPoint:!1,Events:[Kc,Uo,of,q1,K1,_v]},Il={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yO={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Z1(t),t===null?null:t.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||mO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{tf=ed.inject(yO),Tr=ed}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gO;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iv(e))throw Error(Q(200));return fO(t,e,null,n)};Cn.createRoot=function(t,e){if(!Iv(t))throw Error(Q(299));var n=!1,r="",s=jb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bv(t,1,!1,null,null,n,!1,r,s),t[ns]=e.current,yc(t.nodeType===8?t.parentNode:t),new Cv(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Z1(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Zi(t)};Cn.hydrate=function(t,e,n){if(!pf(e))throw Error(Q(200));return gf(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Iv(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=jb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ab(e,null,t,1,n??null,s,!1,i,a),t[ns]=e.current,yc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mf(e)};Cn.render=function(t,e,n){if(!pf(e))throw Error(Q(200));return gf(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!pf(t))throw Error(Q(40));return t._reactRootContainer?(Zi(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};Cn.unstable_batchedUpdates=_v;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pf(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return gf(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function Rb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rb)}catch(t){console.error(t)}}Rb(),R1.exports=Cn;var xi=R1.exports;const vO=x1(xi);var kb,P_=xi;kb=P_.createRoot,P_.hydrateRoot;function xO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Db={exports:{}},Ob={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=p;function wO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _O=typeof Object.is=="function"?Object.is:wO,EO=ka.useState,SO=ka.useEffect,TO=ka.useLayoutEffect,bO=ka.useDebugValue;function NO(t,e){var n=e(),r=EO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return TO(function(){s.value=n,s.getSnapshot=e,Jm(s)&&i({inst:s})},[t,n,e]),SO(function(){return Jm(s)&&i({inst:s}),t(function(){Jm(s)&&i({inst:s})})},[t]),bO(n),n}function Jm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_O(t,n)}catch{return!0}}function CO(t,e){return e()}var IO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CO:NO;Ob.useSyncExternalStore=ka.useSyncExternalStore!==void 0?ka.useSyncExternalStore:IO;Db.exports=Ob;var PO=Db.exports;const AO=A1.useInsertionEffect,jO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RO=jO?p.useLayoutEffect:p.useEffect,kO=AO||RO,Mb=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return kO(()=>{e[0]=t}),e[1]},DO="popstate",Pv="pushState",Av="replaceState",OO="hashchange",A_=[DO,Pv,Av,OO],MO=t=>{for(const e of A_)addEventListener(e,t);return()=>{for(const e of A_)removeEventListener(e,t)}},Lb=(t,e)=>PO.useSyncExternalStore(MO,t,e),LO=()=>location.search,VO=({ssrSearch:t=""}={})=>Lb(LO,()=>t),j_=()=>location.pathname,FO=({ssrPath:t}={})=>Lb(j_,t?()=>t:j_),UO=(t,{replace:e=!1,state:n=null}={})=>history[e?Av:Pv](n,"",t),$O=(t={})=>[FO(t),UO],R_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[R_]>"u"){for(const t of[Pv,Av]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,R_,{value:!0})}const BO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Vb=(t="")=>t==="/"?"":t,zO=(t,e)=>t[0]==="~"?t.slice(1):Vb(e)+t,HO=(t="",e)=>BO(k_(Vb(t)),k_(e)),k_=t=>{try{return decodeURI(t)}catch{return t}},Fb={hook:$O,searchHook:VO,parser:xO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Ub=p.createContext(Fb),Yc=()=>p.useContext(Ub),$b={},Bb=p.createContext($b),WO=()=>p.useContext(Bb),yf=t=>{const[e,n]=t.hook(t);return[HO(t.base,e),Mb((r,s)=>n(zO(r,t.base),s))]},po=()=>yf(Yc()),zb=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):a.groups;let h={...c};return d&&Object.assign(h,d),h})(),...r?[l]:[]]:[!1,null]},GO=({children:t,...e})=>{var h,f;const n=Yc(),r=e.hook?Fb:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=p.useRef({}),c=l.current,d=c;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===d&&y!==d[m]&&(l.current=d={...d}),d[m]=y,y!==r[m]&&(s=d)}return p.createElement(Ub.Provider,{value:s,children:t})},D_=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,qO=t=>{let e=p.useRef($b),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Yn=({path:t,nest:e,match:n,...r})=>{const s=Yc(),[i]=yf(s),[a,l,c]=n??zb(s.parser,t,i,e),d=qO({...WO(),...l});if(!a)return null;const h=c?p.createElement(GO,{base:c},D_(r,d)):D_(r,d);return p.createElement(Bb.Provider,{value:d,children:h})},Gi=p.forwardRef((t,e)=>{const n=Yc(),[r,s]=yf(n),{to:i="",href:a=i,onClick:l,asChild:c,children:d,className:h,replace:f,state:m,...y}=t,T=Mb(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),s(a,t)))}),x=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&p.isValidElement(d)?p.cloneElement(d,{onClick:T,href:x}):p.createElement("a",{...y,onClick:T,href:x,className:h!=null&&h.call?h(r===a):h,children:d,ref:e})}),Hb=t=>Array.isArray(t)?t.flatMap(e=>Hb(e&&e.type===p.Fragment?e.props.children:e)):[t],KO=({children:t,location:e})=>{const n=Yc(),[r]=yf(n);for(const s of Hb(t)){let i=0;if(p.isValidElement(s)&&(i=zb(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var Ka=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eo=typeof window>"u"||"Deno"in globalThis;function Rn(){}function QO(t,e){return typeof t=="function"?t(e):t}function Sg(t){return typeof t=="number"&&t>=0&&t!==1/0}function Wb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function na(t,e){return typeof t=="function"?t(e):t}function nr(t,e){return typeof t=="function"?t(e):t}function O_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==jv(a,e.options))return!1}else if(!Nc(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function M_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(to(e.options.mutationKey)!==to(i))return!1}else if(!Nc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function jv(t,e){return((e==null?void 0:e.queryKeyHashFn)||to)(t)}function to(t){return JSON.stringify(t,(e,n)=>Tg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Nc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Nc(t[n],e[n])):!1}function Gb(t,e){if(t===e)return t;const n=L_(t)&&L_(e);if(n||Tg(t)&&Tg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let d=0;d<a;d++){const h=n?d:i[d];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=Gb(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function bh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function L_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Tg(t){if(!V_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!V_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function V_(t){return Object.prototype.toString.call(t)==="[object Object]"}function YO(t){return new Promise(e=>{setTimeout(e,t)})}function bg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Gb(t,e):e}function XO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function JO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Rv=Symbol();function qb(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Rv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Li,js,fa,c1,ZO=(c1=class extends Ka{constructor(){super();ve(this,Li);ve(this,js);ve(this,fa);ae(this,fa,e=>{if(!eo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){M(this,js)||this.setEventListener(M(this,fa))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,js))==null||e.call(this),ae(this,js,void 0))}setEventListener(e){var n;ae(this,fa,e),(n=M(this,js))==null||n.call(this),ae(this,js,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){M(this,Li)!==e&&(ae(this,Li,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof M(this,Li)=="boolean"?M(this,Li):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Li=new WeakMap,js=new WeakMap,fa=new WeakMap,c1),kv=new ZO,ma,Rs,pa,u1,eM=(u1=class extends Ka{constructor(){super();ve(this,ma,!0);ve(this,Rs);ve(this,pa);ae(this,pa,e=>{if(!eo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){M(this,Rs)||this.setEventListener(M(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,Rs))==null||e.call(this),ae(this,Rs,void 0))}setEventListener(e){var n;ae(this,pa,e),(n=M(this,Rs))==null||n.call(this),ae(this,Rs,e(this.setOnline.bind(this)))}setOnline(e){M(this,ma)!==e&&(ae(this,ma,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return M(this,ma)}},ma=new WeakMap,Rs=new WeakMap,pa=new WeakMap,u1),Nh=new eM;function Ng(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function tM(t){return Math.min(1e3*2**t,3e4)}function Kb(t){return(t??"online")==="online"?Nh.isOnline():!0}var Qb=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zm(t){return t instanceof Qb}function Yb(t){let e=!1,n=0,r=!1,s;const i=Ng(),a=x=>{var w;r||(m(new Qb(x)),(w=t.abort)==null||w.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>kv.isFocused()&&(t.networkMode==="always"||Nh.isOnline())&&t.canRun(),h=()=>Kb(t.networkMode)&&t.canRun(),f=x=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,x),s==null||s(),i.resolve(x))},m=x=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,x),s==null||s(),i.reject(x))},y=()=>new Promise(x=>{var w;s=b=>{(r||d())&&x(b)},(w=t.onPause)==null||w.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),T=()=>{if(r)return;let x;const w=n===0?t.initialPromise:void 0;try{x=w??t.fn()}catch(b){x=Promise.reject(b)}Promise.resolve(x).then(f).catch(b=>{var D;if(r)return;const _=t.retry??(eo?0:3),N=t.retryDelay??tM,I=typeof N=="function"?N(n,b):N,O=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,b);if(e||!O){m(b);return}n++,(D=t.onFail)==null||D.call(t,n,b),YO(I).then(()=>d()?void 0:y()).then(()=>{e?m(b):T()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?T():y().then(T),i)}}function nM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var vt=nM(),Vi,d1,Xb=(d1=class{constructor(){ve(this,Vi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sg(this.gcTime)&&ae(this,Vi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(eo?1/0:5*60*1e3))}clearGcTimeout(){M(this,Vi)&&(clearTimeout(M(this,Vi)),ae(this,Vi,void 0))}},Vi=new WeakMap,d1),ga,ya,jn,$t,$c,Fi,Zn,Br,h1,rM=(h1=class extends Xb{constructor(n){super();ve(this,Zn);ve(this,ga);ve(this,ya);ve(this,jn);ve(this,$t);ve(this,$c);ve(this,Fi);ae(this,Fi,!1),ae(this,$c,n.defaultOptions),this.setOptions(n.options),this.observers=[],ae(this,jn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ae(this,ga,sM(this.options)),this.state=n.state??M(this,ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=M(this,$t))==null?void 0:n.promise}setOptions(n){this.options={...M(this,$c),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,jn).remove(this)}setData(n,r){const s=bg(this.state.data,n,this.options);return Ie(this,Zn,Br).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ie(this,Zn,Br).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=M(this,$t))==null?void 0:s.promise;return(i=M(this,$t))==null||i.cancel(n),r?r.then(Rn).catch(Rn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,ga))}isActive(){return this.observers.some(n=>nr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Wb(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=M(this,$t))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=M(this,$t))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),M(this,jn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(M(this,$t)&&(M(this,Fi)?M(this,$t).cancel({revert:!0}):M(this,$t).cancelRetry()),this.scheduleGc()),M(this,jn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ie(this,Zn,Br).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(M(this,$t))return M(this,$t).continueRetry(),M(this,$t).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ae(this,Fi,!0),s.signal)})},a=()=>{const m=qb(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),ae(this,Fi,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(d=this.options.behavior)==null||d.onFetch(l,this),ae(this,ya,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ie(this,Zn,Br).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var y,T,x,w;Zm(m)&&m.silent||Ie(this,Zn,Br).call(this,{type:"error",error:m}),Zm(m)||((T=(y=M(this,jn).config).onError)==null||T.call(y,m,this),(w=(x=M(this,jn).config).onSettled)==null||w.call(x,this.state.data,m,this)),this.scheduleGc()};return ae(this,$t,Yb({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,T,x,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(b){c(b);return}(T=(y=M(this,jn).config).onSuccess)==null||T.call(y,m,this),(w=(x=M(this,jn).config).onSettled)==null||w.call(x,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,y)=>{Ie(this,Zn,Br).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Ie(this,Zn,Br).call(this,{type:"pause"})},onContinue:()=>{Ie(this,Zn,Br).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),M(this,$t).start()}},ga=new WeakMap,ya=new WeakMap,jn=new WeakMap,$t=new WeakMap,$c=new WeakMap,Fi=new WeakMap,Zn=new WeakSet,Br=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Jb(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Zm(i)&&i.revert&&M(this,ya)?{...M(this,ya),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),vt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),M(this,jn).notify({query:this,type:"updated",action:n})})},h1);function Jb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function sM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vr,f1,iM=(f1=class extends Ka{constructor(e={}){super();ve(this,vr);this.config=e,ae(this,vr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??jv(s,n);let a=this.get(i);return a||(a=new rM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){M(this,vr).has(e.queryHash)||(M(this,vr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=M(this,vr).get(e.queryHash);n&&(e.destroy(),n===e&&M(this,vr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){vt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,vr).get(e)}getAll(){return[...M(this,vr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>O_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>O_(e,r)):n}notify(e){vt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){vt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){vt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vr=new WeakMap,f1),xr,Qt,Ui,wr,Es,m1,oM=(m1=class extends Xb{constructor(n){super();ve(this,wr);ve(this,xr);ve(this,Qt);ve(this,Ui);this.mutationId=n.mutationId,ae(this,Qt,n.mutationCache),ae(this,xr,[]),this.state=n.state||Zb(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){M(this,xr).includes(n)||(M(this,xr).push(n),this.clearGcTimeout(),M(this,Qt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ae(this,xr,M(this,xr).filter(r=>r!==n)),this.scheduleGc(),M(this,Qt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){M(this,xr).length||(this.state.status==="pending"?this.scheduleGc():M(this,Qt).remove(this))}continue(){var n;return((n=M(this,Ui))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,d,h,f,m,y,T,x,w,b,_,N,I,O,D,E,v;ae(this,Ui,Yb({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,A)=>{Ie(this,wr,Es).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{Ie(this,wr,Es).call(this,{type:"pause"})},onContinue:()=>{Ie(this,wr,Es).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Qt).canRun(this)}));const r=this.state.status==="pending",s=!M(this,Ui).canStart();try{if(!r){Ie(this,wr,Es).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=M(this,Qt).config).onMutate)==null?void 0:a.call(i,n,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));A!==this.state.context&&Ie(this,wr,Es).call(this,{type:"pending",context:A,variables:n,isPaused:s})}const C=await M(this,Ui).start();return await((h=(d=M(this,Qt).config).onSuccess)==null?void 0:h.call(d,C,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,C,n,this.state.context)),await((T=(y=M(this,Qt).config).onSettled)==null?void 0:T.call(y,C,null,this.state.variables,this.state.context,this)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,C,null,n,this.state.context)),Ie(this,wr,Es).call(this,{type:"success",data:C}),C}catch(C){try{throw await((_=(b=M(this,Qt).config).onError)==null?void 0:_.call(b,C,n,this.state.context,this)),await((I=(N=this.options).onError)==null?void 0:I.call(N,C,n,this.state.context)),await((D=(O=M(this,Qt).config).onSettled)==null?void 0:D.call(O,void 0,C,this.state.variables,this.state.context,this)),await((v=(E=this.options).onSettled)==null?void 0:v.call(E,void 0,C,n,this.state.context)),C}finally{Ie(this,wr,Es).call(this,{type:"error",error:C})}}finally{M(this,Qt).runNext(this)}}},xr=new WeakMap,Qt=new WeakMap,Ui=new WeakMap,wr=new WeakSet,Es=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),vt.batch(()=>{M(this,xr).forEach(s=>{s.onMutationUpdate(n)}),M(this,Qt).notify({mutation:this,type:"updated",action:n})})},m1);function Zb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pn,Bc,p1,aM=(p1=class extends Ka{constructor(e={}){super();ve(this,pn);ve(this,Bc);this.config=e,ae(this,pn,new Map),ae(this,Bc,Date.now())}build(e,n,r){const s=new oM({mutationCache:this,mutationId:++Lu(this,Bc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=td(e),r=M(this,pn).get(n)??[];r.push(e),M(this,pn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=td(e);if(M(this,pn).has(n)){const s=(r=M(this,pn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?M(this,pn).delete(n):M(this,pn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=M(this,pn).get(td(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=M(this,pn).get(td(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){vt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...M(this,pn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>M_(n,r))}findAll(e={}){return this.getAll().filter(n=>M_(e,n))}notify(e){vt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return vt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Rn))))}},pn=new WeakMap,Bc=new WeakMap,p1);function td(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function F_(t){return{onFetch:(e,n)=>{var h,f,m,y,T;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],a=((T=e.state.data)==null?void 0:T.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},b=qb(e.options,e.fetchOptions),_=async(N,I,O)=>{if(x)return Promise.reject();if(I==null&&N.pages.length)return Promise.resolve(N);const D={queryKey:e.queryKey,pageParam:I,direction:O?"backward":"forward",meta:e.options.meta};w(D);const E=await b(D),{maxPages:v}=e.options,C=O?JO:XO;return{pages:C(N.pages,E,v),pageParams:C(N.pageParams,I,v)}};if(s&&i.length){const N=s==="backward",I=N?lM:U_,O={pages:i,pageParams:a},D=I(r,O);l=await _(O,D,N)}else{const N=t??i.length;do{const I=c===0?a[0]??r.initialPageParam:U_(r,l);if(c>0&&I==null)break;l=await _(l,I),c++}while(c<N)}return l};e.options.persister?e.fetchFn=()=>{var x,w;return(w=(x=e.options).persister)==null?void 0:w.call(x,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function U_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function lM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var at,ks,Ds,va,xa,Os,wa,_a,g1,cM=(g1=class{constructor(t={}){ve(this,at);ve(this,ks);ve(this,Ds);ve(this,va);ve(this,xa);ve(this,Os);ve(this,wa);ve(this,_a);ae(this,at,t.queryCache||new iM),ae(this,ks,t.mutationCache||new aM),ae(this,Ds,t.defaultOptions||{}),ae(this,va,new Map),ae(this,xa,new Map),ae(this,Os,0)}mount(){Lu(this,Os)._++,M(this,Os)===1&&(ae(this,wa,kv.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,at).onFocus())})),ae(this,_a,Nh.subscribe(async t=>{t&&(await this.resumePausedMutations(),M(this,at).onOnline())})))}unmount(){var t,e;Lu(this,Os)._--,M(this,Os)===0&&((t=M(this,wa))==null||t.call(this),ae(this,wa,void 0),(e=M(this,_a))==null||e.call(this),ae(this,_a,void 0))}isFetching(t){return M(this,at).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return M(this,ks).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,at).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=M(this,at).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(na(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return M(this,at).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=M(this,at).get(r.queryHash),i=s==null?void 0:s.state.data,a=QO(e,i);if(a!==void 0)return M(this,at).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return vt.batch(()=>M(this,at).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=M(this,at).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=M(this,at);vt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=M(this,at),r={type:"active",...t};return vt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=vt.batch(()=>M(this,at).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Rn).catch(Rn)}invalidateQueries(t={},e={}){return vt.batch(()=>{if(M(this,at).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=vt.batch(()=>M(this,at).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Rn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Rn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=M(this,at).build(this,e);return n.isStaleByTime(na(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Rn).catch(Rn)}fetchInfiniteQuery(t){return t.behavior=F_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Rn).catch(Rn)}ensureInfiniteQueryData(t){return t.behavior=F_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Nh.isOnline()?M(this,ks).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,at)}getMutationCache(){return M(this,ks)}getDefaultOptions(){return M(this,Ds)}setDefaultOptions(t){ae(this,Ds,t)}setQueryDefaults(t,e){M(this,va).set(to(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...M(this,va).values()];let n={};return e.forEach(r=>{Nc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){M(this,xa).set(to(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...M(this,xa).values()];let n={};return e.forEach(r=>{Nc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...M(this,Ds).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=jv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Rv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...M(this,Ds).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){M(this,at).clear(),M(this,ks).clear()}},at=new WeakMap,ks=new WeakMap,Ds=new WeakMap,va=new WeakMap,xa=new WeakMap,Os=new WeakMap,wa=new WeakMap,_a=new WeakMap,g1),rn,Ve,zc,Yt,$i,Ea,Ms,_r,Hc,Sa,Ta,Bi,zi,Ls,ba,ze,Ll,Cg,Ig,Pg,Ag,jg,Rg,kg,eN,y1,uM=(y1=class extends Ka{constructor(e,n){super();ve(this,ze);ve(this,rn);ve(this,Ve);ve(this,zc);ve(this,Yt);ve(this,$i);ve(this,Ea);ve(this,Ms);ve(this,_r);ve(this,Hc);ve(this,Sa);ve(this,Ta);ve(this,Bi);ve(this,zi);ve(this,Ls);ve(this,ba,new Set);this.options=n,ae(this,rn,e),ae(this,_r,null),ae(this,Ms,Ng()),this.options.experimental_prefetchInRender||M(this,Ms).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Ve).addObserver(this),$_(M(this,Ve),this.options)?Ie(this,ze,Ll).call(this):this.updateResult(),Ie(this,ze,Ag).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Dg(M(this,Ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Dg(M(this,Ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,ze,jg).call(this),Ie(this,ze,Rg).call(this),M(this,Ve).removeObserver(this)}setOptions(e,n){const r=this.options,s=M(this,Ve);if(this.options=M(this,rn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof nr(this.options.enabled,M(this,Ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,ze,kg).call(this),M(this,Ve).setOptions(this.options),r._defaulted&&!bh(this.options,r)&&M(this,rn).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Ve),observer:this});const i=this.hasListeners();i&&B_(M(this,Ve),s,this.options,r)&&Ie(this,ze,Ll).call(this),this.updateResult(n),i&&(M(this,Ve)!==s||nr(this.options.enabled,M(this,Ve))!==nr(r.enabled,M(this,Ve))||na(this.options.staleTime,M(this,Ve))!==na(r.staleTime,M(this,Ve)))&&Ie(this,ze,Cg).call(this);const a=Ie(this,ze,Ig).call(this);i&&(M(this,Ve)!==s||nr(this.options.enabled,M(this,Ve))!==nr(r.enabled,M(this,Ve))||a!==M(this,Ls))&&Ie(this,ze,Pg).call(this,a)}getOptimisticResult(e){const n=M(this,rn).getQueryCache().build(M(this,rn),e),r=this.createResult(n,e);return hM(this,r)&&(ae(this,Yt,r),ae(this,Ea,this.options),ae(this,$i,M(this,Ve).state)),r}getCurrentResult(){return M(this,Yt)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){M(this,ba).add(e)}getCurrentQuery(){return M(this,Ve)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=M(this,rn).defaultQueryOptions(e),r=M(this,rn).getQueryCache().build(M(this,rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ie(this,ze,Ll).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Yt)))}createResult(e,n){var v;const r=M(this,Ve),s=this.options,i=M(this,Yt),a=M(this,$i),l=M(this,Ea),d=e!==r?e.state:M(this,zc),{state:h}=e;let f={...h},m=!1,y;if(n._optimisticResults){const C=this.hasListeners(),A=!C&&$_(e,n),R=C&&B_(e,r,n,s);(A||R)&&(f={...f,...Jb(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:T,errorUpdatedAt:x,status:w}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(a==null?void 0:a.data)&&n.select===M(this,Hc))y=M(this,Sa);else try{ae(this,Hc,n.select),y=n.select(f.data),y=bg(i==null?void 0:i.data,y,n),ae(this,Sa,y),ae(this,_r,null)}catch(C){ae(this,_r,C)}else y=f.data;if(n.placeholderData!==void 0&&y===void 0&&w==="pending"){let C;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))C=i.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((v=M(this,Ta))==null?void 0:v.state.data,M(this,Ta)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),ae(this,_r,null)}catch(A){ae(this,_r,A)}C!==void 0&&(w="success",y=bg(i==null?void 0:i.data,C,n),m=!0)}M(this,_r)&&(T=M(this,_r),y=M(this,Sa),x=Date.now(),w="error");const b=f.fetchStatus==="fetching",_=w==="pending",N=w==="error",I=_&&b,O=y!==void 0,E={status:w,fetchStatus:f.fetchStatus,isPending:_,isSuccess:w==="success",isError:N,isInitialLoading:I,isLoading:I,data:y,dataUpdatedAt:f.dataUpdatedAt,error:T,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!_,isLoadingError:N&&!O,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:N&&O,isStale:Dv(e,n),refetch:this.refetch,promise:M(this,Ms)};if(this.options.experimental_prefetchInRender){const C=k=>{E.status==="error"?k.reject(E.error):E.data!==void 0&&k.resolve(E.data)},A=()=>{const k=ae(this,Ms,E.promise=Ng());C(k)},R=M(this,Ms);switch(R.status){case"pending":e.queryHash===r.queryHash&&C(R);break;case"fulfilled":(E.status==="error"||E.data!==R.value)&&A();break;case"rejected":(E.status!=="error"||E.error!==R.reason)&&A();break}}return E}updateResult(e){const n=M(this,Yt),r=this.createResult(M(this,Ve),this.options);if(ae(this,$i,M(this,Ve).state),ae(this,Ea,this.options),M(this,$i).data!==void 0&&ae(this,Ta,M(this,Ve)),bh(r,n))return;ae(this,Yt,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!M(this,ba).size)return!0;const c=new Set(l??M(this,ba));return this.options.throwOnError&&c.add("error"),Object.keys(M(this,Yt)).some(d=>{const h=d;return M(this,Yt)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Ie(this,ze,eN).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,ze,Ag).call(this)}},rn=new WeakMap,Ve=new WeakMap,zc=new WeakMap,Yt=new WeakMap,$i=new WeakMap,Ea=new WeakMap,Ms=new WeakMap,_r=new WeakMap,Hc=new WeakMap,Sa=new WeakMap,Ta=new WeakMap,Bi=new WeakMap,zi=new WeakMap,Ls=new WeakMap,ba=new WeakMap,ze=new WeakSet,Ll=function(e){Ie(this,ze,kg).call(this);let n=M(this,Ve).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Rn)),n},Cg=function(){Ie(this,ze,jg).call(this);const e=na(this.options.staleTime,M(this,Ve));if(eo||M(this,Yt).isStale||!Sg(e))return;const r=Wb(M(this,Yt).dataUpdatedAt,e)+1;ae(this,Bi,setTimeout(()=>{M(this,Yt).isStale||this.updateResult()},r))},Ig=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Ve)):this.options.refetchInterval)??!1},Pg=function(e){Ie(this,ze,Rg).call(this),ae(this,Ls,e),!(eo||nr(this.options.enabled,M(this,Ve))===!1||!Sg(M(this,Ls))||M(this,Ls)===0)&&ae(this,zi,setInterval(()=>{(this.options.refetchIntervalInBackground||kv.isFocused())&&Ie(this,ze,Ll).call(this)},M(this,Ls)))},Ag=function(){Ie(this,ze,Cg).call(this),Ie(this,ze,Pg).call(this,Ie(this,ze,Ig).call(this))},jg=function(){M(this,Bi)&&(clearTimeout(M(this,Bi)),ae(this,Bi,void 0))},Rg=function(){M(this,zi)&&(clearInterval(M(this,zi)),ae(this,zi,void 0))},kg=function(){const e=M(this,rn).getQueryCache().build(M(this,rn),this.options);if(e===M(this,Ve))return;const n=M(this,Ve);ae(this,Ve,e),ae(this,zc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},eN=function(e){vt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(M(this,Yt))}),M(this,rn).getQueryCache().notify({query:M(this,Ve),type:"observerResultsUpdated"})})},y1);function dM(t,e){return nr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function $_(t,e){return dM(t,e)||t.state.data!==void 0&&Dg(t,e,e.refetchOnMount)}function Dg(t,e,n){if(nr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Dv(t,e)}return!1}function B_(t,e,n,r){return(t!==e||nr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Dv(t,n)}function Dv(t,e){return nr(e.enabled,t)!==!1&&t.isStaleByTime(na(e.staleTime,t))}function hM(t,e){return!bh(t.getCurrentResult(),e)}var Vs,Fs,sn,Wr,es,Ad,Og,v1,fM=(v1=class extends Ka{constructor(n,r){super();ve(this,es);ve(this,Vs);ve(this,Fs);ve(this,sn);ve(this,Wr);ae(this,Vs,n),this.setOptions(r),this.bindMethods(),Ie(this,es,Ad).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=M(this,Vs).defaultMutationOptions(n),bh(this.options,r)||M(this,Vs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,sn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&to(r.mutationKey)!==to(this.options.mutationKey)?this.reset():((s=M(this,sn))==null?void 0:s.state.status)==="pending"&&M(this,sn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=M(this,sn))==null||n.removeObserver(this)}onMutationUpdate(n){Ie(this,es,Ad).call(this),Ie(this,es,Og).call(this,n)}getCurrentResult(){return M(this,Fs)}reset(){var n;(n=M(this,sn))==null||n.removeObserver(this),ae(this,sn,void 0),Ie(this,es,Ad).call(this),Ie(this,es,Og).call(this)}mutate(n,r){var s;return ae(this,Wr,r),(s=M(this,sn))==null||s.removeObserver(this),ae(this,sn,M(this,Vs).getMutationCache().build(M(this,Vs),this.options)),M(this,sn).addObserver(this),M(this,sn).execute(n)}},Vs=new WeakMap,Fs=new WeakMap,sn=new WeakMap,Wr=new WeakMap,es=new WeakSet,Ad=function(){var r;const n=((r=M(this,sn))==null?void 0:r.state)??Zb();ae(this,Fs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Og=function(n){vt.batch(()=>{var r,s,i,a,l,c,d,h;if(M(this,Wr)&&this.hasListeners()){const f=M(this,Fs).variables,m=M(this,Fs).context;(n==null?void 0:n.type)==="success"?((s=(r=M(this,Wr)).onSuccess)==null||s.call(r,n.data,f,m),(a=(i=M(this,Wr)).onSettled)==null||a.call(i,n.data,null,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=M(this,Wr)).onError)==null||c.call(l,n.error,f,m),(h=(d=M(this,Wr)).onSettled)==null||h.call(d,void 0,n.error,f,m))}this.listeners.forEach(f=>{f(M(this,Fs))})})},v1),tN=p.createContext(void 0),Ov=t=>{const e=p.useContext(tN);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},mM=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(tN.Provider,{value:t,children:e})),nN=p.createContext(!1),pM=()=>p.useContext(nN);nN.Provider;function gM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var yM=p.createContext(gM()),vM=()=>p.useContext(yM);function rN(t,e){return typeof t=="function"?t(...e):!!t}function Mg(){}var xM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},wM=t=>{p.useEffect(()=>{t.clearReset()},[t])},_M=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&rN(n,[t.error,r]),EM=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},SM=(t,e)=>t.isLoading&&t.isFetching&&!e,TM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,z_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function bM(t,e,n){var h,f,m,y,T;const r=Ov(),s=pM(),i=vM(),a=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",EM(a),xM(a,i),wM(i);const l=!r.getQueryCache().get(a.queryHash),[c]=p.useState(()=>new e(r,a)),d=c.getOptimisticResult(a);if(p.useSyncExternalStore(p.useCallback(x=>{const w=s?Mg:c.subscribe(vt.batchCalls(x));return c.updateResult(),w},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),TM(a,d))throw z_(a,c,i);if(_M({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw d.error;if((y=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||y.call(m,a,d),a.experimental_prefetchInRender&&!eo&&SM(d,s)){const x=l?z_(a,c,i):(T=r.getQueryCache().get(a.queryHash))==null?void 0:T.promise;x==null||x.catch(Mg).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?d:c.trackResult(d)}function Zt(t,e){return bM(t,uM)}function qo(t,e){const n=Ov(),[r]=p.useState(()=>new fM(n,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const s=p.useSyncExternalStore(p.useCallback(a=>r.subscribe(vt.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=p.useCallback((a,l)=>{r.mutate(a,l).catch(Mg)},[r]);if(s.error&&rN(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function NM(t){if(!t.ok){const n=await t.text().catch(()=>"");throw new Error(`${t.url} -> ${t.status} ${t.statusText}
${n.slice(0,200)}`)}if(!(t.headers.get("content-type")||"").includes("application/json")){const n=await t.text();throw new Error(`Expected JSON from ${t.url}, got:
${n.slice(0,200)}`)}return t.json()}async function CM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Ne(t,e,n){const r=localStorage.getItem("token"),s={};n&&(s["Content-Type"]="application/json"),r&&(s.Authorization=`Bearer ${r}`);const i=await fetch(e,{method:t,headers:s,body:n?JSON.stringify(n):void 0,credentials:"include"});return await CM(i),i}const IM=({on401:t})=>async({queryKey:e})=>{const n=localStorage.getItem("token"),r={};n&&(r.Authorization=`Bearer ${n}`);const s=await fetch(e.join("/"),{headers:r,credentials:"include"});return t==="returnNull"&&s.status===401?null:await NM(s)},Ue=new cM({defaultOptions:{queries:{queryFn:IM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),PM=1,AM=1e6,jM=4e3;let ep=0;function RM(){return ep=(ep+1)%Number.MAX_SAFE_INTEGER,ep.toString()}const tp=new Map,H_=(t,e)=>{if(tp.has(t))return;const n=setTimeout(()=>{tp.delete(t),nc({type:"REMOVE_TOAST",toastId:t})},AM);tp.set(t,n)},kM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,PM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?H_(n):t.toasts.forEach(r=>{H_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},jd=[];let Rd={toasts:[]};function nc(t){Rd=kM(Rd,t),jd.forEach(e=>{e(Rd)})}function DM({...t}){const e=RM(),n=i=>nc({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>nc({type:"DISMISS_TOAST",toastId:e}),s=t.variant==="destructive"?1/0:t.duration!==void 0?t.duration:jM;return nc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,duration:s,onOpenChange:i=>{i||r()}}}),t.variant!=="destructive"&&s!==1/0&&setTimeout(()=>{r()},s),{id:e,dismiss:r,update:n}}function Nt(){const[t,e]=p.useState(Rd);return p.useEffect(()=>(jd.push(e),()=>{const n=jd.indexOf(e);n>-1&&jd.splice(n,1)}),[t]),{...t,toast:DM,dismiss:n=>nc({type:"DISMISS_TOAST",toastId:n})}}function Z(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function W_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Xc(...t){return e=>{let n=!1;const r=t.map(s=>{const i=W_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():W_(t[s],null)}}}}function Pe(...t){return p.useCallback(Xc(...t),t)}function OM(t,e){const n=p.createContext(e),r=i=>{const{children:a,...l}=i,c=p.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=p.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Pn(t,e=[]){let n=[];function r(i,a){const l=p.createContext(a),c=n.length;n=[...n,a];const d=f=>{var b;const{scope:m,children:y,...T}=f,x=((b=m==null?void 0:m[t])==null?void 0:b[c])||l,w=p.useMemo(()=>T,Object.values(T));return o.jsx(x.Provider,{value:w,children:y})};d.displayName=i+"Provider";function h(f,m){var x;const y=((x=m==null?void 0:m[t])==null?void 0:x[c])||l,T=p.useContext(y);if(T)return T;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,MM(s,...e)]}function MM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function no(t){const e=VM(t),n=p.forwardRef((r,s)=>{const{children:i,...a}=r,l=p.Children.toArray(i),c=l.find(UM);if(c){const d=c.props.children,h=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:p.isValidElement(d)?p.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var LM=no("Slot");function VM(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const a=BM(s),l=$M(i,s.props);return s.type!==p.Fragment&&(l.ref=r?Xc(r,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var sN=Symbol("radix.slottable");function FM(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=sN,e}function UM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===sN}function $M(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function BM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vf(t){const e=t+"CollectionProvider",[n,r]=Pn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:w,children:b}=x,_=gr.useRef(null),N=gr.useRef(new Map).current;return o.jsx(s,{scope:w,itemMap:N,collectionRef:_,children:b})};a.displayName=e;const l=t+"CollectionSlot",c=no(l),d=gr.forwardRef((x,w)=>{const{scope:b,children:_}=x,N=i(l,b),I=Pe(w,N.collectionRef);return o.jsx(c,{ref:I,children:_})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=no(h),y=gr.forwardRef((x,w)=>{const{scope:b,children:_,...N}=x,I=gr.useRef(null),O=Pe(w,I),D=i(h,b);return gr.useEffect(()=>(D.itemMap.set(I,{ref:I,...N}),()=>void D.itemMap.delete(I))),o.jsx(m,{[f]:"",ref:O,children:_})});y.displayName=h;function T(x){const w=i(t+"CollectionConsumer",x);return gr.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const N=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((D,E)=>N.indexOf(D.ref.current)-N.indexOf(E.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:d,ItemSlot:y},T,r]}var zM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],be=zM.reduce((t,e)=>{const n=no(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Mv(t,e){t&&xi.flushSync(()=>t.dispatchEvent(e))}function _t(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function iN(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var HM="DismissableLayer",Lg="dismissableLayer.update",WM="dismissableLayer.pointerDownOutside",GM="dismissableLayer.focusOutside",G_,oN=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jc=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=p.useContext(oN),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),T=Pe(e,E=>f(E)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(w),_=h?x.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,I=_>=b,O=KM(E=>{const v=E.target,C=[...d.branches].some(A=>A.contains(v));!I||C||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},m),D=QM(E=>{const v=E.target;[...d.branches].some(A=>A.contains(v))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},m);return iN(E=>{_===d.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(G_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),q_(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=G_)}},[h,m,n,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),q_())},[h,d]),p.useEffect(()=>{const E=()=>y({});return document.addEventListener(Lg,E),()=>document.removeEventListener(Lg,E)},[]),o.jsx(be.div,{...c,ref:T,style:{pointerEvents:N?I?"auto":"none":void 0,...t.style},onFocusCapture:Z(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Z(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Z(t.onPointerDownCapture,O.onPointerDownCapture)})});Jc.displayName=HM;var qM="DismissableLayerBranch",aN=p.forwardRef((t,e)=>{const n=p.useContext(oN),r=p.useRef(null),s=Pe(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(be.div,{...t,ref:s})});aN.displayName=qM;function KM(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){lN(WM,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function QM(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&lN(GM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function q_(){const t=new CustomEvent(Lg);document.dispatchEvent(t)}function lN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Mv(s,i):s.dispatchEvent(i)}var YM=Jc,XM=aN,gt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},JM="Portal",Zc=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=p.useState(!1);gt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?vO.createPortal(o.jsx(be.div,{...r,ref:e}),a):null});Zc.displayName=JM;function ZM(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Mr=t=>{const{present:e,children:n}=t,r=eL(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Pe(r.ref,tL(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};Mr.displayName="Presence";function eL(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),a=t?"mounted":"unmounted",[l,c]=ZM(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=nd(r.current);i.current=l==="mounted"?d:"none"},[l]),gt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,y=nd(d);t?c("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),gt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=y=>{const x=nd(r.current).includes(y.animationName);if(y.target===e&&x&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=y=>{y.target===e&&(i.current=nd(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function nd(t){return(t==null?void 0:t.animationName)||"none"}function tL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ii({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=nL({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=_t(n),c=p.useCallback(d=>{if(i){const f=typeof d=="function"?d(t):d;f!==t&&l(f)}else s(d)},[i,t,s,l]);return[a,c]}function nL({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=_t(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var rL="VisuallyHidden",xf=p.forwardRef((t,e)=>o.jsx(be.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));xf.displayName=rL;var Lv="ToastProvider",[Vv,sL,iL]=vf("Toast"),[cN,wW]=Pn("Toast",[iL]),[oL,wf]=cN(Lv),uN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=p.useState(null),[d,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Lv}\`. Expected non-empty \`string\`.`),o.jsx(Vv.Provider,{scope:e,children:o.jsx(oL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};uN.displayName=Lv;var dN="ToastViewport",aL=["F8"],Vg="toast.viewportPause",Fg="toast.viewportResume",hN=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=aL,label:s="Notifications ({hotkey})",...i}=t,a=wf(dN,n),l=sL(n),c=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Pe(e,f,a.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=a.toastCount>0;p.useEffect(()=>{const w=b=>{var N;r.length!==0&&r.every(I=>b[I]||b.code===I)&&((N=f.current)==null||N.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),p.useEffect(()=>{const w=c.current,b=f.current;if(T&&w&&b){const _=()=>{if(!a.isClosePausedRef.current){const D=new CustomEvent(Vg);b.dispatchEvent(D),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const D=new CustomEvent(Fg);b.dispatchEvent(D),a.isClosePausedRef.current=!1}},I=D=>{!w.contains(D.relatedTarget)&&N()},O=()=>{w.contains(document.activeElement)||N()};return w.addEventListener("focusin",_),w.addEventListener("focusout",I),w.addEventListener("pointermove",_),w.addEventListener("pointerleave",O),window.addEventListener("blur",_),window.addEventListener("focus",N),()=>{w.removeEventListener("focusin",_),w.removeEventListener("focusout",I),w.removeEventListener("pointermove",_),w.removeEventListener("pointerleave",O),window.removeEventListener("blur",_),window.removeEventListener("focus",N)}}},[T,a.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:w})=>{const _=l().map(N=>{const I=N.ref.current,O=[I,...wL(I)];return w==="forwards"?O:O.reverse()});return(w==="forwards"?_.reverse():_).flat()},[l]);return p.useEffect(()=>{const w=f.current;if(w){const b=_=>{var O,D,E;const N=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!N){const v=document.activeElement,C=_.shiftKey;if(_.target===w&&C){(O=d.current)==null||O.focus();return}const k=x({tabbingDirection:C?"backwards":"forwards"}),j=k.findIndex(G=>G===v);np(k.slice(j+1))?_.preventDefault():C?(D=d.current)==null||D.focus():(E=h.current)==null||E.focus()}};return w.addEventListener("keydown",b),()=>w.removeEventListener("keydown",b)}},[l,x]),o.jsxs(XM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&o.jsx(Ug,{ref:d,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"forwards"});np(w)}}),o.jsx(Vv.Slot,{scope:n,children:o.jsx(be.ol,{tabIndex:-1,...i,ref:m})}),T&&o.jsx(Ug,{ref:h,onFocusFromOutsideViewport:()=>{const w=x({tabbingDirection:"backwards"});np(w)}})]})});hN.displayName=dN;var fN="ToastFocusProxy",Ug=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=wf(fN,n);return o.jsx(xf,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Ug.displayName=fN;var _f="Toast",lL="toast.swipeStart",cL="toast.swipeMove",uL="toast.swipeCancel",dL="toast.swipeEnd",mN=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=ii({prop:r,defaultProp:s,onChange:i});return o.jsx(Mr,{present:n||l,children:o.jsx(mL,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:_t(t.onPause),onResume:_t(t.onResume),onSwipeStart:Z(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});mN.displayName=_f;var[hL,fL]=cN(_f,{onClose(){}}),mL=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...T}=t,x=wf(_f,n),[w,b]=p.useState(null),_=Pe(e,G=>b(G)),N=p.useRef(null),I=p.useRef(null),O=s||x.duration,D=p.useRef(0),E=p.useRef(O),v=p.useRef(0),{onToastAdd:C,onToastRemove:A}=x,R=_t(()=>{var ue;(w==null?void 0:w.contains(document.activeElement))&&((ue=x.viewport)==null||ue.focus()),a()}),k=p.useCallback(G=>{!G||G===1/0||(window.clearTimeout(v.current),D.current=new Date().getTime(),v.current=window.setTimeout(R,G))},[R]);p.useEffect(()=>{const G=x.viewport;if(G){const ue=()=>{k(E.current),d==null||d()},re=()=>{const ie=new Date().getTime()-D.current;E.current=E.current-ie,window.clearTimeout(v.current),c==null||c()};return G.addEventListener(Vg,re),G.addEventListener(Fg,ue),()=>{G.removeEventListener(Vg,re),G.removeEventListener(Fg,ue)}}},[x.viewport,O,c,d,k]),p.useEffect(()=>{i&&!x.isClosePausedRef.current&&k(O)},[i,O,x.isClosePausedRef,k]),p.useEffect(()=>(C(),()=>A()),[C,A]);const j=p.useMemo(()=>w?_N(w):null,[w]);return x.viewport?o.jsxs(o.Fragment,{children:[j&&o.jsx(pL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:j}),o.jsx(hL,{scope:n,onClose:R,children:xi.createPortal(o.jsx(Vv.ItemSlot,{scope:n,children:o.jsx(YM,{asChild:!0,onEscapeKeyDown:Z(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||R(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(be.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...T,ref:_,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Z(t.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Z(t.onPointerDown,G=>{G.button===0&&(N.current={x:G.clientX,y:G.clientY})}),onPointerMove:Z(t.onPointerMove,G=>{if(!N.current)return;const ue=G.clientX-N.current.x,re=G.clientY-N.current.y,ie=!!I.current,U=["left","right"].includes(x.swipeDirection),$=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Y=U?$(0,ue):0,F=U?0:$(0,re),L=G.pointerType==="touch"?10:2,K={x:Y,y:F},fe={originalEvent:G,delta:K};ie?(I.current=K,rd(cL,f,fe,{discrete:!1})):K_(K,x.swipeDirection,L)?(I.current=K,rd(lL,h,fe,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(ue)>L||Math.abs(re)>L)&&(N.current=null)}),onPointerUp:Z(t.onPointerUp,G=>{const ue=I.current,re=G.target;if(re.hasPointerCapture(G.pointerId)&&re.releasePointerCapture(G.pointerId),I.current=null,N.current=null,ue){const ie=G.currentTarget,U={originalEvent:G,delta:ue};K_(ue,x.swipeDirection,x.swipeThreshold)?rd(dL,y,U,{discrete:!0}):rd(uL,m,U,{discrete:!0}),ie.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),pL=t=>{const{__scopeToast:e,children:n,...r}=t,s=wf(_f,e),[i,a]=p.useState(!1),[l,c]=p.useState(!1);return vL(()=>a(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(Zc,{asChild:!0,children:o.jsx(xf,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},gL="ToastTitle",pN=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(be.div,{...r,ref:e})});pN.displayName=gL;var yL="ToastDescription",gN=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(be.div,{...r,ref:e})});gN.displayName=yL;var yN="ToastAction",vN=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(wN,{altText:n,asChild:!0,children:o.jsx(Fv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${yN}\`. Expected non-empty \`string\`.`),null)});vN.displayName=yN;var xN="ToastClose",Fv=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=fL(xN,n);return o.jsx(wN,{asChild:!0,children:o.jsx(be.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,s.onClose)})})});Fv.displayName=xN;var wN=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(be.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function _N(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),xL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(..._N(r))}}),e}function rd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Mv(s,i):s.dispatchEvent(i)}var K_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function vL(t=()=>{}){const e=_t(t);gt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function xL(t){return t.nodeType===t.ELEMENT_NODE}function wL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function np(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var _L=uN,EN=hN,SN=mN,TN=pN,bN=gN,NN=vN,CN=Fv;function IN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=IN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function PN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=IN(t))&&(r&&(r+=" "),r+=e);return r}const Q_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Y_=PN,eu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Y_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=Q_(h)||Q_(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(T=>{let[x,w]=T;return Array.isArray(w)?w.includes({...i,...l}[x]):{...i,...l}[x]===w})?[...d,f,m]:d},[]);return Y_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>p.createElement("svg",{ref:c,...SL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AN("lucide",s),...l},[...a.map(([d,h])=>p.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(TL,{ref:i,iconNode:e,className:AN(`lucide-${EL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ee("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Ee("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=Ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=Ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Ee("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=Ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=Ee("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=Ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=Ee("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Ee("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=Ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Ee("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Ee("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Ee("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Ee("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Ee("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zv="-",zL=t=>{const e=WL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(zv);return l[0]===""&&l.length!==1&&l.shift(),MN(l,e)||HL(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},MN=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?MN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(zv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},rE=/^\[(.+)\]$/,HL=t=>{if(rE.test(t)){const e=rE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},WL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return qL(Object.entries(t.classGroups),n).forEach(([i,a])=>{qg(a,r,i,e)}),r},qg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:sE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(GL(s)){qg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{qg(a,sE(e,i),n,r)})})},sE=(t,e)=>{let n=t;return e.split(zv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},GL=t=>t.isThemeGetter,qL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,KL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},LN="!",QL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let w=0;w<l.length;w++){let b=l[w];if(d===0){if(b===s&&(r||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(b==="/"){f=w;continue}}b==="["?d++:b==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(LN),T=y?m.substring(1):m,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:T,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:a}):a},YL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},XL=t=>({cache:KL(t.cacheSize),parseClassName:QL(t),...zL(t)}),JL=/\s+/,ZL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(JL);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(d);let T=!!y,x=r(T?m.substring(0,y):m);if(!x){if(!T){l=d+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=d+(l.length>0?" "+l:l);continue}T=!1}const w=YL(h).join(":"),b=f?w+LN:w,_=b+x;if(i.includes(_))continue;i.push(_);const N=s(x,T);for(let I=0;I<N.length;++I){const O=N[I];i.push(b+O)}l=d+(l.length>0?" "+l:l)}return l};function e4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VN(e))&&(r&&(r+=" "),r+=n);return r}const VN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=VN(t[r]))&&(n&&(n+=" "),n+=e);return n};function t4(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=XL(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=ZL(c,n);return s(c,h),h}return function(){return i(e4.apply(null,arguments))}}const Ye=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},FN=/^\[(?:([a-z-]+):)?(.+)\]$/i,n4=/^\d+\/\d+$/,r4=new Set(["px","full","screen"]),s4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,i4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,o4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,a4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,l4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$r=t=>ra(t)||r4.has(t)||n4.test(t),xs=t=>Qa(t,"length",g4),ra=t=>!!t&&!Number.isNaN(Number(t)),sp=t=>Qa(t,"number",ra),Pl=t=>!!t&&Number.isInteger(Number(t)),c4=t=>t.endsWith("%")&&ra(t.slice(0,-1)),Ce=t=>FN.test(t),ws=t=>s4.test(t),u4=new Set(["length","size","percentage"]),d4=t=>Qa(t,u4,UN),h4=t=>Qa(t,"position",UN),f4=new Set(["image","url"]),m4=t=>Qa(t,f4,v4),p4=t=>Qa(t,"",y4),Al=()=>!0,Qa=(t,e,n)=>{const r=FN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},g4=t=>i4.test(t)&&!o4.test(t),UN=()=>!1,y4=t=>a4.test(t),v4=t=>l4.test(t),x4=()=>{const t=Ye("colors"),e=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),s=Ye("borderColor"),i=Ye("borderRadius"),a=Ye("borderSpacing"),l=Ye("borderWidth"),c=Ye("contrast"),d=Ye("grayscale"),h=Ye("hueRotate"),f=Ye("invert"),m=Ye("gap"),y=Ye("gradientColorStops"),T=Ye("gradientColorStopPositions"),x=Ye("inset"),w=Ye("margin"),b=Ye("opacity"),_=Ye("padding"),N=Ye("saturate"),I=Ye("scale"),O=Ye("sepia"),D=Ye("skew"),E=Ye("space"),v=Ye("translate"),C=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ce,e],k=()=>[Ce,e],j=()=>["",$r,xs],G=()=>["auto",ra,Ce],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],re=()=>["solid","dashed","dotted","double","none"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ce],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ra,Ce];return{cacheSize:500,separator:":",theme:{colors:[Al],spacing:[$r,xs],blur:["none","",ws,Ce],brightness:F(),borderColor:[t],borderRadius:["none","","full",ws,Ce],borderSpacing:k(),borderWidth:j(),contrast:F(),grayscale:$(),hueRotate:F(),invert:$(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[c4,xs],inset:R(),margin:R(),opacity:F(),padding:k(),saturate:F(),scale:F(),sepia:$(),skew:F(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[ws]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),Ce]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pl,Ce]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Pl,Ce]}],"grid-cols":[{"grid-cols":[Al]}],"col-start-end":[{col:["auto",{span:["full",Pl,Ce]},Ce]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Al]}],"row-start-end":[{row:["auto",{span:[Pl,Ce]},Ce]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,e]}],"min-w":[{"min-w":[Ce,e,"min","max","fit"]}],"max-w":[{"max-w":[Ce,e,"none","full","min","max","fit","prose",{screen:[ws]},ws]}],h:[{h:[Ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ws,xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sp]}],"font-family":[{font:[Al]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",ra,sp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$r,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$r,xs]}],"underline-offset":[{"underline-offset":["auto",$r,Ce]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),h4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",d4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},m4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...re(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:re()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...re()]}],"outline-offset":[{"outline-offset":[$r,Ce]}],"outline-w":[{outline:[$r,xs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[$r,xs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ws,p4]}],"shadow-color":[{shadow:[Al]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ie()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ws,Ce]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[N]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Pl,Ce]}],"translate-x":[{"translate-x":[v]}],"translate-y":[{"translate-y":[v]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[$r,xs,sp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},w4=t4(x4);function ye(...t){return w4(PN(t))}const _4=_L,$N=p.forwardRef(({className:t,...e},n)=>o.jsx(EN,{ref:n,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$N.displayName=EN.displayName;const E4=eu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BN=p.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(SN,{ref:r,className:ye(E4({variant:e}),t),...n}));BN.displayName=SN.displayName;const S4=p.forwardRef(({className:t,...e},n)=>o.jsx(NN,{ref:n,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));S4.displayName=NN.displayName;const zN=p.forwardRef(({className:t,...e},n)=>o.jsx(CN,{ref:n,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(nu,{className:"h-4 w-4"})}));zN.displayName=CN.displayName;const HN=p.forwardRef(({className:t,...e},n)=>o.jsx(TN,{ref:n,className:ye("text-sm font-semibold",t),...e}));HN.displayName=TN.displayName;const WN=p.forwardRef(({className:t,...e},n)=>o.jsx(bN,{ref:n,className:ye("text-sm opacity-90",t),...e}));WN.displayName=bN.displayName;function T4(){const{toasts:t}=Nt();return o.jsxs(_4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(BN,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(HN,{children:n}),r&&o.jsx(WN,{children:r})]}),s,o.jsx(zN,{})]},e)}),o.jsx($N,{})]})}function b4(t){const e=N4(t),n=p.forwardRef((r,s)=>{const{children:i,...a}=r,l=p.Children.toArray(i),c=l.find(I4);if(c){const d=c.props.children,h=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:p.isValidElement(d)?p.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function N4(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const a=A4(s),l=P4(i,s.props);return s.type!==p.Fragment&&(l.ref=r?Xc(r,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var GN=Symbol("radix.slottable");function C4(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=GN,e}function I4(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GN}function P4(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function A4(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var j4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],go=j4.reduce((t,e)=>{const n=b4(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function R4(t,e){t&&xi.flushSync(()=>t.dispatchEvent(e))}var k4="DismissableLayer",Kg="dismissableLayer.update",D4="dismissableLayer.pointerDownOutside",O4="dismissableLayer.focusOutside",iE,qN=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),KN=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=p.useContext(qN),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),T=Pe(e,E=>f(E)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(w),_=h?x.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,I=_>=b,O=V4(E=>{const v=E.target,C=[...d.branches].some(A=>A.contains(v));!I||C||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},m),D=F4(E=>{const v=E.target;[...d.branches].some(A=>A.contains(v))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},m);return iN(E=>{_===d.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(iE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),oE(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=iE)}},[h,m,n,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),oE())},[h,d]),p.useEffect(()=>{const E=()=>y({});return document.addEventListener(Kg,E),()=>document.removeEventListener(Kg,E)},[]),o.jsx(go.div,{...c,ref:T,style:{pointerEvents:N?I?"auto":"none":void 0,...t.style},onFocusCapture:Z(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Z(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Z(t.onPointerDownCapture,O.onPointerDownCapture)})});KN.displayName=k4;var M4="DismissableLayerBranch",L4=p.forwardRef((t,e)=>{const n=p.useContext(qN),r=p.useRef(null),s=Pe(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(go.div,{...t,ref:s})});L4.displayName=M4;function V4(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){QN(D4,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function F4(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&QN(O4,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function oE(){const t=new CustomEvent(Kg);document.dispatchEvent(t)}function QN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?R4(s,i):s.dispatchEvent(i)}var U4=A1[" useId ".trim().toString()]||(()=>{}),$4=0;function Jr(t){const[e,n]=p.useState(U4());return gt(()=>{n(r=>r??String($4++))},[t]),e?`radix-${e}`:""}const B4=["top","right","bottom","left"],ai=Math.min,yn=Math.max,Ch=Math.round,sd=Math.floor,Nr=t=>({x:t,y:t}),z4={left:"right",right:"left",bottom:"top",top:"bottom"},H4={start:"end",end:"start"};function Qg(t,e,n){return yn(t,ai(e,n))}function is(t,e){return typeof t=="function"?t(e):t}function os(t){return t.split("-")[0]}function Ya(t){return t.split("-")[1]}function Hv(t){return t==="x"?"y":"x"}function Wv(t){return t==="y"?"height":"width"}function li(t){return["top","bottom"].includes(os(t))?"y":"x"}function Gv(t){return Hv(li(t))}function W4(t,e,n){n===void 0&&(n=!1);const r=Ya(t),s=Gv(t),i=Wv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Ih(a)),[a,Ih(a)]}function G4(t){const e=Ih(t);return[Yg(t),e,Yg(e)]}function Yg(t){return t.replace(/start|end/g,e=>H4[e])}function q4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function K4(t,e,n,r){const s=Ya(t);let i=q4(os(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Yg)))),i}function Ih(t){return t.replace(/left|right|bottom|top/g,e=>z4[e])}function Q4(t){return{top:0,right:0,bottom:0,left:0,...t}}function YN(t){return typeof t!="number"?Q4(t):{top:t,right:t,bottom:t,left:t}}function Ph(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function aE(t,e,n){let{reference:r,floating:s}=t;const i=li(e),a=Gv(e),l=Wv(a),c=os(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Ya(e)){case"start":y[a]-=m*(n&&d?-1:1);break;case"end":y[a]+=m*(n&&d?-1:1);break}return y}const Y4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=aE(d,r,c),m=r,y={},T=0;for(let x=0;x<l.length;x++){const{name:w,fn:b}=l[x],{x:_,y:N,data:I,reset:O}=await b({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:a,elements:{reference:t,floating:e}});h=_??h,f=N??f,y={...y,[w]:{...y[w],...I}},O&&T<=50&&(T++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(d=O.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:h,y:f}=aE(d,m,c)),x=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Cc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=is(e,t),T=YN(y),w=l[m?f==="floating"?"reference":"floating":f],b=Ph(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),_=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},O=Ph(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:N,strategy:c}):_);return{top:(b.top-O.top+T.top)/I.y,bottom:(O.bottom-b.bottom+T.bottom)/I.y,left:(b.left-O.left+T.left)/I.x,right:(O.right-b.right+T.right)/I.x}}const X4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=is(t,e)||{};if(d==null)return{};const f=YN(h),m={x:n,y:r},y=Gv(s),T=Wv(y),x=await a.getDimensions(d),w=y==="y",b=w?"top":"left",_=w?"bottom":"right",N=w?"clientHeight":"clientWidth",I=i.reference[T]+i.reference[y]-m[y]-i.floating[T],O=m[y]-i.reference[y],D=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let E=D?D[N]:0;(!E||!await(a.isElement==null?void 0:a.isElement(D)))&&(E=l.floating[N]||i.floating[T]);const v=I/2-O/2,C=E/2-x[T]/2-1,A=ai(f[b],C),R=ai(f[_],C),k=A,j=E-x[T]-R,G=E/2-x[T]/2+v,ue=Qg(k,G,j),re=!c.arrow&&Ya(s)!=null&&G!==ue&&i.reference[T]/2-(G<k?A:R)-x[T]/2<0,ie=re?G<k?G-k:G-j:0;return{[y]:m[y]+ie,data:{[y]:ue,centerOffset:G-ue-ie,...re&&{alignmentOffset:ie}},reset:re}}}),J4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:x=!0,...w}=is(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=os(s),_=li(l),N=os(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(d.floating)),O=m||(N||!x?[Ih(l)]:G4(l)),D=T!=="none";!m&&D&&O.push(...K4(l,x,T,I));const E=[l,...O],v=await Cc(e,w),C=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(v[b]),f){const G=W4(s,a,I);C.push(v[G[0]],v[G[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(G=>G<=0)){var R,k;const G=(((R=i.flip)==null?void 0:R.index)||0)+1,ue=E[G];if(ue)return{data:{index:G,overflows:A},reset:{placement:ue}};let re=(k=A.filter(ie=>ie.overflows[0]<=0).sort((ie,U)=>ie.overflows[1]-U.overflows[1])[0])==null?void 0:k.placement;if(!re)switch(y){case"bestFit":{var j;const ie=(j=A.filter(U=>{if(D){const $=li(U.placement);return $===_||$==="y"}return!0}).map(U=>[U.placement,U.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((U,$)=>U[1]-$[1])[0])==null?void 0:j[0];ie&&(re=ie);break}case"initialPlacement":re=l;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function lE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function cE(t){return B4.some(e=>t[e]>=0)}const Z4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=is(t,e);switch(r){case"referenceHidden":{const i=await Cc(e,{...s,elementContext:"reference"}),a=lE(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:cE(a)}}}case"escaped":{const i=await Cc(e,{...s,altBoundary:!0}),a=lE(i,n.floating);return{data:{escapedOffsets:a,escaped:cE(a)}}}default:return{}}}}};async function eV(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=os(n),l=Ya(n),c=li(n)==="y",d=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,f=is(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:T}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof T=="number"&&(y=l==="end"?T*-1:T),c?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const tV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await eV(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},nV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:w=>{let{x:b,y:_}=w;return{x:b,y:_}}},...c}=is(t,e),d={x:n,y:r},h=await Cc(e,c),f=li(os(s)),m=Hv(f);let y=d[m],T=d[f];if(i){const w=m==="y"?"top":"left",b=m==="y"?"bottom":"right",_=y+h[w],N=y-h[b];y=Qg(_,y,N)}if(a){const w=f==="y"?"top":"left",b=f==="y"?"bottom":"right",_=T+h[w],N=T-h[b];T=Qg(_,T,N)}const x=l.fn({...e,[m]:y,[f]:T});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:i,[f]:a}}}}}},rV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=is(t,e),h={x:n,y:r},f=li(s),m=Hv(f);let y=h[m],T=h[f];const x=is(l,e),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=m==="y"?"height":"width",I=i.reference[m]-i.floating[N]+w.mainAxis,O=i.reference[m]+i.reference[N]-w.mainAxis;y<I?y=I:y>O&&(y=O)}if(d){var b,_;const N=m==="y"?"width":"height",I=["top","left"].includes(os(s)),O=i.reference[f]-i.floating[N]+(I&&((b=a.offset)==null?void 0:b[f])||0)+(I?0:w.crossAxis),D=i.reference[f]+i.reference[N]+(I?0:((_=a.offset)==null?void 0:_[f])||0)-(I?w.crossAxis:0);T<O?T=O:T>D&&(T=D)}return{[m]:y,[f]:T}}}},sV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=is(t,e),h=await Cc(e,d),f=os(s),m=Ya(s),y=li(s)==="y",{width:T,height:x}=i.floating;let w,b;f==="top"||f==="bottom"?(w=f,b=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,w=m==="end"?"top":"bottom");const _=x-h.top-h.bottom,N=T-h.left-h.right,I=ai(x-h[w],_),O=ai(T-h[b],N),D=!e.middlewareData.shift;let E=I,v=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(v=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=_),D&&!m){const A=yn(h.left,0),R=yn(h.right,0),k=yn(h.top,0),j=yn(h.bottom,0);y?v=T-2*(A!==0||R!==0?A+R:yn(h.left,h.right)):E=x-2*(k!==0||j!==0?k+j:yn(h.top,h.bottom))}await c({...e,availableWidth:v,availableHeight:E});const C=await a.getDimensions(l.floating);return T!==C.width||x!==C.height?{reset:{rects:!0}}:{}}}};function Sf(){return typeof window<"u"}function Xa(t){return XN(t)?(t.nodeName||"").toLowerCase():"#document"}function Tn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Lr(t){var e;return(e=(XN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XN(t){return Sf()?t instanceof Node||t instanceof Tn(t).Node:!1}function cr(t){return Sf()?t instanceof Element||t instanceof Tn(t).Element:!1}function Dr(t){return Sf()?t instanceof HTMLElement||t instanceof Tn(t).HTMLElement:!1}function uE(t){return!Sf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tn(t).ShadowRoot}function ru(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ur(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function iV(t){return["table","td","th"].includes(Xa(t))}function Tf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qv(t){const e=Kv(),n=cr(t)?ur(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function oV(t){let e=ci(t);for(;Dr(e)&&!Oa(e);){if(qv(e))return e;if(Tf(e))return null;e=ci(e)}return null}function Kv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Oa(t){return["html","body","#document"].includes(Xa(t))}function ur(t){return Tn(t).getComputedStyle(t)}function bf(t){return cr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ci(t){if(Xa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||uE(t)&&t.host||Lr(t);return uE(e)?e.host:e}function JN(t){const e=ci(t);return Oa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Dr(e)&&ru(e)?e:JN(e)}function Ic(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=JN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Tn(s);if(i){const l=Xg(a);return e.concat(a,a.visualViewport||[],ru(s)?s:[],l&&n?Ic(l):[])}return e.concat(s,Ic(s,[],n))}function Xg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZN(t){const e=ur(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Dr(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Ch(n)!==i||Ch(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Qv(t){return cr(t)?t:t.contextElement}function sa(t){const e=Qv(t);if(!Dr(e))return Nr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=ZN(e);let a=(i?Ch(n.width):n.width)/r,l=(i?Ch(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const aV=Nr(0);function eC(t){const e=Tn(t);return!Kv()||!e.visualViewport?aV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lV(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tn(t)?!1:e}function ro(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Qv(t);let a=Nr(1);e&&(r?cr(r)&&(a=sa(r)):a=sa(t));const l=lV(i,n,r)?eC(i):Nr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=Tn(i),y=r&&cr(r)?Tn(r):r;let T=m,x=Xg(T);for(;x&&r&&y!==T;){const w=sa(x),b=x.getBoundingClientRect(),_=ur(x),N=b.left+(x.clientLeft+parseFloat(_.paddingLeft))*w.x,I=b.top+(x.clientTop+parseFloat(_.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=N,d+=I,T=Tn(x),x=Xg(T)}}return Ph({width:h,height:f,x:c,y:d})}function Yv(t,e){const n=bf(t).scrollLeft;return e?e.left+n:ro(Lr(t)).left+n}function tC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Yv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function cV(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Lr(r),l=e?Tf(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Nr(1);const h=Nr(0),f=Dr(r);if((f||!f&&!i)&&((Xa(r)!=="body"||ru(a))&&(c=bf(r)),Dr(r))){const y=ro(r);d=sa(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=a&&!f&&!i?tC(a,c,!0):Nr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function uV(t){return Array.from(t.getClientRects())}function dV(t){const e=Lr(t),n=bf(t),r=t.ownerDocument.body,s=yn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=yn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Yv(t);const l=-n.scrollTop;return ur(r).direction==="rtl"&&(a+=yn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function hV(t,e){const n=Tn(t),r=Lr(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const d=Kv();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function fV(t,e){const n=ro(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Dr(t)?sa(t):Nr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function dE(t,e,n){let r;if(e==="viewport")r=hV(t,n);else if(e==="document")r=dV(Lr(t));else if(cr(e))r=fV(e,n);else{const s=eC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ph(r)}function nC(t,e){const n=ci(t);return n===e||!cr(n)||Oa(n)?!1:ur(n).position==="fixed"||nC(n,e)}function mV(t,e){const n=e.get(t);if(n)return n;let r=Ic(t,[],!1).filter(l=>cr(l)&&Xa(l)!=="body"),s=null;const i=ur(t).position==="fixed";let a=i?ci(t):t;for(;cr(a)&&!Oa(a);){const l=ur(a),c=qv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ru(a)&&!c&&nC(t,a))?r=r.filter(h=>h!==a):s=l,a=ci(a)}return e.set(t,r),r}function pV(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Tf(e)?[]:mV(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=dE(e,h,s);return d.top=yn(f.top,d.top),d.right=ai(f.right,d.right),d.bottom=ai(f.bottom,d.bottom),d.left=yn(f.left,d.left),d},dE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function gV(t){const{width:e,height:n}=ZN(t);return{width:e,height:n}}function yV(t,e,n){const r=Dr(e),s=Lr(e),i=n==="fixed",a=ro(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Nr(0);if(r||!r&&!i)if((Xa(e)!=="body"||ru(s))&&(l=bf(e)),r){const m=ro(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=Yv(s));const d=s&&!r&&!i?tC(s,l):Nr(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function ip(t){return ur(t).position==="static"}function hE(t,e){if(!Dr(t)||ur(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Lr(t)===n&&(n=n.ownerDocument.body),n}function rC(t,e){const n=Tn(t);if(Tf(t))return n;if(!Dr(t)){let s=ci(t);for(;s&&!Oa(s);){if(cr(s)&&!ip(s))return s;s=ci(s)}return n}let r=hE(t,e);for(;r&&iV(r)&&ip(r);)r=hE(r,e);return r&&Oa(r)&&ip(r)&&!qv(r)?n:r||oV(t)||n}const vV=async function(t){const e=this.getOffsetParent||rC,n=this.getDimensions,r=await n(t.floating);return{reference:yV(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xV(t){return ur(t).direction==="rtl"}const wV={convertOffsetParentRelativeRectToViewportRelativeRect:cV,getDocumentElement:Lr,getClippingRect:pV,getOffsetParent:rC,getElementRects:vV,getClientRects:uV,getDimensions:gV,getScale:sa,isElement:cr,isRTL:xV};function sC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function _V(t,e){let n=null,r;const s=Lr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=d;if(l||e(),!m||!y)return;const T=sd(f),x=sd(s.clientWidth-(h+m)),w=sd(s.clientHeight-(f+y)),b=sd(h),N={rootMargin:-T+"px "+-x+"px "+-w+"px "+-b+"px",threshold:yn(0,ai(1,c))||1};let I=!0;function O(D){const E=D[0].intersectionRatio;if(E!==c){if(!I)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!sC(d,t.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(O,{...N,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,N)}n.observe(t)}return a(!0),i}function iC(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Qv(t),h=s||i?[...d?Ic(d):[],...Ic(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=d&&l?_V(d,n):null;let m=-1,y=null;a&&(y=new ResizeObserver(b=>{let[_]=b;_&&_.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=y)==null||N.observe(e)})),n()}),d&&!c&&y.observe(d),y.observe(e));let T,x=c?ro(t):null;c&&w();function w(){const b=ro(t);x&&!sC(x,b)&&n(),x=b,T=requestAnimationFrame(w)}return n(),()=>{var b;h.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),f==null||f(),(b=y)==null||b.disconnect(),y=null,c&&cancelAnimationFrame(T)}}const EV=tV,SV=nV,TV=J4,bV=sV,NV=Z4,fE=X4,CV=rV,IV=(t,e,n)=>{const r=new Map,s={platform:wV,...n},i={...s.platform,_c:r};return Y4(t,e,{...s,platform:i})};var Od=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Ah(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ah(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ah(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function oC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function mE(t,e){const n=oC(t);return Math.round(e*n)/n}function op(t){const e=p.useRef(t);return Od(()=>{e.current=t}),e}function aC(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);Ah(m,r)||y(r);const[T,x]=p.useState(null),[w,b]=p.useState(null),_=p.useCallback(U=>{U!==D.current&&(D.current=U,x(U))},[]),N=p.useCallback(U=>{U!==E.current&&(E.current=U,b(U))},[]),I=i||T,O=a||w,D=p.useRef(null),E=p.useRef(null),v=p.useRef(h),C=c!=null,A=op(c),R=op(s),k=op(d),j=p.useCallback(()=>{if(!D.current||!E.current)return;const U={placement:e,strategy:n,middleware:m};R.current&&(U.platform=R.current),IV(D.current,E.current,U).then($=>{const Y={...$,isPositioned:k.current!==!1};G.current&&!Ah(v.current,Y)&&(v.current=Y,xi.flushSync(()=>{f(Y)}))})},[m,e,n,R,k]);Od(()=>{d===!1&&v.current.isPositioned&&(v.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[d]);const G=p.useRef(!1);Od(()=>(G.current=!0,()=>{G.current=!1}),[]),Od(()=>{if(I&&(D.current=I),O&&(E.current=O),I&&O){if(A.current)return A.current(I,O,j);j()}},[I,O,j,A,C]);const ue=p.useMemo(()=>({reference:D,floating:E,setReference:_,setFloating:N}),[_,N]),re=p.useMemo(()=>({reference:I,floating:O}),[I,O]),ie=p.useMemo(()=>{const U={position:n,left:0,top:0};if(!re.floating)return U;const $=mE(re.floating,h.x),Y=mE(re.floating,h.y);return l?{...U,transform:"translate("+$+"px, "+Y+"px)",...oC(re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Y}},[n,l,re.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:j,refs:ue,elements:re,floatingStyles:ie}),[h,j,ue,re,ie])}const PV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fE({element:r.current,padding:s}).fn(n):{}:r?fE({element:r,padding:s}).fn(n):{}}}},lC=(t,e)=>({...EV(t),options:[t,e]}),cC=(t,e)=>({...SV(t),options:[t,e]}),uC=(t,e)=>({...CV(t),options:[t,e]}),dC=(t,e)=>({...TV(t),options:[t,e]}),hC=(t,e)=>({...bV(t),options:[t,e]}),fC=(t,e)=>({...NV(t),options:[t,e]}),mC=(t,e)=>({...PV(t),options:[t,e]});var AV="Arrow",pC=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(go.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});pC.displayName=AV;var jV=pC;function Nf(t){const[e,n]=p.useState(void 0);return gt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var gC="Popper",[yC,vC]=Pn(gC),[_W,xC]=yC(gC),wC="PopperAnchor",_C=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=xC(wC,n),a=p.useRef(null),l=Pe(e,a);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(go.div,{...s,ref:l})});_C.displayName=wC;var Xv="PopperContent",[RV,kV]=yC(Xv),EC=p.forwardRef((t,e)=>{var se,z,J,de,xe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:T,...x}=t,w=xC(Xv,n),[b,_]=p.useState(null),N=Pe(e,tt=>_(tt)),[I,O]=p.useState(null),D=Nf(I),E=(D==null?void 0:D.width)??0,v=(D==null?void 0:D.height)??0,C=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(d)?d:[d],k=R.length>0,j={padding:A,boundary:R.filter(OV),altBoundary:k},{refs:G,floatingStyles:ue,placement:re,isPositioned:ie,middlewareData:U}=aC({strategy:"fixed",placement:C,whileElementsMounted:(...tt)=>iC(...tt,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[lC({mainAxis:s+v,alignmentAxis:a}),c&&cC({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?uC():void 0,...j}),c&&dC({...j}),hC({...j,apply:({elements:tt,rects:Ct,availableWidth:qn,availableHeight:fr})=>{const{width:Vr,height:al}=Ct.reference,An=tt.floating.style;An.setProperty("--radix-popper-available-width",`${qn}px`),An.setProperty("--radix-popper-available-height",`${fr}px`),An.setProperty("--radix-popper-anchor-width",`${Vr}px`),An.setProperty("--radix-popper-anchor-height",`${al}px`)}}),I&&mC({element:I,padding:l}),MV({arrowWidth:E,arrowHeight:v}),m&&fC({strategy:"referenceHidden",...j})]}),[$,Y]=bC(re),F=_t(T);gt(()=>{ie&&(F==null||F())},[ie,F]);const L=(se=U.arrow)==null?void 0:se.x,K=(z=U.arrow)==null?void 0:z.y,fe=((J=U.arrow)==null?void 0:J.centerOffset)!==0,[Re,ke]=p.useState();return gt(()=>{b&&ke(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ie?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(de=U.transformOrigin)==null?void 0:de.x,(xe=U.transformOrigin)==null?void 0:xe.y].join(" "),...((Le=U.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(RV,{scope:n,placedSide:$,onArrowChange:O,arrowX:L,arrowY:K,shouldHideArrow:fe,children:o.jsx(go.div,{"data-side":$,"data-align":Y,...x,ref:N,style:{...x.style,animation:ie?void 0:"none"}})})})});EC.displayName=Xv;var SC="PopperArrow",DV={top:"bottom",right:"left",bottom:"top",left:"right"},TC=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=kV(SC,r),a=DV[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(jV,{...s,ref:n,style:{...s.style,display:"block"}})})});TC.displayName=SC;function OV(t){return t!==null}var MV=t=>({name:"transformOrigin",options:t,fn(e){var w,b,_;const{placement:n,rects:r,middlewareData:s}=e,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=bC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,y=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let T="",x="";return d==="bottom"?(T=a?f:`${m}px`,x=`${-c}px`):d==="top"?(T=a?f:`${m}px`,x=`${r.floating.height+c}px`):d==="right"?(T=`${-c}px`,x=a?f:`${y}px`):d==="left"&&(T=`${r.floating.width+c}px`,x=a?f:`${y}px`),{data:{x:T,y:x}}}});function bC(t){const[e,n="center"]=t.split("-");return[e,n]}var LV=_C,VV=EC,FV=TC;function UV(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var NC=t=>{const{present:e,children:n}=t,r=$V(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Pe(r.ref,BV(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};NC.displayName="Presence";function $V(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),a=t?"mounted":"unmounted",[l,c]=UV(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=id(r.current);i.current=l==="mounted"?d:"none"},[l]),gt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,y=id(d);t?c("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),gt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=y=>{const x=id(r.current).includes(y.animationName);if(y.target===e&&x&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=y=>{y.target===e&&(i.current=id(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function id(t){return(t==null?void 0:t.animationName)||"none"}function BV(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HV="VisuallyHidden",CC=p.forwardRef((t,e)=>o.jsx(go.span,{...t,ref:e,style:{...zV,...t.style}}));CC.displayName=HV;var WV=CC,[Cf,EW]=Pn("Tooltip",[vC]),Jv=vC(),IC="TooltipProvider",GV=700,pE="tooltip.open",[qV,PC]=Cf(IC),AC=t=>{const{__scopeTooltip:e,delayDuration:n=GV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(qV,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};AC.displayName=IC;var jC="Tooltip",[SW,If]=Cf(jC),Jg="TooltipTrigger",KV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=If(Jg,n),i=PC(Jg,n),a=Jv(n),l=p.useRef(null),c=Pe(e,l,s.onTriggerChange),d=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(LV,{asChild:!0,...a,children:o.jsx(go.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Z(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Z(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Z(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:Z(t.onBlur,s.onClose),onClick:Z(t.onClick,s.onClose)})})});KV.displayName=Jg;var QV="TooltipPortal",[TW,YV]=Cf(QV,{forceMount:void 0}),Ma="TooltipContent",RC=p.forwardRef((t,e)=>{const n=YV(Ma,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=If(Ma,t.__scopeTooltip);return o.jsx(NC,{present:r||a.open,children:a.disableHoverableContent?o.jsx(kC,{side:s,...i,ref:e}):o.jsx(XV,{side:s,...i,ref:e})})}),XV=p.forwardRef((t,e)=>{const n=If(Ma,t.__scopeTooltip),r=PC(Ma,t.__scopeTooltip),s=p.useRef(null),i=Pe(e,s),[a,l]=p.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),y=p.useCallback((T,x)=>{const w=T.currentTarget,b={x:T.clientX,y:T.clientY},_=nF(b,w.getBoundingClientRect()),N=rF(b,_),I=sF(x.getBoundingClientRect()),O=oF([...N,...I]);l(O),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const T=w=>y(w,h),x=w=>y(w,c);return c.addEventListener("pointerleave",T),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",T),h.removeEventListener("pointerleave",x)}}},[c,h,y,m]),p.useEffect(()=>{if(a){const T=x=>{const w=x.target,b={x:x.clientX,y:x.clientY},_=(c==null?void 0:c.contains(w))||(h==null?void 0:h.contains(w)),N=!iF(b,a);_?m():N&&(m(),d())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[c,h,a,d,m]),o.jsx(kC,{...t,ref:i})}),[JV,ZV]=Cf(jC,{isInside:!1}),eF=C4("TooltipContent"),kC=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=If(Ma,n),d=Jv(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(pE,h),()=>document.removeEventListener(pE,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(KN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(VV,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(eF,{children:r}),o.jsx(JV,{scope:n,isInside:!0,children:o.jsx(WV,{id:c.contentId,role:"tooltip",children:s||r})})]})})});RC.displayName=Ma;var DC="TooltipArrow",tF=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Jv(n);return ZV(DC,n).isInside?null:o.jsx(FV,{...s,...r,ref:e})});tF.displayName=DC;function nF(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rF(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function sF(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function iF(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],c=e[a],d=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-d)*(r-h)/(m-h)+d&&(s=!s)}return s}function oF(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),aF(e)}function aF(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var lF=AC,OC=RC;const cF=lF,uF=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(OC,{ref:r,sideOffset:e,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));uF.displayName=OC.displayName;const MC=p.createContext(void 0);function dF({children:t}){const{data:e,isLoading:n,error:r,refetch:s}=Zt({queryKey:["/api/auth/me"],queryFn:async()=>{try{const f=await(await Ne("GET","/api/auth/me")).json();return console.log("Auth check result:",f),f}catch(h){return console.error("Auth check failed:",h),{authenticated:!1}}},enabled:!0,retry:!1,refetchOnMount:!0,refetchOnWindowFocus:!1}),d={user:(e!=null&&e.authenticated?e.user:null)||null,login:async(h,f)=>{try{console.log("Attempting login for:",h);const m=await Ne("POST","/api/auth/login",{email:h,password:f});if(!m.ok){const T=await m.json();throw new Error(T.error||"Login failed")}const y=await m.json();return console.log("Login successful:",y),s(),y}catch(m){throw console.error("Login error:",m),m}},registerSchool:async h=>{const m=await(await Ne("POST","/api/register-school",h)).json();return(h.plan==="free_trial"||h.plan==="TRIAL")&&s(),m},logout:async()=>{try{await Ne("POST","/api/auth/logout")}catch(h){console.error("Logout error:",h)}Ue.clear(),s()},isLoading:n};return gr.createElement(MC.Provider,{value:d},t)}function Pf(){const t=p.useContext(MC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Zv=eu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?LM:"button";return o.jsx(a,{className:ye(Zv({variant:e,size:n,className:t})),ref:i,...s})});W.displayName="Button";var ap="focusScope.autoFocusOnMount",lp="focusScope.autoFocusOnUnmount",gE={bubbles:!1,cancelable:!0},hF="FocusScope",Af=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=p.useState(null),d=_t(s),h=_t(i),f=p.useRef(null),m=Pe(e,x=>c(x)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let x=function(N){if(y.paused||!l)return;const I=N.target;l.contains(I)?f.current=I:Ss(f.current,{select:!0})},w=function(N){if(y.paused||!l)return;const I=N.relatedTarget;I!==null&&(l.contains(I)||Ss(f.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const O of N)O.removedNodes.length>0&&Ss(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const _=new MutationObserver(b);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),_.disconnect()}}},[r,l,y.paused]),p.useEffect(()=>{if(l){vE.add(y);const x=document.activeElement;if(!l.contains(x)){const b=new CustomEvent(ap,gE);l.addEventListener(ap,d),l.dispatchEvent(b),b.defaultPrevented||(fF(vF(LC(l)),{select:!0}),document.activeElement===x&&Ss(l))}return()=>{l.removeEventListener(ap,d),setTimeout(()=>{const b=new CustomEvent(lp,gE);l.addEventListener(lp,h),l.dispatchEvent(b),b.defaultPrevented||Ss(x??document.body,{select:!0}),l.removeEventListener(lp,h),vE.remove(y)},0)}}},[l,d,h,y]);const T=p.useCallback(x=>{if(!n&&!r||y.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(w&&b){const _=x.currentTarget,[N,I]=mF(_);N&&I?!x.shiftKey&&b===I?(x.preventDefault(),n&&Ss(N,{select:!0})):x.shiftKey&&b===N&&(x.preventDefault(),n&&Ss(I,{select:!0})):b===_&&x.preventDefault()}},[n,r,y.paused]);return o.jsx(be.div,{tabIndex:-1,...a,ref:m,onKeyDown:T})});Af.displayName=hF;function fF(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ss(r,{select:e}),document.activeElement!==n)return}function mF(t){const e=LC(t),n=yE(e,t),r=yE(e.reverse(),t);return[n,r]}function LC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yE(t,e){for(const n of t)if(!pF(n,{upTo:e}))return n}function pF(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function gF(t){return t instanceof HTMLInputElement&&"select"in t}function Ss(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&gF(t)&&e&&t.select()}}var vE=yF();function yF(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xE(t,e),t.unshift(e)},remove(e){var n;t=xE(t,e),(n=t[0])==null||n.resume()}}}function xE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function vF(t){return t.filter(e=>e.tagName!=="A")}var cp=0;function ex(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wE()),document.body.insertAdjacentElement("beforeend",t[1]??wE()),cp++,()=>{cp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cp--}},[])}function wE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sr=function(){return Sr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sr.apply(this,arguments)};function VC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function xF(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Md="right-scroll-bar-position",Ld="width-before-scroll-bar",wF="with-scroll-bars-hidden",_F="--removed-body-scroll-bar-size";function up(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function EF(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var SF=typeof window<"u"?p.useLayoutEffect:p.useEffect,_E=new WeakMap;function TF(t,e){var n=EF(null,function(r){return t.forEach(function(s){return up(s,r)})});return SF(function(){var r=_E.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||up(l,null)}),i.forEach(function(l){s.has(l)||up(l,a)})}_E.set(n,t)},[t]),n}function bF(t){return t}function NF(t,e){e===void 0&&(e=bF);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function CF(t){t===void 0&&(t={});var e=NF(null);return e.options=Sr({async:!0,ssr:!1},t),e}var FC=function(t){var e=t.sideCar,n=VC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Sr({},n))};FC.isSideCarExport=!0;function IF(t,e){return t.useMedium(e),FC}var UC=CF(),dp=function(){},jf=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:dp,onWheelCapture:dp,onTouchMoveCapture:dp}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,T=t.inert,x=t.allowPinchZoom,w=t.as,b=w===void 0?"div":w,_=t.gapMode,N=VC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,O=TF([n,e]),D=Sr(Sr({},N),s);return p.createElement(p.Fragment,null,h&&p.createElement(I,{sideCar:UC,removeScrollBar:d,shards:f,noIsolation:y,inert:T,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:_}),a?p.cloneElement(p.Children.only(l),Sr(Sr({},D),{ref:O})):p.createElement(b,Sr({},D,{className:c,ref:O}),l))});jf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jf.classNames={fullWidth:Ld,zeroRight:Md};var PF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=PF();return e&&t.setAttribute("nonce",e),t}function jF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function RF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kF=function(){var t=0,e=null;return{add:function(n){t==0&&(e=AF())&&(jF(e,n),RF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},DF=function(){var t=kF();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},$C=function(){var t=DF(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},OF={left:0,top:0,right:0,gap:0},hp=function(t){return parseInt(t||"",10)||0},MF=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[hp(n),hp(r),hp(s)]},LF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return OF;var e=MF(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},VF=$C(),ia="data-scroll-locked",FF=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(wF,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Md,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ld,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Md," .").concat(Md,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ld," .").concat(Ld,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(_F,": ").concat(l,`px;
  }
`)},EE=function(){var t=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(t)?t:0},UF=function(){p.useEffect(function(){return document.body.setAttribute(ia,(EE()+1).toString()),function(){var t=EE()-1;t<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,t.toString())}},[])},$F=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;UF();var i=p.useMemo(function(){return LF(s)},[s]);return p.createElement(VF,{styles:FF(i,!e,s,n?"":"!important")})},Zg=!1;if(typeof window<"u")try{var od=Object.defineProperty({},"passive",{get:function(){return Zg=!0,!0}});window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{Zg=!1}var Co=Zg?{passive:!1}:!1,BF=function(t){return t.tagName==="TEXTAREA"},BC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!BF(t)&&n[e]==="visible")},zF=function(t){return BC(t,"overflowY")},HF=function(t){return BC(t,"overflowX")},SE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=zC(t,r);if(s){var i=HC(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},WF=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},GF=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},zC=function(t,e){return t==="v"?zF(e):HF(e)},HC=function(t,e){return t==="v"?WF(e):GF(e)},qF=function(t,e){return t==="h"&&e==="rtl"?-1:1},KF=function(t,e,n,r,s){var i=qF(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{var y=HC(t,l),T=y[0],x=y[1],w=y[2],b=x-w-i*T;(T||b)&&zC(t,l)&&(f+=b,m+=T),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(d=!0),d},ad=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},TE=function(t){return[t.deltaX,t.deltaY]},bE=function(t){return t&&"current"in t?t.current:t},QF=function(t,e){return t[0]===e[0]&&t[1]===e[1]},YF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},XF=0,Io=[];function JF(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(XF++)[0],i=p.useState($C)[0],a=p.useRef(t);p.useEffect(function(){a.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=xF([t.lockRef.current],(t.shards||[]).map(bE),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var b=ad(x),_=n.current,N="deltaX"in x?x.deltaX:_[0]-b[0],I="deltaY"in x?x.deltaY:_[1]-b[1],O,D=x.target,E=Math.abs(N)>Math.abs(I)?"h":"v";if("touches"in x&&E==="h"&&D.type==="range")return!1;var v=SE(E,D);if(!v)return!0;if(v?O=E:(O=E==="v"?"h":"v",v=SE(E,D)),!v)return!1;if(!r.current&&"changedTouches"in x&&(N||I)&&(r.current=O),!O)return!0;var C=r.current||O;return KF(C,w,x,C==="h"?N:I,!0)},[]),c=p.useCallback(function(x){var w=x;if(!(!Io.length||Io[Io.length-1]!==i)){var b="deltaY"in w?TE(w):ad(w),_=e.current.filter(function(O){return O.name===w.type&&(O.target===w.target||w.target===O.shadowParent)&&QF(O.delta,b)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var N=(a.current.shards||[]).map(bE).filter(Boolean).filter(function(O){return O.contains(w.target)}),I=N.length>0?l(w,N[0]):!a.current.noIsolation;I&&w.cancelable&&w.preventDefault()}}},[]),d=p.useCallback(function(x,w,b,_){var N={name:x,delta:w,target:b,should:_,shadowParent:ZF(b)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(I){return I!==N})},1)},[]),h=p.useCallback(function(x){n.current=ad(x),r.current=void 0},[]),f=p.useCallback(function(x){d(x.type,TE(x),x.target,l(x,t.lockRef.current))},[]),m=p.useCallback(function(x){d(x.type,ad(x),x.target,l(x,t.lockRef.current))},[]);p.useEffect(function(){return Io.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Co),document.addEventListener("touchmove",c,Co),document.addEventListener("touchstart",h,Co),function(){Io=Io.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Co),document.removeEventListener("touchmove",c,Co),document.removeEventListener("touchstart",h,Co)}},[]);var y=t.removeScrollBar,T=t.inert;return p.createElement(p.Fragment,null,T?p.createElement(i,{styles:YF(s)}):null,y?p.createElement($F,{gapMode:t.gapMode}):null)}function ZF(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const e6=IF(UC,JF);var Rf=p.forwardRef(function(t,e){return p.createElement(jf,Sr({},t,{ref:e,sideCar:e6}))});Rf.classNames=jf.classNames;var t6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Po=new WeakMap,ld=new WeakMap,cd={},fp=0,WC=function(t){return t&&(t.host||WC(t.parentNode))},n6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=WC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},r6=function(t,e,n,r){var s=n6(e,Array.isArray(t)?t:[t]);cd[n]||(cd[n]=new WeakMap);var i=cd[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var y=m.getAttribute(r),T=y!==null&&y!=="false",x=(Po.get(m)||0)+1,w=(i.get(m)||0)+1;Po.set(m,x),i.set(m,w),a.push(m),x===1&&T&&ld.set(m,!0),w===1&&m.setAttribute(n,"true"),T||m.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return h(e),l.clear(),fp++,function(){a.forEach(function(f){var m=Po.get(f)-1,y=i.get(f)-1;Po.set(f,m),i.set(f,y),m||(ld.has(f)||f.removeAttribute(r),ld.delete(f)),y||f.removeAttribute(n)}),fp--,fp||(Po=new WeakMap,Po=new WeakMap,ld=new WeakMap,cd={})}},tx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=t6(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),r6(r,s,n,"aria-hidden")):function(){return null}},nx="Dialog",[GC,qC]=Pn(nx),[s6,hr]=GC(nx),KC=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=p.useRef(null),c=p.useRef(null),[d=!1,h]=ii({prop:r,defaultProp:s,onChange:i});return o.jsx(s6,{scope:e,triggerRef:l,contentRef:c,contentId:Jr(),titleId:Jr(),descriptionId:Jr(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};KC.displayName=nx;var QC="DialogTrigger",YC=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(QC,n),i=Pe(e,s.triggerRef);return o.jsx(be.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ix(s.open),...r,ref:i,onClick:Z(t.onClick,s.onOpenToggle)})});YC.displayName=QC;var rx="DialogPortal",[i6,XC]=GC(rx,{forceMount:void 0}),JC=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=hr(rx,e);return o.jsx(i6,{scope:e,forceMount:n,children:p.Children.map(r,a=>o.jsx(Mr,{present:n||i.open,children:o.jsx(Zc,{asChild:!0,container:s,children:a})}))})};JC.displayName=rx;var jh="DialogOverlay",ZC=p.forwardRef((t,e)=>{const n=XC(jh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(jh,t.__scopeDialog);return i.modal?o.jsx(Mr,{present:r||i.open,children:o.jsx(a6,{...s,ref:e})}):null});ZC.displayName=jh;var o6=no("DialogOverlay.RemoveScroll"),a6=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(jh,n);return o.jsx(Rf,{as:o6,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(be.div,{"data-state":ix(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),so="DialogContent",eI=p.forwardRef((t,e)=>{const n=XC(so,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(so,t.__scopeDialog);return o.jsx(Mr,{present:r||i.open,children:i.modal?o.jsx(l6,{...s,ref:e}):o.jsx(c6,{...s,ref:e})})});eI.displayName=so;var l6=p.forwardRef((t,e)=>{const n=hr(so,t.__scopeDialog),r=p.useRef(null),s=Pe(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return tx(i)},[]),o.jsx(tI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Z(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Z(t.onFocusOutside,i=>i.preventDefault())})}),c6=p.forwardRef((t,e)=>{const n=hr(so,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return o.jsx(tI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),tI=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=hr(so,n),c=p.useRef(null),d=Pe(e,c);return ex(),o.jsxs(o.Fragment,{children:[o.jsx(Af,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Jc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ix(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(d6,{titleId:l.titleId}),o.jsx(f6,{contentRef:c,descriptionId:l.descriptionId})]})]})}),sx="DialogTitle",nI=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(sx,n);return o.jsx(be.h2,{id:s.titleId,...r,ref:e})});nI.displayName=sx;var rI="DialogDescription",sI=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(rI,n);return o.jsx(be.p,{id:s.descriptionId,...r,ref:e})});sI.displayName=rI;var iI="DialogClose",oI=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(iI,n);return o.jsx(be.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,()=>s.onOpenChange(!1))})});oI.displayName=iI;function ix(t){return t?"open":"closed"}var aI="DialogTitleWarning",[u6,lI]=OM(aI,{contentName:so,titleName:sx,docsSlug:"dialog"}),d6=({titleId:t})=>{const e=lI(aI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},h6="DialogDescriptionWarning",f6=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lI(h6).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},cI=KC,uI=YC,dI=JC,ox=ZC,ax=eI,lx=nI,cx=sI,ux=oI;const rr=cI,m6=uI,p6=dI,hI=p.forwardRef(({className:t,...e},n)=>o.jsx(ox,{ref:n,className:ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));hI.displayName=ox.displayName;const On=p.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(p6,{children:[o.jsx(hI,{}),o.jsxs(ax,{ref:r,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(ux,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(nu,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));On.displayName=ax.displayName;const Mn=({className:t,...e})=>o.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Mn.displayName="DialogHeader";const Ln=p.forwardRef(({className:t,...e},n)=>o.jsx(lx,{ref:n,className:ye("text-lg font-semibold leading-none tracking-tight",t),...e}));Ln.displayName=lx.displayName;const kf=p.forwardRef(({className:t,...e},n)=>o.jsx(cx,{ref:n,className:ye("text-sm text-muted-foreground",t),...e}));kf.displayName=cx.displayName;const he=p.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));he.displayName="Input";var g6="Label",fI=p.forwardRef((t,e)=>o.jsx(be.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fI.displayName=g6;var mI=fI;const y6=eu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=p.forwardRef(({className:t,...e},n)=>o.jsx(mI,{ref:n,className:ye(y6(),t),...e}));ne.displayName=mI.displayName;function NE(t,[e,n]){return Math.min(n,Math.max(e,t))}var v6=p.createContext(void 0);function dx(t){const e=p.useContext(v6);return t||e||"ltr"}var x6="Arrow",pI=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(be.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});pI.displayName=x6;var w6=pI,hx="Popper",[gI,Df]=Pn(hx),[_6,yI]=gI(hx),vI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return o.jsx(_6,{scope:e,anchor:r,onAnchorChange:s,children:n})};vI.displayName=hx;var xI="PopperAnchor",wI=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=yI(xI,n),a=p.useRef(null),l=Pe(e,a);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(be.div,{...s,ref:l})});wI.displayName=xI;var fx="PopperContent",[E6,S6]=gI(fx),_I=p.forwardRef((t,e)=>{var se,z,J,de,xe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:T,...x}=t,w=yI(fx,n),[b,_]=p.useState(null),N=Pe(e,tt=>_(tt)),[I,O]=p.useState(null),D=Nf(I),E=(D==null?void 0:D.width)??0,v=(D==null?void 0:D.height)??0,C=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(d)?d:[d],k=R.length>0,j={padding:A,boundary:R.filter(b6),altBoundary:k},{refs:G,floatingStyles:ue,placement:re,isPositioned:ie,middlewareData:U}=aC({strategy:"fixed",placement:C,whileElementsMounted:(...tt)=>iC(...tt,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[lC({mainAxis:s+v,alignmentAxis:a}),c&&cC({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?uC():void 0,...j}),c&&dC({...j}),hC({...j,apply:({elements:tt,rects:Ct,availableWidth:qn,availableHeight:fr})=>{const{width:Vr,height:al}=Ct.reference,An=tt.floating.style;An.setProperty("--radix-popper-available-width",`${qn}px`),An.setProperty("--radix-popper-available-height",`${fr}px`),An.setProperty("--radix-popper-anchor-width",`${Vr}px`),An.setProperty("--radix-popper-anchor-height",`${al}px`)}}),I&&mC({element:I,padding:l}),N6({arrowWidth:E,arrowHeight:v}),m&&fC({strategy:"referenceHidden",...j})]}),[$,Y]=TI(re),F=_t(T);gt(()=>{ie&&(F==null||F())},[ie,F]);const L=(se=U.arrow)==null?void 0:se.x,K=(z=U.arrow)==null?void 0:z.y,fe=((J=U.arrow)==null?void 0:J.centerOffset)!==0,[Re,ke]=p.useState();return gt(()=>{b&&ke(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ie?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Re,"--radix-popper-transform-origin":[(de=U.transformOrigin)==null?void 0:de.x,(xe=U.transformOrigin)==null?void 0:xe.y].join(" "),...((Le=U.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(E6,{scope:n,placedSide:$,onArrowChange:O,arrowX:L,arrowY:K,shouldHideArrow:fe,children:o.jsx(be.div,{"data-side":$,"data-align":Y,...x,ref:N,style:{...x.style,animation:ie?void 0:"none"}})})})});_I.displayName=fx;var EI="PopperArrow",T6={top:"bottom",right:"left",bottom:"top",left:"right"},SI=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=S6(EI,r),a=T6[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(w6,{...s,ref:n,style:{...s.style,display:"block"}})})});SI.displayName=EI;function b6(t){return t!==null}var N6=t=>({name:"transformOrigin",options:t,fn(e){var w,b,_;const{placement:n,rects:r,middlewareData:s}=e,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=TI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,y=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let T="",x="";return d==="bottom"?(T=a?f:`${m}px`,x=`${-c}px`):d==="top"?(T=a?f:`${m}px`,x=`${r.floating.height+c}px`):d==="right"?(T=`${-c}px`,x=a?f:`${y}px`):d==="left"&&(T=`${r.floating.width+c}px`,x=a?f:`${y}px`),{data:{x:T,y:x}}}});function TI(t){const[e,n="center"]=t.split("-");return[e,n]}var bI=vI,NI=wI,CI=_I,II=SI;function mx(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var C6=[" ","Enter","ArrowUp","ArrowDown"],I6=[" ","Enter"],su="Select",[Of,Mf,P6]=vf(su),[Ja,bW]=Pn(su,[P6,Df]),Lf=Df(),[A6,wi]=Ja(su),[j6,R6]=Ja(su),PI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:y,form:T}=t,x=Lf(e),[w,b]=p.useState(null),[_,N]=p.useState(null),[I,O]=p.useState(!1),D=dx(d),[E=!1,v]=ii({prop:r,defaultProp:s,onChange:i}),[C,A]=ii({prop:a,defaultProp:l,onChange:c}),R=p.useRef(null),k=w?T||!!w.closest("form"):!0,[j,G]=p.useState(new Set),ue=Array.from(j).map(re=>re.props.value).join(";");return o.jsx(bI,{...x,children:o.jsxs(A6,{required:y,scope:e,trigger:w,onTriggerChange:b,valueNode:_,onValueNodeChange:N,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:Jr(),value:C,onValueChange:A,open:E,onOpenChange:v,dir:D,triggerPointerDownPosRef:R,disabled:m,children:[o.jsx(Of.Provider,{scope:e,children:o.jsx(j6,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(re=>{G(ie=>new Set(ie).add(re))},[]),onNativeOptionRemove:p.useCallback(re=>{G(ie=>{const U=new Set(ie);return U.delete(re),U})},[]),children:n})}),k?o.jsxs(eP,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:re=>A(re.target.value),disabled:m,form:T,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from(j)]},ue):null]})})};PI.displayName=su;var AI="SelectTrigger",jI=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Lf(n),a=wi(AI,n),l=a.disabled||r,c=Pe(e,a.onTriggerChange),d=Mf(n),h=p.useRef("touch"),[f,m,y]=tP(x=>{const w=d().filter(N=>!N.disabled),b=w.find(N=>N.value===a.value),_=nP(w,x,b);_!==void 0&&a.onValueChange(_.value)}),T=x=>{l||(a.onOpenChange(!0),y()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return o.jsx(NI,{asChild:!0,...i,children:o.jsx(be.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ZI(a.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&T(x)}),onPointerDown:Z(s.onPointerDown,x=>{h.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(T(x),x.preventDefault())}),onKeyDown:Z(s.onKeyDown,x=>{const w=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(w&&x.key===" ")&&C6.includes(x.key)&&(T(),x.preventDefault())})})})});jI.displayName=AI;var RI="SelectValue",kI=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=wi(RI,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Pe(e,c.onValueNodeChange);return gt(()=>{d(h)},[d,h]),o.jsx(be.span,{...l,ref:f,style:{pointerEvents:"none"},children:ZI(c.value)?o.jsx(o.Fragment,{children:a}):i})});kI.displayName=RI;var k6="SelectIcon",DI=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(be.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});DI.displayName=k6;var D6="SelectPortal",OI=t=>o.jsx(Zc,{asChild:!0,...t});OI.displayName=D6;var io="SelectContent",MI=p.forwardRef((t,e)=>{const n=wi(io,t.__scopeSelect),[r,s]=p.useState();if(gt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?xi.createPortal(o.jsx(LI,{scope:t.__scopeSelect,children:o.jsx(Of.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(VI,{...t,ref:e})});MI.displayName=io;var Xn=10,[LI,_i]=Ja(io),O6="SelectContentImpl",M6=no("SelectContent.RemoveScroll"),VI=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:T,hideWhenDetached:x,avoidCollisions:w,...b}=t,_=wi(io,n),[N,I]=p.useState(null),[O,D]=p.useState(null),E=Pe(e,se=>I(se)),[v,C]=p.useState(null),[A,R]=p.useState(null),k=Mf(n),[j,G]=p.useState(!1),ue=p.useRef(!1);p.useEffect(()=>{if(N)return tx(N)},[N]),ex();const re=p.useCallback(se=>{const[z,...J]=k().map(Le=>Le.ref.current),[de]=J.slice(-1),xe=document.activeElement;for(const Le of se)if(Le===xe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===z&&O&&(O.scrollTop=0),Le===de&&O&&(O.scrollTop=O.scrollHeight),Le==null||Le.focus(),document.activeElement!==xe))return},[k,O]),ie=p.useCallback(()=>re([v,N]),[re,v,N]);p.useEffect(()=>{j&&ie()},[j,ie]);const{onOpenChange:U,triggerPointerDownPosRef:$}=_;p.useEffect(()=>{if(N){let se={x:0,y:0};const z=de=>{var xe,Le;se={x:Math.abs(Math.round(de.pageX)-(((xe=$.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(de.pageY)-(((Le=$.current)==null?void 0:Le.y)??0))}},J=de=>{se.x<=10&&se.y<=10?de.preventDefault():N.contains(de.target)||U(!1),document.removeEventListener("pointermove",z),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",J,{capture:!0})}}},[N,U,$]),p.useEffect(()=>{const se=()=>U(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[U]);const[Y,F]=tP(se=>{const z=k().filter(xe=>!xe.disabled),J=z.find(xe=>xe.ref.current===document.activeElement),de=nP(z,se,J);de&&setTimeout(()=>de.ref.current.focus())}),L=p.useCallback((se,z,J)=>{const de=!ue.current&&!J;(_.value!==void 0&&_.value===z||de)&&(C(se),de&&(ue.current=!0))},[_.value]),K=p.useCallback(()=>N==null?void 0:N.focus(),[N]),fe=p.useCallback((se,z,J)=>{const de=!ue.current&&!J;(_.value!==void 0&&_.value===z||de)&&R(se)},[_.value]),Re=r==="popper"?ey:FI,ke=Re===ey?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:T,hideWhenDetached:x,avoidCollisions:w}:{};return o.jsx(LI,{scope:n,content:N,viewport:O,onViewportChange:D,itemRefCallback:L,selectedItem:v,onItemLeave:K,itemTextRefCallback:fe,focusSelectedItem:ie,selectedItemText:A,position:r,isPositioned:j,searchRef:Y,children:o.jsx(Rf,{as:M6,allowPinchZoom:!0,children:o.jsx(Af,{asChild:!0,trapped:_.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:Z(s,se=>{var z;(z=_.trigger)==null||z.focus({preventScroll:!0}),se.preventDefault()}),children:o.jsx(Jc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:o.jsx(Re,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:se=>se.preventDefault(),...b,...ke,onPlaced:()=>G(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Z(b.onKeyDown,se=>{const z=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!z&&se.key.length===1&&F(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let de=k().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(se.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const xe=se.target,Le=de.indexOf(xe);de=de.slice(Le+1)}setTimeout(()=>re(de)),se.preventDefault()}})})})})})})});VI.displayName=O6;var L6="SelectItemAlignedPosition",FI=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=wi(io,n),a=_i(io,n),[l,c]=p.useState(null),[d,h]=p.useState(null),f=Pe(e,E=>h(E)),m=Mf(n),y=p.useRef(!1),T=p.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:b,focusSelectedItem:_}=a,N=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&w&&b){const E=i.trigger.getBoundingClientRect(),v=d.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(i.dir!=="rtl"){const xe=A.left-v.left,Le=C.left-xe,tt=E.left-Le,Ct=E.width+tt,qn=Math.max(Ct,v.width),fr=window.innerWidth-Xn,Vr=NE(Le,[Xn,Math.max(Xn,fr-qn)]);l.style.minWidth=Ct+"px",l.style.left=Vr+"px"}else{const xe=v.right-A.right,Le=window.innerWidth-C.right-xe,tt=window.innerWidth-E.right-Le,Ct=E.width+tt,qn=Math.max(Ct,v.width),fr=window.innerWidth-Xn,Vr=NE(Le,[Xn,Math.max(Xn,fr-qn)]);l.style.minWidth=Ct+"px",l.style.right=Vr+"px"}const R=m(),k=window.innerHeight-Xn*2,j=x.scrollHeight,G=window.getComputedStyle(d),ue=parseInt(G.borderTopWidth,10),re=parseInt(G.paddingTop,10),ie=parseInt(G.borderBottomWidth,10),U=parseInt(G.paddingBottom,10),$=ue+re+j+U+ie,Y=Math.min(w.offsetHeight*5,$),F=window.getComputedStyle(x),L=parseInt(F.paddingTop,10),K=parseInt(F.paddingBottom,10),fe=E.top+E.height/2-Xn,Re=k-fe,ke=w.offsetHeight/2,se=w.offsetTop+ke,z=ue+re+se,J=$-z;if(z<=fe){const xe=R.length>0&&w===R[R.length-1].ref.current;l.style.bottom="0px";const Le=d.clientHeight-x.offsetTop-x.offsetHeight,tt=Math.max(Re,ke+(xe?K:0)+Le+ie),Ct=z+tt;l.style.height=Ct+"px"}else{const xe=R.length>0&&w===R[0].ref.current;l.style.top="0px";const tt=Math.max(fe,ue+x.offsetTop+(xe?L:0)+ke)+J;l.style.height=tt+"px",x.scrollTop=z-fe+x.offsetTop}l.style.margin=`${Xn}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,l,d,x,w,b,i.dir,r]);gt(()=>N(),[N]);const[I,O]=p.useState();gt(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const D=p.useCallback(E=>{E&&T.current===!0&&(N(),_==null||_(),T.current=!1)},[N,_]);return o.jsx(F6,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:o.jsx(be.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});FI.displayName=L6;var V6="SelectPopperPosition",ey=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Xn,...i}=t,a=Lf(n);return o.jsx(CI,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ey.displayName=V6;var[F6,px]=Ja(io,{}),ty="SelectViewport",UI=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=_i(ty,n),a=px(ty,n),l=Pe(e,i.onViewportChange),c=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Of.Slot,{scope:n,children:o.jsx(be.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const T=window.innerHeight-Xn*2,x=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),b=Math.max(x,w);if(b<T){const _=b+y,N=Math.min(T,_),I=_-N;f.style.height=N+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});UI.displayName=ty;var $I="SelectGroup",[U6,$6]=Ja($I),B6=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jr();return o.jsx(U6,{scope:n,id:s,children:o.jsx(be.div,{role:"group","aria-labelledby":s,...r,ref:e})})});B6.displayName=$I;var BI="SelectLabel",zI=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$6(BI,n);return o.jsx(be.div,{id:s.id,...r,ref:e})});zI.displayName=BI;var Rh="SelectItem",[z6,HI]=Ja(Rh),WI=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=wi(Rh,n),c=_i(Rh,n),d=l.value===r,[h,f]=p.useState(i??""),[m,y]=p.useState(!1),T=Pe(e,_=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,_,r,s)}),x=Jr(),w=p.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(z6,{scope:n,value:r,disabled:s,textId:x,isSelected:d,onItemTextChange:p.useCallback(_=>{f(N=>N||((_==null?void 0:_.textContent)??"").trim())},[]),children:o.jsx(Of.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(be.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:T,onFocus:Z(a.onFocus,()=>y(!0)),onBlur:Z(a.onBlur,()=>y(!1)),onClick:Z(a.onClick,()=>{w.current!=="mouse"&&b()}),onPointerUp:Z(a.onPointerUp,()=>{w.current==="mouse"&&b()}),onPointerDown:Z(a.onPointerDown,_=>{w.current=_.pointerType}),onPointerMove:Z(a.onPointerMove,_=>{var N;w.current=_.pointerType,s?(N=c.onItemLeave)==null||N.call(c):w.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(a.onPointerLeave,_=>{var N;_.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:Z(a.onKeyDown,_=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&_.key===" "||(I6.includes(_.key)&&b(),_.key===" "&&_.preventDefault())})})})})});WI.displayName=Rh;var Vl="SelectItemText",GI=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=wi(Vl,n),l=_i(Vl,n),c=HI(Vl,n),d=R6(Vl,n),[h,f]=p.useState(null),m=Pe(e,b=>f(b),c.onItemTextChange,b=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,b,c.value,c.disabled)}),y=h==null?void 0:h.textContent,T=p.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return gt(()=>(x(T),()=>w(T)),[x,w,T]),o.jsxs(o.Fragment,{children:[o.jsx(be.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?xi.createPortal(i.children,a.valueNode):null]})});GI.displayName=Vl;var qI="SelectItemIndicator",KI=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return HI(qI,n).isSelected?o.jsx(be.span,{"aria-hidden":!0,...r,ref:e}):null});KI.displayName=qI;var ny="SelectScrollUpButton",QI=p.forwardRef((t,e)=>{const n=_i(ny,t.__scopeSelect),r=px(ny,t.__scopeSelect),[s,i]=p.useState(!1),a=Pe(e,r.onScrollButtonChange);return gt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(XI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});QI.displayName=ny;var ry="SelectScrollDownButton",YI=p.forwardRef((t,e)=>{const n=_i(ry,t.__scopeSelect),r=px(ry,t.__scopeSelect),[s,i]=p.useState(!1),a=Pe(e,r.onScrollButtonChange);return gt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(XI,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});YI.displayName=ry;var XI=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=_i("SelectScrollButton",n),a=p.useRef(null),l=Mf(n),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),gt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(be.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Z(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),H6="SelectSeparator",JI=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(be.div,{"aria-hidden":!0,...r,ref:e})});JI.displayName=H6;var sy="SelectArrow",W6=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lf(n),i=wi(sy,n),a=_i(sy,n);return i.open&&a.position==="popper"?o.jsx(II,{...s,...r,ref:e}):null});W6.displayName=sy;function ZI(t){return t===""||t===void 0}var eP=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Pe(e,s),a=mx(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx(xf,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});eP.displayName="BubbleSelect";function tP(t){const e=_t(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function nP(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=G6(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function G6(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var q6=PI,rP=jI,K6=kI,Q6=DI,Y6=OI,sP=MI,X6=UI,iP=zI,oP=WI,J6=GI,Z6=KI,aP=QI,lP=YI,cP=JI;const Un=q6,$n=K6,wn=p.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(rP,{ref:r,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(Q6,{asChild:!0,children:o.jsx(Ef,{className:"h-4 w-4 opacity-50"})})]}));wn.displayName=rP.displayName;const uP=p.forwardRef(({className:t,...e},n)=>o.jsx(aP,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(CL,{className:"h-4 w-4"})}));uP.displayName=aP.displayName;const dP=p.forwardRef(({className:t,...e},n)=>o.jsx(lP,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Ef,{className:"h-4 w-4"})}));dP.displayName=lP.displayName;const _n=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(Y6,{children:o.jsxs(sP,{ref:s,className:ye("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(uP,{}),o.jsx(X6,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(dP,{})]})}));_n.displayName=sP.displayName;const e3=p.forwardRef(({className:t,...e},n)=>o.jsx(iP,{ref:n,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));e3.displayName=iP.displayName;const Ae=p.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(oP,{ref:r,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Z6,{children:o.jsx(Uv,{className:"h-4 w-4"})})}),o.jsx(J6,{children:e})]}));Ae.displayName=oP.displayName;const t3=p.forwardRef(({className:t,...e},n)=>o.jsx(cP,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",t),...e}));t3.displayName=cP.displayName;const n3=eu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),iu=p.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:ye(n3({variant:e}),t),...n}));iu.displayName="Alert";const r3=p.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:ye("mb-1 font-medium leading-none tracking-tight",t),...e}));r3.displayName="AlertTitle";const ou=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("text-sm [&_p]:leading-relaxed",t),...e}));ou.displayName="AlertDescription";function s3({open:t,onOpenChange:e,mode:n="login"}){const{login:r,registerSchool:s}=Pf(),{toast:i}=Nt(),[a,l]=p.useState(n),[c,d]=p.useState(!1),[h,f]=p.useState(!1),[m,y]=p.useState(!1);p.useState(null);const[T,x]=p.useState({email:"",password:""}),[w,b]=p.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"});p.useEffect(()=>{const O=setTimeout(async()=>{if(!w.adminEmail||!w.adminEmail.includes("@")||a!=="register"){y(!1);return}f(!0);try{const E=w.plan!=="free"&&w.plan!=="free_trial"?"?allowUpgrade=true":"",C=await(await Ne("GET",`/api/auth/check-email/${encodeURIComponent(w.adminEmail)}${E}`)).json();y(C.exists)}catch{y(!1)}finally{f(!1)}},500);return()=>clearTimeout(O)},[w.adminEmail,w.plan,a]);const _=async I=>{I.preventDefault(),d(!0);try{const O=await r(T.email,T.password);e(!1),x({email:"",password:""}),O!=null&&O.message&&i({title:"Welcome!",description:O.message})}catch(O){i({title:"Error",description:O.message,variant:"destructive"})}finally{d(!1)}},N=async I=>{if(I.preventDefault(),m&&w.plan==="free_trial"){i({title:"Email Already Registered",description:"This email is already registered. Each email can only register for one free trial.",variant:"destructive"});return}d(!0);try{if(w.plan!=="free"&&w.plan!=="free_trial"){localStorage.setItem("pendingRegistration",JSON.stringify(w)),e(!1),window.location.href=`/register?plan=${w.plan}`;return}await s(w),e(!1),b({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free_trial"})}catch(O){i({title:"Error",description:O.message,variant:"destructive"})}finally{d(!1)}};return o.jsx(rr,{open:t,onOpenChange:e,children:o.jsxs(On,{className:"max-w-md",children:[o.jsxs(Mn,{children:[o.jsx(Ln,{className:"text-center",children:a==="login"?"Sign In to PassPilot":a==="set-password"?"Set Your Password":"Register Your School"}),o.jsx(kf,{className:"text-center",children:a==="login"?"Enter your email and password. New teachers: choose any password to get started.":"Create a new school account to get started"})]}),a==="login"?o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Email Address"}),o.jsx(he,{type:"email",id:"email",placeholder:"teacher@school.edu",value:T.email,onChange:I=>x({...T,email:I.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(he,{type:"password",id:"password",placeholder:"Enter password (new teachers: choose your password)",value:T.password,onChange:I=>x({...T,password:I.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(W,{type:"submit",className:"w-full",disabled:c,"data-testid":"button-login",children:c?"Signing In...":"Sign In"})]}):o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(he,{type:"text",id:"schoolName",placeholder:"Lincoln Elementary School",value:w.schoolName,onChange:I=>b({...w,schoolName:I.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(he,{type:"text",id:"adminName",placeholder:"Principal Smith",value:w.adminName,onChange:I=>b({...w,adminName:I.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(he,{type:"email",id:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:w.adminEmail,onChange:I=>b({...w,adminEmail:I.target.value}),required:!0,className:m?"border-red-500 focus:border-red-500":"","data-testid":"input-admin-email"}),h&&w.adminEmail&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Checking email availability..."}),m&&o.jsxs(iu,{className:"mt-2 border-red-200 bg-red-50",children:[o.jsx(Da,{className:"h-4 w-4 text-red-600"}),o.jsx(ou,{className:"text-red-800",children:w.plan==="free_trial"?"This email is already registered. Each email can only be used for one PassPilot account. Please use a different email address.":"This email is already registered. For paid plans, existing users can upgrade - continue to payment."})]}),!m&&!h&&w.adminEmail.includes("@")&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" Email is available"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Password"}),o.jsx(he,{type:"password",id:"adminPassword",placeholder:"",value:w.adminPassword,onChange:I=>b({...w,adminPassword:I.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"plan",children:"Choose Plan"}),o.jsxs(Un,{value:w.plan,onValueChange:I=>b({...w,plan:I}),children:[o.jsx(wn,{"data-testid":"select-plan",children:o.jsx($n,{placeholder:"Select a plan"})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"free",children:"Demo Plan (Free)"}),o.jsx(Ae,{value:"free_trial",children:"30-Day Free Trial"}),o.jsx(Ae,{value:"basic",children:"Basic - 3 Teachers ($6/month)"}),o.jsx(Ae,{value:"small_school",children:"Small School - 10 Teachers ($35/month)"}),o.jsx(Ae,{value:"medium_school",children:"Medium School - 25 Teachers ($75/month)"}),o.jsx(Ae,{value:"large_school",children:"Large School - 50 Teachers ($120/month)"}),o.jsx(Ae,{value:"unlimited",children:"Unlimited Teachers ($180/month)"})]})]})]}),o.jsx(W,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:c||m&&w.plan==="free_trial"||h,"data-testid":"button-register",children:c?"Registering...":h?"Checking Email...":m&&w.plan==="free_trial"?"Email Already Used":m&&w.plan!=="free_trial"?"Upgrade Account":"Register School"})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:a==="login"?o.jsxs(o.Fragment,{children:["Don't have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("register"),"data-testid":"button-switch-register",children:"Register School"})]}):o.jsxs(o.Fragment,{children:["Already have an account?"," ",o.jsx("button",{className:"text-primary hover:underline font-medium",onClick:()=>l("login"),"data-testid":"button-switch-login",children:"Sign In"})]})})})]})})}function i3(){const[,t]=po(),[e,n]=p.useState(!1),[r,s]=p.useState("login"),i=a=>{s(a),n(!0)};return o.jsxs("div",{className:"min-h-screen",children:[o.jsxs("section",{className:"bg-gradient-to-br from-primary to-blue-700 text-white min-h-screen flex items-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1580582932707-520aed937b7b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:o.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center mx-auto mb-6",children:o.jsx("i",{className:"fas fa-id-card text-primary text-2xl"})}),o.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"PassPilot"}),o.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Streamline Student Pass Management with Real-Time Tracking"}),o.jsx("p",{className:"text-lg mb-12 opacity-80 max-w-2xl mx-auto",children:"Designed specifically for teachers and schools to efficiently manage bathroom passes, track student movements, and maintain classroom safety with intelligent reporting."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[o.jsx(W,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(W,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(W,{onClick:()=>i("login"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-login",children:"Log In"})]}),o.jsxs("div",{className:"flex flex-col items-center gap-2 mb-12",children:[o.jsx(W,{onClick:()=>t("/login"),variant:"link",className:"text-white hover:text-gray-200 underline text-lg","data-testid":"button-forgot-password-landing",children:"Forgot your password?"}),o.jsx(W,{onClick:()=>t("/guide"),variant:"link",className:"text-white hover:text-gray-200 underline text-lg","data-testid":"button-quick-guide",children:"Quick Start Guide"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-clock text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Real-Time Tracking"}),o.jsx("p",{className:"text-sm opacity-80",children:"Monitor student movements instantly with live updates"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-chart-line text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Smart Reports"}),o.jsx("p",{className:"text-sm opacity-80",children:"Generate detailed analytics and export data easily"})]}),o.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg p-6",children:[o.jsx("i",{className:"fas fa-shield-alt text-3xl mb-4"}),o.jsx("h3",{className:"font-semibold mb-2",children:"Simple & Private"}),o.jsx("p",{className:"text-sm opacity-80",children:"No student IDs or emails required - just names for easy tracking"})]})]})]})})]}),o.jsx("section",{className:"py-20 bg-background",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-foreground mb-6",children:"Everything You Need for Efficient Pass Management"}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"PassPilot provides comprehensive tools for teachers and administrators to maintain student safety while reducing classroom disruptions."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-primary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-clipboard-list text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Live Pass Tracking"}),o.jsx("p",{className:"text-muted-foreground",children:"See which students are currently out of class with real-time status updates and duration tracking."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-secondary rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-users text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Multi-Grade Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage multiple grade levels and classrooms with easy switching between student rosters."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-accent rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-tablet-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Kiosk Mode"}),o.jsx("p",{className:"text-muted-foreground",children:"Let students sign themselves in/out using a dedicated device while you maintain full oversight and control."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-chart-bar text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Detailed Reports"}),o.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive reports with filtering options and export to CSV or PDF formats."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-mobile-alt text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Mobile Friendly"}),o.jsx("p",{className:"text-muted-foreground",children:"Access PassPilot from any device with a responsive design optimized for tablets and phones."})]}),o.jsxs("div",{className:"bg-card rounded-xl shadow-lg p-8 hover:shadow-xl transition duration-300",children:[o.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center mb-6",children:o.jsx("i",{className:"fas fa-cogs text-white text-xl"})}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Admin Controls"}),o.jsx("p",{className:"text-muted-foreground",children:"School administrators can manage teacher accounts, billing, and configure system settings."})]})]})]})}),o.jsx("section",{className:"py-20 bg-primary text-primary-foreground",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Transform Your Classroom Management?"}),o.jsx("p",{className:"text-xl mb-12 opacity-90 max-w-2xl mx-auto",children:"Join thousands of teachers and schools already using PassPilot to create safer, more organized learning environments."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsx(W,{onClick:()=>t("/trial"),className:"bg-white text-primary px-8 py-4 rounded-lg font-semibold hover:bg-gray-50 transition duration-200 shadow-lg","data-testid":"button-start-trial",children:"Start Free Trial"}),o.jsx(W,{onClick:()=>t("/register"),variant:"outline",className:"bg-transparent border-2 border-white text-white px-6 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-view-pricing",children:"View Pricing & Plans"}),o.jsx(W,{variant:"outline",className:"bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-primary transition duration-200","data-testid":"button-schedule-demo",children:"Schedule Demo"})]})]})}),o.jsx("footer",{className:"bg-gray-900 text-white py-12",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[o.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:o.jsx("i",{className:"fas fa-id-card text-white text-sm"})}),o.jsx("span",{className:"text-xl font-bold",children:"PassPilot"})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h4",{className:"font-semibold mb-4 text-lg",children:"Support"}),o.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Teacher helping teachers"}),o.jsx("a",{href:"mailto:passpilotapp@gmail.com",className:"text-primary hover:text-primary/80 text-lg","data-testid":"link-support-email",children:"passpilotapp@gmail.com"}),o.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Adding pics for troubleshooting highly recommended"})]}),o.jsx("div",{className:"border-t border-gray-800 pt-8",children:o.jsx("p",{className:"text-sm text-gray-400",children:" 2024 PassPilot. All rights reserved."})})]})})}),o.jsx(s3,{open:e,onOpenChange:n,mode:r})]})}var mp="rovingFocusGroup.onEntryFocus",o3={bubbles:!1,cancelable:!0},Vf="RovingFocusGroup",[iy,hP,a3]=vf(Vf),[l3,fP]=Pn(Vf,[a3]),[c3,u3]=l3(Vf),mP=p.forwardRef((t,e)=>o.jsx(iy.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(iy.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(d3,{...t,ref:e})})}));mP.displayName=Vf;var d3=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Pe(e,m),T=dx(i),[x=null,w]=ii({prop:a,defaultProp:l,onChange:c}),[b,_]=p.useState(!1),N=_t(d),I=hP(n),O=p.useRef(!1),[D,E]=p.useState(0);return p.useEffect(()=>{const v=m.current;if(v)return v.addEventListener(mp,N),()=>v.removeEventListener(mp,N)},[N]),o.jsx(c3,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:x,onItemFocus:p.useCallback(v=>w(v),[w]),onItemShiftTab:p.useCallback(()=>_(!0),[]),onFocusableItemAdd:p.useCallback(()=>E(v=>v+1),[]),onFocusableItemRemove:p.useCallback(()=>E(v=>v-1),[]),children:o.jsx(be.div,{tabIndex:b||D===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:Z(t.onMouseDown,()=>{O.current=!0}),onFocus:Z(t.onFocus,v=>{const C=!O.current;if(v.target===v.currentTarget&&C&&!b){const A=new CustomEvent(mp,o3);if(v.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=I().filter(re=>re.focusable),k=R.find(re=>re.active),j=R.find(re=>re.id===x),ue=[k,j,...R].filter(Boolean).map(re=>re.ref.current);yP(ue,h)}}O.current=!1}),onBlur:Z(t.onBlur,()=>_(!1))})})}),pP="RovingFocusGroupItem",gP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Jr(),c=i||l,d=u3(pP,n),h=d.currentTabStopId===c,f=hP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=d;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),o.jsx(iy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(be.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:Z(t.onMouseDown,T=>{r?d.onItemFocus(c):T.preventDefault()}),onFocus:Z(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Z(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){d.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const x=m3(T,d.orientation,d.dir);if(x!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let b=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const _=b.indexOf(T.currentTarget);b=d.loop?p3(b,_+1):b.slice(_+1)}setTimeout(()=>yP(b))}})})})});gP.displayName=pP;var h3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function f3(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function m3(t,e,n){const r=f3(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return h3[r]}function yP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function p3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var g3=mP,y3=gP,oy=["Enter"," "],v3=["ArrowDown","PageUp","Home"],vP=["ArrowUp","PageDown","End"],x3=[...v3,...vP],w3={ltr:[...oy,"ArrowRight"],rtl:[...oy,"ArrowLeft"]},_3={ltr:["ArrowLeft"],rtl:["ArrowRight"]},au="Menu",[Pc,E3,S3]=vf(au),[yo,xP]=Pn(au,[S3,Df,fP]),Ff=Df(),wP=fP(),[T3,vo]=yo(au),[b3,lu]=yo(au),_P=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=t,l=Ff(e),[c,d]=p.useState(null),h=p.useRef(!1),f=_t(i),m=dx(s);return p.useEffect(()=>{const y=()=>{h.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>h.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),o.jsx(bI,{...l,children:o.jsx(T3,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:d,children:o.jsx(b3,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:a,children:r})})})};_P.displayName=au;var N3="MenuAnchor",gx=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Ff(n);return o.jsx(NI,{...s,...r,ref:e})});gx.displayName=N3;var yx="MenuPortal",[C3,EP]=yo(yx,{forceMount:void 0}),SP=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=vo(yx,e);return o.jsx(C3,{scope:e,forceMount:n,children:o.jsx(Mr,{present:n||i.open,children:o.jsx(Zc,{asChild:!0,container:s,children:r})})})};SP.displayName=yx;var zn="MenuContent",[I3,vx]=yo(zn),TP=p.forwardRef((t,e)=>{const n=EP(zn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=vo(zn,t.__scopeMenu),a=lu(zn,t.__scopeMenu);return o.jsx(Pc.Provider,{scope:t.__scopeMenu,children:o.jsx(Mr,{present:r||i.open,children:o.jsx(Pc.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(P3,{...s,ref:e}):o.jsx(A3,{...s,ref:e})})})})}),P3=p.forwardRef((t,e)=>{const n=vo(zn,t.__scopeMenu),r=p.useRef(null),s=Pe(e,r);return p.useEffect(()=>{const i=r.current;if(i)return tx(i)},[]),o.jsx(xx,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Z(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),A3=p.forwardRef((t,e)=>{const n=vo(zn,t.__scopeMenu);return o.jsx(xx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),j3=no("MenuContent.ScrollLock"),xx=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,disableOutsideScroll:T,...x}=t,w=vo(zn,n),b=lu(zn,n),_=Ff(n),N=wP(n),I=E3(n),[O,D]=p.useState(null),E=p.useRef(null),v=Pe(e,E,w.onContentChange),C=p.useRef(0),A=p.useRef(""),R=p.useRef(0),k=p.useRef(null),j=p.useRef("right"),G=p.useRef(0),ue=T?Rf:p.Fragment,re=T?{as:j3,allowPinchZoom:!0}:void 0,ie=$=>{var se,z;const Y=A.current+$,F=I().filter(J=>!J.disabled),L=document.activeElement,K=(se=F.find(J=>J.ref.current===L))==null?void 0:se.textValue,fe=F.map(J=>J.textValue),Re=z3(fe,Y,K),ke=(z=F.find(J=>J.textValue===Re))==null?void 0:z.ref.current;(function J(de){A.current=de,window.clearTimeout(C.current),de!==""&&(C.current=window.setTimeout(()=>J(""),1e3))})(Y),ke&&setTimeout(()=>ke.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),ex();const U=p.useCallback($=>{var F,L;return j.current===((F=k.current)==null?void 0:F.side)&&W3($,(L=k.current)==null?void 0:L.area)},[]);return o.jsx(I3,{scope:n,searchRef:A,onItemEnter:p.useCallback($=>{U($)&&$.preventDefault()},[U]),onItemLeave:p.useCallback($=>{var Y;U($)||((Y=E.current)==null||Y.focus(),D(null))},[U]),onTriggerLeave:p.useCallback($=>{U($)&&$.preventDefault()},[U]),pointerGraceTimerRef:R,onPointerGraceIntentChange:p.useCallback($=>{k.current=$},[]),children:o.jsx(ue,{...re,children:o.jsx(Af,{asChild:!0,trapped:s,onMountAutoFocus:Z(i,$=>{var Y;$.preventDefault(),(Y=E.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Jc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:y,children:o.jsx(g3,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:D,onEntryFocus:Z(c,$=>{b.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(CI,{role:"menu","aria-orientation":"vertical","data-state":UP(w.open),"data-radix-menu-content":"",dir:b.dir,..._,...x,ref:v,style:{outline:"none",...x.style},onKeyDown:Z(x.onKeyDown,$=>{const F=$.target.closest("[data-radix-menu-content]")===$.currentTarget,L=$.ctrlKey||$.altKey||$.metaKey,K=$.key.length===1;F&&($.key==="Tab"&&$.preventDefault(),!L&&K&&ie($.key));const fe=E.current;if($.target!==fe||!x3.includes($.key))return;$.preventDefault();const ke=I().filter(se=>!se.disabled).map(se=>se.ref.current);vP.includes($.key)&&ke.reverse(),$3(ke)}),onBlur:Z(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:Z(t.onPointerMove,Ac($=>{const Y=$.target,F=G.current!==$.clientX;if($.currentTarget.contains(Y)&&F){const L=$.clientX>G.current?"right":"left";j.current=L,G.current=$.clientX}}))})})})})})})});TP.displayName=zn;var R3="MenuGroup",wx=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(be.div,{role:"group",...r,ref:e})});wx.displayName=R3;var k3="MenuLabel",bP=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(be.div,{...r,ref:e})});bP.displayName=k3;var kh="MenuItem",CE="menu.itemSelect",Uf=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),a=lu(kh,t.__scopeMenu),l=vx(kh,t.__scopeMenu),c=Pe(e,i),d=p.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(CE,{bubbles:!0,cancelable:!0});f.addEventListener(CE,y=>r==null?void 0:r(y),{once:!0}),Mv(f,m),m.defaultPrevented?d.current=!1:a.onClose()}};return o.jsx(NP,{...s,ref:c,disabled:n,onClick:Z(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),d.current=!0},onPointerUp:Z(t.onPointerUp,f=>{var m;d.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:Z(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||oy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Uf.displayName=kh;var NP=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,a=vx(kh,n),l=wP(n),c=p.useRef(null),d=Pe(e,c),[h,f]=p.useState(!1),[m,y]=p.useState("");return p.useEffect(()=>{const T=c.current;T&&y((T.textContent??"").trim())},[i.children]),o.jsx(Pc.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:o.jsx(y3,{asChild:!0,...l,focusable:!r,children:o.jsx(be.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:Z(t.onPointerMove,Ac(T=>{r?a.onItemLeave(T):(a.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(t.onPointerLeave,Ac(T=>a.onItemLeave(T))),onFocus:Z(t.onFocus,()=>f(!0)),onBlur:Z(t.onBlur,()=>f(!1))})})})}),D3="MenuCheckboxItem",CP=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return o.jsx(RP,{scope:t.__scopeMenu,checked:n,children:o.jsx(Uf,{role:"menuitemcheckbox","aria-checked":Dh(n)?"mixed":n,...s,ref:e,"data-state":Ex(n),onSelect:Z(s.onSelect,()=>r==null?void 0:r(Dh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});CP.displayName=D3;var IP="MenuRadioGroup",[O3,M3]=yo(IP,{value:void 0,onValueChange:()=>{}}),PP=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=_t(r);return o.jsx(O3,{scope:t.__scopeMenu,value:n,onValueChange:i,children:o.jsx(wx,{...s,ref:e})})});PP.displayName=IP;var AP="MenuRadioItem",jP=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=M3(AP,t.__scopeMenu),i=n===s.value;return o.jsx(RP,{scope:t.__scopeMenu,checked:i,children:o.jsx(Uf,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Ex(i),onSelect:Z(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});jP.displayName=AP;var _x="MenuItemIndicator",[RP,L3]=yo(_x,{checked:!1}),kP=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=L3(_x,n);return o.jsx(Mr,{present:r||Dh(i.checked)||i.checked===!0,children:o.jsx(be.span,{...s,ref:e,"data-state":Ex(i.checked)})})});kP.displayName=_x;var V3="MenuSeparator",DP=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return o.jsx(be.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});DP.displayName=V3;var F3="MenuArrow",OP=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Ff(n);return o.jsx(II,{...s,...r,ref:e})});OP.displayName=F3;var U3="MenuSub",[NW,MP]=yo(U3),Fl="MenuSubTrigger",LP=p.forwardRef((t,e)=>{const n=vo(Fl,t.__scopeMenu),r=lu(Fl,t.__scopeMenu),s=MP(Fl,t.__scopeMenu),i=vx(Fl,t.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},h=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(gx,{asChild:!0,...d,children:o.jsx(NP,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":UP(n.open),...t,ref:Xc(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Z(t.onPointerMove,Ac(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:Z(t.onPointerLeave,Ac(f=>{var y,T;h();const m=(y=n.content)==null?void 0:y.getBoundingClientRect();if(m){const x=(T=n.content)==null?void 0:T.dataset.side,w=x==="right",b=w?-5:5,_=m[w?"left":"right"],N=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:_,y:m.top},{x:N,y:m.top},{x:N,y:m.bottom},{x:_,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Z(t.onKeyDown,f=>{var y;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||w3[r.dir].includes(f.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),f.preventDefault())})})})});LP.displayName=Fl;var VP="MenuSubContent",FP=p.forwardRef((t,e)=>{const n=EP(zn,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=vo(zn,t.__scopeMenu),a=lu(zn,t.__scopeMenu),l=MP(VP,t.__scopeMenu),c=p.useRef(null),d=Pe(e,c);return o.jsx(Pc.Provider,{scope:t.__scopeMenu,children:o.jsx(Mr,{present:r||i.open,children:o.jsx(Pc.Slot,{scope:t.__scopeMenu,children:o.jsx(xx,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Z(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Z(t.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:Z(t.onKeyDown,h=>{var y;const f=h.currentTarget.contains(h.target),m=_3[a.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(y=l.trigger)==null||y.focus(),h.preventDefault())})})})})})});FP.displayName=VP;function UP(t){return t?"open":"closed"}function Dh(t){return t==="indeterminate"}function Ex(t){return Dh(t)?"indeterminate":t?"checked":"unchecked"}function $3(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function B3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function z3(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=B3(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function H3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,d=e[a].x,h=e[a].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function W3(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return H3(n,e)}function Ac(t){return e=>e.pointerType==="mouse"?t(e):void 0}var G3=_P,q3=gx,K3=SP,Q3=TP,Y3=wx,X3=bP,J3=Uf,Z3=CP,e5=PP,t5=jP,n5=kP,r5=DP,s5=OP,i5=LP,o5=FP,Sx="DropdownMenu",[a5,CW]=Pn(Sx,[xP]),nn=xP(),[l5,$P]=a5(Sx),BP=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=nn(e),d=p.useRef(null),[h=!1,f]=ii({prop:s,defaultProp:i,onChange:a});return o.jsx(l5,{scope:e,triggerId:Jr(),triggerRef:d,contentId:Jr(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:o.jsx(G3,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};BP.displayName=Sx;var zP="DropdownMenuTrigger",HP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=$P(zP,n),a=nn(n);return o.jsx(q3,{asChild:!0,...a,children:o.jsx(be.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Xc(e,i.triggerRef),onPointerDown:Z(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Z(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});HP.displayName=zP;var c5="DropdownMenuPortal",WP=t=>{const{__scopeDropdownMenu:e,...n}=t,r=nn(e);return o.jsx(K3,{...r,...n})};WP.displayName=c5;var GP="DropdownMenuContent",qP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=$P(GP,n),i=nn(n),a=p.useRef(!1);return o.jsx(Q3,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Z(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Z(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qP.displayName=GP;var u5="DropdownMenuGroup",d5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(Y3,{...s,...r,ref:e})});d5.displayName=u5;var h5="DropdownMenuLabel",KP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(X3,{...s,...r,ref:e})});KP.displayName=h5;var f5="DropdownMenuItem",QP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(J3,{...s,...r,ref:e})});QP.displayName=f5;var m5="DropdownMenuCheckboxItem",YP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(Z3,{...s,...r,ref:e})});YP.displayName=m5;var p5="DropdownMenuRadioGroup",g5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(e5,{...s,...r,ref:e})});g5.displayName=p5;var y5="DropdownMenuRadioItem",XP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(t5,{...s,...r,ref:e})});XP.displayName=y5;var v5="DropdownMenuItemIndicator",JP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(n5,{...s,...r,ref:e})});JP.displayName=v5;var x5="DropdownMenuSeparator",ZP=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(r5,{...s,...r,ref:e})});ZP.displayName=x5;var w5="DropdownMenuArrow",_5=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(s5,{...s,...r,ref:e})});_5.displayName=w5;var E5="DropdownMenuSubTrigger",eA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(i5,{...s,...r,ref:e})});eA.displayName=E5;var S5="DropdownMenuSubContent",tA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=nn(n);return o.jsx(o5,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tA.displayName=S5;var T5=BP,b5=HP,N5=WP,nA=qP,rA=KP,sA=QP,iA=YP,oA=XP,aA=JP,lA=ZP,cA=eA,uA=tA;const dA=T5,hA=b5,C5=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>o.jsxs(cA,{ref:s,className:ye("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,o.jsx(NL,{className:"ml-auto"})]}));C5.displayName=cA.displayName;const I5=p.forwardRef(({className:t,...e},n)=>o.jsx(uA,{ref:n,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));I5.displayName=uA.displayName;const Tx=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(N5,{children:o.jsx(nA,{ref:r,sideOffset:e,className:ye("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Tx.displayName=nA.displayName;const oa=p.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(sA,{ref:r,className:ye("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));oa.displayName=sA.displayName;const P5=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>o.jsxs(iA,{ref:s,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(aA,{children:o.jsx(Uv,{className:"h-4 w-4"})})}),e]}));P5.displayName=iA.displayName;const A5=p.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(oA,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(aA,{children:o.jsx(PL,{className:"h-2 w-2 fill-current"})})}),e]}));A5.displayName=oA.displayName;const j5=p.forwardRef(({className:t,inset:e,...n},r)=>o.jsx(rA,{ref:r,className:ye("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));j5.displayName=rA.displayName;const R5=p.forwardRef(({className:t,...e},n)=>o.jsx(lA,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",t),...e}));R5.displayName=lA.displayName;const ee=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ee.displayName="Card";const pe=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("flex flex-col space-y-1.5 p-6",t),...e}));pe.displayName="CardHeader";const ge=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("text-2xl font-semibold leading-none tracking-tight",t),...e}));ge.displayName="CardTitle";const k5=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("text-sm text-muted-foreground",t),...e}));k5.displayName="CardDescription";const te=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("p-6 pt-0",t),...e}));te.displayName="CardContent";const D5=p.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:ye("flex items-center p-6 pt-0",t),...e}));D5.displayName="CardFooter";const O5=eu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function bn({className:t,variant:e,...n}){return o.jsx("div",{className:ye(O5({variant:e}),t),...n})}const M5=()=>{};var IE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},L5=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},mA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):L5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new V5;const m=i<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),f!==64){const T=d<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class V5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F5=function(t){const e=fA(t);return mA.encodeByteArray(e,!0)},Oh=function(t){return F5(t).replace(/\./g,"")},pA=function(t){try{return mA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=()=>U5().__FIREBASE_DEFAULTS__,B5=()=>{if(typeof process>"u"||typeof IE>"u")return;const t=IE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pA(t[1]);return e&&JSON.parse(e)},$f=()=>{try{return M5()||$5()||B5()||z5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gA=t=>{var e,n;return(n=(e=$f())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},H5=t=>{const e=gA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yA=()=>{var t;return(t=$f())==null?void 0:t.config},vA=t=>{var e;return(e=$f())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(a)),""].join(".")}const rc={};function q5(){const t={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?t.emulator.push(e):t.prod.push(e);return t}function K5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let PE=!1;function wA(t,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||rc[t]===e||rc[t]||PE)return;rc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=q5().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{PE=!0,a()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=K5(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),w=document.getElementById(x)||document.createElement("a"),b=n("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),h(w,x);const I=d();c(_,b),N.append(_,T,w,I),document.body.appendChild(N)}i?(T.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function Y5(){var e;const t=(e=$f())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J5(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eU(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tU(){return!Y5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nU(){try{return typeof indexedDB=="object"}catch{return!1}}function rU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sU,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?iU(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new hs(s,l,r)}}function iU(t,e){return t.replace(oU,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const oU=/\{\$([^}]+)}/g;function aU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(AE(i)&&AE(a)){if(!oo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function AE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function $l(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lU(t,e){const n=new cU(t,e);return n.subscribe.bind(n)}class cU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uU(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pp),s.error===void 0&&(s.error=pp),s.complete===void 0&&(s.complete=pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new W5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fU(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hU(t){return t===Ri?void 0:t}function fU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const pU={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},gU=De.INFO,yU={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},vU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=yU[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bx{constructor(e){this.name=e,this._logLevel=gU,this._logHandler=vU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const xU=(t,e)=>e.some(n=>t instanceof n);let jE,RE;function wU(){return jE||(jE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _U(){return RE||(RE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _A=new WeakMap,ay=new WeakMap,EA=new WeakMap,gp=new WeakMap,Nx=new WeakMap;function EU(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Xs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&_A.set(n,t)}).catch(()=>{}),Nx.set(e,t),e}function SU(t){if(ay.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});ay.set(t,e)}let ly={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TU(t){ly=t(ly)}function bU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yp(this),e,...n);return EA.set(r,e.sort?e.sort():[e]),Xs(r)}:_U().includes(t)?function(...e){return t.apply(yp(this),e),Xs(_A.get(this))}:function(...e){return Xs(t.apply(yp(this),e))}}function NU(t){return typeof t=="function"?bU(t):(t instanceof IDBTransaction&&SU(t),xU(t,wU())?new Proxy(t,ly):t)}function Xs(t){if(t instanceof IDBRequest)return EU(t);if(gp.has(t))return gp.get(t);const e=NU(t);return e!==t&&(gp.set(t,e),Nx.set(e,t)),e}const yp=t=>Nx.get(t);function CU(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Xs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Xs(a.result),c.oldVersion,c.newVersion,Xs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const IU=["get","getKey","getAll","getAllKeys","count"],PU=["put","add","delete","clear"],vp=new Map;function kE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||IU.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return vp.set(e,i),i}TU(t=>({...t,get:(e,n,r)=>kE(e,n)||t.get(e,n,r),has:(e,n)=>!!kE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cy="@firebase/app",DE="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new bx("@firebase/app"),RU="@firebase/app-compat",kU="@firebase/analytics-compat",DU="@firebase/analytics",OU="@firebase/app-check-compat",MU="@firebase/app-check",LU="@firebase/auth",VU="@firebase/auth-compat",FU="@firebase/database",UU="@firebase/data-connect",$U="@firebase/database-compat",BU="@firebase/functions",zU="@firebase/functions-compat",HU="@firebase/installations",WU="@firebase/installations-compat",GU="@firebase/messaging",qU="@firebase/messaging-compat",KU="@firebase/performance",QU="@firebase/performance-compat",YU="@firebase/remote-config",XU="@firebase/remote-config-compat",JU="@firebase/storage",ZU="@firebase/storage-compat",e$="@firebase/firestore",t$="@firebase/ai",n$="@firebase/firestore-compat",r$="firebase",s$="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="[DEFAULT]",i$={[cy]:"fire-core",[RU]:"fire-core-compat",[DU]:"fire-analytics",[kU]:"fire-analytics-compat",[MU]:"fire-app-check",[OU]:"fire-app-check-compat",[LU]:"fire-auth",[VU]:"fire-auth-compat",[FU]:"fire-rtdb",[UU]:"fire-data-connect",[$U]:"fire-rtdb-compat",[BU]:"fire-fn",[zU]:"fire-fn-compat",[HU]:"fire-iid",[WU]:"fire-iid-compat",[GU]:"fire-fcm",[qU]:"fire-fcm-compat",[KU]:"fire-perf",[QU]:"fire-perf-compat",[YU]:"fire-rc",[XU]:"fire-rc-compat",[JU]:"fire-gcs",[ZU]:"fire-gcs-compat",[e$]:"fire-fst",[n$]:"fire-fst-compat",[t$]:"fire-vertex","fire-js":"fire-js",[r$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map,o$=new Map,dy=new Map;function OE(t,e){try{t.container.addComponent(e)}catch(n){as.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function La(t){const e=t.name;if(dy.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;dy.set(e,t);for(const n of Mh.values())OE(n,t);for(const n of o$.values())OE(n,t);return!0}function Cx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Js=new cu("app","Firebase",a$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=s$;function SA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:uy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Js.create("bad-app-name",{appName:String(s)});if(n||(n=yA()),!n)throw Js.create("no-options");const i=Mh.get(s);if(i){if(oo(n,i.options)&&oo(r,i.config))return i;throw Js.create("duplicate-app",{appName:s})}const a=new mU(s);for(const c of dy.values())a.addComponent(c);const l=new l$(n,r,a);return Mh.set(s,l),l}function TA(t=uy){const e=Mh.get(t);if(!e&&t===uy&&yA())return SA();if(!e)throw Js.create("no-app",{appName:t});return e}function Zs(t,e,n){let r=i$[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(a.join(" "));return}La(new ao(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="firebase-heartbeat-database",u$=1,jc="firebase-heartbeat-store";let xp=null;function bA(){return xp||(xp=CU(c$,u$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Js.create("idb-open",{originalErrorMessage:t.message})})),xp}async function d$(t){try{const n=(await bA()).transaction(jc),r=await n.objectStore(jc).get(NA(t));return await n.done,r}catch(e){if(e instanceof hs)as.warn(e.message);else{const n=Js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(n.message)}}}async function ME(t,e){try{const r=(await bA()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,NA(t)),await r.done}catch(n){if(n instanceof hs)as.warn(n.message);else{const r=Js.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});as.warn(r.message)}}}function NA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$=1024,f$=30;class m${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=LE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>f$){const a=y$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=LE(),{heartbeatsToSend:r,unsentEntries:s}=p$(this._heartbeatsCache.heartbeats),i=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return as.warn(n),""}}}function LE(){return new Date().toISOString().substring(0,10)}function p$(t,e=h$){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),VE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),VE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nU()?rU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ME(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function VE(t){return Oh(JSON.stringify({version:2,heartbeats:t})).length}function y$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t){La(new ao("platform-logger",e=>new AU(e),"PRIVATE")),La(new ao("heartbeat",e=>new m$(e),"PRIVATE")),Zs(cy,DE,t),Zs(cy,DE,"esm2020"),Zs("fire-js","")}v$("");var x$="firebase",w$="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(x$,w$,"app");function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _$=CA,IA=new cu("auth","Firebase",CA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new bx("@firebase/auth");function E$(t,...e){Lh.logLevel<=De.WARN&&Lh.warn(`Auth (${el}): ${t}`,...e)}function Vd(t,...e){Lh.logLevel<=De.ERROR&&Lh.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,...e){throw Px(t,...e)}function Cr(t,...e){return Px(t,...e)}function Ix(t,e,n){const r={..._$(),[e]:n};return new cu("auth","Firebase",r).create(e,{appName:t.name})}function Ir(t){return Ix(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S$(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Gn(t,"argument-error"),Ix(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Px(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IA.create(t,...e)}function we(t,e,...n){if(!t)throw Px(e,...n)}function Qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vd(e),new Error(e)}function ls(t,e){t||Qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function T$(){return FE()==="http:"||FE()==="https:"}function FE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T$()||J5()||"connection"in navigator)?navigator.onLine:!0}function N$(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=Q5()||Z5()}get(){return b$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P$=new du(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Si(t,e,n,r,s={}){return AA(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=uu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return X5()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Za(t.emulatorConfig.host)&&(d.credentials="include"),PA.fetch()(await jA(t,t.config.apiHost,n,l),d)})}async function AA(t,e,n){t._canInitEmulator=!1;const r={...C$,...e};try{const s=new j$(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ud(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ud(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ud(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ix(t,h,d);Gn(t,h)}}catch(s){if(s instanceof hs)throw s;Gn(t,"network-request-failed",{message:String(s)})}}async function hu(t,e,n,r,s={}){const i=await Si(t,e,n,r,s);return"mfaPendingCredential"in i&&Gn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function jA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Ax(t.config,s):`${t.config.apiScheme}://${s}`;return I$.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function A$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j${clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),P$.get())})}}function ud(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cr(t,e,r);return s.customData._tokenResponse=n,s}function UE(t){return t!==void 0&&t.enterprise!==void 0}class R${constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return A$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k$(t,e){return Si(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D$(t,e){return Si(t,"POST","/v1/accounts:delete",e)}async function Vh(t,e){return Si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function O$(t,e=!1){const n=bt(t),r=await n.getIdToken(e),s=jx(r);we(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:sc(wp(s.auth_time)),issuedAtTime:sc(wp(s.iat)),expirationTime:sc(wp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function wp(t){return Number(t)*1e3}function jx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{const s=pA(n);return s?JSON.parse(s):(Vd("Failed to decode base64 JWT payload"),null)}catch(s){return Vd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $E(t){const e=jx(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hs&&M$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function M$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Rc(t,Vh(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?RA(s.providerUserInfo):[],a=F$(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function V$(t){const e=bt(t);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F$(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function RA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U$(t,e){const n=await AA(t,{},async()=>{const r=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await jA(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Za(t.emulatorConfig.host)&&(c.credentials="include"),PA.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $$(t,e){return Si(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=$E(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await U$(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new aa;return r&&(we(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(we(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new L$(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Rc(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return O$(this,e)}reload(){return V$(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Rc(this,D$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:T,stsTokenManager:x}=n;we(f&&x,e,"internal-error");const w=aa.fromJSON(this.name,x);we(typeof f=="string",e,"internal-error"),_s(r,e.name),_s(s,e.name),we(typeof m=="boolean",e,"internal-error"),we(typeof y=="boolean",e,"internal-error"),_s(i,e.name),_s(a,e.name),_s(l,e.name),_s(c,e.name),_s(d,e.name),_s(h,e.name);const b=new sr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:w,createdAt:d,lastLoginAt:h});return T&&Array.isArray(T)&&(b.providerData=T.map(_=>({..._}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];we(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?RA(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new aa;l.updateFromIdToken(r);const c=new sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new Map;function Yr(t){ls(t instanceof Function,"Expected a class definition");let e=BE.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kA.type="NONE";const zE=kA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Fd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Fd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vh(this.auth,{idToken:e}).catch(()=>{});return n?sr._fromGetAccountInfoResponse(this.auth,n,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new la(Yr(zE),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Yr(zE);const a=Fd(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Vh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await sr._fromGetAccountInfoResponse(e,m,h)}else f=sr._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new la(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new la(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FA(e))return"Blackberry";if(UA(e))return"Webos";if(OA(e))return"Safari";if((e.includes("chrome/")||MA(e))&&!e.includes("edge/"))return"Chrome";if(VA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DA(t=Gt()){return/firefox\//i.test(t)}function OA(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MA(t=Gt()){return/crios\//i.test(t)}function LA(t=Gt()){return/iemobile/i.test(t)}function VA(t=Gt()){return/android/i.test(t)}function FA(t=Gt()){return/blackberry/i.test(t)}function UA(t=Gt()){return/webos/i.test(t)}function Rx(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function B$(t=Gt()){var e;return Rx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function z$(){return eU()&&document.documentMode===10}function $A(t=Gt()){return Rx(t)||VA(t)||UA(t)||FA(t)||/windows phone/i.test(t)||LA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t,e=[]){let n;switch(t){case"Browser":n=HE(Gt());break;case"Worker":n=`${HE(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W$(t,e={}){return Si(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=6;class q${constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??G$,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WE(this),this.idTokenSubscription=new WE(this),this.beforeStateQueue=new H$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vh(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Ir(this));const n=e?bt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W$(this),n=new q$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Yr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&E$(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fs(t){return bt(t)}class WE{constructor(e){this.auth=e,this.observer=null,this.addObserver=lU(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q$(t){Bf=t}function zA(t){return Bf.loadJS(t)}function Y$(){return Bf.recaptchaEnterpriseScript}function X$(){return Bf.gapiScript}function J$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Z${constructor(){this.enterprise=new e9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class e9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const t9="recaptcha-enterprise",HA="NO_RECAPTCHA";class n9{constructor(e){this.type=t9,this.auth=fs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{k$(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new R$(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;UE(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(HA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Z$().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&UE(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Y$();c.length!==0&&(c+=l),zA(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function GE(t,e,n,r=!1,s=!1){const i=new n9(t);let a;if(s)a=HA;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function my(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await GE(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await GE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t,e){const n=Cx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oo(i,e??{}))return s;Gn(s,"already-initialized")}return n.initialize({options:e})}function s9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function i9(t,e,n){const r=fs(t);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=WA(e),{host:a,port:l}=o9(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(oo(d,r.config.emulator)&&oo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Za(a)?(xA(`${i}//${a}${c}`),wA("Auth",!0)):a9()}function WA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function o9(t){const e=WA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qE(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:qE(a)}}}function qE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function a9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,n){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function l9(t,e){return Si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9(t,e){return hu(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u9(t,e){return hu(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function d9(t,e){return hu(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends kx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new kc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,n,"signInWithPassword",c9);case"emailLink":return u9(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return my(e,r,"signUpPassword",l9);case"emailLink":return d9(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return hu(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="http://localhost";class lo extends kx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new lo(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:h9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m9(t){const e=Ul($l(t)).link,n=e?Ul($l(e)).deep_link_id:null,r=Ul($l(t)).deep_link_id;return(r?Ul($l(r)).link:null)||r||n||e||t}class Dx{constructor(e){const n=Ul($l(e)),r=n.apiKey??null,s=n.oobCode??null,i=f9(n.mode??null);we(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=m9(e);try{return new Dx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.providerId=tl.PROVIDER_ID}static credential(e,n){return kc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Dx.parseLink(n);return we(r,"argument-error"),kc._fromEmailAndCode(e,r.code,r.tenantId)}}tl.PROVIDER_ID="password";tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends Ox{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends fu{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends fu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return lo._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.GOOGLE_SIGN_IN_METHOD="google.com";Gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends fu{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends fu{constructor(){super("twitter.com")}static credential(e,n){return lo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){return hu(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sr._fromIdTokenResponse(e,r,s),a=KE(r);return new co({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=KE(r);return new co({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function KE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends hs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Uh(e,n,r,s)}}function GA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(t,i,e,r):i})}async function g9(t,e,n=!1){const r=await Rc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return co._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject(Ir(r));const s="reauthenticate";try{const i=await Rc(t,GA(r,s,e,t),n);we(i.idToken,r,"internal-error");const a=jx(i.idToken);we(a,r,"internal-error");const{sub:l}=a;return we(t.uid===l,r,"user-mismatch"),co._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e,n=!1){if(vn(t.app))return Promise.reject(Ir(t));const r="signIn",s=await GA(t,r,e),i=await co._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function v9(t,e){return qA(fs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t){const e=fs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function x9(t,e,n){if(vn(t.app))return Promise.reject(Ir(t));const r=fs(t),a=await my(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&KA(t),c}),l=await co._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function w9(t,e,n){return vn(t.app)?Promise.reject(Ir(t)):v9(bt(t),tl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KA(t),r})}function _9(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function E9(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function S9(t){return bt(t).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=1e3,b9=10;class YA extends QA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$A(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);z$()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b9):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YA.type="LOCAL";const N9=YA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA extends QA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XA.type="SESSION";const JA=XA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await C9(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Mx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function P9(t){Pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function A9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function R9(){return ZA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="firebaseLocalStorageDb",k9=1,Bh="firebaseLocalStorage",tj="fbase_key";class mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hf(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function D9(){const t=indexedDB.deleteDatabase(ej);return new mu(t).toPromise()}function py(){const t=indexedDB.open(ej,k9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bh,{keyPath:tj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),await D9(),e(await py()))})})}async function QE(t,e,n){const r=Hf(t,!0).put({[tj]:e,value:n});return new mu(r).toPromise()}async function O9(t,e){const n=Hf(t,!1).get(e),r=await new mu(n).toPromise();return r===void 0?null:r.value}function YE(t,e){const n=Hf(t,!0).delete(e);return new mu(n).toPromise()}const M9=800,L9=3;class nj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(R9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await A9(),!this.activeServiceWorker)return;this.sender=new I9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await QE(e,$h,"1"),await YE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>QE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>O9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hf(s,!1).getAll();return new mu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),M9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nj.type="LOCAL";const V9=nj;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e){return e?Yr(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends kx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function F9(t){return qA(t.auth,new Lx(t),t.bypassAuthState)}function U9(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),y9(n,new Lx(t),t.bypassAuthState)}async function $9(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),g9(n,new Lx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return F9;case"linkViaPopup":case"linkViaRedirect":return $9;case"reauthViaPopup":case"reauthViaRedirect":return U9;default:Gn(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new du(2e3,1e4);class Ko extends sj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=Mx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,B9.get())};e()}}Ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9="pendingRedirect",Ud=new Map;class H9 extends sj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ud.get(this.auth._key());if(!e){try{const r=await W9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W9(t,e){const n=oj(e),r=ij(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function G9(t,e){return ij(t)._set(oj(e),"true")}function q9(t,e){Ud.set(t._key(),e)}function ij(t){return Yr(t._redirectPersistence)}function oj(t){return Fd(z9,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t,e,n){return Q9(t,e,n)}async function Q9(t,e,n){if(vn(t.app))return Promise.reject(Ir(t));const r=fs(t);S$(t,e,Ox),await r._initializationPromise;const s=rj(r,n);return await G9(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function Y9(t,e){return await fs(t)._initializationPromise,aj(t,e,!1)}async function aj(t,e,n=!1){if(vn(t.app))return Promise.reject(Ir(t));const r=fs(t),s=rj(r,e),a=await new H9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9=10*60*1e3;class J9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lj(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X9&&this.cachedEventUids.clear(),this.cachedEventUids.has(XE(e))}saveEventToCache(e){this.cachedEventUids.add(XE(e)),this.lastProcessedEventTime=Date.now()}}function XE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Z9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(t,e={}){return Si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n8=/^https?/;async function r8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await e8(t);for(const n of e)try{if(s8(n))return}catch{}Gn(t,"unauthorized-domain")}function s8(t){const e=hy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!n8.test(n))return!1;if(t8.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=new du(3e4,6e4);function JE(){const t=Pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function o8(t){return new Promise((e,n)=>{var s,i,a;function r(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),n(Cr(t,"network-request-failed"))},timeout:i8.get()})}if((i=(s=Pr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Pr().gapi)!=null&&a.load)r();else{const l=J$("iframefcb");return Pr()[l]=()=>{gapi.load?r():n(Cr(t,"network-request-failed"))},zA(`${X$()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw $d=null,e})}let $d=null;function a8(t){return $d=$d||o8(t),$d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=new du(5e3,15e3),c8="__/auth/iframe",u8="emulator/auth/iframe",d8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f8(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ax(e,u8):`https://${t.config.authDomain}/${c8}`,r={apiKey:e.apiKey,appName:t.name,v:el},s=h8.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${uu(r).slice(1)}`}async function m8(t){const e=await a8(t),n=Pr().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:f8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d8,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Cr(t,"network-request-failed"),l=Pr().setTimeout(()=>{i(a)},l8.get());function c(){Pr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g8=500,y8=600,v8="_blank",x8="http://localhost";class ZE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w8(t,e,n,r=g8,s=y8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...p8,width:r.toString(),height:s.toString(),top:i,left:a},d=Gt().toLowerCase();n&&(l=MA(d)?v8:n),DA(d)&&(e=e||x8,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(B$(d)&&l!=="_self")return _8(e||"",l),new ZE(null);const f=window.open(e||"",l,h);we(f,t,"popup-blocked");try{f.focus()}catch{}return new ZE(f)}function _8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="__/auth/handler",S8="emulator/auth/handler",T8=encodeURIComponent("fac");async function eS(t,e,n,r,s,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:el,eventId:s};if(e instanceof Ox){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",aU(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof fu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${T8}=${encodeURIComponent(c)}`:"";return`${b8(t)}?${uu(l).slice(1)}${d}`}function b8({config:t}){return t.emulator?Ax(t,S8):`https://${t.authDomain}/${E8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="webStorageSupport";class N8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JA,this._completeRedirectFn=aj,this._overrideRedirectResult=q9}async _openPopup(e,n,r,s){var a;ls((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await eS(e,n,r,hy(),s);return w8(e,i,Mx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await eS(e,n,r,hy(),s);return P9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ls(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await m8(e),r=new J9(e);return n.register("authEvent",s=>(we(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_p,{type:_p},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[_p];i!==void 0&&n(!!i),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=r8(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $A()||OA()||Rx()}}const C8=N8;var tS="@firebase/auth",nS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A8(t){La(new ao("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;we(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BA(t)},d=new K$(r,s,i,c);return s9(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),La(new ao("auth-internal",e=>{const n=fs(e.getProvider("auth").getImmediate());return(r=>new I8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(tS,nS,P8(t)),Zs(tS,nS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=5*60,R8=vA("authIdTokenMaxAge")||j8;let rS=null;const k8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R8)return;const s=n==null?void 0:n.token;rS!==s&&(rS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function D8(t=TA()){const e=Cx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=r9(t,{popupRedirectResolver:C8,persistence:[V9,N9,JA]}),r=vA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=k8(i.toString());E9(n,a,()=>a(n.currentUser)),_9(n,l=>a(l))}}const s=gA("auth");return s&&i9(n,`http://${s}`),n}function O8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Q$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",O8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A8("Browser");var sS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,cj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function C(){}C.prototype=v.prototype,E.D=v.prototype,E.prototype=new C,E.prototype.constructor=E,E.C=function(A,R,k){for(var j=Array(arguments.length-2),G=2;G<arguments.length;G++)j[G-2]=arguments[G];return v.prototype[R].apply(A,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,v,C){C||(C=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(R=0;16>R;++R)A[R]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=E.g[0],C=E.g[1],R=E.g[2];var k=E.g[3],j=v+(k^C&(R^k))+A[0]+3614090360&4294967295;v=C+(j<<7&4294967295|j>>>25),j=k+(R^v&(C^R))+A[1]+3905402710&4294967295,k=v+(j<<12&4294967295|j>>>20),j=R+(C^k&(v^C))+A[2]+606105819&4294967295,R=k+(j<<17&4294967295|j>>>15),j=C+(v^R&(k^v))+A[3]+3250441966&4294967295,C=R+(j<<22&4294967295|j>>>10),j=v+(k^C&(R^k))+A[4]+4118548399&4294967295,v=C+(j<<7&4294967295|j>>>25),j=k+(R^v&(C^R))+A[5]+1200080426&4294967295,k=v+(j<<12&4294967295|j>>>20),j=R+(C^k&(v^C))+A[6]+2821735955&4294967295,R=k+(j<<17&4294967295|j>>>15),j=C+(v^R&(k^v))+A[7]+4249261313&4294967295,C=R+(j<<22&4294967295|j>>>10),j=v+(k^C&(R^k))+A[8]+1770035416&4294967295,v=C+(j<<7&4294967295|j>>>25),j=k+(R^v&(C^R))+A[9]+2336552879&4294967295,k=v+(j<<12&4294967295|j>>>20),j=R+(C^k&(v^C))+A[10]+4294925233&4294967295,R=k+(j<<17&4294967295|j>>>15),j=C+(v^R&(k^v))+A[11]+2304563134&4294967295,C=R+(j<<22&4294967295|j>>>10),j=v+(k^C&(R^k))+A[12]+1804603682&4294967295,v=C+(j<<7&4294967295|j>>>25),j=k+(R^v&(C^R))+A[13]+4254626195&4294967295,k=v+(j<<12&4294967295|j>>>20),j=R+(C^k&(v^C))+A[14]+2792965006&4294967295,R=k+(j<<17&4294967295|j>>>15),j=C+(v^R&(k^v))+A[15]+1236535329&4294967295,C=R+(j<<22&4294967295|j>>>10),j=v+(R^k&(C^R))+A[1]+4129170786&4294967295,v=C+(j<<5&4294967295|j>>>27),j=k+(C^R&(v^C))+A[6]+3225465664&4294967295,k=v+(j<<9&4294967295|j>>>23),j=R+(v^C&(k^v))+A[11]+643717713&4294967295,R=k+(j<<14&4294967295|j>>>18),j=C+(k^v&(R^k))+A[0]+3921069994&4294967295,C=R+(j<<20&4294967295|j>>>12),j=v+(R^k&(C^R))+A[5]+3593408605&4294967295,v=C+(j<<5&4294967295|j>>>27),j=k+(C^R&(v^C))+A[10]+38016083&4294967295,k=v+(j<<9&4294967295|j>>>23),j=R+(v^C&(k^v))+A[15]+3634488961&4294967295,R=k+(j<<14&4294967295|j>>>18),j=C+(k^v&(R^k))+A[4]+3889429448&4294967295,C=R+(j<<20&4294967295|j>>>12),j=v+(R^k&(C^R))+A[9]+568446438&4294967295,v=C+(j<<5&4294967295|j>>>27),j=k+(C^R&(v^C))+A[14]+3275163606&4294967295,k=v+(j<<9&4294967295|j>>>23),j=R+(v^C&(k^v))+A[3]+4107603335&4294967295,R=k+(j<<14&4294967295|j>>>18),j=C+(k^v&(R^k))+A[8]+1163531501&4294967295,C=R+(j<<20&4294967295|j>>>12),j=v+(R^k&(C^R))+A[13]+2850285829&4294967295,v=C+(j<<5&4294967295|j>>>27),j=k+(C^R&(v^C))+A[2]+4243563512&4294967295,k=v+(j<<9&4294967295|j>>>23),j=R+(v^C&(k^v))+A[7]+1735328473&4294967295,R=k+(j<<14&4294967295|j>>>18),j=C+(k^v&(R^k))+A[12]+2368359562&4294967295,C=R+(j<<20&4294967295|j>>>12),j=v+(C^R^k)+A[5]+4294588738&4294967295,v=C+(j<<4&4294967295|j>>>28),j=k+(v^C^R)+A[8]+2272392833&4294967295,k=v+(j<<11&4294967295|j>>>21),j=R+(k^v^C)+A[11]+1839030562&4294967295,R=k+(j<<16&4294967295|j>>>16),j=C+(R^k^v)+A[14]+4259657740&4294967295,C=R+(j<<23&4294967295|j>>>9),j=v+(C^R^k)+A[1]+2763975236&4294967295,v=C+(j<<4&4294967295|j>>>28),j=k+(v^C^R)+A[4]+1272893353&4294967295,k=v+(j<<11&4294967295|j>>>21),j=R+(k^v^C)+A[7]+4139469664&4294967295,R=k+(j<<16&4294967295|j>>>16),j=C+(R^k^v)+A[10]+3200236656&4294967295,C=R+(j<<23&4294967295|j>>>9),j=v+(C^R^k)+A[13]+681279174&4294967295,v=C+(j<<4&4294967295|j>>>28),j=k+(v^C^R)+A[0]+3936430074&4294967295,k=v+(j<<11&4294967295|j>>>21),j=R+(k^v^C)+A[3]+3572445317&4294967295,R=k+(j<<16&4294967295|j>>>16),j=C+(R^k^v)+A[6]+76029189&4294967295,C=R+(j<<23&4294967295|j>>>9),j=v+(C^R^k)+A[9]+3654602809&4294967295,v=C+(j<<4&4294967295|j>>>28),j=k+(v^C^R)+A[12]+3873151461&4294967295,k=v+(j<<11&4294967295|j>>>21),j=R+(k^v^C)+A[15]+530742520&4294967295,R=k+(j<<16&4294967295|j>>>16),j=C+(R^k^v)+A[2]+3299628645&4294967295,C=R+(j<<23&4294967295|j>>>9),j=v+(R^(C|~k))+A[0]+4096336452&4294967295,v=C+(j<<6&4294967295|j>>>26),j=k+(C^(v|~R))+A[7]+1126891415&4294967295,k=v+(j<<10&4294967295|j>>>22),j=R+(v^(k|~C))+A[14]+2878612391&4294967295,R=k+(j<<15&4294967295|j>>>17),j=C+(k^(R|~v))+A[5]+4237533241&4294967295,C=R+(j<<21&4294967295|j>>>11),j=v+(R^(C|~k))+A[12]+1700485571&4294967295,v=C+(j<<6&4294967295|j>>>26),j=k+(C^(v|~R))+A[3]+2399980690&4294967295,k=v+(j<<10&4294967295|j>>>22),j=R+(v^(k|~C))+A[10]+4293915773&4294967295,R=k+(j<<15&4294967295|j>>>17),j=C+(k^(R|~v))+A[1]+2240044497&4294967295,C=R+(j<<21&4294967295|j>>>11),j=v+(R^(C|~k))+A[8]+1873313359&4294967295,v=C+(j<<6&4294967295|j>>>26),j=k+(C^(v|~R))+A[15]+4264355552&4294967295,k=v+(j<<10&4294967295|j>>>22),j=R+(v^(k|~C))+A[6]+2734768916&4294967295,R=k+(j<<15&4294967295|j>>>17),j=C+(k^(R|~v))+A[13]+1309151649&4294967295,C=R+(j<<21&4294967295|j>>>11),j=v+(R^(C|~k))+A[4]+4149444226&4294967295,v=C+(j<<6&4294967295|j>>>26),j=k+(C^(v|~R))+A[11]+3174756917&4294967295,k=v+(j<<10&4294967295|j>>>22),j=R+(v^(k|~C))+A[2]+718787259&4294967295,R=k+(j<<15&4294967295|j>>>17),j=C+(k^(R|~v))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(R+(j<<21&4294967295|j>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+k&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var C=v-this.blockSize,A=this.B,R=this.h,k=0;k<v;){if(R==0)for(;k<=C;)s(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<v;)if(A[R++]=E.charCodeAt(k++),R==this.blockSize){s(this,A),R=0;break}}else for(;k<v;)if(A[R++]=E[k++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var C=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=C&255,C/=256;for(this.u(E),E=Array(16),v=C=0;4>v;++v)for(var A=0;32>A;A+=8)E[C++]=this.g[v]>>>A&255;return E};function i(E,v){var C=l;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=v(E)}function a(E,v){this.h=v;for(var C=[],A=!0,R=E.length-1;0<=R;R--){var k=E[R]|0;A&&k==v||(C[R]=k,A=!1)}this.g=C}var l={};function c(E){return-128<=E&&128>E?i(E,function(v){return new a([v|0],0>v?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return w(d(-E));for(var v=[],C=1,A=0;E>=C;A++)v[A]=E/C|0,C*=4294967296;return new a(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return w(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(v,8)),A=f,R=0;R<E.length;R+=8){var k=Math.min(8,E.length-R),j=parseInt(E.substring(R,R+k),v);8>k?(k=d(Math.pow(v,k)),A=A.j(k).add(d(j))):(A=A.j(C),A=A.add(d(j)))}return A}var f=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(x(this))return-w(this).m();for(var E=0,v=1,C=0;C<this.g.length;C++){var A=this.i(C);E+=(0<=A?A:4294967296+A)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(x(this))return"-"+w(this).toString(E);for(var v=d(Math.pow(E,6)),C=this,A="";;){var R=I(C,v).g;C=b(C,R.j(v));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(E);if(C=R,T(C))return k+A;for(;6>k.length;)k="0"+k;A=k+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function x(E){return E.h==-1}t.l=function(E){return E=b(this,E),x(E)?-1:T(E)?0:1};function w(E){for(var v=E.g.length,C=[],A=0;A<v;A++)C[A]=~E.g[A];return new a(C,~E.h).add(m)}t.abs=function(){return x(this)?w(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),C=[],A=0,R=0;R<=v;R++){var k=A+(this.i(R)&65535)+(E.i(R)&65535),j=(k>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);A=j>>>16,k&=65535,j&=65535,C[R]=j<<16|k}return new a(C,C[C.length-1]&-2147483648?-1:0)};function b(E,v){return E.add(w(v))}t.j=function(E){if(T(this)||T(E))return f;if(x(this))return x(E)?w(this).j(w(E)):w(w(this).j(E));if(x(E))return w(this.j(w(E)));if(0>this.l(y)&&0>E.l(y))return d(this.m()*E.m());for(var v=this.g.length+E.g.length,C=[],A=0;A<2*v;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<E.g.length;R++){var k=this.i(A)>>>16,j=this.i(A)&65535,G=E.i(R)>>>16,ue=E.i(R)&65535;C[2*A+2*R]+=j*ue,_(C,2*A+2*R),C[2*A+2*R+1]+=k*ue,_(C,2*A+2*R+1),C[2*A+2*R+1]+=j*G,_(C,2*A+2*R+1),C[2*A+2*R+2]+=k*G,_(C,2*A+2*R+2)}for(A=0;A<v;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=v;A<2*v;A++)C[A]=0;return new a(C,0)};function _(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function N(E,v){this.g=E,this.h=v}function I(E,v){if(T(v))throw Error("division by zero");if(T(E))return new N(f,f);if(x(E))return v=I(w(E),v),new N(w(v.g),w(v.h));if(x(v))return v=I(E,w(v)),new N(w(v.g),v.h);if(30<E.g.length){if(x(E)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var C=m,A=v;0>=A.l(E);)C=O(C),A=O(A);var R=D(C,1),k=D(A,1);for(A=D(A,2),C=D(C,2);!T(A);){var j=k.add(A);0>=j.l(E)&&(R=R.add(C),k=j),A=D(A,1),C=D(C,1)}return v=b(E,R.j(v)),new N(R,v)}for(R=f;0<=E.l(v);){for(C=Math.max(1,Math.floor(E.m()/v.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),k=d(C),j=k.j(v);x(j)||0<j.l(E);)C-=A,k=d(C),j=k.j(v);T(k)&&(k=m),R=R.add(k),E=b(E,j)}return new N(R,E)}t.A=function(E){return I(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)&E.i(A);return new a(C,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)|E.i(A);return new a(C,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),C=[],A=0;A<v;A++)C[A]=this.i(A)^E.i(A);return new a(C,this.h^E.h)};function O(E){for(var v=E.g.length+1,C=[],A=0;A<v;A++)C[A]=E.i(A)<<1|E.i(A-1)>>>31;return new a(C,E.h)}function D(E,v){var C=v>>5;v%=32;for(var A=E.g.length-C,R=[],k=0;k<A;k++)R[k]=0<v?E.i(k+C)>>>v|E.i(k+C+1)<<32-v:E.i(k+C);return new a(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cj=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ei=a}).apply(typeof sS<"u"?sS:typeof self<"u"?self:typeof window<"u"?window:{});var dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uj,Bl,dj,Bd,gy,hj,fj,mj;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,S){return u==Array.prototype||u==Object.prototype||(u[g]=S.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dd=="object"&&dd];for(var g=0;g<u.length;++g){var S=u[g];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var S=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var V=u[P];if(!(V in S))break e;S=S[V]}u=u[u.length-1],P=S[u],g=g(P),g!=P&&g!=null&&e(S,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var S=0,P=!1,V={next:function(){if(!P&&S<u.length){var B=S++;return{value:g(B,u[B]),done:!1}}return P=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return i(this,function(g,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function d(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,S){return u.call.apply(u.bind,arguments)}function f(u,g,S){if(!u)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,P),u.apply(g,V)}}return function(){return u.apply(g,arguments)}}function m(u,g,S){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(u,g){var S=Array.prototype.slice.call(arguments,1);return function(){var P=S.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function T(u,g){function S(){}S.prototype=g.prototype,u.aa=g.prototype,u.prototype=new S,u.prototype.constructor=u,u.Qb=function(P,V,B){for(var X=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)X[Ge-2]=arguments[Ge];return g.prototype[V].apply(P,X)}}function x(u){const g=u.length;if(0<g){const S=Array(g);for(let P=0;P<g;P++)S[P]=u[P];return S}return[]}function w(u,g){for(let S=1;S<arguments.length;S++){const P=arguments[S];if(c(P)){const V=u.length||0,B=P.length||0;u.length=V+B;for(let X=0;X<B;X++)u[V+X]=P[X]}else u.push(P)}}class b{constructor(g,S){this.i=g,this.j=S,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function I(u){return I[" "](u),u}I[" "]=function(){};var O=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function D(u,g,S){for(const P in u)g.call(S,u[P],P,u)}function E(u,g){for(const S in u)g.call(void 0,u[S],S,u)}function v(u){const g={};for(const S in u)g[S]=u[S];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,g){let S,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(S in P)u[S]=P[S];for(let B=0;B<C.length;B++)S=C[B],Object.prototype.hasOwnProperty.call(P,S)&&(u[S]=P[S])}}function R(u){var g=1;u=u.split(":");const S=[];for(;0<g&&u.length;)S.push(u.shift()),g--;return u.length&&S.push(u.join(":")),S}function k(u){l.setTimeout(()=>{throw u},0)}function j(){var u=$;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class G{constructor(){this.h=this.g=null}add(g,S){const P=ue.get();P.set(g,S),this.h?this.h.next=P:this.g=P,this.h=P}}var ue=new b(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(g,S){this.h=g,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,U=!1,$=new G,Y=()=>{const u=l.Promise.resolve(void 0);ie=()=>{u.then(F)}};var F=()=>{for(var u;u=j();){try{u.h.call(u.g)}catch(S){k(S)}var g=ue;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}U=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const S=()=>{};l.addEventListener("test",S,g),l.removeEventListener("test",S,g)}catch{}return u}();function Re(u,g){if(K.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var S=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(O){e:{try{I(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else S=="mouseover"?g=u.fromElement:S=="mouseout"&&(g=u.toElement);this.relatedTarget=g,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ke[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}T(Re,K);var ke={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),z=0;function J(u,g,S,P,V){this.listener=u,this.proxy=null,this.src=g,this.type=S,this.capture=!!P,this.ha=V,this.key=++z,this.da=this.fa=!1}function de(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,g,S,P,V){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var X=tt(u,g,P,V);return-1<X?(g=u[X],S||(g.fa=!1)):(g=new J(g,this.src,B,!!P,V),g.fa=S,u.push(g)),g};function Le(u,g){var S=g.type;if(S in u.g){var P=u.g[S],V=Array.prototype.indexOf.call(P,g,void 0),B;(B=0<=V)&&Array.prototype.splice.call(P,V,1),B&&(de(g),u.g[S].length==0&&(delete u.g[S],u.h--))}}function tt(u,g,S,P){for(var V=0;V<u.length;++V){var B=u[V];if(!B.da&&B.listener==g&&B.capture==!!S&&B.ha==P)return V}return-1}var Ct="closure_lm_"+(1e6*Math.random()|0),qn={};function fr(u,g,S,P,V){if(Array.isArray(g)){for(var B=0;B<g.length;B++)fr(u,g[B],S,P,V);return null}return S=Tw(S),u&&u[se]?u.K(g,S,d(P)?!!P.capture:!!P,V):Vr(u,g,S,!1,P,V)}function Vr(u,g,S,P,V,B){if(!g)throw Error("Invalid event type");var X=d(V)?!!V.capture:!!V,Ge=am(u);if(Ge||(u[Ct]=Ge=new xe(u)),S=Ge.add(g,S,P,X,B),S.proxy)return S;if(P=al(),S.proxy=P,P.src=u,P.listener=S,u.addEventListener)fe||(V=X),V===void 0&&(V=!1),u.addEventListener(g.toString(),P,V);else if(u.attachEvent)u.attachEvent(Sw(g.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return S}function al(){function u(S){return g.call(u.src,u.listener,S)}const g=xk;return u}function An(u,g,S,P,V){if(Array.isArray(g))for(var B=0;B<g.length;B++)An(u,g[B],S,P,V);else P=d(P)?!!P.capture:!!P,S=Tw(S),u&&u[se]?(u=u.i,g=String(g).toString(),g in u.g&&(B=u.g[g],S=tt(B,S,P,V),-1<S&&(de(B[S]),Array.prototype.splice.call(B,S,1),B.length==0&&(delete u.g[g],u.h--)))):u&&(u=am(u))&&(g=u.g[g.toString()],u=-1,g&&(u=tt(g,S,P,V)),(S=-1<u?g[u]:null)&&om(S))}function om(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[se])Le(g.i,u);else{var S=u.type,P=u.proxy;g.removeEventListener?g.removeEventListener(S,P,u.capture):g.detachEvent?g.detachEvent(Sw(S),P):g.addListener&&g.removeListener&&g.removeListener(P),(S=am(g))?(Le(S,u),S.h==0&&(S.src=null,g[Ct]=null)):de(u)}}}function Sw(u){return u in qn?qn[u]:qn[u]="on"+u}function xk(u,g){if(u.da)u=!0;else{g=new Re(g,this);var S=u.listener,P=u.ha||u.src;u.fa&&om(u),u=S.call(P,g)}return u}function am(u){return u=u[Ct],u instanceof xe?u:null}var lm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tw(u){return typeof u=="function"?u:(u[lm]||(u[lm]=function(g){return u.handleEvent(g)}),u[lm])}function Ot(){L.call(this),this.i=new xe(this),this.M=this,this.F=null}T(Ot,L),Ot.prototype[se]=!0,Ot.prototype.removeEventListener=function(u,g,S,P){An(this,u,g,S,P)};function qt(u,g){var S,P=u.F;if(P)for(S=[];P;P=P.F)S.push(P);if(u=u.M,P=g.type||g,typeof g=="string")g=new K(g,u);else if(g instanceof K)g.target=g.target||u;else{var V=g;g=new K(P,u),A(g,V)}if(V=!0,S)for(var B=S.length-1;0<=B;B--){var X=g.g=S[B];V=_u(X,P,!0,g)&&V}if(X=g.g=u,V=_u(X,P,!0,g)&&V,V=_u(X,P,!1,g)&&V,S)for(B=0;B<S.length;B++)X=g.g=S[B],V=_u(X,P,!1,g)&&V}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var S=u.g[g],P=0;P<S.length;P++)de(S[P]);delete u.g[g],u.h--}}this.F=null},Ot.prototype.K=function(u,g,S,P){return this.i.add(String(u),g,!1,S,P)},Ot.prototype.L=function(u,g,S,P){return this.i.add(String(u),g,!0,S,P)};function _u(u,g,S,P){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,B=0;B<g.length;++B){var X=g[B];if(X&&!X.da&&X.capture==S){var Ge=X.listener,It=X.ha||X.src;X.fa&&Le(u.i,X),V=Ge.call(It,P)!==!1&&V}}return V&&!P.defaultPrevented}function bw(u,g,S){if(typeof u=="function")S&&(u=m(u,S));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(u,g||0)}function Nw(u){u.g=bw(()=>{u.g=null,u.i&&(u.i=!1,Nw(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class wk extends L{constructor(g,S){super(),this.m=g,this.l=S,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Nw(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ll(u){L.call(this),this.h=u,this.g={}}T(ll,L);var Cw=[];function Iw(u){D(u.g,function(g,S){this.g.hasOwnProperty(S)&&om(g)},u),u.g={}}ll.prototype.N=function(){ll.aa.N.call(this),Iw(this)},ll.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cm=l.JSON.stringify,_k=l.JSON.parse,Ek=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function um(){}um.prototype.h=null;function Pw(u){return u.h||(u.h=u.i())}function Aw(){}var cl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dm(){K.call(this,"d")}T(dm,K);function hm(){K.call(this,"c")}T(hm,K);var Ni={},jw=null;function Eu(){return jw=jw||new Ot}Ni.La="serverreachability";function Rw(u){K.call(this,Ni.La,u)}T(Rw,K);function ul(u){const g=Eu();qt(g,new Rw(g))}Ni.STAT_EVENT="statevent";function kw(u,g){K.call(this,Ni.STAT_EVENT,u),this.stat=g}T(kw,K);function Kt(u){const g=Eu();qt(g,new kw(g,u))}Ni.Ma="timingevent";function Dw(u,g){K.call(this,Ni.Ma,u),this.size=g}T(Dw,K);function dl(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},g)}function hl(){this.g=!0}hl.prototype.xa=function(){this.g=!1};function Sk(u,g,S,P,V,B){u.info(function(){if(u.g)if(B)for(var X="",Ge=B.split("&"),It=0;It<Ge.length;It++){var Be=Ge[It].split("=");if(1<Be.length){var Mt=Be[0];Be=Be[1];var Lt=Mt.split("_");X=2<=Lt.length&&Lt[1]=="type"?X+(Mt+"="+Be+"&"):X+(Mt+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+g+`
`+S+`
`+X})}function Tk(u,g,S,P,V,B,X){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+g+`
`+S+`
`+B+" "+X})}function Eo(u,g,S,P){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Nk(u,S)+(P?" "+P:"")})}function bk(u,g){u.info(function(){return"TIMEOUT: "+g})}hl.prototype.info=function(){};function Nk(u,g){if(!u.g)return g;if(!g)return null;try{var S=JSON.parse(g);if(S){for(u=0;u<S.length;u++)if(Array.isArray(S[u])){var P=S[u];if(!(2>P.length)){var V=P[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return cm(S)}catch{return g}}var Su={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ow={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fm;function Tu(){}T(Tu,um),Tu.prototype.g=function(){return new XMLHttpRequest},Tu.prototype.i=function(){return{}},fm=new Tu;function ps(u,g,S,P){this.j=u,this.i=g,this.l=S,this.R=P||1,this.U=new ll(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mw}function Mw(){this.i=null,this.g="",this.h=!1}var Lw={},mm={};function pm(u,g,S){u.L=1,u.v=Iu(Fr(g)),u.m=S,u.P=!0,Vw(u,null)}function Vw(u,g){u.F=Date.now(),bu(u),u.A=Fr(u.v);var S=u.A,P=u.R;Array.isArray(P)||(P=[String(P)]),Jw(S.i,"t",P),u.C=0,S=u.j.J,u.h=new Mw,u.g=g0(u.j,S?g:null,!u.m),0<u.O&&(u.M=new wk(m(u.Y,u,u.g),u.O)),g=u.U,S=u.g,P=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(Cw[0]=V.toString()),V=Cw);for(var B=0;B<V.length;B++){var X=fr(S,V[B],P||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ul(),Sk(u.i,u.u,u.A,u.l,u.R,u.m)}ps.prototype.ca=function(u){u=u.target;const g=this.M;g&&Ur(u)==3?g.j():this.Y(u)},ps.prototype.Y=function(u){try{if(u==this.g)e:{const Lt=Ur(this.g);var g=this.g.Ba();const bo=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||i0(this.g)))){this.J||Lt!=4||g==7||(g==8||0>=bo?ul(3):ul(2)),gm(this);var S=this.g.Z();this.X=S;t:if(Fw(this)){var P=i0(this.g);u="";var V=P.length,B=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ci(this),fl(this);var X="";break t}this.h.i=new l.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,u+=this.h.i.decode(P[g],{stream:!(B&&g==V-1)});P.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=S==200,Tk(this.i,this.u,this.A,this.l,this.R,Lt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,It=this.g;if((Ge=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ge)){var Be=Ge;break t}}Be=null}if(S=Be)Eo(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ym(this,S);else{this.o=!1,this.s=3,Kt(12),Ci(this),fl(this);break e}}if(this.P){S=!0;let Kn;for(;!this.J&&this.C<X.length;)if(Kn=Ck(this,X),Kn==mm){Lt==4&&(this.s=4,Kt(14),S=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Lw){this.s=4,Kt(15),Eo(this.i,this.l,X,"[Invalid Chunk]"),S=!1;break}else Eo(this.i,this.l,Kn,null),ym(this,Kn);if(Fw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||X.length!=0||this.h.h||(this.s=1,Kt(16),S=!1),this.o=this.o&&S,!S)Eo(this.i,this.l,X,"[Invalid Chunked Response]"),Ci(this),fl(this);else if(0<X.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Sm(Mt),Mt.M=!0,Kt(11))}}else Eo(this.i,this.l,X,null),ym(this,X);Lt==4&&Ci(this),this.o&&!this.J&&(Lt==4?h0(this.j,this):(this.o=!1,bu(this)))}else Hk(this.g),S==400&&0<X.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Ci(this),fl(this)}}}catch{}finally{}};function Fw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ck(u,g){var S=u.C,P=g.indexOf(`
`,S);return P==-1?mm:(S=Number(g.substring(S,P)),isNaN(S)?Lw:(P+=1,P+S>g.length?mm:(g=g.slice(P,P+S),u.C=P+S,g)))}ps.prototype.cancel=function(){this.J=!0,Ci(this)};function bu(u){u.S=Date.now()+u.I,Uw(u,u.I)}function Uw(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=dl(m(u.ba,u),g)}function gm(u){u.B&&(l.clearTimeout(u.B),u.B=null)}ps.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(bk(this.i,this.A),this.L!=2&&(ul(),Kt(17)),Ci(this),this.s=2,fl(this)):Uw(this,this.S-u)};function fl(u){u.j.G==0||u.J||h0(u.j,u)}function Ci(u){gm(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Iw(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ym(u,g){try{var S=u.j;if(S.G!=0&&(S.g==u||vm(S.h,u))){if(!u.K&&vm(S.h,u)&&S.G==3){try{var P=S.Da.g.parse(g)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<u.F)Du(S),Ru(S);else break e;Em(S),Kt(18)}}else S.za=V[1],0<S.za-S.T&&37500>V[2]&&S.F&&S.v==0&&!S.C&&(S.C=dl(m(S.Za,S),6e3));if(1>=zw(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Pi(S,11)}else if((u.K||S.g==u)&&Du(S),!_(g))for(V=S.Da.g.parse(g),g=0;g<V.length;g++){let Be=V[g];if(S.T=Be[0],Be=Be[1],S.G==2)if(Be[0]=="c"){S.K=Be[1],S.ia=Be[2];const Mt=Be[3];Mt!=null&&(S.la=Mt,S.j.info("VER="+S.la));const Lt=Be[4];Lt!=null&&(S.Aa=Lt,S.j.info("SVER="+S.Aa));const bo=Be[5];bo!=null&&typeof bo=="number"&&0<bo&&(P=1.5*bo,S.L=P,S.j.info("backChannelRequestTimeoutMs_="+P)),P=S;const Kn=u.g;if(Kn){const Mu=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mu){var B=P.h;B.g||Mu.indexOf("spdy")==-1&&Mu.indexOf("quic")==-1&&Mu.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(xm(B,B.h),B.h=null))}if(P.D){const Tm=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Tm&&(P.ya=Tm,Qe(P.I,P.D,Tm))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-u.F,S.j.info("Handshake RTT: "+S.R+"ms")),P=S;var X=u;if(P.qa=p0(P,P.J?P.ia:null,P.W),X.K){Hw(P.h,X);var Ge=X,It=P.L;It&&(Ge.I=It),Ge.B&&(gm(Ge),bu(Ge)),P.g=X}else u0(P);0<S.i.length&&ku(S)}else Be[0]!="stop"&&Be[0]!="close"||Pi(S,7);else S.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Pi(S,7):_m(S):Be[0]!="noop"&&S.l&&S.l.ta(Be),S.v=0)}}ul(4)}catch{}}var Ik=class{constructor(u,g){this.g=u,this.map=g}};function $w(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zw(u){return u.h?1:u.g?u.g.size:0}function vm(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function xm(u,g){u.g?u.g.add(g):u.h=g}function Hw(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}$w.prototype.cancel=function(){if(this.i=Ww(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ww(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const S of u.g.values())g=g.concat(S.D);return g}return x(u.i)}function Pk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var g=[],S=u.length,P=0;P<S;P++)g.push(u[P]);return g}g=[],S=0;for(P in u)g[S++]=u[P];return g}function Ak(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var g=[];u=u.length;for(var S=0;S<u;S++)g.push(S);return g}g=[],S=0;for(const P in u)g[S++]=P;return g}}}function Gw(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var S=Ak(u),P=Pk(u),V=P.length,B=0;B<V;B++)g.call(void 0,P[B],S&&S[B],u)}var qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jk(u,g){if(u){u=u.split("&");for(var S=0;S<u.length;S++){var P=u[S].indexOf("="),V=null;if(0<=P){var B=u[S].substring(0,P);V=u[S].substring(P+1)}else B=u[S];g(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ii(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ii){this.h=u.h,Nu(this,u.j),this.o=u.o,this.g=u.g,Cu(this,u.s),this.l=u.l;var g=u.i,S=new gl;S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),Kw(this,S),this.m=u.m}else u&&(g=String(u).match(qw))?(this.h=!1,Nu(this,g[1]||"",!0),this.o=ml(g[2]||""),this.g=ml(g[3]||"",!0),Cu(this,g[4]),this.l=ml(g[5]||"",!0),Kw(this,g[6]||"",!0),this.m=ml(g[7]||"")):(this.h=!1,this.i=new gl(null,this.h))}Ii.prototype.toString=function(){var u=[],g=this.j;g&&u.push(pl(g,Qw,!0),":");var S=this.g;return(S||g=="file")&&(u.push("//"),(g=this.o)&&u.push(pl(g,Qw,!0),"@"),u.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&u.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&u.push("/"),u.push(pl(S,S.charAt(0)=="/"?Dk:kk,!0))),(S=this.i.toString())&&u.push("?",S),(S=this.m)&&u.push("#",pl(S,Mk)),u.join("")};function Fr(u){return new Ii(u)}function Nu(u,g,S){u.j=S?ml(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Cu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Kw(u,g,S){g instanceof gl?(u.i=g,Lk(u.i,u.h)):(S||(g=pl(g,Ok)),u.i=new gl(g,u.h))}function Qe(u,g,S){u.i.set(g,S)}function Iu(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ml(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function pl(u,g,S){return typeof u=="string"?(u=encodeURI(u).replace(g,Rk),S&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Rk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qw=/[#\/\?@]/g,kk=/[#\?:]/g,Dk=/[#\?]/g,Ok=/[#\?@]/g,Mk=/#/g;function gl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function gs(u){u.g||(u.g=new Map,u.h=0,u.i&&jk(u.i,function(g,S){u.add(decodeURIComponent(g.replace(/\+/g," ")),S)}))}t=gl.prototype,t.add=function(u,g){gs(this),this.i=null,u=So(this,u);var S=this.g.get(u);return S||this.g.set(u,S=[]),S.push(g),this.h+=1,this};function Yw(u,g){gs(u),g=So(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Xw(u,g){return gs(u),g=So(u,g),u.g.has(g)}t.forEach=function(u,g){gs(this),this.g.forEach(function(S,P){S.forEach(function(V){u.call(g,V,P,this)},this)},this)},t.na=function(){gs(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),S=[];for(let P=0;P<g.length;P++){const V=u[P];for(let B=0;B<V.length;B++)S.push(g[P])}return S},t.V=function(u){gs(this);let g=[];if(typeof u=="string")Xw(this,u)&&(g=g.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let S=0;S<u.length;S++)g=g.concat(u[S])}return g},t.set=function(u,g){return gs(this),this.i=null,u=So(this,u),Xw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Jw(u,g,S){Yw(u,g),0<S.length&&(u.i=null,u.g.set(So(u,g),x(S)),u.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var S=0;S<g.length;S++){var P=g[S];const B=encodeURIComponent(String(P)),X=this.V(P);for(P=0;P<X.length;P++){var V=B;X[P]!==""&&(V+="="+encodeURIComponent(String(X[P]))),u.push(V)}}return this.i=u.join("&")};function So(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Lk(u,g){g&&!u.j&&(gs(u),u.i=null,u.g.forEach(function(S,P){var V=P.toLowerCase();P!=V&&(Yw(this,P),Jw(this,V,S))},u)),u.j=g}function Vk(u,g){const S=new hl;if(l.Image){const P=new Image;P.onload=y(ys,S,"TestLoadImage: loaded",!0,g,P),P.onerror=y(ys,S,"TestLoadImage: error",!1,g,P),P.onabort=y(ys,S,"TestLoadImage: abort",!1,g,P),P.ontimeout=y(ys,S,"TestLoadImage: timeout",!1,g,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else g(!1)}function Fk(u,g){const S=new hl,P=new AbortController,V=setTimeout(()=>{P.abort(),ys(S,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:P.signal}).then(B=>{clearTimeout(V),B.ok?ys(S,"TestPingServer: ok",!0,g):ys(S,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ys(S,"TestPingServer: error",!1,g)})}function ys(u,g,S,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(S)}catch{}}function Uk(){this.g=new Ek}function $k(u,g,S){const P=S||"";try{Gw(u,function(V,B){let X=V;d(V)&&(X=cm(V)),g.push(P+B+"="+encodeURIComponent(X))})}catch(V){throw g.push(P+"type="+encodeURIComponent("_badmap")),V}}function Pu(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Pu,um),Pu.prototype.g=function(){return new Au(this.l,this.j)},Pu.prototype.i=function(u){return function(){return u}}({});function Au(u,g){Ot.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Au,Ot),t=Au.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,vl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yl(this):vl(this),this.readyState==3&&Zw(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,yl(this))},t.Qa=function(u){this.g&&(this.response=u,yl(this))},t.ga=function(){this.g&&yl(this)};function yl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,vl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var S=g.next();!S.done;)S=S.value,u.push(S[0]+": "+S[1]),S=g.next();return u.join(`\r
`)};function vl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function e0(u){let g="";return D(u,function(S,P){g+=P,g+=":",g+=S,g+=`\r
`}),g}function wm(u,g,S){e:{for(P in S){var P=!1;break e}P=!0}P||(S=e0(S),typeof u=="string"?S!=null&&encodeURIComponent(String(S)):Qe(u,g,S))}function ot(u){Ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(ot,Ot);var Bk=/^https?$/i,zk=["POST","PUT"];t=ot.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,S,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fm.g(),this.v=this.o?Pw(this.o):Pw(fm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){t0(this,B);return}if(u=S||"",S=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)S.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const B of P.keys())S.set(B,P.get(B));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(S.keys()).find(B=>B.toLowerCase()=="content-type"),V=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(zk,g,void 0))||P||V||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of S)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{s0(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){t0(this,B)}};function t0(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,n0(u),ju(u)}function n0(u){u.A||(u.A=!0,qt(u,"complete"),qt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,qt(this,"complete"),qt(this,"abort"),ju(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ju(this,!0)),ot.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?r0(this):this.bb())},t.bb=function(){r0(this)};function r0(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Ur(u)!=4||u.Z()!=2)){if(u.u&&Ur(u)==4)bw(u.Ea,0,u);else if(qt(u,"readystatechange"),Ur(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var S;if(!(S=g)){var P;if(P=X===0){var V=String(u.D).match(qw)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),P=!Bk.test(V?V.toLowerCase():"")}S=P}if(S)qt(u,"complete"),qt(u,"success");else{u.m=6;try{var B=2<Ur(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",n0(u)}}finally{ju(u)}}}}function ju(u,g){if(u.g){s0(u);const S=u.g,P=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||qt(u,"ready");try{S.onreadystatechange=P}catch{}}}function s0(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ur(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),_k(g)}};function i0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Hk(u){const g={};u=(u.g&&2<=Ur(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(_(u[P]))continue;var S=R(u[P]);const V=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const B=g[V]||[];g[V]=B,B.push(S)}E(g,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xl(u,g,S){return S&&S.internalChannelParams&&S.internalChannelParams[u]||g}function o0(u){this.Aa=0,this.i=[],this.j=new hl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xl("baseRetryDelayMs",5e3,u),this.cb=xl("retryDelaySeedMs",1e4,u),this.Wa=xl("forwardChannelMaxRetries",2,u),this.wa=xl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $w(u&&u.concurrentRequestLimit),this.Da=new Uk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=o0.prototype,t.la=8,t.G=1,t.connect=function(u,g,S,P){Kt(0),this.W=u,this.H=g||{},S&&P!==void 0&&(this.H.OSID=S,this.H.OAID=P),this.F=this.X,this.I=p0(this,null,this.W),ku(this)};function _m(u){if(a0(u),u.G==3){var g=u.U++,S=Fr(u.I);if(Qe(S,"SID",u.K),Qe(S,"RID",g),Qe(S,"TYPE","terminate"),wl(u,S),g=new ps(u,u.j,g),g.L=2,g.v=Iu(Fr(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!S&&l.Image&&(new Image().src=g.v,S=!0),S||(g.g=g0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),bu(g)}m0(u)}function Ru(u){u.g&&(Sm(u),u.g.cancel(),u.g=null)}function a0(u){Ru(u),u.u&&(l.clearTimeout(u.u),u.u=null),Du(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function ku(u){if(!Bw(u.h)&&!u.s){u.s=!0;var g=u.Ga;ie||Y(),U||(ie(),U=!0),$.add(g,u),u.B=0}}function Wk(u,g){return zw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=dl(m(u.Ga,u,g),f0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new ps(this,this.j,u);let B=this.o;if(this.S&&(B?(B=v(B),A(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var g=0,S=0;S<this.i.length;S++){t:{var P=this.i[S];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(g+=P,4096<g){g=S;break e}if(g===4096||S===this.i.length-1){g=S+1;break e}}g=1e3}else g=1e3;g=c0(this,V,g),S=Fr(this.I),Qe(S,"RID",u),Qe(S,"CVER",22),this.D&&Qe(S,"X-HTTP-Session-Id",this.D),wl(this,S),B&&(this.O?g="headers="+encodeURIComponent(String(e0(B)))+"&"+g:this.m&&wm(S,this.m,B)),xm(this.h,V),this.Ua&&Qe(S,"TYPE","init"),this.P?(Qe(S,"$req",g),Qe(S,"SID","null"),V.T=!0,pm(V,S,null)):pm(V,S,g),this.G=2}}else this.G==3&&(u?l0(this,u):this.i.length==0||Bw(this.h)||l0(this))};function l0(u,g){var S;g?S=g.l:S=u.U++;const P=Fr(u.I);Qe(P,"SID",u.K),Qe(P,"RID",S),Qe(P,"AID",u.T),wl(u,P),u.m&&u.o&&wm(P,u.m,u.o),S=new ps(u,u.j,S,u.B+1),u.m===null&&(S.H=u.o),g&&(u.i=g.D.concat(u.i)),g=c0(u,S,1e3),S.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xm(u.h,S),pm(S,P,g)}function wl(u,g){u.H&&D(u.H,function(S,P){Qe(g,P,S)}),u.l&&Gw({},function(S,P){Qe(g,P,S)})}function c0(u,g,S){S=Math.min(u.i.length,S);var P=u.l?m(u.l.Na,u.l,u):null;e:{var V=u.i;let B=-1;for(;;){const X=["count="+S];B==-1?0<S?(B=V[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Ge=!0;for(let It=0;It<S;It++){let Be=V[It].g;const Mt=V[It].map;if(Be-=B,0>Be)B=Math.max(0,V[It].g-100),Ge=!1;else try{$k(Mt,X,"req"+Be+"_")}catch{P&&P(Mt)}}if(Ge){P=X.join("&");break e}}}return u=u.i.splice(0,S),g.D=u,P}function u0(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ie||Y(),U||(ie(),U=!0),$.add(g,u),u.v=0}}function Em(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=dl(m(u.Fa,u),f0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,d0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=dl(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Ru(this),d0(this))};function Sm(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function d0(u){u.g=new ps(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=Fr(u.qa);Qe(g,"RID","rpc"),Qe(g,"SID",u.K),Qe(g,"AID",u.T),Qe(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(g,"TO",u.ja),Qe(g,"TYPE","xmlhttp"),wl(u,g),u.m&&u.o&&wm(g,u.m,u.o),u.L&&(u.g.I=u.L);var S=u.g;u=u.ia,S.L=1,S.v=Iu(Fr(g)),S.m=null,S.P=!0,Vw(S,u)}t.Za=function(){this.C!=null&&(this.C=null,Ru(this),Em(this),Kt(19))};function Du(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function h0(u,g){var S=null;if(u.g==g){Du(u),Sm(u),u.g=null;var P=2}else if(vm(u.h,g))S=g.D,Hw(u.h,g),P=1;else return;if(u.G!=0){if(g.o)if(P==1){S=g.m?g.m.length:0,g=Date.now()-g.F;var V=u.B;P=Eu(),qt(P,new Dw(P,S)),ku(u)}else u0(u);else if(V=g.s,V==3||V==0&&0<g.X||!(P==1&&Wk(u,g)||P==2&&Em(u)))switch(S&&0<S.length&&(g=u.h,g.i=g.i.concat(S)),V){case 1:Pi(u,5);break;case 4:Pi(u,10);break;case 3:Pi(u,6);break;default:Pi(u,2)}}}function f0(u,g){let S=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(S*=2),S*g}function Pi(u,g){if(u.j.info("Error code "+g),g==2){var S=m(u.fb,u),P=u.Xa;const V=!P;P=new Ii(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Nu(P,"https"),Iu(P),V?Vk(P.toString(),S):Fk(P.toString(),S)}else Kt(2);u.G=0,u.l&&u.l.sa(g),m0(u),a0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function m0(u){if(u.G=0,u.ka=[],u.l){const g=Ww(u.h);(g.length!=0||u.i.length!=0)&&(w(u.ka,g),w(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function p0(u,g,S){var P=S instanceof Ii?Fr(S):new Ii(S);if(P.g!="")g&&(P.g=g+"."+P.g),Cu(P,P.s);else{var V=l.location;P=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var B=new Ii(null);P&&Nu(B,P),g&&(B.g=g),V&&Cu(B,V),S&&(B.l=S),P=B}return S=u.D,g=u.ya,S&&g&&Qe(P,S,g),Qe(P,"VER",u.la),wl(u,P),P}function g0(u,g,S){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new ot(new Pu({eb:S})):new ot(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y0(){}t=y0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ou(){}Ou.prototype.g=function(u,g){return new mn(u,g)};function mn(u,g){Ot.call(this),this.g=new o0(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!_(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new To(this)}T(mn,Ot),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){_m(this.g)},mn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var S={};S.__data__=u,u=S}else this.u&&(S={},S.__data__=cm(u),u=S);g.i.push(new Ik(g.Ya++,u)),g.G==3&&ku(g)},mn.prototype.N=function(){this.g.l=null,delete this.j,_m(this.g),delete this.g,mn.aa.N.call(this)};function v0(u){dm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const S in g){u=S;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(v0,dm);function x0(){hm.call(this),this.status=1}T(x0,hm);function To(u){this.g=u}T(To,y0),To.prototype.ua=function(){qt(this.g,"a")},To.prototype.ta=function(u){qt(this.g,new v0(u))},To.prototype.sa=function(u){qt(this.g,new x0)},To.prototype.ra=function(){qt(this.g,"b")},Ou.prototype.createWebChannel=Ou.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,mj=function(){return new Ou},fj=function(){return Eu()},hj=Ni,gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,Bd=Su,Ow.COMPLETE="complete",dj=Ow,Aw.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Bl=Aw,ot.prototype.listenOnce=ot.prototype.L,ot.prototype.getLastError=ot.prototype.Ka,ot.prototype.getLastErrorCode=ot.prototype.Ba,ot.prototype.getStatus=ot.prototype.Z,ot.prototype.getResponseJson=ot.prototype.Oa,ot.prototype.getResponseText=ot.prototype.oa,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Ha,uj=ot}).apply(typeof dd<"u"?dd:typeof self<"u"?self:typeof window<"u"?window:{});const iS="@firebase/firestore",oS="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new bx("@firebase/firestore");function Ao(){return uo.logLevel}function le(t,...e){if(uo.logLevel<=De.DEBUG){const n=e.map(Vx);uo.debug(`Firestore (${nl}): ${t}`,...n)}}function cs(t,...e){if(uo.logLevel<=De.ERROR){const n=e.map(Vx);uo.error(`Firestore (${nl}): ${t}`,...n)}}function Va(t,...e){if(uo.logLevel<=De.WARN){const n=e.map(Vx);uo.warn(`Firestore (${nl}): ${t}`,...n)}}function Vx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pj(t,r,n)}function pj(t,e,n){let r=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cs(r),new Error(r)}function He(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||pj(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class L8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V8{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string",31837,{l:r}),new gj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class F8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const r=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,le("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new aS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new aS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=B8(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function yy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ep(s)===Ep(i)?Oe(s,i):Ep(s)?1:-1}return Oe(t.length,e.length)}const z8=55296,H8=57343;function Ep(t){const e=t.charCodeAt(0);return e>=z8&&e<=H8}function Fa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="__name__";class yr{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=yr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Oe(e.length,n.length)}static compareSegments(e,n){const r=yr.isNumericId(e),s=yr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?yr.extractNumericId(e).compare(yr.extractNumericId(n)):yy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}}class qe extends yr{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const W8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends yr{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return W8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lS}static keyField(){return new jt([lS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(qe.fromString(e))}static fromName(e){return new me(qe.fromString(e).popFirst(5))}static empty(){return new me(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e,n){if(!n)throw new oe(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G8(t,e,n,r){if(e===!0&&r===!0)throw new oe(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cS(t){if(!me.isDocumentKey(t))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uS(t){if(me.isDocumentKey(t))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function Zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wf(t);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function pu(t,e){if(!vj(t))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new oe(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=-62135596800,hS=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hS);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dS)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hS}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pu(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:pt("string",Je._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Je(0,0))}static max(){return new Se(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=-1;function q8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ui(s,me.empty(),e)}function K8(t){return new ui(t.readTime,t.key,Dc)}class ui{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ui(Se.min(),me.empty(),Dc)}static max(){return new ui(Se.max(),me.empty(),Dc)}}function Q8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==Y8)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function J8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=-1;function qf(t){return t==null}function zh(t){return t===0&&1/t==-1/0}function Z8(t){return typeof t=="number"&&Number.isInteger(t)&&!zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="";function eB(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fS(e)),e=tB(t.get(n),e);return fS(e)}function tB(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case xj:n+="";break;default:n+=i}}return n}function fS(t){return t+xj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ti(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new At(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new En([])}unionWith(e){let n=new wt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _j("Invalid base64 string: "+i):i}}(e);return new Dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dt.EMPTY_BYTE_STRING=new Dt("");const nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(He(!!t,39018),typeof t=="string"){let e=0;const n=nB.exec(t);if(He(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hi(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="server_timestamp",Sj="__type__",Tj="__previous_value__",bj="__local_write_time__";function $x(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Sj])==null?void 0:r.stringValue)===Ej}function Kf(t){const e=t.mapValue.fields[Tj];return $x(e)?Kf(e):e}function Oc(t){const e=di(t.mapValue.fields[bj].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Hh="(default)";class Mc{constructor(e,n){this.projectId=e,this.database=n||Hh}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===Hh}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__type__",Cj="__max__",fd={mapValue:{fields:{__type__:{stringValue:Cj}}}},Ij="__vector__",Wh="value";function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$x(t)?4:iB(t)?9007199254740991:sB(t)?10:11:_e(28295,{value:t})}function Or(t,e){if(t===e)return!0;const n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oc(t).isEqual(Oc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=di(s.timestampValue),l=di(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hi(s.bytesValue).isEqual(hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=ct(s.doubleValue),l=ct(i.doubleValue);return a===l?zh(a)===zh(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Fa(t.arrayValue.values||[],e.arrayValue.values||[],Or);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mS(a)!==mS(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Or(a[c],l[c])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function Lc(t,e){return(t.values||[]).find(n=>Or(n,e))!==void 0}function Ua(t,e){if(t===e)return 0;const n=fi(t),r=fi(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ct(i.integerValue||i.doubleValue),c=ct(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return gS(t.timestampValue,e.timestampValue);case 4:return gS(Oc(t),Oc(e));case 5:return yy(t.stringValue,e.stringValue);case 6:return function(i,a){const l=hi(i),c=hi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Oe(l[d],c[d]);if(h!==0)return h}return Oe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Oe(ct(i.latitude),ct(a.latitude));return l!==0?l:Oe(ct(i.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yS(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,y,T,x;const l=i.fields||{},c=a.fields||{},d=(m=l[Wh])==null?void 0:m.arrayValue,h=(y=c[Wh])==null?void 0:y.arrayValue,f=Oe(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return f!==0?f:yS(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===fd.mapValue&&a===fd.mapValue)return 0;if(i===fd.mapValue)return 1;if(a===fd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=yy(c[f],h[f]);if(m!==0)return m;const y=Ua(l[c[f]],d[h[f]]);if(y!==0)return y}return Oe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function gS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=di(t),r=di(e),s=Oe(n.seconds,r.seconds);return s!==0?s:Oe(n.nanos,r.nanos)}function yS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ua(n[s],r[s]);if(i)return i}return Oe(n.length,r.length)}function $a(t){return vy(t)}function vy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${vy(n.fields[a])}`;return s+"}"}(t.mapValue):_e(61005,{value:t})}function zd(t){switch(fi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(t);return e?16+zd(e):16;case 5:return 2*t.stringValue.length;case 6:return hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+zd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ti(r.fields,(i,a)=>{s+=i.length+zd(a)}),s}(t.mapValue);default:throw _e(13486,{value:t})}}function vS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xy(t){return!!t&&"integerValue"in t}function Bx(t){return!!t&&"arrayValue"in t}function xS(t){return!!t&&"nullValue"in t}function wS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hd(t){return!!t&&"mapValue"in t}function sB(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Nj])==null?void 0:r.stringValue)===Ij}function ic(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ic(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return{...t}}function iB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Cj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=jt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ic(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ti(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ln(ic(this.value))}}function Pj(t){const e=[];return Ti(t.fields,(n,r)=>{const s=new jt([n]);if(Hd(r)){const i=Pj(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,Se.min(),Se.min(),Se.min(),ln.empty(),0)}static newFoundDocument(e,n,r,s){return new Ht(e,1,n,Se.min(),r,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,Se.min(),Se.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,Se.min(),Se.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.position=e,this.inclusive=n}}function _S(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(a.referenceValue),n.key):r=Ua(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ES(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Or(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function oB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{}class mt extends Aj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lB(e,n,r):n==="array-contains"?new dB(e,r):n==="in"?new hB(e,r):n==="not-in"?new fB(e,r):n==="array-contains-any"?new mB(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cB(e,r):new uB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ua(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(Ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends Aj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dr(e,n)}matches(e){return jj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jj(t){return t.op==="and"}function Rj(t){return aB(t)&&jj(t)}function aB(t){for(const e of t.filters)if(e instanceof dr)return!1;return!0}function wy(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(Rj(t))return t.filters.map(e=>wy(e)).join(",");{const e=t.filters.map(n=>wy(n)).join(",");return`${t.op}(${e})`}}function kj(t,e){return t instanceof mt?function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&Or(r.value,s.value)}(t,e):t instanceof dr?function(r,s){return s instanceof dr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&kj(a,s.filters[l]),!0):!1}(t,e):void _e(19439)}function Dj(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`}(t):t instanceof dr?function(n){return n.op.toString()+" {"+n.getFilters().map(Dj).join(" ,")+"}"}(t):"Filter"}class lB extends mt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class cB extends mt{constructor(e,n){super(e,"in",n),this.keys=Oj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uB extends mt{constructor(e,n){super(e,"not-in",n),this.keys=Oj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Oj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class dB extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bx(n)&&Lc(n.arrayValue,this.value)}}class hB extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class fB extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class mB extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function SS(t,e=null,n=[],r=[],s=null,i=null,a=null){return new pB(t,e,n,r,s,i,a)}function zx(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$a(r)).join(",")),e.Te=n}return e.Te}function Hx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ES(t.startAt,e.startAt)&&ES(t.endAt,e.endAt)}function _y(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gB(t,e,n,r,s,i,a,l){return new il(t,e,n,r,s,i,a,l)}function Wx(t){return new il(t)}function TS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mj(t){return t.collectionGroup!==null}function oc(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new wt(jt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Vc(i,r))}),n.has(jt.keyField().canonicalString())||e.Ie.push(new Vc(jt.keyField(),r))}return e.Ie}function Ar(t){const e=Te(t);return e.Ee||(e.Ee=yB(e,oc(t))),e.Ee}function yB(t,e){if(t.limitType==="F")return SS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vc(s.field,i)});const n=t.endAt?new Gh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gh(t.startAt.position,t.startAt.inclusive):null;return SS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sy(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qf(t,e){return Hx(Ar(t),Ar(e))&&t.limitType===e.limitType}function Lj(t){return`${zx(Ar(t))}|lt:${t.limitType}`}function jo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Dj(s)).join(", ")}]`),qf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$a(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$a(s)).join(",")),`Target(${r})`}(Ar(t))}; limitType=${t.limitType})`}function Yf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=_S(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,oc(r),s)||r.endAt&&!function(a,l,c){const d=_S(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,oc(r),s))}(t,e)}function vB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Vj(t){return(e,n)=>{let r=!1;for(const s of oc(t)){const i=xB(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xB(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ua(c,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=new it(me.comparator);function us(){return wB}const Fj=new it(me.comparator);function zl(...t){let e=Fj;for(const n of t)e=e.insert(n.key,n);return e}function Uj(t){let e=Fj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mi(){return ac()}function $j(){return ac()}function ac(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const _B=new it(me.comparator),EB=new wt(me.comparator);function Me(...t){let e=EB;for(const n of t)e=e.add(n);return e}const SB=new wt(Oe);function TB(){return SB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function Bj(t){return{integerValue:""+t}}function bB(t,e){return Z8(e)?Bj(e):Gx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function NB(t,e,n){return t instanceof qh?function(s,i){const a={fields:{[Sj]:{stringValue:Ej},[bj]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$x(i)&&(i=Kf(i)),i&&(a.fields[Tj]=i),{mapValue:a}}(n,e):t instanceof Fc?Hj(t,e):t instanceof Uc?Wj(t,e):function(s,i){const a=zj(s,i),l=bS(a)+bS(s.Ae);return xy(a)&&xy(s.Ae)?Bj(l):Gx(s.serializer,l)}(t,e)}function CB(t,e,n){return t instanceof Fc?Hj(t,e):t instanceof Uc?Wj(t,e):n}function zj(t,e){return t instanceof Kh?function(r){return xy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qh extends Xf{}class Fc extends Xf{constructor(e){super(),this.elements=e}}function Hj(t,e){const n=Gj(e);for(const r of t.elements)n.some(s=>Or(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uc extends Xf{constructor(e){super(),this.elements=e}}function Wj(t,e){let n=Gj(e);for(const r of t.elements)n=n.filter(s=>!Or(s,r));return{arrayValue:{values:n}}}class Kh extends Xf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bS(t){return ct(t.integerValue||t.doubleValue)}function Gj(t){return Bx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IB(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fc&&s instanceof Fc||r instanceof Uc&&s instanceof Uc?Fa(r.elements,s.elements,Or):r instanceof Kh&&s instanceof Kh?Or(r.Ae,s.Ae):r instanceof qh&&s instanceof qh}(t.transform,e.transform)}class PB{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jf{}function qj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qx(t.key,ar.none()):new gu(t.key,t.data,ar.none());{const n=t.data,r=ln.empty();let s=new wt(jt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new bi(t.key,r,new En(s.toArray()),ar.none())}}function AB(t,e,n){t instanceof gu?function(s,i,a){const l=s.value.clone(),c=CS(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof bi?function(s,i,a){if(!Wd(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=CS(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Kj(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function lc(t,e,n,r){return t instanceof gu?function(i,a,l,c){if(!Wd(i.precondition,a))return l;const d=i.value.clone(),h=IS(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof bi?function(i,a,l,c){if(!Wd(i.precondition,a))return l;const d=IS(i.fieldTransforms,c,a),h=a.data;return h.setAll(Kj(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return Wd(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function jB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zj(r.transform,s||null);i!=null&&(n===null&&(n=ln.empty()),n.set(r.field,i))}return n||null}function NS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fa(r,s,(i,a)=>IB(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gu extends Jf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bi extends Jf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function CS(t,e,n){const r=new Map;He(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,CB(a,l,n[s]))}return r}function IS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,NB(i,a,e))}return r}class qx extends Jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RB extends Jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&AB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$j();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=qj(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Fa(this.mutations,e.mutations,(n,r)=>NS(n,r))&&Fa(this.baseMutations,e.baseMutations,(n,r)=>NS(n,r))}}class Kx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){He(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return _B}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Kx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Fe;function MB(t){switch(t){case H.OK:return _e(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Qj(t){if(t===void 0)return cs("GRPC error has no .code"),H.UNKNOWN;switch(t){case ht.OK:return H.OK;case ht.CANCELLED:return H.CANCELLED;case ht.UNKNOWN:return H.UNKNOWN;case ht.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case ht.INTERNAL:return H.INTERNAL;case ht.UNAVAILABLE:return H.UNAVAILABLE;case ht.UNAUTHENTICATED:return H.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case ht.NOT_FOUND:return H.NOT_FOUND;case ht.ALREADY_EXISTS:return H.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return H.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case ht.ABORTED:return H.ABORTED;case ht.OUT_OF_RANGE:return H.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return H.UNIMPLEMENTED;case ht.DATA_LOSS:return H.DATA_LOSS;default:return _e(39323,{code:t})}}(Fe=ht||(ht={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new ei([4294967295,4294967295],0);function PS(t){const e=LB().encode(t),n=new cj;return n.update(e),new Uint8Array(n.digest())}function AS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ei([n,r],0),new ei([s,i],0)]}class Qx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(r<0)throw new Hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ei.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ei.fromNumber(r)));return s.compare(VB)===1&&(s=new ei([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=PS(e),[r,s]=AS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Qx(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=PS(e),[r,s]=AS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zf(Se.min(),s,new it(Oe),us(),Me())}}class yu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yu(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Yj{constructor(e,n){this.targetId=e,this.Ce=n}}class Xj{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jS{constructor(){this.ve=0,this.Fe=RS(),this.Me=Dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),r=Me();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_e(38017,{changeType:i})}}),new yu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=RS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FB{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=md(),this.He=md(),this.Ye=new it(Oe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(_y(i))if(r===0){const a=new me(i.path);this.et(n,a,Ht.newNoDocument(a,Se.min()))}else He(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=hi(r).toUint8Array()}catch(c){if(c instanceof _j)return Va("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qx(a,s,i)}catch(c){return Va(c instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&_y(l.target)){const c=new me(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Ht.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Me();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Zf(e,n,this.Ye,this.je,r);return this.je=us(),this.Je=md(),this.He=md(),this.Ye=new it(Oe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new jS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wt(Oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wt(Oe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function md(){return new it(me.comparator)}function RS(){return new it(me.comparator)}const UB={asc:"ASCENDING",desc:"DESCENDING"},$B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BB={and:"AND",or:"OR"};class zB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ty(t,e){return t.useProto3Json||qf(e)?e:{value:e}}function Qh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HB(t,e){return Qh(t,e.toTimestamp())}function jr(t){return He(!!t,49232),Se.fromTimestamp(function(n){const r=di(n);return new Je(r.seconds,r.nanos)}(t))}function Yx(t,e){return by(t,e).canonicalString()}function by(t,e){const n=function(s){return new qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zj(t){const e=qe.fromString(t);return He(sR(e),10190,{key:e.toString()}),e}function Ny(t,e){return Yx(t.databaseId,e.path)}function Sp(t,e){const n=Zj(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(tR(n))}function eR(t,e){return Yx(t.databaseId,e)}function WB(t){const e=Zj(t);return e.length===4?qe.emptyPath():tR(e)}function Cy(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tR(t){return He(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function kS(t,e,n){return{name:Ny(t,e),fields:n.value.mapValue.fields}}function GB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(He(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?H.UNKNOWN:Qj(d.code);return new oe(h,d.message||"")}(a);n=new Xj(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Sp(t,r.document.name),i=jr(r.document.updateTime),a=r.document.createTime?jr(r.document.createTime):Se.min(),l=new ln({mapValue:{fields:r.document.fields}}),c=Ht.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Gd(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Sp(t,r.document),i=r.readTime?jr(r.readTime):Se.min(),a=Ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Gd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Sp(t,r.document),i=r.removedTargetIds||[];n=new Gd([],i,s,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new OB(s,i),l=r.targetId;n=new Yj(l,a)}}return n}function qB(t,e){let n;if(e instanceof gu)n={update:kS(t,e.key,e.value)};else if(e instanceof qx)n={delete:Ny(t,e.key)};else if(e instanceof bi)n={update:kS(t,e.key,e.data),updateMask:nz(e.fieldMask)};else{if(!(e instanceof RB))return _e(16599,{Vt:e.type});n={verify:Ny(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof qh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Uc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Kh)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:HB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e(27497)}(t,e.precondition)),n}function KB(t,e){return t&&t.length>0?(He(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?jr(s.updateTime):jr(i);return a.isEqual(Se.min())&&(a=jr(i)),new PB(a,s.transformResults||[])}(n,e))):[]}function QB(t,e){return{documents:[eR(t,e.path)]}}function YB(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eR(t,s);const i=function(d){if(d.length!==0)return rR(dr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ro(m.field),direction:ZB(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ty(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function XB(t){let e=WB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){He(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=nR(f);return m instanceof dr&&Rj(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(T){return new Vc(ko(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,qf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new Gh(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new Gh(y,m)}(n.endAt)),gB(e,s,a,i,l,"F",c,d)}function JB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ko(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(n.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ko(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ko(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(ko(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dr.create(n.compositeFilter.filters.map(r=>nR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function ZB(t){return UB[t]}function ez(t){return $B[t]}function tz(t){return BB[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function ko(t){return jt.fromServerFormat(t.fieldPath)}function rR(t){return t instanceof mt?function(n){if(n.op==="=="){if(wS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(xS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(xS(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:ez(n.op),value:n.value}}}(t):t instanceof dr?function(n){const r=n.getFilters().map(s=>rR(s));return r.length===1?r[0]:{compositeFilter:{op:tz(n.op),filters:r}}}(t):_e(54877,{filter:t})}function nz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=Se.min(),a=Se.min(),l=Dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e){this.yt=e}}function sz(t){const e=XB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(){this.Cn=new oz}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ui.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class oz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new wt(qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iR=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(iR,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="LruGarbageCollector",az=1048576;function MS([t,e],[n,r]){const s=Oe(t,n);return s===0?Oe(e,r):s}class lz{constructor(e){this.Ir=e,this.buffer=new wt(MS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();MS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(OS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?le(OS,"Ignoring IndexedDB error during garbage collection: ",n):await rl(n)}await this.Vr(3e5)})}}class uz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Gf.ce);const r=new lz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(DS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Ao()<=De.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function dz(t,e){return new uz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&lc(r.mutation,s,En.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=Mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=zl();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=us();const a=ac(),l=function(){return ac()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof bi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),lc(h.mutation,d,h.mutation.getFieldMask(),Je.now())):a.set(d.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new fz(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ac();let s=new it((a,l)=>a-l),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||En.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Me()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=$j();h.forEach(m=>{if(!i.has(m)){const y=qj(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return me.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Mi());let l=Dc,c=i;return a.next(d=>q.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Me())).next(h=>({batchId:l,changes:Uj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=zl();return this.indexManager.getCollectionParents(e,i).next(l=>q.forEach(l,c=>{const d=function(f,m){return new il(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Ht.newInvalidDocument(h)))});let l=zl();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&lc(h.mutation,d,En.empty(),Je.now()),Yf(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:sz(s.bundledQuery),readTime:jr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.overlays=new it(me.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Mi();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Mi(),i=n.length+1,a=new me(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new it((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Mi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Mi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new DB(n,r));let i=this.qr.get(n);i===void 0&&(i=Me(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.Qr=new wt(Et.$r),this.Ur=new wt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new me(new qe([])),r=new Et(n,e),s=new Et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new qe([])),r=new Et(n,e),s=new Et(n,e+1);let i=Me();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Oe(e.Yr,n.Yr)}static Kr(e,n){return Oe(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wt(Et.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kB(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Et(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Ux:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(Oe);return n.forEach(s=>{const i=new Et(s,0),a=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const a=new Et(new me(i),0);let l=new wt(Oe);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){He(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.ri=e,this.docs=function(){return new it(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=us();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=us();const a=n.path,l=new me(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Q8(K8(h),r)<=0||(s.has(h.key)||Yf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_e(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wz(this)}getSize(e){return q.resolve(this.size)}}class wz extends hz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.persistence=e,this.si=new xo(n=>zx(n),Hx),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Xx,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ba(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gf(0),this.li=!1,this.li=!0,this.hi=new yz,this.referenceDelegate=e(this),this.Pi=new _z(this),this.indexManager=new iz,this.remoteDocumentCache=function(s){return new xz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new rz(n),this.Ii=new pz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const s=new Ez(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Ez extends X8{constructor(e){super(),this.currentSequenceNumber=e}}class Jx{constructor(e){this.persistence=e,this.Ri=new Xx,this.Vi=null}static mi(e){return new Jx(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=me.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yh{constructor(e,n){this.persistence=e,this.pi=new xo(r=>eB(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=dz(this,n)}static mi(e,n){return new Yh(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,Se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zd(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return tU()?8:J8(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Sz;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ao()<=De.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Ao()<=De.DEBUG&&le("QueryEngine","Query:",jo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ao()<=De.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ar(n))):q.resolve())}ys(e,n){if(TS(n))return q.resolve(null);let r=Ar(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sy(n,null,"F"),r=Ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Me(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Sy(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return TS(n)||s.isEqual(Se.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?q.resolve(null):(Ao()<=De.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jo(n)),this.vs(e,a,n,q8(s,Dc)).next(l=>l))})}Ds(e,n){let r=new wt(Vj(e));return n.forEach((s,i)=>{Yf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ao()<=De.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",jo(n)),this.ps.getDocumentsMatchingQuery(e,n,ui.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="LocalStore",bz=3e8;class Nz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new it(Oe),this.xs=new xo(i=>zx(i),Hx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Cz(t,e,n,r){return new Nz(t,e,n,r)}async function aR(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Me();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function Iz(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=q.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(x=>{const w=d.docVersions.get(T);He(w!==null,48541),x.version.compareTo(w)<0&&(f.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Me();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lR(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Pz(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(x,w,b){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=bz?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=us(),d=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Az(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(Se.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function Az(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=us();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Se.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):le(ew,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function jz(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ux),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rz(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Bs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Iy(t,e,n){const r=Te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sl(a))throw a;le(ew,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function LS(t,e,n){const r=Te(t);let s=Se.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=Te(c),m=f.xs.get(h);return m!==void 0?q.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,Ar(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:Se.min(),n?i:Me())).next(l=>(kz(r,vB(e),l),{documents:l,Qs:i})))}function kz(t,e,n){let r=t.Os.get(e)||Se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class VS{constructor(){this.activeTargetIds=TB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dz{constructor(){this.Mo=new VS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new VS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="ConnectivityMonitor";class US{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(FS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(FS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd=null;function Py(){return pd===null?pd=function(){return 268435456+Math.round(2147483648*Math.random())}():pd++,"0x"+pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",Mz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Hh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Py(),l=this.zo(e,n.toUriEncodedString());le(Tp,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=Za(d);return this.Jo(e,l,c,r,h).then(f=>(le(Tp,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Va(Tp,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Mz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class Fz extends Lz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Py();return new Promise((l,c)=>{const d=new uj;d.setWithCredentials(!0),d.listenOnce(dj.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bd.NO_ERROR:const f=d.getResponseJson();le(Ut,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Bd.TIMEOUT:le(Ut,`RPC '${e}' ${a} timed out`),c(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const m=d.getStatus();if(le(Ut,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const x=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(_)>=0?_:H.UNKNOWN}(T.status);c(new oe(x,T.message))}else c(new oe(H.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new oe(H.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(Ut,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);le(Ut,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Py(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mj(),l=fj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");le(Ut,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const T=new Vz({Yo:w=>{y?le(Ut,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(m||(le(Ut,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),le(Ut,`RPC '${e}' stream ${s} sending:`,w),f.send(w))},Zo:()=>f.close()}),x=(w,b,_)=>{w.listen(b,N=>{try{_(N)}catch(I){setTimeout(()=>{throw I},0)}})};return x(f,Bl.EventType.OPEN,()=>{y||(le(Ut,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),x(f,Bl.EventType.CLOSE,()=>{y||(y=!0,le(Ut,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(f))}),x(f,Bl.EventType.ERROR,w=>{y||(y=!0,Va(Ut,`RPC '${e}' stream ${s} transport errored. Name:`,w.name,"Message:",w.message),T.a_(new oe(H.UNAVAILABLE,"The operation could not be completed")))}),x(f,Bl.EventType.MESSAGE,w=>{var b;if(!y){const _=w.data[0];He(!!_,16349);const N=_,I=(N==null?void 0:N.error)||((b=N[0])==null?void 0:b.error);if(I){le(Ut,`RPC '${e}' stream ${s} received error:`,I);const O=I.status;let D=function(C){const A=ht[C];if(A!==void 0)return Qj(A)}(O),E=I.message;D===void 0&&(D=H.INTERNAL,E="Unknown error status: "+O+" with message "+I.message),y=!0,T.a_(new oe(D,E)),f.close()}else le(Ut,`RPC '${e}' stream ${s} received:`,_),T.u_(_)}}),x(l,hj.STAT_EVENT,w=>{w.stat===gy.PROXY?le(Ut,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===gy.NOPROXY&&le(Ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){return new zB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="PersistentStream";class uR{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(cs(n.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new oe(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le($S,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(le($S,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uz extends uR{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GB(this.serializer,e),r=function(i){if(!("targetChange"in i))return Se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Se.min():a.readTime?jr(a.readTime):Se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Cy(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=_y(c)?{documents:QB(i,c)}:{query:YB(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Jj(i,a.resumeToken);const d=Ty(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Se.min())>0){l.readTime=Qh(i,a.snapshotVersion.toTimestamp());const d=Ty(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=JB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Cy(this.serializer),n.removeTarget=e,this.q_(n)}}class $z extends uR{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=KB(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Cy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>qB(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{}class zz extends Bz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,by(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,by(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(H.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Hz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cs(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class Wz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{wo(this)&&(le(ho,"Restarting streams for network reachability change."),await async function(c){const d=Te(c);d.Ea.add(4),await vu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await tm(d)}(this))})}),this.Ra=new Hz(r,s)}}async function tm(t){if(wo(t))for(const e of t.da)await e(!0)}async function vu(t){for(const e of t.da)await e(!1)}function dR(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sw(n)?rw(n):ol(n).O_()&&nw(n,e))}function tw(t,e){const n=Te(t),r=ol(n);n.Ia.delete(e),r.O_()&&hR(n,e),n.Ia.size===0&&(r.O_()?r.L_():wo(n)&&n.Ra.set("Unknown"))}function nw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(t).Y_(e)}function hR(t,e){t.Va.Ue(e),ol(t).Z_(e)}function rw(t){t.Va=new FB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ol(t).start(),t.Ra.ua()}function sw(t){return wo(t)&&!ol(t).x_()&&t.Ia.size>0}function wo(t){return Te(t).Ea.size===0}function fR(t){t.Va=void 0}async function Gz(t){t.Ra.set("Online")}async function qz(t){t.Ia.forEach((e,n)=>{nw(t,e)})}async function Kz(t,e){fR(t),sw(t)?(t.Ra.ha(e),rw(t)):t.Ra.set("Unknown")}async function Qz(t,e,n){if(t.Ra.set("Online"),e instanceof Xj&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){le(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(t,r)}else if(e instanceof Gd?t.Va.Ze(e):e instanceof Yj?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const r=await lR(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),hR(i,c);const f=new Bs(h.target,c,d,h.sequenceNumber);nw(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){le(ho,"Failed to raise snapshot:",r),await Xh(t,r)}}async function Xh(t,e,n){if(!sl(e))throw e;t.Ea.add(1),await vu(t),t.Ra.set("Offline"),n||(n=()=>lR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(ho,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await tm(t)})}function mR(t,e){return e().catch(n=>Xh(t,n,e))}async function nm(t){const e=Te(t),n=mi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ux;for(;Yz(e);)try{const s=await jz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Xz(e,s)}catch(s){await Xh(e,s)}pR(e)&&gR(e)}function Yz(t){return wo(t)&&t.Ta.length<10}function Xz(t,e){t.Ta.push(e);const n=mi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pR(t){return wo(t)&&!mi(t).x_()&&t.Ta.length>0}function gR(t){mi(t).start()}async function Jz(t){mi(t).ra()}async function Zz(t){const e=mi(t);for(const n of t.Ta)e.ea(n.mutations)}async function e7(t,e,n){const r=t.Ta.shift(),s=Kx.from(r,e,n);await mR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nm(t)}async function t7(t,e){e&&mi(t).X_&&await async function(r,s){if(function(a){return MB(a)&&a!==H.ABORTED}(s.code)){const i=r.Ta.shift();mi(r).B_(),await mR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nm(r)}}(t,e),pR(t)&&gR(t)}async function BS(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),le(ho,"RemoteStore received new credentials");const r=wo(n);n.Ea.add(3),await vu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await tm(n)}async function n7(t,e){const n=Te(t);e?(n.Ea.delete(2),await tm(n)):e||(n.Ea.add(2),await vu(n),n.Ra.set("Unknown"))}function ol(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.sa(),new Uz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Gz.bind(null,t),t_:qz.bind(null,t),r_:Kz.bind(null,t),H_:Qz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sw(t)?rw(t):t.Ra.set("Unknown")):(await t.ma.stop(),fR(t))})),t.ma}function mi(t){return t.fa||(t.fa=function(n,r,s){const i=Te(n);return i.sa(),new $z(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jz.bind(null,t),r_:t7.bind(null,t),ta:Zz.bind(null,t),na:e7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nm(t)):(await t.fa.stop(),t.Ta.length>0&&(le(ho,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new iw(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ow(t,e){if(cs("AsyncQueue",`${e}: ${t}`),sl(t))return new oe(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{static emptySet(e){return new ua(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=zl(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.ga=new it(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class za{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new za(e,n,ua.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class s7{constructor(){this.queries=HS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=HS(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new oe(H.ABORTED,"Firestore shutting down"))}}function HS(){return new xo(t=>Lj(t),Qf)}async function i7(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new r7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ow(a,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&aw(n)}async function o7(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a7(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&aw(n)}function l7(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function aw(t){t.Ca.forEach(e=>{e.next()})}var Ay,WS;(WS=Ay||(Ay={})).Ma="default",WS.Cache="cache";class c7{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.key=e}}class vR{constructor(e){this.key=e}}class u7{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=Vj(e),this.tu=new ua(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Yf(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let w=!1;m&&y?m.data.isEqual(y.data)?T!==x&&(r.track({type:3,doc:y}),w=!0):this.su(m,y)||(r.track({type:2,doc:y}),w=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),w=!0):m&&!y&&(r.track({type:1,doc:m}),w=!0,(c||d)&&(l=!0)),w&&(y?(a=a.add(y),i=x?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(y,T){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:w})}};return x(y)-x(T)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new za(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new vR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new yR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lw="SyncEngine";class d7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h7{constructor(e){this.key=e,this.hu=!1}}class f7{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new xo(l=>Lj(l),Qf),this.Iu=new Map,this.Eu=new Set,this.du=new it(me.comparator),this.Au=new Map,this.Ru=new Xx,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function m7(t,e,n=!0){const r=TR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await xR(r,e,n,!0),s}async function p7(t,e){const n=TR(t);await xR(n,e,!0,!1)}async function xR(t,e,n,r){const s=await Rz(t.localStore,Ar(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await g7(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&dR(t.remoteStore,s),l}async function g7(t,e,n,r,s){t.pu=(f,m,y)=>async function(x,w,b,_){let N=w.view.ru(b);N.Cs&&(N=await LS(x.localStore,w.query,!1).then(({documents:E})=>w.view.ru(E,N)));const I=_&&_.targetChanges.get(w.targetId),O=_&&_.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(N,x.isPrimaryClient,I,O);return qS(x,w.targetId,D.au),D.snapshot}(t,f,m,y);const i=await LS(t.localStore,e,!0),a=new u7(e,i.Qs),l=a.ru(i.documents),c=yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);qS(t,n,d.au);const h=new d7(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function y7(t,e,n){const r=Te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Qf(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Iy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&tw(r.remoteStore,s.targetId),jy(r,s.targetId)}).catch(rl)):(jy(r,s.targetId),await Iy(r.localStore,s.targetId,!0))}async function v7(t,e){const n=Te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tw(n.remoteStore,r.targetId))}async function x7(t,e,n){const r=N7(t);try{const s=await function(a,l){const c=Te(a),d=Je.now(),h=l.reduce((y,T)=>y.add(T.key),Me());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=us(),x=Me();return c.Ns.getEntries(y,h).next(w=>{T=w,T.forEach((b,_)=>{_.isValidDocument()||(x=x.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(w=>{f=w;const b=[];for(const _ of l){const N=jB(_,f.get(_.key).overlayedDocument);N!=null&&b.push(new bi(_.key,N,Pj(N.value.mapValue),ar.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,b,l)}).next(w=>{m=w;const b=w.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(y,w.batchId,b)})}).then(()=>({batchId:m.batchId,changes:Uj(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new it(Oe)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await xu(r,s.changes),await nm(r.remoteStore)}catch(s){const i=ow(s,"Failed to persist write");n.reject(i)}}async function wR(t,e){const n=Te(t);try{const r=await Pz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(He(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?He(a.hu,14607):s.removedDocuments.size>0&&(He(a.hu,42227),a.hu=!1))}),await xu(n,r,e)}catch(r){await rl(r)}}function GS(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Te(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&aw(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w7(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new it(me.comparator);a=a.insert(i,Ht.newNoDocument(i,Se.min()));const l=Me().add(i),c=new Zf(Se.min(),new Map,new it(Oe),a,l);await wR(r,c),r.du=r.du.remove(i),r.Au.delete(e),cw(r)}else await Iy(r.localStore,e,!1).then(()=>jy(r,e,n)).catch(rl)}async function _7(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await Iz(n.localStore,e);ER(n,r,null),_R(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,s)}catch(s){await rl(s)}}async function E7(t,e,n){const r=Te(t);try{const s=await function(a,l){const c=Te(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(He(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);ER(r,e,n),_R(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xu(r,s)}catch(s){await rl(s)}}function _R(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ER(t,e,n){const r=Te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function jy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||SR(t,r)})}function SR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),cw(t))}function qS(t,e,n){for(const r of n)r instanceof yR?(t.Ru.addReference(r.key,e),S7(t,r)):r instanceof vR?(le(lw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||SR(t,r.key)):_e(19791,{wu:r})}function S7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(le(lw,"New document in limbo: "+n),t.Eu.add(r),cw(t))}function cw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(qe.fromString(e)),r=t.fu.next();t.Au.set(r,new h7(n)),t.du=t.du.insert(n,r),dR(t.remoteStore,new Bs(Ar(Wx(n.path)),r,"TargetPurposeLimboResolution",Gf.ce))}}async function xu(t,e,n){const r=Te(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Zx.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=Te(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(d,m=>q.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>q.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!sl(f))throw f;le(ew,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),T=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(m,x)}}}(r.localStore,i))}async function T7(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){le(lw,"User change. New user:",e.toKey());const r=await aR(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new oe(H.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xu(n,r.Ls)}}function b7(t,e){const n=Te(t),r=n.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let s=Me();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function TR(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w7.bind(null,e),e.Pu.H_=a7.bind(null,e.eventManager),e.Pu.yu=l7.bind(null,e.eventManager),e}function N7(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E7.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=em(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Cz(this.persistence,new Tz,e.initialUser,this.serializer)}Cu(e){return new oR(Jx.mi,this.serializer)}Du(e){return new Dz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class C7 extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){He(this.persistence.referenceDelegate instanceof Yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new oR(r=>Yh.mi(r,n),this.serializer)}}class Ry{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T7.bind(null,this.syncEngine),await n7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s7}()}createDatastore(e){const n=em(e.databaseInfo.databaseId),r=function(i){return new Fz(i)}(e.databaseInfo);return function(i,a,l,c){return new zz(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new Wz(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>GS(this.syncEngine,n,0),function(){return US.v()?new US:new Oz}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new f7(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);le(ho,"RemoteStore shutting down."),i.Ea.add(5),await vu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ry.provider={build:()=>new Ry};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="FirestoreClient";class P7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bt.UNAUTHENTICATED,this.clientId=Fx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{le(pi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(le(pi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ow(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Np(t,e){t.asyncQueue.verifyOperationInProgress(),le(pi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function KS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await A7(t);le(pi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>BS(e.remoteStore,s)),t._onlineComponents=e}async function A7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(pi,"Using user provided OfflineComponentProvider");try{await Np(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await Np(t,new Jh)}}else le(pi,"Using default OfflineComponentProvider"),await Np(t,new C7(void 0));return t._offlineComponents}async function bR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(pi,"Using user provided OnlineComponentProvider"),await KS(t,t._uninitializedComponentsProvider._online)):(le(pi,"Using default OnlineComponentProvider"),await KS(t,new Ry))),t._onlineComponents}function j7(t){return bR(t).then(e=>e.syncEngine)}async function QS(t){const e=await bR(t),n=e.eventManager;return n.onListen=m7.bind(null,e.syncEngine),n.onUnlisten=y7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=p7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v7.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firestore.googleapis.com",XS=!0;class JS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CR,this.ssl=XS}else this.host=e.host,this.ssl=e.ssl??XS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<az)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new M8;switch(r.type){case"firstParty":return new U8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=YS.get(n);r&&(le("ComponentProvider","Removing Datastore"),YS.delete(n),r.terminate())}(this),Promise.resolve()}}function R7(t,e,n,r={}){var d;t=Zr(t,rm);const s=Za(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(xA(`https://${l}`),wA("Firestore",!0)),i.host!==CR&&i.host!==l&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!oo(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Bt.MOCK_USER;else{h=G5(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bt(m)}t._authCredentials=new L8(new gj(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pu(n,dt._jsonSchema))return new dt(e,r||null,new me(qe.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:pt("string",dt._jsonSchemaVersion),referencePath:pt("string")};class ti extends _o{constructor(e,n,r){super(e,n,Wx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new me(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function k7(t,e,...n){if(t=bt(t),yj("collection","path",e),t instanceof rm){const r=qe.fromString(e,...n);return uS(r),new ti(t,null,r)}{if(!(t instanceof dt||t instanceof ti))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return uS(r),new ti(t.firestore,null,r)}}function Cp(t,e,...n){if(t=bt(t),arguments.length===1&&(e=Fx.newId()),yj("doc","path",e),t instanceof rm){const r=qe.fromString(e,...n);return cS(r),new dt(t,null,new me(r))}{if(!(t instanceof dt||t instanceof ti))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return cS(r),new dt(t.firestore,t instanceof ti?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="AsyncQueue";class e1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cR(this,"async_queue_retry"),this._c=()=>{const r=bp();r&&le(ZS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new qi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;le(ZS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",t1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=iw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&_e(47125,{Pc:t1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ha extends rm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e1(e),this._firestoreClient=void 0,await e}}}function D7(t,e){const n=typeof t=="object"?t:TA(),r=typeof t=="string"?t:Hh,s=Cx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=H5("firestore");i&&R7(s,...i)}return s}function IR(t){if(t._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||O7(t),t._firestoreClient}function O7(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new rB(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new P7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Dt.fromBase64String(e))}catch(n){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pu(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:pt("string",Vn._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rr._jsonSchemaVersion}}static fromJSON(e){if(pu(e,Rr._jsonSchema))return new Rr(e.latitude,e.longitude)}}Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:pt("string",Rr._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pu(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new kr(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:pt("string",kr._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=/^__.*__$/;class L7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new gu(e,this.data,n,this.fieldTransforms)}}class PR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:t})}}class dw{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AR(this.Ac)&&M7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||em(e)}Cc(e,n,r,s=!1){return new dw({Ac:e,methodName:n,Dc:r,path:jt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hw(t){const e=t._freezeSettings(),n=em(t._databaseId);return new V7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function F7(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);fw("Data must be an object, but it was:",a,r);const l=jR(r,a);let c,d;if(i.merge)c=new En(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=ky(e,f,n);if(!a.contains(m))throw new oe(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);kR(h,m)||h.push(m)}c=new En(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new L7(new ln(l),c,d)}class im extends uw{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof im}}function U7(t,e,n,r){const s=t.Cc(1,e,n);fw("Data must be an object, but it was:",s,r);const i=[],a=ln.empty();Ti(r,(c,d)=>{const h=mw(e,c,n);d=bt(d);const f=s.yc(h);if(d instanceof im)i.push(h);else{const m=wu(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new En(i);return new PR(a,l,s.fieldTransforms)}function $7(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[ky(e,r,n)],c=[s];if(i.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(ky(e,i[m])),c.push(i[m+1]);const d=[],h=ln.empty();for(let m=l.length-1;m>=0;--m)if(!kR(d,l[m])){const y=l[m];let T=c[m];T=bt(T);const x=a.yc(y);if(T instanceof im)d.push(y);else{const w=wu(T,x);w!=null&&(d.push(y),h.set(y,w))}}const f=new En(d);return new PR(h,f,a.fieldTransforms)}function B7(t,e,n,r=!1){return wu(n,t.Cc(r?4:3,e))}function wu(t,e){if(RR(t=bt(t)))return fw("Unsupported field value:",e,t),jR(t,e);if(t instanceof uw)return function(r,s){if(!AR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=wu(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bB(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Qh(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qh(s.serializer,i)}}if(r instanceof Rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:Jj(s.serializer,r._byteString)};if(r instanceof dt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kr)return function(a,l){return{mapValue:{fields:{[Nj]:{stringValue:Ij},[Wh]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Gx(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Wf(r)}`)}(t,e)}function jR(t,e){const n={};return wj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(t,(r,s)=>{const i=wu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function RR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Rr||t instanceof Vn||t instanceof dt||t instanceof uw||t instanceof kr)}function fw(t,e,n){if(!RR(n)||!vj(n)){const r=Wf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function ky(t,e,n){if((e=bt(e))instanceof sm)return e._internalPath;if(typeof e=="string")return mw(t,e);throw Zh("Field path arguments must be of type string or ",t,!1,void 0,n)}const z7=new RegExp("[~\\*/\\[\\]]");function mw(t,e,n){if(e.search(z7)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sm(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zh(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new oe(H.INVALID_ARGUMENT,l+t+c)}function kR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H7 extends DR{data(){return super.data()}}function pw(t,e){return typeof e=="string"?mw(t,e):e instanceof sm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gw{}class OR extends gw{}function G7(t,e,...n){let r=[];e instanceof gw&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof vw).length,l=i.filter(c=>c instanceof yw).length;if(a>1||a>0&&l>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class yw extends OR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yw(e,n,r)}_apply(e){const n=this._parse(e);return MR(e._query,n),new _o(e.firestore,e.converter,Ey(e._query,n))}_parse(e){const n=hw(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){s1(f,h);const T=[];for(const x of f)T.push(r1(c,i,x));m={arrayValue:{values:T}}}else m=r1(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||s1(f,h),m=B7(l,a,f,h==="in"||h==="not-in");return mt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vw extends gw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)MR(a,c),a=Ey(a,c)}(e._query,n),new _o(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xw extends OR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xw(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(i,a)}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new il(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function q7(t,e="asc"){const n=e,r=pw("orderBy",t);return xw._create(r,n)}function r1(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mj(e)&&n.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!me.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vS(t,new me(r))}if(n instanceof dt)return vS(t,n._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(n)}.`)}function s1(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MR(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class K7{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ti(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Wh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>ct(a.doubleValue));return new kr(n)}convertGeoPoint(e){return new Rr(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const n=di(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);He(sR(r),9688,{name:e});const s=new Mc(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||cs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q7(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ki extends DR{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(pw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ki._jsonSchema={type:pt("string",Ki._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class qd extends Ki{data(e={}){return super.data(e)}}class da{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qd(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new qd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new qd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Wl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:Y7(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Y7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}da._jsonSchemaVersion="firestore/querySnapshot/1.0",da._jsonSchema={type:pt("string",da._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class LR extends K7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function X7(t,e,n){t=Zr(t,dt);const r=Zr(t.firestore,Ha),s=Q7(t.converter,e);return ww(r,[F7(hw(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ar.none())])}function J7(t,e,n,...r){t=Zr(t,dt);const s=Zr(t.firestore,Ha),i=hw(s);let a;return a=typeof(e=bt(e))=="string"||e instanceof sm?$7(i,"updateDoc",t._key,e,n,r):U7(i,"updateDoc",t._key,e),ww(s,[a.toMutation(t._key,ar.exists(!0))])}function Z7(t){return ww(Zr(t.firestore,Ha),[new qx(t._key,ar.none())])}function eH(t,...e){var c,d,h;t=bt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||n1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(n1(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof dt)a=Zr(t.firestore,Ha),l=Wx(t._key.path),i={next:f=>{e[r]&&e[r](tH(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Zr(t,_o);a=Zr(f.firestore,Ha),l=f._query;const m=new LR(a);i={next:y=>{e[r]&&e[r](new da(a,m,f,y))},error:e[r+1],complete:e[r+2]},W7(t._query)}return function(m,y,T,x){const w=new I7(x),b=new c7(y,w,T);return m.asyncQueue.enqueueAndForget(async()=>i7(await QS(m),b)),()=>{w.Nu(),m.asyncQueue.enqueueAndForget(async()=>o7(await QS(m),b))}}(IR(a),l,s,i)}function ww(t,e){return function(r,s){const i=new qi;return r.asyncQueue.enqueueAndForget(async()=>x7(await j7(r),s,i)),i.promise}(IR(t),e)}function tH(t,e,n){const r=n.docs.get(e._key),s=new LR(t);return new Ki(t,s,e._key,r,new Wl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){nl=s})(el),La(new ao("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ha(new V8(r.getProvider("auth-internal")),new $8(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Zs(iS,oS,e),Zs(iS,oS,"esm2020")})();const nH={apiKey:"AIzaSyBr7Vti_UUKtHV3wCA0FfNPmvT1AYC0yFM",authDomain:"passpilot-55c3d.firebaseapp.com",projectId:"passpilot-55c3d",storageBucket:"passpilot-55c3d.firebasestorage.app",appId:"1:134904289902:web:e62d187d4ef81703cfe47f"};let Ip=null,Do=null,Gl=null;try{Ip=SA(nH),Do=D8(Ip),Gl=D7(Ip),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const rH=new Gr;class Qo{constructor(){}static getInstance(){return Qo.instance||(Qo.instance=new Qo),Qo.instance}isConfigured(){return!0}async signInWithGoogle(){if(!this.isConfigured())throw new Error("Firebase not configured");return K9(Do,rH)}async handleRedirectResult(){if(!this.isConfigured())throw new Error("Firebase not configured");return Y9(Do)}async signInWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return w9(Do,e,n)}async createUserWithEmailAndPassword(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");return x9(Do,e,n)}async signOut(){if(!this.isConfigured())throw new Error("Firebase not configured");return S9(Do)}async setDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Cp(Gl,e);return X7(r,n)}async updateDocument(e,n){if(!this.isConfigured())throw new Error("Firebase not configured");const r=Cp(Gl,e);return J7(r,n)}async deleteDocument(e){if(!this.isConfigured())throw new Error("Firebase not configured");const n=Cp(Gl,e);return Z7(n)}onSnapshot(e,n){if(!this.isConfigured())return console.warn("Firebase not configured, using mock data"),()=>{};const r=k7(Gl,e),s=G7(r,q7("createdAt","desc"));return eH(s,i=>{const a=i.docs.map(l=>({id:l.id,...l.data()}));n(a)})}}const sH=Qo.getInstance();function iH(){const{data:t=[],isLoading:e}=Zt({queryKey:["/api/passes/active"],refetchInterval:5e3});return{passes:t,isLoading:e}}function i1({user:t,selectedGrades:e=new Set}){const{passes:n,isLoading:r}=iH(),[s,i]=p.useState("all");if(r)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const a=f=>{const m=new Date,y=new Date(f),T=m.getTime()-y.getTime();return`${Math.floor(T/(1e3*60))} min`},l=f=>f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),c=f=>{const m=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],y=f.length%m.length;return m[y]},d=f=>{switch(f){case"nurse":return o.jsx(bn,{variant:"outline",className:"bg-red-50 text-red-600 border-red-200",children:"Nurse"});case"discipline":return o.jsx(bn,{variant:"outline",className:"bg-orange-50 text-orange-600 border-orange-200",children:"Discipline"});case"general":default:return o.jsx(bn,{variant:"outline",className:"bg-blue-50 text-blue-600 border-blue-200",children:"General"})}},h=n.filter(f=>{var T;const m=s==="all"||f.passType===s,y=e.size===0||e.has((T=f.student)==null?void 0:T.grade);return m&&y});return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Current Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Students currently checked out"})]}),o.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[o.jsx("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),o.jsx("span",{className:"text-muted-foreground",children:"Live updates enabled"})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h.length," of ",n.length," passes"]}),e.size>0&&o.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["Viewing grades: ",Array.from(e).sort().join(", ")]}),e.size===0&&o.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"No grades selected - select grades in Roster tab to view passes"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"Filter by type:"}),o.jsxs(Un,{value:s,onValueChange:i,children:[o.jsx(wn,{className:"w-32",children:o.jsx($n,{})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"all",children:"All Types"}),o.jsx(Ae,{value:"general",children:"General"}),o.jsx(Ae,{value:"nurse",children:"Nurse"}),o.jsx(Ae,{value:"discipline",children:"Discipline"})]})]})]})]}),o.jsx("div",{className:"space-y-3","data-testid":"active-passes-list",children:h.length===0?o.jsx(ee,{children:o.jsxs(te,{className:"p-6 text-center",children:[o.jsx("i",{className:"fas fa-check-circle text-secondary text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.length===0?"All students are in class":`No ${s==="all"?"":s+" "}passes currently active`})]})}):h.map(f=>{var m,y,T,x,w;return o.jsx(ee,{className:"shadow-sm","data-testid":`pass-card-${f.id}`,children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c(((m=f.student)==null?void 0:m.name)||"")}`,children:o.jsx("span",{className:"text-sm font-medium","data-testid":`student-initials-${f.id}`,children:l(((y=f.student)==null?void 0:y.name)||"")})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("h3",{className:"font-medium text-foreground","data-testid":`student-name-${f.id}`,children:(T=f.student)==null?void 0:T.name}),d(f.passType)]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Grade ",o.jsx("span",{"data-testid":`student-grade-${f.id}`,children:(x=f.student)==null?void 0:x.grade}),"  Out for ",o.jsx("span",{"data-testid":`pass-duration-${f.id}`,children:a(f.checkoutTime)})]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Issued by: ",o.jsx("span",{className:"font-medium",children:((w=f.teacher)==null?void 0:w.name)||"Unknown Teacher"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Checked out"}),o.jsx("p",{className:"text-sm font-medium text-foreground","data-testid":`checkout-time-${f.id}`,children:new Date(f.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})})]})]})})},f.id)})})]})}function oH({user:t,selectedGrades:e=new Set,currentGrade:n,onRemoveGrade:r}){const[s,i]=p.useState(n||(e.size>0?Array.from(e)[0]:"")),[a,l]=p.useState(""),[c,d]=p.useState(null),[h,f]=p.useState(!1);p.useEffect(()=>{n&&n!==s&&i(n)},[n]);const{toast:m}=Nt(),{data:y=[],isLoading:T}=Zt({queryKey:["/api/students"]}),{data:x=[],isLoading:w}=Zt({queryKey:["/api/passes/active"],refetchInterval:3e3}),{data:b=[]}=Zt({queryKey:["/api/grades"]}),_=T||w,N=(t==null?void 0:t.assignedGrades)||[],I=b.filter(F=>e.has(F.name)&&(N.length===0||N.includes(F.name))),O=async(F,L,K="general",fe="")=>{try{await Ne("POST","/api/passes",{studentId:F,passType:K,customReason:fe||void 0}),Ue.invalidateQueries({queryKey:["/api/passes/active"]}),Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Pass created",description:`${L} has been marked out for ${fe||(K==="nurse"?"Nurse":K==="discipline"?"Discipline":"General")}.`})}catch(Re){m({title:"Error",description:Re.message,variant:"destructive"})}},D=()=>{c&&a.trim()&&(O(c.id,c.name,"general",a.trim()),l(""),d(null),f(!1))},E=F=>{d(F),l(""),f(!0)},v=async(F,L)=>{try{await Ne("PUT",`/api/passes/${F}/return`,{}),Ue.invalidateQueries({queryKey:["/api/passes/active"]}),Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/passes"]}),m({title:"Student returned",description:`${L} has been marked as returned.`})}catch(K){m({title:"Error",description:K.message,variant:"destructive"})}},C=F=>F.split(" ").map(L=>L[0]).join("").toUpperCase().slice(0,2),A=F=>{const L=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],K=F.length%L.length;return L[K]},R=F=>{switch(F){case"nurse":return o.jsx(J_,{className:"w-4 h-4 text-red-500"});case"discipline":return o.jsx(Da,{className:"w-4 h-4 text-orange-500"});default:return o.jsx(oi,{className:"w-4 h-4 text-blue-500"})}},k=F=>{switch(F){case"nurse":return"Nurse";case"discipline":return"Discipline";default:return"General"}},j=F=>{switch(F){case"nurse":return"bg-red-100 text-red-700 border-red-200";case"discipline":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-blue-100 text-blue-700 border-blue-200"}},[G,ue]=p.useState(new Date);p.useEffect(()=>{const F=setInterval(()=>{ue(new Date)},3e3);return()=>clearInterval(F)},[]);const re=F=>{const L=new Date(F),K=G.getTime()-L.getTime(),fe=Math.floor(K/(1e3*60));return`${Math.max(1,fe)} min`};if(I.length===0)return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx(ee,{children:o.jsxs(te,{className:"p-6 text-center",children:[o.jsx(un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Grades Selected"}),o.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Click on grade cards in the Roster tab to add them to MyClass. Green cards in Roster are active here."})]})})]});if(_)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})});const ie=I.find(F=>F.name===s),U=ie?y.filter(F=>F.grade===ie.name):[],$=ie?x.filter(F=>{const L=y.find(K=>K.id===F.studentId);return L&&L.grade===ie.name}):[],Y=U.filter(F=>!x.some(L=>L.studentId===F.id));return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"My Class"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage student passes and track who's out of class"})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(F=>{y.filter(fe=>fe.grade===F.name);const L=x.filter(fe=>{const Re=y.find(ke=>ke.id===fe.studentId);return Re&&Re.grade===F.name}).length,K=s===F.name;return o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs(W,{variant:K?"default":"outline",size:"sm",onClick:()=>i(F.name),"data-testid":`tab-grade-${F.name}`,className:`flex items-center gap-2 ${K?"ring-2 ring-primary":""}`,children:[o.jsx(un,{className:"w-4 h-4"}),"Grade ",F.name,L>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs bg-red-100 text-red-700 rounded-full",children:L})]}),o.jsx(W,{variant:"ghost",size:"sm",onClick:fe=>{fe.stopPropagation(),r==null||r(F.name)},"data-testid":`button-remove-grade-${F.name}`,className:"h-8 w-8 p-0 text-muted-foreground hover:text-foreground hover:bg-red-100 dark:hover:bg-red-900/20",title:`Remove Grade ${F.name} from My Class`,children:o.jsx(nu,{className:"w-4 h-4"})})]},F.id)})})}),ie&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(un,{className:"h-5 w-5 text-blue-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Students"}),o.jsx("p",{className:"text-lg font-bold",children:U.length})]})]})})}),o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(UL,{className:"h-5 w-5 text-red-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Currently Out"}),o.jsx("p",{className:"text-lg font-bold text-red-600",children:$.length})]})]})})}),o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(nE,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Available"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:Y.length})]})]})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(oi,{className:"w-5 h-5 text-red-600"}),"Currently Out - Grade ",ie.name]})}),o.jsx(te,{children:$.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No students are currently out of class"}):o.jsx("div",{className:"space-y-3",children:$.map(F=>{const L=y.find(K=>K.id===F.studentId);return L?o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${A(L.name)}`,children:C(L.name)}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-medium",children:L.name}),o.jsxs("span",{className:`px-2 py-1 text-xs rounded-full border flex items-center gap-1 ${j(F.passType||"general")}`,children:[R(F.passType||"general"),k(F.passType||"general")]})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[F.customReason||`Out for ${re(F.checkoutTime)}`,"  Since ",new Date(F.checkoutTime).toLocaleTimeString()]})]})]}),o.jsx(W,{onClick:()=>v(F.id,L.name),size:"sm","data-testid":`button-return-${F.id}`,children:"Mark Returned"})]},F.id):null})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(nE,{className:"w-5 h-5 text-green-600"}),"Available Students - Grade ",ie.name]})}),o.jsx(te,{children:Y.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:U.length===0?`No students in Grade ${ie.name}. Add students in the Roster tab.`:"All students are currently out of class"}):o.jsx("div",{className:"grid gap-3",children:Y.map(F=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${A(F.name)}`,children:C(F.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:F.name}),F.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",F.studentId]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{onClick:()=>O(F.id,F.name,"general"),size:"sm",variant:"outline","data-testid":`button-checkout-${F.id}`,children:"Mark Out"}),o.jsxs(dA,{children:[o.jsx(hA,{asChild:!0,children:o.jsx(W,{size:"sm",variant:"outline","data-testid":`button-special-checkout-${F.id}`,className:"px-2",children:o.jsx(Ef,{className:"w-4 h-4"})})}),o.jsxs(Tx,{align:"end",children:[o.jsxs(oa,{onClick:()=>O(F.id,F.name,"nurse"),className:"flex items-center gap-2",children:[o.jsx(J_,{className:"w-4 h-4 text-red-500"}),"Nurse"]}),o.jsxs(oa,{onClick:()=>O(F.id,F.name,"discipline"),className:"flex items-center gap-2",children:[o.jsx(Da,{className:"w-4 h-4 text-orange-500"}),"Discipline"]}),o.jsxs(oa,{onClick:()=>E(F),className:"flex items-center gap-2",children:[o.jsx(OL,{className:"w-4 h-4 text-blue-500"}),"Custom Reason"]})]})]})]})]},F.id))})})]})]}),!ie&&I.length>0&&o.jsx(ee,{children:o.jsxs(te,{className:"p-6 text-center",children:[o.jsx(un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Select a Grade"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on one of the grade tabs above to view and manage students."})]})}),o.jsx(rr,{open:h,onOpenChange:f,children:o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsxs(Ln,{children:["Custom Reason for ",c==null?void 0:c.name]})}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"customReason",children:"Reason for leaving class"}),o.jsx(he,{id:"customReason",placeholder:"e.g., Library research, Guidance counselor, Office errand...",value:a,onChange:F=>l(F.target.value),onKeyDown:F=>{F.key==="Enter"&&D()},"data-testid":"input-custom-reason"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{variant:"outline",onClick:()=>f(!1),"data-testid":"button-cancel-custom-reason",children:"Cancel"}),o.jsx(W,{onClick:D,disabled:!a.trim(),"data-testid":"button-submit-custom-reason",children:"Mark Out"})]})]})]})})]})}function aH({user:t,selectedGrades:e=new Set,onGradeClick:n}){const[r,s]=p.useState(!1),[i,a]=p.useState(!1),[l,c]=p.useState(!1),[d,h]=p.useState(!1),[f,m]=p.useState(null),[y,T]=p.useState(null),[x,w]=p.useState(null),[b,_]=p.useState(""),[N,I]=p.useState({name:"",grade:"",studentId:""}),[O,D]=p.useState({name:""}),[E,v]=p.useState(""),{toast:C}=Nt(),{data:A=[],isLoading:R}=Zt({queryKey:["/api/students"]}),{data:k=[],isLoading:j}=Zt({queryKey:["/api/grades"]}),G=R||j,ue=async z=>{if(z.preventDefault(),!O.name){C({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ne("POST","/api/grades",O),Ue.invalidateQueries({queryKey:["/api/grades"]}),D({name:""}),c(!1),C({title:"Grade added",description:`Grade ${O.name} has been added.`})}catch(J){C({title:"Error",description:J.message,variant:"destructive"})}},re=z=>{T(z),D({name:z.name})},ie=async z=>{if(z.preventDefault(),!O.name||!y){C({title:"Missing Information",description:"Please enter a grade name.",variant:"destructive"});return}try{await Ne("PUT",`/api/grades/${y.id}`,O),Ue.invalidateQueries({queryKey:["/api/grades"]}),D({name:""}),T(null),C({title:"Grade updated",description:`Grade has been updated to ${O.name}.`})}catch(J){C({title:"Error",description:J.message,variant:"destructive"})}},U=async(z,J)=>{if(confirm(`Are you sure you want to delete grade "${J}"? This will also delete all students in this grade.`))try{await Ne("DELETE",`/api/grades/${z}`,{}),Ue.invalidateQueries({queryKey:["/api/grades"]}),Ue.invalidateQueries({queryKey:["/api/students"]}),C({title:"Grade deleted",description:`Grade ${J} has been deleted.`})}catch(de){C({title:"Error",description:de.message,variant:"destructive"})}},$=async z=>{if(z.preventDefault(),!N.name||!N.grade){C({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ne("POST","/api/students",N),Ue.invalidateQueries({queryKey:["/api/students"]}),I({name:"",grade:"",studentId:""}),s(!1),C({title:"Student added",description:`${N.name} has been added to grade ${N.grade}.`})}catch(J){C({title:"Error",description:J.message,variant:"destructive"})}},Y=async z=>{if(z.preventDefault(),!E.trim()||!b){C({title:"Missing Information",description:"Please enter student names and select a grade.",variant:"destructive"});return}const J=E.split(`
`).map(de=>de.trim()).filter(de=>de.length>0);if(J.length===0){C({title:"No students to add",description:"Please enter at least one student name.",variant:"destructive"});return}try{const de=J.map(xe=>Ne("POST","/api/students",{name:xe,grade:b,studentId:""}));await Promise.all(de),Ue.invalidateQueries({queryKey:["/api/students"]}),v(""),_(""),a(!1),C({title:"Students added",description:`${J.length} student${J.length!==1?"s":""} have been added to grade ${b}.`})}catch(de){C({title:"Error",description:de.message,variant:"destructive"})}},F=z=>{m(z),I({name:z.name,grade:z.grade,studentId:z.studentId||""})},L=async z=>{if(z.preventDefault(),!N.name||!N.grade||!f){C({title:"Missing Information",description:"Please enter student name and select a grade.",variant:"destructive"});return}try{await Ne("PUT",`/api/students/${f.id}`,N),Ue.invalidateQueries({queryKey:["/api/students"]}),I({name:"",grade:"",studentId:""}),m(null),C({title:"Student updated",description:`${N.name} has been updated.`})}catch(J){C({title:"Error",description:J.message,variant:"destructive"})}},K=async(z,J)=>{if(confirm(`Are you sure you want to delete ${J}?`))try{await Ne("DELETE",`/api/students/${z}`,{}),Ue.invalidateQueries({queryKey:["/api/students"]}),C({title:"Student deleted",description:`${J} has been deleted.`})}catch(de){C({title:"Error",description:de.message,variant:"destructive"})}},fe=z=>z.split(" ").map(J=>J[0]).join("").toUpperCase().slice(0,2),Re=z=>{const J=["bg-blue-100 text-blue-600","bg-pink-100 text-pink-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-yellow-100 text-yellow-600","bg-red-100 text-red-600"],de=z.length%J.length;return J[de]},ke=(t==null?void 0:t.assignedGrades)||[],se=ke.length===0?k:k.filter(z=>ke.includes(z.name));return G?o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-20 bg-muted rounded"}),o.jsx("div",{className:"h-20 bg-muted rounded"})]})}):o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Student Roster"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Manage grades and students. Click on grade cards to add them to MyClass tab.",o.jsx("span",{className:"text-green-600 font-medium",children:" Green cards are active in MyClass."})]})]}),o.jsxs(ee,{className:"mb-6",children:[o.jsx(pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(un,{className:"w-5 h-5"}),"Grade Levels"]}),o.jsxs(rr,{open:l,onOpenChange:c,children:[o.jsx(m6,{asChild:!0,children:o.jsxs(W,{size:"sm","data-testid":"button-add-grade",children:[o.jsx(eE,{className:"w-4 h-4 mr-2"}),"Add Grade"]})}),o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Add New Grade"})}),o.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"gradeName",children:"Grade Name"}),o.jsx(he,{id:"gradeName",value:O.name,onChange:z=>D({name:z.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),o.jsx(W,{type:"submit","data-testid":"button-submit-grade",children:"Add Grade"})]})]})]})]})]})}),o.jsx(te,{children:se.length===0?o.jsx("p",{className:"text-center text-muted-foreground py-4",children:ke.length===0?"No grades created yet. Add a grade to get started.":"No assigned grades found. Contact your admin to assign grades to your account."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:se.map(z=>{const J=A.filter(xe=>xe.grade===z.name),de=e.has(z.name);return o.jsx(ee,{className:`cursor-pointer hover:shadow-md transition-all border-2 ${de?"border-green-500 bg-green-50 shadow-md":"hover:border-primary/20"}`,onClick:()=>n==null?void 0:n(z.name),"data-testid":`card-grade-${z.name}`,children:o.jsxs(te,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(kL,{className:`w-4 h-4 ${de?"text-green-600":"text-primary"}`}),o.jsxs("h3",{className:`font-semibold ${de?"text-green-700":""}`,children:["Grade ",z.name]}),de&&o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(W,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),w(z),h(!0)},className:"h-6 w-6 p-0","data-testid":`button-view-grade-${z.id}`,children:o.jsx(kd,{className:"h-3 w-3"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),re(z)},className:"h-6 w-6 p-0","data-testid":`button-edit-grade-${z.id}`,children:o.jsx(Hg,{className:"h-3 w-3"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:xe=>{xe.stopPropagation(),U(z.id,z.name)},className:"h-6 w-6 p-0 hover:text-red-600","data-testid":`button-delete-grade-${z.id}`,children:o.jsx(Wg,{className:"h-3 w-3"})})]})]}),o.jsxs("p",{className:`text-sm ${de?"text-green-600":"text-muted-foreground"}`,children:[J.length," student",J.length!==1?"s":""]}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsx("p",{className:`text-xs ${de?"text-green-600":"text-primary"}`,children:de?" Active in MyClass":"Click to add to MyClass "}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx(W,{size:"sm",variant:"outline",onClick:xe=>{xe.stopPropagation(),I({name:"",grade:z.name,studentId:""}),s(!0)},className:"h-6 text-xs px-2","data-testid":`button-add-student-${z.name}`,children:"Add Student"}),o.jsx(W,{size:"sm",variant:"outline",onClick:xe=>{xe.stopPropagation(),_(z.name),a(!0)},className:"h-6 text-xs px-2","data-testid":`button-bulk-add-${z.name}`,children:"Bulk Add"})]})]})]})},z.id)})})})]}),o.jsx(rr,{open:r,onOpenChange:s,children:o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Add New Student"})}),o.jsxs("form",{onSubmit:$,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentName",children:"Student Name"}),o.jsx(he,{id:"studentName",value:N.name,onChange:z=>I({...N,name:z.target.value}),placeholder:"Enter student name","data-testid":"input-student-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentGrade",children:"Grade"}),o.jsxs(Un,{value:N.grade,onValueChange:z=>I({...N,grade:z}),children:[o.jsx(wn,{"data-testid":"select-student-grade",children:o.jsx($n,{placeholder:"Select a grade"})}),o.jsx(_n,{children:se.map(z=>o.jsxs(Ae,{value:z.name,children:["Grade ",z.name]},z.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"studentId",children:"Student ID (Optional)"}),o.jsx(he,{id:"studentId",value:N.studentId,onChange:z=>I({...N,studentId:z.target.value}),placeholder:"Enter student ID","data-testid":"input-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),o.jsx(W,{type:"submit","data-testid":"button-submit-student",children:"Add Student"})]})]})]})}),o.jsx(rr,{open:i,onOpenChange:a,children:o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Bulk Add Students"})}),o.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"bulkGrade",children:"Grade"}),o.jsxs(Un,{value:b,onValueChange:_,children:[o.jsx(wn,{"data-testid":"select-bulk-grade",children:o.jsx($n,{placeholder:"Select a grade"})}),o.jsx(_n,{children:se.map(z=>o.jsxs(Ae,{value:z.name,children:["Grade ",z.name]},z.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"bulkStudentNames",children:"Student Names (one per line)"}),o.jsx("textarea",{id:"bulkStudentNames",value:E,onChange:z=>v(z.target.value),placeholder:`Enter student names, one per line:
John Smith
Jane Doe
Alex Johnson`,className:"w-full h-32 p-3 border rounded-md resize-none","data-testid":"textarea-bulk-student-names"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enter each student name on a new line"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),o.jsx(W,{type:"submit","data-testid":"button-submit-bulk-students",children:"Add Students"})]})]})]})}),y&&o.jsx(rr,{open:!!y,onOpenChange:()=>T(null),children:o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Edit Grade"})}),o.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editGradeName",children:"Grade Name"}),o.jsx(he,{id:"editGradeName",value:O.name,onChange:z=>D({name:z.target.value}),placeholder:"e.g. 6th, 7th, 8th","data-testid":"input-edit-grade-name"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>T(null),children:"Cancel"}),o.jsx(W,{type:"submit","data-testid":"button-update-grade",children:"Update Grade"})]})]})]})}),f&&o.jsx(rr,{open:!!f,onOpenChange:()=>m(null),children:o.jsxs(On,{children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Edit Student"})}),o.jsxs("form",{onSubmit:L,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentName",children:"Student Name"}),o.jsx(he,{id:"editStudentName",value:N.name,onChange:z=>I({...N,name:z.target.value}),placeholder:"Enter student name","data-testid":"input-edit-student-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentGrade",children:"Grade"}),o.jsxs(Un,{value:N.grade,onValueChange:z=>I({...N,grade:z}),children:[o.jsx(wn,{"data-testid":"select-edit-student-grade",children:o.jsx($n,{placeholder:"Select a grade"})}),o.jsx(_n,{children:se.map(z=>o.jsxs(Ae,{value:z.name,children:["Grade ",z.name]},z.id))})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"editStudentId",children:"Student ID (Optional)"}),o.jsx(he,{id:"editStudentId",value:N.studentId,onChange:z=>I({...N,studentId:z.target.value}),placeholder:"Enter student ID","data-testid":"input-edit-student-id"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>m(null),children:"Cancel"}),o.jsx(W,{type:"submit","data-testid":"button-update-student",children:"Update Student"})]})]})]})}),x&&o.jsx(rr,{open:d,onOpenChange:h,children:o.jsxs(On,{className:"max-w-4xl",children:[o.jsx(Mn,{children:o.jsxs(Ln,{children:["Grade ",x.name," - Full Roster"]})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{const z=A.filter(J=>J.grade===x.name);return z.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(un,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),o.jsxs("p",{className:"text-muted-foreground",children:["No students in Grade ",x.name," yet."]}),o.jsxs("div",{className:"flex gap-2 justify-center mt-4",children:[o.jsx(W,{onClick:()=>{I({name:"",grade:x.name,studentId:""}),h(!1),s(!0)},size:"sm",children:"Add Student"}),o.jsx(W,{onClick:()=>{_(x.name),h(!1),a(!0)},size:"sm",variant:"outline",children:"Bulk Add Students"})]})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:[z.length," student",z.length!==1?"s":""," in Grade ",x.name]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(W,{onClick:()=>{I({name:"",grade:x.name,studentId:""}),h(!1),s(!0)},size:"sm",children:[o.jsx(eE,{className:"w-4 h-4 mr-2"}),"Add Student"]}),o.jsxs(W,{onClick:()=>{_(x.name),h(!1),a(!0)},size:"sm",variant:"outline",children:[o.jsx(un,{className:"w-4 h-4 mr-2"}),"Bulk Add"]})]})]}),z.map(J=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${Re(J.name)}`,children:fe(J.name)}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:J.name}),J.studentId&&o.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",J.studentId]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>{F(J),h(!1)},"data-testid":`button-edit-student-${J.id}`,children:o.jsx(Hg,{className:"h-4 w-4"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>K(J.id,J.name),className:"hover:text-red-600","data-testid":`button-delete-student-${J.id}`,children:o.jsx(Wg,{className:"h-4 w-4"})})]})]},J.id))]})})()})]})})]})}function lH({user:t}){const[e,n]=p.useState(!1),[r,s]=p.useState(!1),[i,a]=p.useState(!1),{toast:l}=Nt(),c=async f=>{var y;const m=(y=f.target.files)==null?void 0:y[0];if(m){if(!m.name.endsWith(".csv")){l({title:"Invalid File Type",description:"Please upload a CSV file.",variant:"destructive"});return}n(!0);try{const T=new FormData;T.append("file",m);const x=await fetch("/api/upload/csv",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:T});if(!x.ok)throw new Error("Upload failed");const w=await x.json();Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Upload Complete",description:`Successfully imported ${w.studentsAdded} students and ${w.gradesAdded} grades.`})}catch(T){l({title:"Upload Failed",description:T.message,variant:"destructive"})}finally{n(!1)}}},d=async()=>{n(!0);try{const m=await(await Ne("POST","/api/import/clever",{})).json();Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Clever Import Complete",description:`Successfully imported ${m.studentsAdded} students from Clever.`}),s(!0)}catch{l({title:"Clever Import Failed",description:"Please check your Clever API credentials and try again.",variant:"destructive"})}finally{n(!1)}},h=async()=>{n(!0);try{const m=await(await Ne("POST","/api/import/google-classroom",{})).json();Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/grades"]}),l({title:"Google Classroom Import Complete",description:`Successfully imported ${m.studentsAdded} students from Google Classroom.`}),a(!0)}catch{l({title:"Google Classroom Import Failed",description:"Please check your Google Classroom API credentials and try again.",variant:"destructive"})}finally{n(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Upload Student Data"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from multiple sources"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"CSV File Upload"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"fileUpload",children:"Select CSV File"}),o.jsx(he,{id:"fileUpload",type:"file",accept:".csv",onChange:c,disabled:e,"data-testid":"input-file-upload"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"mb-2",children:"CSV file should contain the following columns:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"name (required)"}),o.jsx("li",{children:"grade (required)"}),o.jsx("li",{children:"studentId (optional)"})]})]}),e&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-primary border-t-transparent rounded-full"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:"Processing upload..."})]})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center justify-between",children:["Clever Integration",r&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters directly from your Clever account. This will sync all students from your connected schools."}),o.jsx(W,{onClick:d,disabled:e,className:"w-full","data-testid":"button-clever-import",children:e?"Importing...":"Import from Clever"})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center justify-between",children:["Google Classroom Integration",i&&o.jsx("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded",children:"Connected"})]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Import student rosters from your Google Classroom courses. All enrolled students will be added to your roster."}),o.jsx(W,{onClick:h,disabled:e,className:"w-full","data-testid":"button-google-classroom-import",children:e?"Importing...":"Import from Google Classroom"})]})})]})]})]})}function cH({user:t}){const{toast:e}=Nt(),[n,r]=p.useState({dateRange:"today",grade:"all",teacher:"all",passType:"all"}),[s,i]=p.useState({startDate:"",endDate:""}),a=(E,v)=>{if(!v)return null;const C=new Date(E),R=new Date(v).getTime()-C.getTime(),k=Math.round(R/(1e3*60));return k<1?1:k},{data:l=[],refetch:c}=Zt({queryKey:["/api/passes",n],refetchInterval:3e3,queryFn:async()=>{const E=new URLSearchParams;if(n.dateRange&&n.dateRange!=="all"){const R=new Date;let k=new Date;switch(n.dateRange){case"today":k.setHours(0,0,0,0),E.append("dateStart",k.toISOString());break;case"week":k.setDate(R.getDate()-7),E.append("dateStart",k.toISOString());break;case"month":k.setMonth(R.getMonth()-1),E.append("dateStart",k.toISOString());break;case"custom":s.startDate&&E.append("dateStart",new Date(s.startDate+"T00:00:00").toISOString()),s.endDate&&E.append("dateEnd",new Date(s.endDate+"T23:59:59").toISOString());break}}n.grade&&n.grade!=="all"&&E.append("grade",n.grade),n.teacher&&n.teacher!==""&&n.teacher!=="all"&&E.append("teacherId",n.teacher),n.passType&&n.passType!=="all"&&E.append("passType",n.passType);const v=`/api/passes${E.toString()?"?"+E.toString():""}`,A=await(await Ne("GET",v)).json();return Array.isArray(A)?A:[]}}),{data:d=[]}=Zt({queryKey:["/api/grades"]}),{data:h=[]}=Zt({queryKey:["/api/teachers"]}),f=(t==null?void 0:t.assignedGrades)||[],m=f.length===0?d:d.filter(E=>f.includes(E.name)),y=()=>{c(),e({title:"Filters Applied",description:"Report data has been updated based on your filters."})},T=()=>{if(!l||l.length===0){e({title:"No Data",description:"No pass data available to export. Apply filters first.",variant:"destructive"});return}const E=["Student Name","Grade","Teacher","Pass Type","Custom Reason","Checkout Time","Return Time","Duration (min)"],v=l.map(j=>{var ue,re,ie;const G=j.returnTime?a(j.checkoutTime,j.returnTime)??j.duration:null;return[((ue=j.student)==null?void 0:ue.name)||"Unknown",((re=j.student)==null?void 0:re.grade)||"Unknown",((ie=j.teacher)==null?void 0:ie.name)||"Unknown",j.passType||"general",j.customReason||"",new Date(j.checkoutTime).toLocaleString(),j.returnTime?new Date(j.returnTime).toLocaleString():"Still Out",G!==null?G:"Still Out"]}),C=[E,...v].map(j=>j.map(G=>`"${G}"`).join(",")).join(`
`),A=new Blob([C],{type:"text/csv"}),R=window.URL.createObjectURL(A),k=document.createElement("a");k.href=R,k.download=`pass-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(R),e({title:"Export Complete",description:"Pass report has been downloaded as CSV."})},x=()=>{e({title:"Exporting PDF",description:"Your report is being exported as PDF..."})},b=l.filter(E=>E.status==="returned"&&E.returnTime).map(E=>{const v=a(E.checkoutTime,E.returnTime)??E.duration;return{...E,calculatedDuration:v}}).filter(E=>E.calculatedDuration!==null),_={totalPasses:l.length,avgDuration:b.length>0?Math.round(b.reduce((E,v)=>E+(v.calculatedDuration||0),0)/b.length*10)/10:0,peakHour:l.length>0?new Date(l.reduce((E,v)=>new Date(v.checkoutTime)>new Date(E.checkoutTime)?v:E).checkoutTime).toLocaleTimeString([],{hour:"numeric"}):"N/A",uniqueStudents:new Set(l.map(E=>E.studentId)).size},N={general:l.filter(E=>(E.passType||"general")==="general").length,nurse:l.filter(E=>E.passType==="nurse").length,discipline:l.filter(E=>E.passType==="discipline").length},I=new Date;I.setHours(0,0,0,0);const O=l.filter(E=>new Date(E.checkoutTime)>=I),D=O.length>0?O.sort((E,v)=>new Date(v.checkoutTime).getTime()-new Date(E.checkoutTime).getTime()).slice(0,10).map(E=>{var C;const v=a(E.checkoutTime,E.returnTime);return{id:E.id,studentName:((C=E.student)==null?void 0:C.name)||"Unknown Student",action:E.status==="returned"?`Returned after ${v!==null?v:E.duration&&E.duration>=1?E.duration:1} minutes`:`Checked out${E.customReason?` - ${E.customReason}`:E.passType&&E.passType!=="general"?` for ${E.passType}`:""}`,time:new Date(E.checkoutTime).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),date:"Today",passType:E.passType||"general"}}):[];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Reports"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"View and export student pass usage data"})]}),o.jsx(ee,{className:"mb-6",children:o.jsxs(te,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Filters"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"dateRange",children:"Date Range"}),o.jsxs(Un,{value:n.dateRange,onValueChange:E=>r({...n,dateRange:E}),children:[o.jsx(wn,{"data-testid":"select-date-range",children:o.jsx($n,{placeholder:"Select date range"})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"today",children:"Today"}),o.jsx(Ae,{value:"week",children:"This Week"}),o.jsx(Ae,{value:"month",children:"This Month"}),o.jsx(Ae,{value:"custom",children:"Custom Range"})]})]})]}),n.dateRange==="custom"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"startDate",children:"Start Date"}),o.jsx(he,{id:"startDate",type:"date",value:s.startDate,onChange:E=>i({...s,startDate:E.target.value}),"data-testid":"input-start-date"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"endDate",children:"End Date"}),o.jsx(he,{id:"endDate",type:"date",value:s.endDate,onChange:E=>i({...s,endDate:E.target.value}),"data-testid":"input-end-date"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"gradeFilter",children:"Grade"}),o.jsxs(Un,{value:n.grade,onValueChange:E=>r({...n,grade:E}),children:[o.jsx(wn,{"data-testid":"select-grade-filter",children:o.jsx($n,{placeholder:"All Grades"})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"all",children:"All Grades"}),m.map(E=>o.jsxs(Ae,{value:E.name,children:["Grade ",E.name]},E.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherFilter",children:"Teacher"}),o.jsxs(Un,{value:n.teacher,onValueChange:E=>r({...n,teacher:E}),children:[o.jsx(wn,{"data-testid":"select-teacher-filter",children:o.jsx($n,{placeholder:"All Teachers"})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"all",children:"All Teachers"}),h.map(E=>o.jsx(Ae,{value:E.id,children:E.name},E.id))]})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"passTypeFilter",children:"Pass Type"}),o.jsxs(Un,{value:n.passType,onValueChange:E=>r({...n,passType:E}),children:[o.jsx(wn,{"data-testid":"select-pass-type-filter",children:o.jsx($n,{placeholder:"All Types"})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"all",children:"All Types"}),o.jsx(Ae,{value:"general",children:"General"}),o.jsx(Ae,{value:"nurse",children:"Nurse"}),o.jsx(Ae,{value:"discipline",children:"Discipline"})]})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsx(W,{onClick:y,className:"w-full","data-testid":"button-apply-filters",children:"Apply Filters"})})]})]})}),o.jsx(ee,{className:"mb-6",children:o.jsxs(te,{className:"p-4",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Pass Type Breakdown"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"General"})]}),o.jsx("div",{className:"text-2xl font-bold text-blue-600","data-testid":"stat-general-passes",children:N.general}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Bathroom/General"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Nurse"})]}),o.jsx("div",{className:"text-2xl font-bold text-red-600","data-testid":"stat-nurse-passes",children:N.nurse}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Health Office"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[o.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),o.jsx("span",{className:"text-sm font-medium text-foreground",children:"Discipline"})]}),o.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"stat-discipline-passes",children:N.discipline}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Office/Admin"})]})]})]})}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsx(ee,{children:o.jsxs(te,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary","data-testid":"stat-total-passes",children:_.totalPasses}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Passes"})]})}),o.jsx(ee,{children:o.jsxs(te,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-secondary","data-testid":"stat-avg-duration",children:_.avgDuration}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Minutes"})]})}),o.jsx(ee,{children:o.jsxs(te,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-accent","data-testid":"stat-peak-hour",children:_.peakHour}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Peak Hour"})]})}),o.jsx(ee,{children:o.jsxs(te,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-foreground","data-testid":"stat-unique-students",children:_.uniqueStudents}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Students"})]})})]}),o.jsx(ee,{className:"mb-6",children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Export Data"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs(W,{onClick:T,className:"bg-secondary hover:bg-secondary/90","data-testid":"button-export-csv",children:[o.jsx("i",{className:"fas fa-file-csv mr-2"}),"Export CSV"]}),o.jsxs(W,{onClick:x,className:"bg-destructive hover:bg-destructive/90","data-testid":"button-export-pdf",children:[o.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Export PDF"]})]})]})})}),o.jsx(ee,{children:o.jsxs(te,{className:"p-0",children:[o.jsx("div",{className:"p-4 border-b border-border",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-medium text-foreground",children:"Today's Activity"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Resets daily  View historical data using date filters above"})]})}),o.jsx("div",{className:"divide-y divide-border","data-testid":"recent-activity-list",children:D.length===0?o.jsxs("div",{className:"p-4 text-center",children:[o.jsx("i",{className:"fas fa-history text-muted-foreground text-2xl mb-2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No activity today"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Historical data available using date filters above"})]}):D.map(E=>o.jsx("div",{className:"p-4","data-testid":`activity-${E.id}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary",children:E.studentName.split(" ").map(v=>v[0]).join("")})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:E.studentName}),o.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E.passType==="nurse"?"bg-red-100 text-red-700":E.passType==="discipline"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:E.passType==="nurse"?"Nurse":E.passType==="discipline"?"Discipline":"General"})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:E.action})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:E.time}),o.jsx("p",{className:"text-xs text-muted-foreground",children:E.date})]})]})},E.id))})]})})]})}var _w="Switch",[uH,PW]=Pn(_w),[dH,hH]=uH(_w),VR=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,y]=p.useState(null),T=Pe(e,N=>y(N)),x=p.useRef(!1),w=m?h||!!m.closest("form"):!0,[b=!1,_]=ii({prop:s,defaultProp:i,onChange:d});return o.jsxs(dH,{scope:n,checked:b,disabled:l,children:[o.jsx(be.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":$R(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:T,onClick:Z(t.onClick,N=>{_(I=>!I),w&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),w&&o.jsx(fH,{control:m,bubbles:!x.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});VR.displayName=_w;var FR="SwitchThumb",UR=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=hH(FR,n);return o.jsx(be.span,{"data-state":$R(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});UR.displayName=FR;var fH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),a=mx(n),l=Nf(e);return p.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&f){const m=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(m)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $R(t){return t?"checked":"unchecked"}var BR=VR,mH=UR;const Dy=p.forwardRef(({className:t,...e},n)=>o.jsx(BR,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(mH,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Dy.displayName=BR.displayName;function pH({user:t}){const[e,n]=p.useState({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30}),[r,s]=p.useState(t.name||""),[i,a]=p.useState(!1),[l,c]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,h]=p.useState({current:!1,new:!1,confirm:!1}),[f,m]=p.useState(!1),{toast:y}=Nt();p.useEffect(()=>{n({schoolName:t.schoolName||"",enableNotifications:t.enableNotifications??!0,autoReturn:t.autoReturn??!1,passTimeout:t.passTimeout??30})},[t]);const T=async()=>{try{r!==t.name&&await Ne("PUT","/api/users/me",{name:r}),await Ne("PUT","/api/users/settings",e),Ue.invalidateQueries({queryKey:["/api/users/me"]}),y({title:"Settings Saved",description:"Your profile and settings have been updated successfully."})}catch(w){y({title:"Error",description:w.message,variant:"destructive"})}},x=async()=>{if(l.newPassword!==l.confirmPassword){y({title:"Error",description:"New passwords don't match",variant:"destructive"});return}if(l.newPassword.length<6){y({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}m(!0);try{await Ne("PUT","/api/users/me/password",{currentPassword:l.currentPassword,newPassword:l.newPassword}),y({title:"Password Changed",description:"Your password has been updated successfully."}),a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(w){y({title:"Error",description:w.message,variant:"destructive"})}finally{m(!1)}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Profile & Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your profile and configure your school settings"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(Gg,{className:"w-5 h-5"}),"Profile Information"]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Email"}),o.jsx(he,{value:t.email,readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-email"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Name"}),o.jsx(he,{value:r,onChange:w=>s(w.target.value),placeholder:"Enter your name","data-testid":"input-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Role"}),o.jsx(he,{value:t.isAdmin?"Administrator":"Teacher",readOnly:!0,disabled:!0,className:"bg-muted","data-testid":"input-role"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Password"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:"",onChange:()=>{},readOnly:!0,disabled:!0,className:"bg-muted flex-1",type:"password"}),o.jsxs(W,{variant:"outline",onClick:()=>a(!0),"data-testid":"button-change-password",children:[o.jsx(Z_,{className:"w-4 h-4 mr-2"}),"Change"]})]})]})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(zg,{className:"w-5 h-5"}),"School Information"]})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(he,{id:"schoolName",value:e.schoolName,onChange:w=>n({...e,schoolName:w.target.value}),placeholder:"Enter school name","data-testid":"input-school-name"})]})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(DN,{className:"w-5 h-5"}),"System Settings"]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Enable Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when students are out for extended periods"})]}),o.jsx(Dy,{checked:e.enableNotifications,onCheckedChange:w=>n({...e,enableNotifications:w}),"data-testid":"switch-notifications"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Auto-Return Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically mark students as returned after timeout"})]}),o.jsx(Dy,{checked:e.autoReturn,onCheckedChange:w=>n({...e,autoReturn:w}),"data-testid":"switch-auto-return"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"passTimeout",children:"Pass Timeout (minutes)"}),o.jsx(he,{id:"passTimeout",type:"number",value:e.passTimeout,onChange:w=>n({...e,passTimeout:parseInt(w.target.value)||30}),min:"5",max:"180","data-testid":"input-pass-timeout"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Time before a pass is considered overdue (5-180 minutes)"})]})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"Getting Started"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"1"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Create Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Go to the Roster tab and add your grade levels (6th, 7th, 8th, etc.)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"2"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Add Students"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use bulk add or individual student creation in the Roster tab"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"3"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Select Active Grades"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click on grade cards in Roster to make them active in MyClass (they'll turn green)"})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-medium mt-0.5",children:"4"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Manage Passes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the MyClass tab to issue and track student hall passes"})]})]})]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(W,{onClick:T,"data-testid":"button-save-settings",children:"Save Settings"})})]}),o.jsx(rr,{open:i,onOpenChange:a,children:o.jsxs(On,{className:"max-w-md",children:[o.jsxs(Mn,{children:[o.jsxs(Ln,{className:"flex items-center gap-2",children:[o.jsx(Z_,{className:"w-5 h-5"}),"Change Password"]}),o.jsx(kf,{children:"Enter your current password and choose a new one"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"currentPassword",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(he,{id:"currentPassword",type:d.current?"text":"password",value:l.currentPassword,onChange:w=>c({...l,currentPassword:w.target.value}),placeholder:"Enter current password","data-testid":"input-current-password"}),o.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,current:!d.current}),children:d.current?o.jsx(rp,{className:"w-4 h-4"}):o.jsx(kd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"newPassword",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(he,{id:"newPassword",type:d.new?"text":"password",value:l.newPassword,onChange:w=>c({...l,newPassword:w.target.value}),placeholder:"Enter new password","data-testid":"input-new-password"}),o.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,new:!d.new}),children:d.new?o.jsx(rp,{className:"w-4 h-4"}):o.jsx(kd,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(he,{id:"confirmPassword",type:d.confirm?"text":"password",value:l.confirmPassword,onChange:w=>c({...l,confirmPassword:w.target.value}),placeholder:"Confirm new password","data-testid":"input-confirm-password"}),o.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>h({...d,confirm:!d.confirm}),children:d.confirm?o.jsx(rp,{className:"w-4 h-4"}):o.jsx(kd,{className:"w-4 h-4"})})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[o.jsx(W,{variant:"outline",onClick:()=>{a(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})},disabled:f,children:"Cancel"}),o.jsx(W,{onClick:x,disabled:f||!l.currentPassword||!l.newPassword||!l.confirmPassword,"data-testid":"button-confirm-password-change",children:f?o.jsxs(o.Fragment,{children:[o.jsx(jL,{className:"w-4 h-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"})]})]})})]})}function gH({user:t}){var h;const{toast:e}=Nt(),n=Ov(),{data:r,isLoading:s}=Zt({queryKey:["/api/subscription-status"],enabled:!!t}),i=qo({mutationFn:()=>Ne("POST","/api/subscription/cancel"),onSuccess:f=>{e({title:"Subscription Cancelled",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Cancellation Failed",description:f.message||"Failed to cancel subscription",variant:"destructive"})}}),a=qo({mutationFn:()=>Ne("POST","/api/subscription/reactivate"),onSuccess:f=>{e({title:"Subscription Reactivated",description:f.message}),n.invalidateQueries({queryKey:["/api/subscription-status"]})},onError:f=>{e({title:"Reactivation Failed",description:f.message||"Failed to reactivate subscription",variant:"destructive"})}});if(s)return o.jsx("div",{className:"p-4",children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6"}),o.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});const l=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=(f,m="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:m}).format(f/100),d=[{name:"Basic",users:"3 users",price:"$6",annual:"$48/year",monthlySavings:"$24",features:["3 teacher licenses","Full feature access","Email support","All reporting tools"],current:!0},{name:"Small School",users:"10 users",price:"$35",annual:"$336/year",monthlySavings:"$84",features:["10 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Medium School",users:"25 users",price:"$75",annual:"$720/year",monthlySavings:"$180",features:["25 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Large School",users:"50 users",price:"$120",annual:"$1,152/year",monthlySavings:"$288",features:["50 teacher licenses","Full feature access","Email support","All reporting tools"],current:!1},{name:"Unlimited",users:"Unlimited",price:"$180",annual:"$1,728/year",monthlySavings:"$432",features:["Unlimited teachers","Full feature access","Email support","All reporting tools"],current:!1}];return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Billing & Subscription"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your subscription and billing information"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(ee,{children:o.jsxs(te,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($v,{className:"w-5 h-5 text-primary"}),o.jsx("h3",{className:"font-medium text-foreground",children:"Current Subscription"})]}),o.jsx(bn,{variant:r!=null&&r.hasActiveSubscription?"default":"secondary","data-testid":"subscription-status-badge",children:r!=null&&r.hasActiveSubscription?"Active":r!=null&&r.isTrialAccount?"Free Trial":"Free Plan"})]}),r!=null&&r.hasActiveSubscription?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Plan"}),o.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(h=r.plan)==null?void 0:h.replace("_"," ")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Amount"}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c(r.amount,r.currency),o.jsxs("span",{className:"text-xs",children:["/",r.interval]})]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Teacher Licenses"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r.maxTeachers===-1?"Unlimited":r.maxTeachers})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-foreground",children:"Next Billing"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:l(r.currentPeriodEnd)})]})]}),o.jsx("div",{className:"border-t pt-4",children:r.cancelled?o.jsxs("div",{className:"space-y-3",children:[o.jsxs(iu,{children:[o.jsx(kN,{className:"h-4 w-4"}),o.jsxs(ou,{children:["Your subscription has been cancelled and will end on ",l(r.currentPeriodEnd),". You can reactivate it at any time before then."]})]}),o.jsxs(W,{onClick:()=>a.mutate(),disabled:a.isPending,className:"w-full","data-testid":"button-reactivate-subscription",children:[o.jsx(ML,{className:"w-4 h-4 mr-2"}),a.isPending?"Reactivating...":"Reactivate Subscription"]})]}):o.jsxs(W,{onClick:()=>{confirm("Are you sure you want to cancel your subscription? You will retain access until the end of your current billing period.")&&i.mutate()},disabled:i.isPending,variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50","data-testid":"button-cancel-subscription",children:[o.jsx(nu,{className:"w-4 h-4 mr-2"}),i.isPending?"Cancelling...":"Cancel Subscription"]})})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:r!=null&&r.isTrialAccount?"You are currently on a free trial with unlimited access.":"You are on the free plan with limited features."}),o.jsx(W,{className:"w-full","data-testid":"button-upgrade-subscription",onClick:()=>window.open("/register","_blank"),children:"Upgrade to Paid Plan"})]})]})}),o.jsx(ee,{children:o.jsxs(te,{className:"p-6",children:[o.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Available Plans"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:d.map(f=>{const m=f.name.toLowerCase().replace(" ","_")===(r==null?void 0:r.plan);return o.jsx(ee,{className:m?"border-primary":"",children:o.jsx(te,{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h4",{className:"font-medium text-foreground mb-1",children:f.name}),o.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:f.users}),o.jsx("div",{className:"text-2xl font-bold text-foreground mb-1",children:f.price}),o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"per month"}),o.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:f.annual}),o.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 font-medium mb-4",children:["Save ",f.monthlySavings," annually"]}),o.jsx("ul",{className:"text-xs text-muted-foreground space-y-1 mb-6",children:f.features.map((y,T)=>o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 bg-primary rounded-full flex-shrink-0"}),y]},T))}),m?o.jsx(bn,{variant:"secondary",className:"w-full",children:"Current Plan"}):o.jsx(W,{className:"w-full",variant:"outline",onClick:()=>window.open("/register","_blank"),"data-testid":`button-select-${f.name.toLowerCase().replace(" ","-")}`,children:"Select Plan"})]})})},f.name)})})]})})]})]})}var Ew="Checkbox",[yH,AW]=Pn(Ew),[vH,xH]=yH(Ew),zR=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,y]=p.useState(null),T=Pe(e,I=>y(I)),x=p.useRef(!1),w=m?h||!!m.closest("form"):!0,[b=!1,_]=ii({prop:s,defaultProp:i,onChange:d}),N=p.useRef(b);return p.useEffect(()=>{const I=m==null?void 0:m.form;if(I){const O=()=>_(N.current);return I.addEventListener("reset",O),()=>I.removeEventListener("reset",O)}},[m,_]),o.jsxs(vH,{scope:n,state:b,disabled:l,children:[o.jsx(be.button,{type:"button",role:"checkbox","aria-checked":ni(b)?"mixed":b,"aria-required":a,"data-state":GR(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:T,onKeyDown:Z(t.onKeyDown,I=>{I.key==="Enter"&&I.preventDefault()}),onClick:Z(t.onClick,I=>{_(O=>ni(O)?!0:!O),w&&(x.current=I.isPropagationStopped(),x.current||I.stopPropagation())})}),w&&o.jsx(wH,{control:m,bubbles:!x.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"},defaultChecked:ni(i)?!1:i})]})});zR.displayName=Ew;var HR="CheckboxIndicator",WR=p.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=xH(HR,n);return o.jsx(Mr,{present:r||ni(i.state)||i.state===!0,children:o.jsx(be.span,{"data-state":GR(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});WR.displayName=HR;var wH=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,a=p.useRef(null),l=mx(n),c=Nf(e);p.useEffect(()=>{const h=a.current,f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&y){const T=new Event("click",{bubbles:r});h.indeterminate=ni(n),y.call(h,ni(n)?!1:n),h.dispatchEvent(T)}},[l,n,r]);const d=p.useRef(ni(n)?!1:n);return o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...i,tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ni(t){return t==="indeterminate"}function GR(t){return ni(t)?"indeterminate":t?"checked":"unchecked"}var qR=zR,_H=WR;const KR=p.forwardRef(({className:t,...e},n)=>o.jsx(qR,{ref:n,className:ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:o.jsx(_H,{className:ye("flex items-center justify-center text-current"),children:o.jsx(Uv,{className:"h-4 w-4"})})}));KR.displayName=qR.displayName;function EH(){const t=sH.isConfigured(),n=t?{icon:o.jsx(tu,{className:"h-5 w-5 text-green-500"}),status:"Configured",variant:"default",message:"Firebase is properly configured and ready to use."}:{icon:o.jsx(IL,{className:"h-5 w-5 text-destructive"}),status:"Not Configured",variant:"destructive",message:"Firebase keys are missing. Please add your Firebase configuration in the secrets."};return o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[n.icon,"Firebase Integration"]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(bn,{variant:n.variant,children:n.status})}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.message}),t&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Configuration Details:"}),o.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsxs("div",{children:["Project ID: ","passpilot-55c3d"]}),o.jsxs("div",{children:["App ID: ","1:134904289902:web:e62d187d4ef81703cfe47f"]}),o.jsxs("div",{children:["API Key: ",""]})]})]}),!t&&o.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[o.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[o.jsx(kN,{className:"h-4 w-4"}),"Required Environment Variables:"]}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[o.jsx("li",{children:" VITE_FIREBASE_API_KEY"}),o.jsx("li",{children:" VITE_FIREBASE_PROJECT_ID"}),o.jsx("li",{children:" VITE_FIREBASE_APP_ID"})]})]})]})})]})}var QR="AlertDialog",[SH,jW]=Pn(QR,[qC]),ms=qC(),YR=t=>{const{__scopeAlertDialog:e,...n}=t,r=ms(e);return o.jsx(cI,{...r,...n,modal:!0})};YR.displayName=QR;var TH="AlertDialogTrigger",XR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(uI,{...s,...r,ref:e})});XR.displayName=TH;var bH="AlertDialogPortal",JR=t=>{const{__scopeAlertDialog:e,...n}=t,r=ms(e);return o.jsx(dI,{...r,...n})};JR.displayName=bH;var NH="AlertDialogOverlay",ZR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(ox,{...s,...r,ref:e})});ZR.displayName=NH;var ha="AlertDialogContent",[CH,IH]=SH(ha),PH=FM("AlertDialogContent"),ek=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=ms(n),a=p.useRef(null),l=Pe(e,a),c=p.useRef(null);return o.jsx(u6,{contentName:ha,titleName:tk,docsSlug:"alert-dialog",children:o.jsx(CH,{scope:n,cancelRef:c,children:o.jsxs(ax,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Z(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(PH,{children:r}),o.jsx(jH,{contentRef:a})]})})})});ek.displayName=ha;var tk="AlertDialogTitle",nk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(lx,{...s,...r,ref:e})});nk.displayName=tk;var rk="AlertDialogDescription",sk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(cx,{...s,...r,ref:e})});sk.displayName=rk;var AH="AlertDialogAction",ik=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ms(n);return o.jsx(ux,{...s,...r,ref:e})});ik.displayName=AH;var ok="AlertDialogCancel",ak=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=IH(ok,n),i=ms(n),a=Pe(e,s);return o.jsx(ux,{...i,...r,ref:a})});ak.displayName=ok;var jH=({contentRef:t})=>{const e=`\`${ha}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ha}\` by passing a \`${rk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ha}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},RH=YR,kH=XR,DH=JR,lk=ZR,ck=ek,uk=ik,dk=ak,hk=nk,fk=sk;const Pp=RH,Ap=kH,OH=DH,mk=p.forwardRef(({className:t,...e},n)=>o.jsx(lk,{className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));mk.displayName=lk.displayName;const Kd=p.forwardRef(({className:t,...e},n)=>o.jsxs(OH,{children:[o.jsx(mk,{}),o.jsx(ck,{ref:n,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Kd.displayName=ck.displayName;const Qd=({className:t,...e})=>o.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",t),...e});Qd.displayName="AlertDialogHeader";const Yd=({className:t,...e})=>o.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Yd.displayName="AlertDialogFooter";const Xd=p.forwardRef(({className:t,...e},n)=>o.jsx(hk,{ref:n,className:ye("text-lg font-semibold",t),...e}));Xd.displayName=hk.displayName;const Jd=p.forwardRef(({className:t,...e},n)=>o.jsx(fk,{ref:n,className:ye("text-sm text-muted-foreground",t),...e}));Jd.displayName=fk.displayName;const Zd=p.forwardRef(({className:t,...e},n)=>o.jsx(uk,{ref:n,className:ye(Zv(),t),...e}));Zd.displayName=uk.displayName;const eh=p.forwardRef(({className:t,...e},n)=>o.jsx(dk,{ref:n,className:ye(Zv({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));eh.displayName=dk.displayName;function MH({user:t}){var E;const[e,n]=p.useState({schoolName:t.schoolName||"",enableNotifications:!0,autoReturn:!1,passTimeout:30}),[r,s]=p.useState(t.assignedGrades||[]),[i,a]=p.useState(""),[l,c]=p.useState(""),[d,h]=p.useState(!1),{toast:f}=Nt(),{data:m=[]}=Zt({queryKey:["/api/grades"]}),{data:y=[]}=Zt({queryKey:["/api/admin/teachers"],enabled:t.isAdmin}),{data:T}=Zt({queryKey:["/api/admin/school-info"],enabled:t.isAdmin}),x=async()=>{try{await Ne("PUT","/api/users/settings",{...e,assignedGrades:r}),Ue.invalidateQueries({queryKey:["/api/users/me"]}),f({title:"Settings Saved",description:"Your settings have been updated successfully."})}catch(v){f({title:"Error",description:v.message,variant:"destructive"})}},w=(v,C)=>{s(C?[...r,v]:r.filter(A=>A!==v))},b=qo({mutationFn:async v=>(await Ne("POST","/api/admin/teachers",v)).json(),onSuccess:()=>{Ue.invalidateQueries({queryKey:["/api/admin/teachers"]}),a(""),c(""),h(!1),f({title:"Teacher Added",description:"Teacher invitation sent. They'll set their password on first login."})},onError:v=>{f({title:"Error",description:v.message||"Failed to add teacher",variant:"destructive"})}}),_=qo({mutationFn:async v=>{await Ne("DELETE",`/api/admin/teachers/${v}`)},onSuccess:()=>{Ue.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Removed",description:"Teacher has been removed from your school."})},onError:v=>{f({title:"Error",description:v.message||"Failed to remove teacher",variant:"destructive"})}}),N=qo({mutationFn:async v=>(await Ne("PATCH",`/api/admin/teachers/${v}/promote`)).json(),onSuccess:v=>{Ue.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Teacher Promoted",description:v.message||"Teacher has been promoted to admin."})},onError:v=>{f({title:"Error",description:v.message||"Failed to promote teacher",variant:"destructive"})}}),I=qo({mutationFn:async v=>(await Ne("PATCH",`/api/admin/teachers/${v}/demote`)).json(),onSuccess:v=>{Ue.invalidateQueries({queryKey:["/api/admin/teachers"]}),f({title:"Admin Demoted",description:v.message||"Admin has been demoted to teacher."})},onError:v=>{f({title:"Error",description:v.message||"Failed to demote admin",variant:"destructive"})}}),O=()=>{if(!i||!l){f({title:"Error",description:"Please enter email and name",variant:"destructive"});return}const v=(T==null?void 0:T.maxTeachers)||1;if(y.length>=v){f({title:"User Limit Reached",description:`Your ${(T==null?void 0:T.plan)||"current"} plan allows ${v} teacher${v===1?"":"s"}. Upgrade to add more teachers.`,variant:"destructive"});return}b.mutate({email:i,name:l})},D=v=>{switch(v){case"free":return 10;case"basic_10":return 10;case"standard_25":return 25;case"premium_50":return 50;case"enterprise_unlimited":return"Unlimited";default:return 10}};return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Admin Panel"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure school settings and system administration"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(EH,{}),t.isAdmin&&o.jsxs(o.Fragment,{children:[o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(AL,{className:"w-5 h-5"}),"School Plan & Limits"]})}),o.jsx(te,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{children:"Current Plan"}),o.jsx(bn,{variant:"outline",className:"mt-1",children:((E=T==null?void 0:T.plan)==null?void 0:E.replace("_"," ").toUpperCase())||"FREE"})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"Teachers"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[y.length," / ",D((T==null?void 0:T.plan)||"free")]})]}),o.jsxs("div",{children:[o.jsx(ne,{children:"School ID"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:(T==null?void 0:T.schoolId)||"Loading..."})]})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(Dd,{className:"w-5 h-5"}),"Add New Teacher"]})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[d?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacher-email",children:"Teacher Email"}),o.jsx(he,{id:"teacher-email",type:"email",value:i,onChange:v=>a(v.target.value),placeholder:"teacher@school.edu","data-testid":"input-teacher-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacher-name",children:"Teacher Name"}),o.jsx(he,{id:"teacher-name",value:l,onChange:v=>c(v.target.value),placeholder:"Teacher Name","data-testid":"input-teacher-name"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{onClick:O,disabled:b.isPending,"data-testid":"button-confirm-add-teacher",children:b.isPending?"Adding...":"Add Teacher"}),o.jsx(W,{variant:"outline",onClick:()=>h(!1),"data-testid":"button-cancel-add-teacher",children:"Cancel"})]})]}):o.jsxs(W,{onClick:()=>h(!0),className:"w-full","data-testid":"button-add-teacher",children:[o.jsx(Dd,{className:"w-4 h-4 mr-2"}),"Add Teacher"]}),(T==null?void 0:T.maxTeachers)&&y.length>=T.maxTeachers&&o.jsxs("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg flex items-center gap-2",children:[o.jsx(Da,{className:"w-4 h-4 text-amber-600"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["You've reached your plan limit of ",T.maxTeachers," teacher",T.maxTeachers===1?"":"s",". Upgrade your plan to add more teachers."]})]})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(un,{className:"w-5 h-5"}),"Current Teachers (",y.length,")"]})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-3",children:y.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No teachers added yet. Add your first teacher above."}):y.map(v=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`teacher-item-${v.email}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(RL,{className:"w-4 h-4 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:v.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:v.email})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bn,{variant:v.status==="active"?"default":"secondary",children:v.status}),o.jsx(bn,{variant:v.isAdmin?"default":"outline",children:v.isAdmin?"Admin":"Teacher"}),(v.id!==(t==null?void 0:t.id)||y.filter(C=>C.isAdmin).length>1)&&o.jsxs(o.Fragment,{children:[v.isAdmin?o.jsxs(Pp,{children:[o.jsx(Ap,{asChild:!0,children:o.jsx(W,{variant:"ghost",size:"sm",className:"text-orange-600 hover:text-orange-700","data-testid":`button-demote-admin-${v.email}`,children:o.jsx(BL,{className:"w-4 h-4"})})}),o.jsxs(Kd,{children:[o.jsxs(Qd,{children:[o.jsx(Xd,{children:"Demote Admin"}),o.jsxs(Jd,{children:["Are you sure you want to demote ",v.name," (",v.email,") from admin to teacher? They will lose admin privileges and cannot access admin functions."]})]}),o.jsxs(Yd,{children:[o.jsx(eh,{children:"Cancel"}),o.jsx(Zd,{onClick:()=>I.mutate(v.id),className:"bg-orange-600 text-white hover:bg-orange-700",children:"Demote to Teacher"})]})]})]}):o.jsxs(Pp,{children:[o.jsx(Ap,{asChild:!0,children:o.jsx(W,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700","data-testid":`button-promote-teacher-${v.email}`,children:o.jsx(Dd,{className:"w-4 h-4"})})}),o.jsxs(Kd,{children:[o.jsxs(Qd,{children:[o.jsx(Xd,{children:"Promote to Admin"}),o.jsxs(Jd,{children:["Are you sure you want to promote ",v.name," (",v.email,") to admin? They will gain full administrative privileges including the ability to manage other teachers and school settings."]})]}),o.jsxs(Yd,{children:[o.jsx(eh,{children:"Cancel"}),o.jsx(Zd,{onClick:()=>N.mutate(v.id),className:"bg-green-600 text-white hover:bg-green-700",children:"Promote to Admin"})]})]})]}),(!v.isAdmin||y.filter(C=>C.isAdmin).length>1)&&o.jsxs(Pp,{children:[o.jsx(Ap,{asChild:!0,children:o.jsx(W,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive","data-testid":`button-remove-teacher-${v.email}`,children:o.jsx(Wg,{className:"w-4 h-4"})})}),o.jsxs(Kd,{children:[o.jsxs(Qd,{children:[o.jsxs(Xd,{children:["Remove ",v.isAdmin?"Admin":"Teacher"]}),o.jsxs(Jd,{children:["Are you sure you want to remove ",v.name," (",v.email,") from your school? This action cannot be undone and will revoke their access to all school data.",v.isAdmin&&" They will lose all administrative privileges."]})]}),o.jsxs(Yd,{children:[o.jsx(eh,{children:"Cancel"}),o.jsxs(Zd,{onClick:()=>_.mutate(v.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:["Remove ",v.isAdmin?"Admin":"Teacher"]})]})]})]})]})]})]},v.id))})})]})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"School Information"})}),o.jsx(te,{children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(he,{id:"schoolName",value:e.schoolName,onChange:v=>n({...e,schoolName:v.target.value}),"data-testid":"input-school-name"})]})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"Teacher Profile"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherName",children:"Name"}),o.jsx(he,{id:"teacherName",value:t.name||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"teacherEmail",children:"Email"}),o.jsx(he,{id:"teacherEmail",value:t.email||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-teacher-email"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School"}),o.jsx(he,{id:"schoolName",value:t.schoolName||"",readOnly:!0,className:"bg-gray-50 dark:bg-gray-800","data-testid":"input-school-name-readonly"})]})]})})]}),!t.isAdmin&&o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"Grade Level Access"})}),o.jsx(te,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which grade levels you want access to. You can manage students and passes for these grades."}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:m.map(v=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:[o.jsx(KR,{id:`grade-${v.id}`,checked:r.includes(v.name),onCheckedChange:C=>w(v.name,!!C),"data-testid":`checkbox-grade-${v.name}`}),o.jsxs(ne,{htmlFor:`grade-${v.id}`,className:"text-sm font-medium cursor-pointer",children:["Grade ",v.name]})]},v.id))}),m.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground bg-gray-50 dark:bg-gray-800 p-3 rounded",children:"No grades available yet. Add grades in the Roster tab first."}),r.length===0&&m.length>0&&o.jsx("p",{className:"text-sm text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-3 rounded",children:"Please select at least one grade to access student management features."}),r.length>0&&o.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded",children:o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:["You have access to ",r.length," grade level",r.length!==1?"s":"",": ",r.join(", ")]})})]})})]}),o.jsx(W,{onClick:x,className:"w-full","data-testid":"button-save-settings",children:"Save Settings"})]})]})}function LH(){var n;const{user:t}=Pf();return!t||!t.schoolName?null:((n=t.email)==null?void 0:n.includes("desalescincy.org"))?o.jsxs(iu,{className:"mb-4 border-green-200 bg-green-50",children:[o.jsx(oi,{className:"h-4 w-4 text-green-600"}),o.jsxs(ou,{className:"text-green-800",children:[o.jsx("strong",{children:"Unlimited Access:"})," Your account has unlimited access to all PassPilot features."]})]}):null}function VH({user:t,enabled:e=!0}){const{toast:n}=Nt(),r=p.useRef(new Set),{data:s}=Zt({queryKey:["/api/passes/active"],refetchInterval:e&&(t!=null&&t.enableNotifications)?3e4:!1,enabled:e&&(t==null?void 0:t.enableNotifications)});p.useEffect(()=>{if(!(t!=null&&t.enableNotifications)||!s||!Array.isArray(s))return;const i=t.passTimeout||30,a=new Date;s.forEach(l=>{var h;if(!l.checkoutTime||r.current.has(l.id))return;const c=new Date(l.checkoutTime),d=Math.floor((a.getTime()-c.getTime())/(1e3*60));d>=i&&(r.current.add(l.id),n({title:"Pass Overdue",description:`${((h=l.student)==null?void 0:h.name)||"Student"} has been out for ${d} minutes (${l.passType} pass)`,variant:"destructive"}))})},[s,t==null?void 0:t.enableNotifications,t==null?void 0:t.passTimeout,n]),p.useEffect(()=>{if(!s||!Array.isArray(s))return;const i=new Set(s.map(l=>l.id));Array.from(r.current).forEach(l=>{i.has(l)||r.current.delete(l)})},[s])}function FH({user:t,onLogout:e}){const[n,r]=p.useState("passes"),[,s]=po(),{toast:i}=Nt(),[a,l]=p.useState(!1),[c,d]=p.useState(""),[h,f]=p.useState("");VH({user:t,enabled:t==null?void 0:t.enableNotifications});const[m,y]=p.useState(()=>{try{const N=localStorage.getItem(`selectedGrades_${t.id}`);return N?new Set(JSON.parse(N)):new Set}catch{return new Set}}),[T,x]=p.useState(()=>{try{return localStorage.getItem(`currentGrade_${t.id}`)||null}catch{return null}});p.useEffect(()=>{try{localStorage.setItem(`selectedGrades_${t.id}`,JSON.stringify(Array.from(m)))}catch(N){console.warn("Failed to save selected grades to localStorage:",N)}},[m,t.id]),p.useEffect(()=>{try{T?localStorage.setItem(`currentGrade_${t.id}`,T):localStorage.removeItem(`currentGrade_${t.id}`)}catch(N){console.warn("Failed to save current grade to localStorage:",N)}},[T,t.id]);const w=[{id:"passes",label:"Passes",icon:"fas fa-clipboard-list"},{id:"myclass",label:"My Class",icon:"fas fa-chalkboard-teacher"},{id:"roster",label:"Roster",icon:"fas fa-users"},{id:"upload",label:"Upload",icon:"fas fa-cloud-upload-alt"},{id:"reports",label:"Reports",icon:"fas fa-chart-bar"},{id:"profile",label:"Profile",icon:"fas fa-user"}];t.isAdmin&&(w.push({id:"admin",label:"Admin",icon:"fas fa-cog"}),w.push({id:"billing",label:"Billing",icon:"fas fa-credit-card"}));const b=()=>{switch(n){case"passes":return o.jsx(i1,{user:t,selectedGrades:m});case"myclass":return o.jsx(oH,{user:t,selectedGrades:m,currentGrade:T,onRemoveGrade:N=>{const I=new Set(m);if(I.delete(N),T===N){const O=Array.from(I);x(O.length>0?O[0]:null)}y(I)}});case"roster":return o.jsx(aH,{user:t,selectedGrades:m,onGradeClick:N=>{const I=new Set(m);m.has(N)?(I.delete(N),T===N&&x(null)):(I.add(N),x(N)),y(I)}});case"upload":return o.jsx(lH,{user:t});case"reports":return o.jsx(cH,{user:t});case"admin":return t.isAdmin?o.jsx(MH,{user:t}):null;case"profile":return o.jsx(pH,{user:t});case"billing":return t.isAdmin?o.jsx(gH,{user:t}):null;default:return o.jsx(i1,{user:t})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx("header",{className:"bg-card shadow-sm border-b border-border px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"PassPilot"}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:t.schoolName||"School"}),o.jsx("span",{children:""}),o.jsx("span",{children:t.name||"Teacher"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(dA,{children:[o.jsx(hA,{asChild:!0,children:o.jsx(W,{variant:"outline",size:"sm","data-testid":"button-user-menu",children:o.jsx(Ef,{className:"h-4 w-4"})})}),o.jsxs(Tx,{align:"end",children:[o.jsxs(oa,{onClick:()=>l(!0),"data-testid":"menu-switch-kiosk",children:[o.jsx(ON,{className:"h-4 w-4 mr-2"}),"Switch to Kiosk"]}),o.jsx(oa,{onClick:e,"data-testid":"menu-logout",children:"Logout"})]})]})})]})}),o.jsxs("main",{className:"pb-20 min-h-screen",children:[o.jsx("div",{className:"p-4",children:o.jsx(LH,{})}),b()]}),o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-40",children:o.jsx("div",{className:`grid h-16 ${w.length===6?"grid-cols-6":"grid-cols-7"}`,children:w.map(N=>o.jsxs(W,{variant:"ghost",className:`flex flex-col items-center justify-center h-full rounded-none ${n===N.id?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground"}`,onClick:()=>r(N.id),"data-testid":`button-tab-${N.id}`,children:[o.jsx("i",{className:`${N.icon} text-lg mb-1`}),o.jsx("span",{className:"text-xs",children:N.label})]},N.id))})}),o.jsx(rr,{open:a,onOpenChange:l,children:o.jsxs(On,{"data-testid":"dialog-kiosk-setup",children:[o.jsxs(Mn,{children:[o.jsx(Ln,{children:"Switch to Kiosk Mode"}),o.jsx(kf,{children:"Set up this device for shared use. Students can check out passes without accessing teacher settings."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"4-Digit PIN (for exiting kiosk mode):"}),o.jsx(he,{type:"password",placeholder:"Enter 4-digit PIN",value:c,onChange:N=>d(N.target.value.slice(0,4)),maxLength:4,className:"text-center text-lg","data-testid":"input-kiosk-pin"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location Label (optional):"}),o.jsx(he,{placeholder:"e.g., Mr. Smith's Room, Hallway Tablet",value:h,onChange:N=>f(N.target.value),"data-testid":"input-location-label"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{onClick:_,disabled:c.length!==4,className:"flex-1","data-testid":"button-confirm-kiosk",children:"Switch to Kiosk"}),o.jsx(W,{variant:"outline",onClick:()=>{l(!1),d(""),f("")},className:"flex-1","data-testid":"button-cancel-kiosk",children:"Cancel"})]})]})]})})]});async function _(){try{if(!(await fetch("/api/auth/set-kiosk-pin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({pin:c})})).ok)throw new Error("Failed to set kiosk PIN");const I={teacherId:t.id,teacherName:t.name,locationLabel:h||void 0,schoolId:t.schoolId,currentGrade:T,token:localStorage.getItem("token")};console.log("Creating kiosk session:",I),sessionStorage.setItem("kioskSession",JSON.stringify(I)),s("/kiosk")}catch{i({title:"Error",description:"Failed to switch to kiosk mode. Please try again.",variant:"destructive"})}}}function o1(){const{user:t,logout:e,isLoading:n}=Pf();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-orange-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-slate-600",children:"Loading..."})]})}):t?o.jsx(FH,{user:t,onLogout:e}):o.jsx(i3,{})}function UH(){const{login:t,registerSchool:e}=Pf(),{toast:n}=Nt(),[,r]=po(),[s,i]=p.useState("login"),[a,l]=p.useState(!1),[c,d]=p.useState({email:"",password:""}),[h,f]=p.useState(!1),[m,y]=p.useState([]),[T,x]=p.useState(""),[w,b]=p.useState({schoolName:"",adminName:"",adminEmail:"",adminPassword:"",plan:"free"}),[_,N]=p.useState({email:""}),I=async v=>{v.preventDefault(),l(!0);try{const C=v.currentTarget,A=new FormData(C),R=A.get("email")||c.email,k=A.get("password")||c.password;console.log("LOGIN - FROM STATE:",c),console.log("LOGIN - FROM FORM:",{email:R,password:"***"});const j=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:R,password:k})}),G=await j.json();if(!j.ok)throw new Error(G.error||"Login failed");G.requiresSchool?(f(!0),y(G.schools||[]),G.schools&&G.schools.length>0&&x(G.schools[0].id),n({title:"Multiple Schools Found",description:"Please select which school you want to access."})):G.success&&(r("/"),n({title:"Welcome!",description:"Successfully logged in!"}))}catch(C){n({title:"Error",description:C.message,variant:"destructive"})}finally{l(!1)}},O=async()=>{if(T){l(!0);try{const v=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c.email,password:c.password,schoolId:T})}),C=await v.json();if(!v.ok||!C.success)throw new Error(C.error||"Login failed");r("/"),n({title:"Welcome!",description:`Successfully logged into ${C.user.schoolName}!`})}catch(v){n({title:"Error",description:v.message,variant:"destructive"})}finally{l(!1)}}},D=async v=>{v.preventDefault(),l(!0);try{const C=v.currentTarget,A=new FormData(C),R={schoolName:A.get("schoolName")||w.schoolName,adminName:A.get("adminName")||w.adminName,adminEmail:A.get("adminEmail")||w.adminEmail,adminPassword:A.get("adminPassword")||w.adminPassword,plan:"free_trial"};console.log("REGISTER - FROM STATE:",w),console.log("REGISTER - FROM FORM:",{...R,adminPassword:"***"}),await e(R),localStorage.removeItem("passpilot.registrationDraft"),localStorage.removeItem("pendingRegistration"),n({title:"Success!",description:"School registered successfully!"})}catch(C){n({title:"Error",description:C.message,variant:"destructive"})}finally{l(!1)}},E=async v=>{v.preventDefault(),l(!0);try{const C=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:_.email})}),A=await C.json();if(!C.ok)throw new Error(A.message);n({title:"Reset Email Sent",description:"Check your email for password reset instructions."}),i("login")}catch(C){n({title:"Error",description:C.message,variant:"destructive"})}finally{l(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-id-card text-white text-2xl"})}),o.jsx(ge,{className:"text-2xl font-bold",children:s==="login"?"Sign In to PassPilot":s==="forgot-password"?"Reset Your Password":"Register Your School"})]}),o.jsx(te,{children:s==="login"?o.jsx(o.Fragment,{children:h?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Multiple Schools Found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Your email is associated with multiple schools. Please select which school you want to access."})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"school-select",children:"Choose Your School"}),o.jsxs(Un,{value:T,onValueChange:x,children:[o.jsx(wn,{"data-testid":"select-school",children:o.jsx($n,{placeholder:"Select a school"})}),o.jsx(_n,{children:m.map(v=>o.jsx(Ae,{value:v.id,"data-testid":`school-option-${v.id}`,children:v.name},v.id))})]})]}),o.jsx(W,{onClick:O,className:"w-full",disabled:a||!T,"data-testid":"button-school-login",children:a?"Signing In...":"Continue to School"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>{f(!1),y([]),x("")},"data-testid":"button-back-to-login",children:"Back to Sign In"})})]}):o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Email Address"}),o.jsx(he,{type:"email",id:"email",name:"email",placeholder:"teacher@school.edu",value:c.email,onChange:v=>d({...c,email:v.target.value}),required:!0,"data-testid":"input-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(he,{type:"password",id:"password",name:"password",placeholder:"",value:c.password,onChange:v=>d({...c,password:v.target.value}),required:!0,"data-testid":"input-password"})]}),o.jsx(W,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-login",children:a?"Signing In...":"Sign In"}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>i("forgot-password"),"data-testid":"button-forgot-password",children:"Forgot Password?"}),o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground p-0",onClick:()=>i("register"),"data-testid":"button-register-link",children:"Register School"})]})]})}):s==="forgot-password"?o.jsxs("form",{onSubmit:E,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"forgot-email",children:"Email Address"}),o.jsx(he,{type:"email",id:"forgot-email",placeholder:"teacher@school.edu",value:_.email,onChange:v=>N({..._,email:v.target.value}),required:!0,"data-testid":"input-forgot-email"})]}),o.jsx(W,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-send-reset",children:a?"Sending Reset Email...":"Send Reset Email"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>i("login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]}):o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"schoolName",children:"School Name"}),o.jsx(he,{type:"text",id:"schoolName",name:"schoolName",placeholder:"Lincoln Elementary School",value:w.schoolName,onChange:v=>b({...w,schoolName:v.target.value}),required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminName",children:"Administrator Name"}),o.jsx(he,{type:"text",id:"adminName",name:"adminName",placeholder:"Principal Smith",value:w.adminName,onChange:v=>b({...w,adminName:v.target.value}),required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminEmail",children:"Administrator Email"}),o.jsx(he,{type:"email",id:"adminEmail",name:"adminEmail",placeholder:"admin@lincolnelementary.edu",value:w.adminEmail,onChange:v=>b({...w,adminEmail:v.target.value}),required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"adminPassword",children:"Password"}),o.jsx(he,{type:"password",id:"adminPassword",name:"adminPassword",placeholder:"",value:w.adminPassword,onChange:v=>b({...w,adminPassword:v.target.value}),required:!0,"data-testid":"input-admin-password"})]}),o.jsx(W,{type:"submit",className:"w-full bg-secondary hover:bg-secondary/90",disabled:a,"data-testid":"button-register",children:a?"Registering...":"Register School"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>i("login"),"data-testid":"button-back-to-login-from-register",children:"Back to Sign In"})})]})})]})})}var pk="basil",$H=function(e){return e===3?"v3":e},gk="https://js.stripe.com",BH="".concat(gk,"/").concat(pk,"/stripe.js"),zH=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,HH=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,a1="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",WH=function(e){return zH.test(e)||HH.test(e)},GH=function(){for(var e=document.querySelectorAll('script[src^="'.concat(gk,'"]')),n=0;n<e.length;n++){var r=e[n];if(WH(r.src))return r}return null},l1=function(e){var n="",r=document.createElement("script");r.src="".concat(BH).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},qH=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.8.0",startTime:n})},jl=null,gd=null,yd=null,KH=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},QH=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},YH=function(e){return jl!==null?jl:(jl=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(a1),window.Stripe){n(window.Stripe);return}try{var s=GH();if(s&&e)console.warn(a1);else if(!s)s=l1(e);else if(s&&yd!==null&&gd!==null){var i;s.removeEventListener("load",yd),s.removeEventListener("error",gd),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=l1(e)}yd=QH(n,r),gd=KH(r),s.addEventListener("load",yd),s.addEventListener("error",gd)}catch(a){r(a);return}}),jl.catch(function(n){return jl=null,Promise.reject(n)}))},XH=function(e,n,r){if(e===null)return null;var s=n[0],i=s.match(/^pk_test/),a=$H(e.version),l=pk;i&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.8.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,n);return qH(c,r),c},Rl,yk=!1,vk=function(){return Rl||(Rl=YH(null).catch(function(e){return Rl=null,Promise.reject(e)}),Rl)};Promise.resolve().then(function(){return vk()}).catch(function(t){yk||console.warn(t)});var JH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];yk=!0;var s=Date.now();return vk().then(function(i){return XH(i,n,s)})};JH("pk_live_51RtLjlBw14YCsyD6BiOwJkWZVUnznHUwGDJa0Sx5UwQwyQsXgLtq29TT6YJpygC7I4IE6KsXNaSc8yU6vH3mJclb00iOMfz4tJ");const ZH=[{id:"TRIAL",name:"Free Trial",price:0,teachers:1,students:200,description:"14-day full-featured trial",popular:!0,features:["14-day free trial","No credit card required","Up to 200 students","All features included","Email support"]},{id:"TEACHER_MONTHLY",name:"Teacher Plan (Monthly)",price:6,teachers:1,students:200,description:"For individual classrooms",popular:!1,features:["Individual teacher account","Unlimited passes","Up to 200 students","All features included","Email support"]},{id:"TEACHER_ANNUAL",name:"Teacher Plan (Annual)",price:60,teachers:1,students:200,description:"For individual classrooms - Save 17%",popular:!1,features:["Individual teacher account","Unlimited passes","Up to 200 students","All features included","Email support","2 months free vs monthly"]},{id:"SMALL_TEAM_MONTHLY",name:"Small Team (Monthly)",price:25,teachers:10,students:1500,description:"For departments & grade-level teams",popular:!0,features:["Up to 10 teacher accounts","Unlimited passes","1,500 students total","All features included","Priority support","Admin dashboard"]},{id:"SMALL_TEAM_ANNUAL",name:"Small Team (Annual)",price:250,teachers:10,students:1500,description:"For departments & grade-level teams - Save 17%",popular:!1,features:["Up to 10 teacher accounts","Unlimited passes","1,500 students total","All features included","Priority support","Admin dashboard","2 months free vs monthly"]},{id:"SMALL_SCHOOL",name:"Small School (500 students)",price:500,teachers:-1,students:500,description:"Annual plan for entire schools",popular:!1,features:["Unlimited teachers","Unlimited passes","Up to 500 students","Admin dashboards","Advanced reporting","Priority support"]},{id:"MEDIUM_SCHOOL",name:"Medium School (501-1,000 students)",price:900,teachers:-1,students:1e3,description:"Annual plan for growing schools",popular:!1,features:["Unlimited teachers","Unlimited passes","Up to 1,000 students","Admin dashboards","Advanced reporting","Priority support"]},{id:"LARGE_SCHOOL",name:"Large School (1,001-2,000 students)",price:1500,teachers:-1,students:2e3,description:"Annual plan for large institutions",popular:!1,features:["Unlimited teachers","Unlimited passes","Up to 2,000 students","Admin dashboards","Advanced reporting","Priority support"]}];function eW(){const[t,e]=p.useState("plan"),[n,r]=p.useState(null),[s,i]=p.useState(!1),[a,l]=p.useState(!1),[c,d]=p.useState(!1),[h,f]=p.useState({name:"",adminEmail:"",adminName:"",password:"",confirmPassword:""}),{toast:m}=Nt(),[,y]=po();p.useEffect(()=>{const b=setTimeout(async()=>{if(!h.adminEmail||!h.adminEmail.includes("@")){d(!1);return}l(!0);try{const N=n&&n.id!=="TRIAL"?"?allowUpgrade=true":"",O=await(await Ne("GET",`/api/auth/check-email/${encodeURIComponent(h.adminEmail)}${N}`)).json();d(O.exists)}catch{d(!1)}finally{l(!1)}},500);return()=>clearTimeout(b)},[h.adminEmail,n]);const T=w=>{r(w),e("school")},x=async w=>{if(w.preventDefault(),c&&(n==null?void 0:n.id)==="TRIAL"){m({title:"Email Already Registered",description:"This email is already registered. Each email can only register for one free trial.",variant:"destructive"});return}if(h.password!==h.confirmPassword){m({title:"Password Mismatch",description:"Passwords do not match",variant:"destructive"});return}if(n){i(!0);try{const b={schoolName:h.name,adminEmail:h.adminEmail,adminName:h.adminName,adminPassword:h.password,plan:n.id};console.log("Submitting current form data:",b);const _=await Ne("POST","/api/auth/register-school",b);if(_.ok){const N=await _.json();m({title:N.isUpgrade?"Plan Upgraded Successfully":"Registration Successful",description:N.message||"Your account has been created successfully!"}),N.isUpgrade?(m({title:"Logout Required",description:"Please log out and log back in to access all new plan features.",duration:8e3}),y("/login")):N.autoLogin?(console.log("Auto-login successful, redirecting to landing page"),y("/")):y("/login")}else{const N=await _.json();m({title:"Registration Failed",description:N.message||"An error occurred during registration",variant:"destructive"})}}catch(b){m({title:"Registration Failed",description:b.message||"Failed to register school",variant:"destructive"})}finally{i(!1)}}};return t==="plan"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto py-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),o.jsx("p",{className:"text-lg text-gray-600",children:"Select the perfect plan for your school"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6",children:ZH.map(w=>o.jsxs(ee,{className:`relative cursor-pointer transition-all hover:shadow-lg ${w.popular?"ring-2 ring-blue-500":""}`,children:[w.popular&&o.jsx("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2",children:o.jsx(bn,{className:"bg-blue-500 text-white",children:"Most Popular"})}),o.jsxs(pe,{className:"text-center pb-2",children:[o.jsx(ge,{className:"text-xl",children:w.name}),o.jsx("div",{className:"text-3xl font-bold text-blue-600",children:w.price===0?"Free":`$${w.price}`}),o.jsx("div",{className:"text-sm text-gray-500",children:w.id.includes("annual")?"per year":w.id.includes("school")&&!w.id.includes("team")?"annually":w.price===0?"14 days":"per month"}),o.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[o.jsx(un,{className:"w-4 h-4 inline mr-1"}),w.teachers===-1?"Unlimited":w.teachers," teacher",w.teachers!==1?"s":"",w.students&&o.jsxs("div",{className:"text-xs mt-1",children:[o.jsx(zg,{className:"w-3 h-3 inline mr-1"}),w.students===-1?"Unlimited":`Up to ${w.students}`," students"]})]})]}),o.jsxs(te,{className:"pt-2",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:w.description}),o.jsx("ul",{className:"space-y-2 mb-6",children:w.features.map((b,_)=>o.jsxs("li",{className:"flex items-center text-sm",children:[o.jsx(tu,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),b]},_))}),o.jsx(W,{className:"w-full",onClick:()=>T(w),"data-testid":`button-select-${w.id}`,children:"Select Plan"})]})]},w.id))}),o.jsx("div",{className:"text-center mt-8",children:o.jsx(W,{variant:"outline",onClick:()=>y("/"),children:"Back to Home"})})]})}):t==="school"?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-4",children:o.jsx("div",{className:"max-w-2xl mx-auto py-8",children:o.jsxs(ee,{children:[o.jsxs(pe,{children:[o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(zg,{className:"w-6 h-6"}),"School Information"]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Selected Plan: ",o.jsx(bn,{variant:"outline",children:n==null?void 0:n.name})," - $",n==null?void 0:n.price,"/month"]})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"school-name",children:"School Name"}),o.jsx(he,{id:"school-name",type:"text",value:h.name,onChange:w=>f(b=>({...b,name:w.target.value})),placeholder:"Enter your school name",required:!0,"data-testid":"input-school-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"admin-name",children:"Administrator Name"}),o.jsx(he,{id:"admin-name",type:"text",value:h.adminName,onChange:w=>f(b=>({...b,adminName:w.target.value})),placeholder:"Enter administrator name",required:!0,"data-testid":"input-admin-name"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"admin-email",children:"Administrator Email"}),o.jsx(he,{id:"admin-email",type:"email",value:h.adminEmail,onChange:w=>f(b=>({...b,adminEmail:w.target.value})),placeholder:"admin@yourschool.org",required:!0,className:c?"border-red-500 focus:border-red-500":"","data-testid":"input-admin-email"}),a&&h.adminEmail&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Checking email availability..."}),c&&o.jsxs(iu,{className:"mt-2 border-red-200 bg-red-50",children:[o.jsx(Da,{className:"h-4 w-4 text-red-600"}),o.jsx(ou,{className:"text-red-800",children:(n==null?void 0:n.id)==="TRIAL"?"This email is already registered. Each email can only be used for one PassPilot account. Please use a different email address.":"This email is already registered. For paid plans, existing users can upgrade - continue to payment."})]}),!c&&!a&&h.adminEmail.includes("@")&&o.jsx("p",{className:"text-sm text-green-600 mt-1",children:" Email is available"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(he,{id:"password",type:"password",value:h.password,onChange:w=>f(b=>({...b,password:w.target.value})),placeholder:"Create a secure password",required:!0,"data-testid":"input-password"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirm-password",children:"Confirm Password"}),o.jsx(he,{id:"confirm-password",type:"password",value:h.confirmPassword,onChange:w=>f(b=>({...b,confirmPassword:w.target.value})),placeholder:"Confirm your password",required:!0,"data-testid":"input-confirm-password"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>e("plan"),className:"flex-1",children:"Back to Plans"}),o.jsxs(W,{type:"submit",disabled:s||c&&(n==null?void 0:n.id)==="TRIAL"||a,className:"flex-1","data-testid":"button-complete-registration",children:[o.jsx($v,{className:"w-4 h-4 mr-2"}),s?"Processing...":a?"Checking Email...":c&&(n==null?void 0:n.id)==="TRIAL"?"Email Already Used":c&&(n==null?void 0:n.id)!=="TRIAL"?"Upgrade Account":"Complete Registration"]})]})]})})]})})}):null}function tW(){const{toast:t}=Nt(),[,e]=po(),[n,r]=p.useState(!1),[s,i]=p.useState(""),[a,l]=p.useState({newPassword:"",confirmPassword:""});p.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("token");if(!h){t({title:"Invalid Reset Link",description:"This password reset link is invalid or missing the required token.",variant:"destructive"}),e("/login");return}i(h)},[]);const c=async d=>{d.preventDefault(),r(!0);try{if(!a.newPassword||!a.confirmPassword)throw new Error("Please fill in both password fields");if(a.newPassword.length<6)throw new Error("Password must be at least 6 characters long");if(a.newPassword!==a.confirmPassword)throw new Error("Passwords do not match");const h=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,newPassword:a.newPassword})}),f=await h.json();if(!h.ok)throw new Error(f.message);t({title:"Password Reset Successful",description:"Your password has been reset. You can now sign in with your new password."}),e("/login")}catch(h){t({title:"Error",description:h.message,variant:"destructive"})}finally{r(!1)}};return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:o.jsx("i",{className:"fas fa-lock text-white text-2xl"})}),o.jsx(ge,{className:"text-2xl font-bold",children:"Create New Password"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your new password below"})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"newPassword",children:"New Password"}),o.jsx(he,{type:"password",id:"newPassword",placeholder:"",value:a.newPassword,onChange:d=>l({...a,newPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-new-password"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 6 characters long"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsx(he,{type:"password",id:"confirmPassword",placeholder:"",value:a.confirmPassword,onChange:d=>l({...a,confirmPassword:d.target.value}),required:!0,minLength:6,"data-testid":"input-confirm-password"})]}),o.jsx(W,{type:"submit",className:"w-full",disabled:n,"data-testid":"button-reset-password",children:n?"Resetting Password...":"Reset Password"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(W,{type:"button",variant:"link",className:"text-sm text-muted-foreground hover:text-foreground",onClick:()=>e("/login"),"data-testid":"button-back-to-login",children:"Back to Sign In"})})]})})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:o.jsx(ee,{className:"w-full max-w-md",children:o.jsx(te,{className:"p-8 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})})}function nW({onBack:t}){const[e,n]=p.useState(null),[r,s]=p.useState(""),[i,a]=p.useState(""),[l,c]=p.useState(""),[d,h]=p.useState(!1),f={id:"1",name:"Emma Johnson",grade:"5th Grade",currentlyOut:!1,lastPass:"Yesterday, 2:30 PM - Returned 2:45 PM"},m=()=>{r.length>=3&&n(f)},y=async()=>{i&&(h(!0),setTimeout(()=>{h(!1),n(null),s(""),a(""),c(""),alert("Pass request sent to teacher for approval!")},1500))},T=()=>{n({...e,currentlyOut:!1}),alert("Welcome back! Pass completed.")};return e?e.currentlyOut?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(ee,{className:"shadow-lg border-orange-200",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(oi,{className:"w-8 h-8 text-orange-600"})}),o.jsx(ge,{className:"text-xl",children:"You're Currently Out"}),o.jsx("p",{className:"text-slate-600",children:"Return from your pass when finished"})]}),o.jsxs(te,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[o.jsx("p",{className:"font-medium",children:e.name}),o.jsx("p",{className:"text-sm text-slate-600",children:e.grade}),o.jsx(bn,{className:"mt-2 bg-orange-100 text-orange-700",children:"Out for 8 minutes"})]}),o.jsxs(W,{onClick:T,className:"w-full bg-green-600 hover:bg-green-700",children:[o.jsx($g,{className:"w-4 h-4 mr-2"}),"I'm Back - End Pass"]}),o.jsxs(W,{variant:"ghost",onClick:()=>n(null),className:"w-full",children:[o.jsx(Bg,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-12",children:o.jsxs(ee,{className:"shadow-lg",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Gg,{className:"w-8 h-8 text-blue-600"})}),o.jsxs(ge,{className:"text-xl",children:["Welcome, ",e.name]}),o.jsx("p",{className:"text-slate-600",children:e.grade})]}),o.jsxs(te,{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-sm",children:[o.jsx("p",{className:"text-slate-600",children:"Last Pass:"}),o.jsx("p",{className:"font-medium",children:e.lastPass})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(ne,{children:"Why do you need to leave?"}),o.jsxs(Un,{value:i,onValueChange:a,children:[o.jsx(wn,{children:o.jsx($n,{placeholder:"Select pass type..."})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"restroom",children:"Restroom"}),o.jsx(Ae,{value:"water",children:"Water/Drink"}),o.jsx(Ae,{value:"nurse",children:"Nurse Visit"}),o.jsx(Ae,{value:"office",children:"Main Office"}),o.jsx(Ae,{value:"locker",children:"Locker"}),o.jsx(Ae,{value:"counselor",children:"Counselor"}),o.jsx(Ae,{value:"other",children:"Other (explain below)"})]})]})]}),i==="other"&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"custom-reason",children:"Please explain:"}),o.jsx(he,{id:"custom-reason",placeholder:"Enter reason...",value:l,onChange:x=>c(x.target.value)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(W,{onClick:y,disabled:!i||d,className:"flex-1",children:d?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):o.jsxs(o.Fragment,{children:[o.jsx($g,{className:"w-4 h-4 mr-2"}),"Request Pass"]})}),o.jsx(W,{variant:"outline",onClick:()=>n(null),disabled:d,children:o.jsx(Bg,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"text-center",children:o.jsx(W,{variant:"ghost",onClick:t,className:"text-sm",children:" Teacher View"})})]})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto pt-20",children:o.jsxs(ee,{className:"shadow-lg",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx(ge,{className:"text-2xl text-blue-600",children:"Student Pass Kiosk"}),o.jsx("p",{className:"text-slate-600",children:"Enter your Student ID to request a pass"})]}),o.jsxs(te,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"student-id",children:"Student ID"}),o.jsx(he,{id:"student-id",placeholder:"Enter your student ID...",value:r,onChange:x=>s(x.target.value),className:"text-center text-xl",maxLength:10})]}),o.jsxs(W,{onClick:m,className:"w-full",disabled:r.length<3,children:[o.jsx(Gg,{className:"w-4 h-4 mr-2"}),"Sign In"]}),o.jsx("div",{className:"text-center",children:o.jsx(W,{variant:"ghost",onClick:t,className:"text-sm",children:" Back to Teacher View"})})]})]})})})}function rW(){const[t,e]=p.useState("menu");return t==="student"?o.jsx(nW,{onBack:()=>e("menu")}):t==="teacher"?o.jsx(TeacherApprovalPanel,{onBack:()=>e("menu")}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto pt-12",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Student Self-Service Pass System Demo"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Experience how a student-operated kiosk system would work compared to teacher-managed passes"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[o.jsxs(ee,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("student"),children:[o.jsxs(pe,{className:"text-center",children:[o.jsx(Bv,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),o.jsx(ge,{className:"text-xl",children:"Student Kiosk View"})]}),o.jsxs(te,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See what students would experience when requesting passes at a classroom computer or tablet."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:" Enter student ID to sign in"}),o.jsx("li",{children:" Select pass type and reason"}),o.jsx("li",{children:" Submit request for teacher approval"}),o.jsx("li",{children:" Return to mark pass complete"})]}),o.jsx(W,{className:"w-full mt-4",children:"Try Student View "})]})]}),o.jsxs(ee,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("teacher"),children:[o.jsxs(pe,{className:"text-center",children:[o.jsx(tE,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),o.jsx(ge,{className:"text-xl",children:"Teacher Approval Panel"})]}),o.jsxs(te,{children:[o.jsx("p",{className:"text-slate-600 mb-4",children:"See how teachers would approve or deny student pass requests in real-time."}),o.jsxs("ul",{className:"text-sm text-slate-600 space-y-2",children:[o.jsx("li",{children:" View incoming student requests"}),o.jsx("li",{children:" See pass type and reasons"}),o.jsx("li",{children:" Approve or deny with one click"}),o.jsx("li",{children:" Monitor all active passes"})]}),o.jsx(W,{className:"w-full mt-4",variant:"outline",children:"Try Teacher View "})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[o.jsxs(ee,{className:"bg-green-50 border-green-200",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"text-green-800 flex items-center gap-2",children:[o.jsx(tE,{className:"w-5 h-5"}),"Student Self-Service Advantages"]})}),o.jsx(te,{children:o.jsxs("ul",{className:"text-green-700 space-y-2 text-sm",children:[o.jsx("li",{children:" Reduces teacher interruptions during instruction"}),o.jsx("li",{children:" Students take ownership of pass requests"}),o.jsx("li",{children:" Automatic logging and accountability"}),o.jsx("li",{children:" Scales well for larger classes"}),o.jsx("li",{children:" Digital literacy for students"}),o.jsx("li",{children:" Clear audit trail of all requests"})]})})]}),o.jsxs(ee,{className:"bg-orange-50 border-orange-200",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"text-orange-800 flex items-center gap-2",children:[o.jsx(un,{className:"w-5 h-5"}),"Implementation Considerations"]})}),o.jsx(te,{children:o.jsxs("ul",{className:"text-orange-700 space-y-2 text-sm",children:[o.jsx("li",{children:" Requires dedicated device in each classroom"}),o.jsx("li",{children:" Student ID system and training needed"}),o.jsx("li",{children:" Teacher must monitor approval notifications"}),o.jsx("li",{children:" May not work well for younger students"}),o.jsx("li",{children:" Needs reliable internet connectivity"}),o.jsx("li",{children:" Initial setup and device management"})]})})]})]}),o.jsx("div",{className:"text-center mt-12",children:o.jsx(ee,{className:"bg-blue-50 border-blue-200",children:o.jsxs(te,{className:"p-6",children:[o.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Hybrid Option"}),o.jsx("p",{className:"text-blue-700",children:"PassPilot could offer both modes - letting schools choose teacher-managed passes OR student self-service kiosks based on their preferences and classroom setup."})]})})})]})})}function sW(){const[,t]=po(),{toast:e}=Nt(),[n,r]=p.useState(null),[s,i]=p.useState([]),[a,l]=p.useState([]),[c,d]=p.useState("general"),[h,f]=p.useState(""),[m,y]=p.useState(""),[T,x]=p.useState(!1),[w,b]=p.useState(null),[_,N]=p.useState(null),[I,O]=p.useState([]),[D,E]=p.useState(!1),[v,C]=p.useState(null),[A,R]=p.useState(Date.now());p.useEffect(()=>{const L=sessionStorage.getItem("kioskSession");if(L){const K=JSON.parse(L);console.log("Kiosk session loaded:",K),console.log("Token available:",!!K.token),console.log("LocalStorage token:",!!localStorage.getItem("token")),console.log("LocalStorage token value:",localStorage.getItem("token")),r(K),N(K.currentGrade||null),k(K.schoolId),j(K.teacherId),G()}else console.log("No kiosk session found, redirecting to login"),console.log("Current path should be /kiosk but redirecting to /login"),t("/login")},[t]),p.useEffect(()=>{const L=setInterval(()=>{R(Date.now())},1e4);return()=>clearInterval(L)},[]),p.useEffect(()=>{if(n!=null&&n.teacherId){const L=setInterval(()=>{j(n.teacherId)},3e3);return()=>clearInterval(L)}},[n==null?void 0:n.teacherId]);const k=async L=>{try{const fe=await(await Ne("GET",`/api/students?schoolId=${L}`,void 0)).json();console.log("Loaded students in kiosk:",fe),i(fe)}catch(K){console.error("Error loading students:",K)}},j=async L=>{try{const fe=await(await Ne("GET",`/api/passes/active?teacherId=${L}`,void 0)).json();l(fe)}catch(K){console.error("Failed to load active passes:",K)}},G=async()=>{try{const L=await Ne("GET","/api/grades",void 0);if(!L.ok)throw new Error(`Grades API failed with status ${L.status}`);const K=await L.json(),fe=await Ne("GET","/api/users/me",void 0);if(!fe.ok)throw new Error(`User API failed with status ${fe.status}`);const Re=await fe.json(),ke=(Re==null?void 0:Re.assignedGrades)||[];let se;try{const J=localStorage.getItem(`selectedGrades_${Re.id}`);se=J?new Set(JSON.parse(J)):new Set}catch{se=new Set}let z;se.size===0?z=K.filter(J=>ke.length===0||ke.includes(J.name)):z=K.filter(J=>se.has(J.name)&&(ke.length===0||ke.includes(J.name))),O(z)}catch(L){console.error("Failed to load grades:",L)}},ue=L=>{if(!n)return;const K=a.find(fe=>fe.studentId===L.id&&fe.status==="out");K?ie(K.id):(C(L),E(!0),d("general"),f(""))},re=async()=>{if(!(!v||!n))try{console.log("Creating pass for student:",v.name);let L=h;c==="general"&&!h?L="Bathroom":c==="nurse"&&!h?L="Nurse visit":c==="discipline"&&!h&&(L="Discipline"),await Ne("POST","/api/passes",{studentId:v.id,passType:c,customReason:L}),Ue.invalidateQueries({queryKey:["/api/passes/active"]}),Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/passes"]}),await j(n.teacherId),e({title:"Pass created",description:`${v.name} has been marked as out for ${L}.`}),E(!1),C(null),d("general"),f("")}catch(L){console.error("Error creating pass:",L),e({title:"Error",description:`Failed to create pass: ${(L==null?void 0:L.message)||"Unknown error"}`,variant:"destructive"})}},ie=async L=>{try{const K=a.find(Re=>Re.id===L),fe=(K==null?void 0:K.studentName)||"Student";await Ne("PUT",`/api/passes/${L}/return`,{}),Ue.invalidateQueries({queryKey:["/api/passes/active"]}),Ue.invalidateQueries({queryKey:["/api/students"]}),Ue.invalidateQueries({queryKey:["/api/passes"]}),e({title:"Student Returned",description:`${fe} has been marked as returned.`}),await j(n.teacherId)}catch(K){e({title:"Error",description:(K==null?void 0:K.message)||"Failed to return student. Please try again.",variant:"destructive"})}},U=async()=>{if(n)try{const L=await fetch("/api/auth/verify-kiosk-pin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacherId:n.teacherId,pin:m})});L.ok&&((await L.json()).valid?(sessionStorage.removeItem("kioskSession"),t("/")):(e({title:"Invalid PIN",description:"Please enter the correct PIN to exit kiosk mode.",variant:"destructive"}),y("")))}catch{e({title:"Error",description:"Failed to verify PIN. Please try again.",variant:"destructive"})}},$=()=>{const L=setTimeout(()=>{x(!0)},3e3);b(L)},Y=()=>{w&&(clearTimeout(w),b(null))},F=s.filter(L=>!_||L.grade===_);return p.useEffect(()=>{!_&&I.length>0&&N(I[0].name)},[I,_]),n?T?o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsx(pe,{children:o.jsx(ge,{className:"text-center",children:"Exit Kiosk Mode"})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Enter Teacher PIN:"}),o.jsx(he,{type:"password",value:m,onChange:L=>y(L.target.value),placeholder:"4-digit PIN",maxLength:4,className:"text-center text-lg","data-testid":"input-exit-pin"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{onClick:U,className:"flex-1","data-testid":"button-confirm-exit",children:"Exit Kiosk"}),o.jsx(W,{variant:"outline",onClick:()=>{x(!1),y("")},className:"flex-1","data-testid":"button-cancel-exit",children:"Cancel"})]})]})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"PassPilot Kiosk"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.teacherName,n.locationLabel&&`  ${n.locationLabel}`]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs(W,{variant:"outline",onClick:()=>x(!0),className:"flex items-center space-x-2","data-testid":"button-exit-kiosk",children:[o.jsx(Bg,{className:"h-4 w-4"}),o.jsx("span",{children:"Exit Kiosk"})]}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date().toLocaleDateString(),"  ",new Date().toLocaleTimeString()]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:I.length===0?o.jsxs("div",{className:"text-gray-500 text-sm",children:["Loading grades... (Debug: grades array is empty - length: ",I.length,")"]}):I.map(L=>o.jsxs(W,{variant:_===L.name?"default":"outline",size:"sm",onClick:()=>N(L.name),className:`${_===L.name?"bg-blue-600 text-white hover:bg-blue-700":"hover:bg-blue-50"}`,"data-testid":`button-grade-${L.name}`,children:[L.name,o.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs rounded-full bg-black/10",children:s.filter(K=>K.grade===L.name).length})]},L.id))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(un,{className:"h-5 w-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),o.jsx("p",{className:"text-2xl font-bold",children:F.length})]})]})})}),o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:o.jsx(oi,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Currently Out"}),o.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(L=>L.status==="out"&&F.some(K=>K.id===L.studentId)).length})]})]})})}),o.jsx(ee,{children:o.jsx(te,{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(X_,{className:"h-5 w-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Available"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:F.length-a.filter(L=>L.status==="out"&&F.some(K=>K.id===L.studentId)).length})]})]})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2 text-red-600",children:[o.jsx(oi,{className:"h-5 w-5"}),"Currently Out - ",_||"All Grades"]})}),o.jsx(te,{children:a.filter(L=>L.status==="out"&&F.some(K=>K.id===L.studentId)).length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No students are currently out of class"}):o.jsx("div",{className:"space-y-3",children:a.filter(L=>L.status==="out"&&F.some(K=>K.id===L.studentId)).map(L=>{const K=F.find(fe=>fe.id===L.studentId);return K?o.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-red-600",children:K.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:K.name}),o.jsxs("div",{className:"text-sm text-gray-600",children:[L.passType==="general"?"General":L.passType==="nurse"?"Nurse":"Discipline",L.customReason&&`  ${L.customReason}`]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Out for ",Math.floor((A-new Date(L.checkoutTime).getTime())/6e4)," min  Since ",new Date(L.checkoutTime).toLocaleTimeString()]})]})]}),o.jsx(W,{size:"sm",onClick:()=>ie(L.id),className:"bg-blue-600 hover:bg-blue-700","data-testid":`button-return-${L.id}`,children:"Mark Returned"})]},L.id):null})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2 text-green-600",children:[o.jsx(X_,{className:"h-5 w-5"}),"Available Students - ",_||"All Grades"]})}),o.jsx(te,{children:F.filter(L=>!a.some(K=>K.studentId===L.id&&K.status==="out")).length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"All students are currently out of class"}):o.jsx("div",{className:"space-y-2",children:F.filter(L=>!a.some(K=>K.studentId===L.id&&K.status==="out")).map(L=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50","data-testid":`student-card-${L.id}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-green-600",children:L.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:L.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[L.grade,"  ",L.studentId]})]})]}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(W,{size:"sm",variant:"outline",className:"border-green-300 text-green-700 hover:bg-green-50",onClick:()=>ue(L),"data-testid":`button-mark-out-${L.id}`,children:"Mark Out"})})]},L.id))})})]})]}),o.jsx(rr,{open:D,onOpenChange:E,children:o.jsxs(On,{className:"sm:max-w-md",children:[o.jsx(Mn,{children:o.jsx(Ln,{children:"Mark Student Out"})}),o.jsxs("div",{className:"space-y-4 py-4",children:[v&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Creating pass for: ",o.jsx("span",{className:"font-medium",children:v.name})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"pass-type",children:"Pass Type"}),o.jsxs(Un,{value:c,onValueChange:L=>d(L),children:[o.jsx(wn,{id:"pass-type",children:o.jsx($n,{})}),o.jsxs(_n,{children:[o.jsx(Ae,{value:"general",children:"General (Bathroom, Water, etc.)"}),o.jsx(Ae,{value:"nurse",children:"Nurse"}),o.jsx(Ae,{value:"discipline",children:"Discipline"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ne,{htmlFor:"custom-reason",children:"Custom Reason (Optional)"}),o.jsx(he,{id:"custom-reason",value:h,onChange:L=>f(L.target.value),placeholder:c==="general"?"Bathroom, Water fountain, etc.":c==="nurse"?"Nurse visit":"Discipline office","data-testid":"input-custom-reason"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{onClick:re,className:"flex-1","data-testid":"button-create-pass",children:"Create Pass"}),o.jsx(W,{variant:"outline",onClick:()=>{E(!1),C(null),d("general"),f("")},className:"flex-1","data-testid":"button-cancel-pass",children:"Cancel"})]})]})]})}),o.jsx("div",{className:"fixed top-0 left-0 w-16 h-16 opacity-0 cursor-pointer",onMouseDown:$,onMouseUp:Y,onMouseLeave:Y,onTouchStart:$,onTouchEnd:Y,"data-testid":"corner-exit-trigger"})]}):o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."})}function iW(){return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx(Gi,{href:"/",children:o.jsxs(W,{variant:"ghost",size:"sm",className:"mb-4","data-testid":"button-back-home",children:[o.jsx(jN,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"PassPilot Quick Start Guide"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Everything you need to get started with digital hall pass management"})]}),o.jsxs(ee,{className:"mb-6",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(tu,{className:"w-5 h-5 text-green-600"}),"1. Logging In"]})}),o.jsxs(te,{className:"space-y-3",children:[o.jsx("p",{children:" Use your email to log in."}),o.jsx("p",{children:" You can set any password you want  the app will save it as your permanent password."})]})]}),o.jsxs(ee,{className:"mb-6",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(DN,{className:"w-5 h-5 text-blue-600"}),"2. The 6 Tabs at the Bottom"]})}),o.jsx(te,{className:"space-y-4",children:o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(un,{className:"w-5 h-5 text-purple-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Profile"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Edit your name, change your password, and adjust system settings like the optional notification system (e.g., set to 5 minutes to get an alert if a student is out too long)."})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(RN,{className:"w-5 h-5 text-green-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Report"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Tracks daily, weekly, and custom date ranges. Logs teacher activity for accountability. Tracks reasons students are out (General, Nurse, Discipline, Custom). Export as PDF or Excel."})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx($L,{className:"w-5 h-5 text-orange-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Upload"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Upload student rosters via Google Classroom or Clever."})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Dd,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Roster"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Add any grade level. Select the grades you teach to quickly switch between them in MyClass. Click a grade tab to highlight it green  that means it's active."})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(oi,{className:"w-5 h-5 text-red-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"MyClass"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Manage students being out. Tabs match your selected grades. 'Mark Out' logs them as out and starts a timer. Choose a reason (Nurse, Discipline, Custom). All activity logs to Reports."})]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(bn,{className:"bg-blue-100 text-blue-700",children:"Passes"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:"Passes"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"See all students currently out  filtered by your assigned classes in Roster. Admins can monitor the whole school."})]})]})]})]})})]}),o.jsxs(ee,{className:"mb-6",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(Bv,{className:"w-5 h-5 text-green-600"}),"3. Kiosk Mode & Mobile App Installation"]})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Kiosk Mode Setup:"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Lets students sign themselves in/out from a dedicated device (e.g., touchscreen Chromebook)."}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:"You can have both Kiosk Mode and your Teacher View open at the same time."}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"How to use:"}),o.jsxs("ol",{className:"space-y-2 text-sm",children:[o.jsx("li",{children:"1. Log in and set your grades in Roster."}),o.jsx("li",{children:"2. Click the dropdown (upper-right corner)  Switch to Kiosk."}),o.jsx("li",{children:"3. Leave this screen open for student use."}),o.jsx("li",{children:"4. To have your Teacher View open just navigate to a new PassPilot URL on your computer and log in again."})]}),o.jsx("p",{className:"text-sm mt-3 text-gray-600 dark:text-gray-300",children:"Everything is tied to your teacher ID, so when you log in again the Kiosk and any additional Kiosks will be linked to your Teacher View."})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg mb-4",children:[o.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-2",children:"Example Setup"}),o.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Mike keeps Teacher View on his laptop while a Chromebook in the corner runs Kiosk Mode. Students sign in/out themselves, and Mike can override or monitor everything from MyClass."})]})]}),o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[o.jsx("h4",{className:"font-semibold mb-3",children:" Install as Mobile App (PWA):"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsx("p",{children:o.jsx("strong",{children:"On iPhone/iPad:"})}),o.jsx("p",{children:"1. Open PassPilot in Safari"}),o.jsx("p",{children:"2. Tap the Share button (square with arrow)"}),o.jsx("p",{children:'3. Scroll down and tap "Add to Home Screen"'}),o.jsx("p",{children:'4. Tap "Add" - now you have a PassPilot app icon!'}),o.jsx("p",{className:"mt-3",children:o.jsx("strong",{children:"On Android:"})}),o.jsx("p",{children:"1. Open PassPilot in Chrome"}),o.jsx("p",{children:"2. Tap the menu (3 dots) in the top right"}),o.jsx("p",{children:'3. Tap "Add to Home screen" or "Install app"'}),o.jsx("p",{children:'4. Tap "Add" - now you have a PassPilot app icon!'}),o.jsxs("p",{className:"mt-3",children:[o.jsx("strong",{children:"Benefits:"})," Faster access, works offline, feels like a native app"]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg mt-4",children:[o.jsx("p",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:" Important PWA Kiosk Warning:"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"In PWA mode, you cannot close tabs or access browser controls. If you forget your 4-digit kiosk exit password, you'll need to force-close the app (double-tap home button and swipe up on iOS, or use recent apps on Android) and reopen PassPilot."}),o.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-2",children:[o.jsx("strong",{children:"Recommendation:"})," Write down your 4-digit password or use something memorable before entering kiosk mode in PWA."]})]})]})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-8",children:[o.jsx(Gi,{href:"/trial",children:o.jsx(W,{size:"lg",className:"flex-1","data-testid":"button-start-trial",children:"Start Free Trial"})}),o.jsx(Gi,{href:"/features",children:o.jsx(W,{variant:"outline",size:"lg",className:"flex-1","data-testid":"button-view-features",children:"View Key Features"})})]})]})})}function oW(){return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:o.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx(Gi,{href:"/",children:o.jsxs(W,{variant:"ghost",size:"sm",className:"mb-4","data-testid":"button-back-home",children:[o.jsx(jN,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"PassPilot Key Features"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Everything you need for modern digital hall pass management"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(un,{className:"w-6 h-6 text-blue-600"}),"Multi-Class & Multi-Teacher Management"]})}),o.jsxs(te,{className:"space-y-3",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[o.jsx("p",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Perfect for single teacher use or multi-teacher school-wide tracking."}),o.jsx("p",{className:"text-blue-700 dark:text-blue-300 mt-1",children:"Very affordable for an individual teacher who wants to track passes in their own classroom."})]}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Manage multiple grade levels and classes."}),o.jsx("li",{children:" Grade-based privacy controls."}),o.jsx("li",{children:" Bulk student import from spreadsheets."})]})]})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(ON,{className:"w-6 h-6 text-green-600"}),"Mobile-First Design"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Works on phones, tablets, and computers."}),o.jsx("li",{children:" Install as a mobile app (PWA) for quick access."}),o.jsx("li",{children:" No downloads required  runs in any modern browser."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(oi,{className:"w-6 h-6 text-orange-600"}),"Real-Time Tracking"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" See exactly who's out of class right now."}),o.jsx("li",{children:" Automatic pass duration tracking."}),o.jsx("li",{children:" Optional instant notifications when students return."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(RN,{className:"w-6 h-6 text-purple-600"}),"Comprehensive Reports"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Daily, weekly, and monthly pass statistics."}),o.jsx("li",{children:" Separate tracking for bathroom, nurse, and discipline passes."}),o.jsx("li",{children:" Export data for parent conferences & admin meetings."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(VL,{className:"w-6 h-6 text-red-600"}),"School-Ready Security"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Secure login system."}),o.jsx("li",{children:" Admin controls for school-wide deployment."}),o.jsx("li",{children:" Data privacy compliant."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(FL,{className:"w-6 h-6 text-indigo-600"}),"Perfect For"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Teachers wanting better hall pass control."}),o.jsx("li",{children:" Department heads tracking student movements."}),o.jsx("li",{children:" Administrators needing school-wide oversight."}),o.jsx("li",{children:" Schools transitioning to digital solutions."}),o.jsx("li",{children:" Teachers tired of lost or forgotten paper passes."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(DL,{className:"w-6 h-6 text-green-600"}),"What's Included"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Full web application access."}),o.jsx("li",{children:" Step-by-step setup guide + video tutorials."}),o.jsx("li",{children:" Student roster import template."}),o.jsx("li",{children:" Administrator training materials."}),o.jsx("li",{children:" Email support for setup assistance."})]})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2",children:[o.jsx(Bv,{className:"w-6 h-6 text-gray-600"}),"System Requirements"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:" Internet connection."}),o.jsx("li",{children:" Modern browser: Chrome, Safari, Firefox, Edge."}),o.jsx("li",{children:" Optional: Smartphone or tablet for mobile use."})]})})]}),o.jsxs(ee,{className:"border-green-200 bg-green-50 dark:bg-green-900/20",children:[o.jsx(pe,{children:o.jsxs(ge,{className:"flex items-center gap-2 text-green-800 dark:text-green-200",children:[o.jsx(tu,{className:"w-6 h-6"}),"Getting Started Is Easy"]})}),o.jsx(te,{className:"space-y-3",children:o.jsxs("ol",{className:"space-y-2 text-green-700 dark:text-green-300",children:[o.jsx("li",{children:"1. Purchase & receive your access credentials."}),o.jsx("li",{children:"2. Set up your school and classes (about 5 minutes)."}),o.jsx("li",{children:"3. Import or add your students."}),o.jsx("li",{children:"4. Start tracking passes instantly!"})]})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-8",children:[o.jsx(Gi,{href:"/trial",children:o.jsx(W,{size:"lg",className:"flex-1","data-testid":"button-start-trial",children:"Start Free Trial"})}),o.jsx(Gi,{href:"/guide",children:o.jsx(W,{variant:"outline",size:"lg",className:"flex-1","data-testid":"button-view-guide",children:"View Quick Start Guide"})})]})]})})}function aW(){const[,t]=po(),[e,n]=p.useState(null);return p.useEffect(()=>{const r=new URLSearchParams(window.location.search),s=r.get("session_id");n(s);const i=r.get("error");if(i){console.warn("Auto-login failed, redirecting to login:",i),t("/login?error="+i);return}const a=setTimeout(()=>{t("/")},3e3);return()=>clearTimeout(a)},[t]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsxs(pe,{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(tu,{className:"w-8 h-8 text-green-600"})}),o.jsx(ge,{className:"text-2xl text-green-800",children:"Payment Successful!"})]}),o.jsxs(te,{className:"text-center space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Thank you for subscribing to PassPilot! Your account has been activated and you now have full access to all features."}),e&&o.jsxs("p",{className:"text-sm text-gray-500",children:["Session ID: ",e.substring(0,20),"..."]}),o.jsxs("div",{className:"space-y-3 pt-4",children:[o.jsx(W,{asChild:!0,className:"w-full","data-testid":"button-continue",children:o.jsxs(Gi,{href:"/",children:[o.jsx($g,{className:"w-4 h-4 mr-2"}),"Continue to PassPilot"]})}),o.jsx("p",{className:"text-sm text-gray-500",children:"You will be redirected automatically in a few seconds..."})]})]})]})})}function lW({onSuccess:t}){const[e,n]=p.useState(""),[r,s]=p.useState(""),[i,a]=p.useState(null),[l,c]=p.useState(!1),{toast:d}=Nt(),h=async f=>{f.preventDefault(),a(null),c(!0);try{const m=await Ne("POST","/api/admin/login",{email:e,password:r});if(m.ok)d({title:"Login Successful",description:"Welcome to PassPilot Usage Tracker"}),t();else{const y=await m.text();a("Invalid email or password")}}catch{a("Login failed. Please try again.")}finally{c(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsxs(pe,{children:[o.jsx(ge,{className:"text-center",children:"PassPilot Admin Access"}),o.jsx("p",{className:"text-center text-gray-600",children:"Usage Tracker Dashboard"})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Email"}),o.jsx(he,{id:"email",type:"email",value:e,onChange:f=>n(f.target.value),placeholder:"admin@passpilot.com",required:!0,"data-testid":"input-admin-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(he,{id:"password",type:"password",value:r,onChange:f=>s(f.target.value),placeholder:"Enter your password",required:!0,"data-testid":"input-admin-password"})]}),i&&o.jsx("div",{className:"text-red-600 text-sm","data-testid":"text-error",children:i}),o.jsx(W,{type:"submit",className:"w-full",disabled:l,"data-testid":"button-admin-login",children:l?"Signing in...":"Sign in"})]})})]})})}function cW({onSuccess:t}){const[e,n]=p.useState("passpilotapp@gmail.com"),[r,s]=p.useState(""),[i,a]=p.useState(""),[l,c]=p.useState(null),[d,h]=p.useState(!1),{toast:f}=Nt(),m=async y=>{if(y.preventDefault(),c(null),r!==i){c("Passwords do not match");return}if(r.length<6){c("Password must be at least 6 characters");return}h(!0);try{const T=await Ne("POST","/api/admin/bootstrap",{email:e,password:r});if(T.ok)f({title:"Admin Account Created",description:"Your platform owner account is now active!"}),t();else{const x=await T.json().catch(()=>({error:"Unknown error"}));c(x.error==="bootstrap-closed"?"Admin account already exists. Please use login instead.":"Failed to create admin account. Please try again.")}}catch{c("Bootstrap failed. Please try again.")}finally{h(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsxs(pe,{children:[o.jsx(ge,{className:"text-center",children:"Create Platform Owner Account"}),o.jsx("p",{className:"text-center text-gray-600",children:"One-time setup for Usage Tracker"})]}),o.jsx(te,{children:o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"email",children:"Owner Email"}),o.jsx(he,{id:"email",type:"email",value:e,onChange:y=>n(y.target.value),placeholder:"passpilotapp@gmail.com",required:!0,"data-testid":"input-bootstrap-email"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"password",children:"Password"}),o.jsx(he,{id:"password",type:"password",value:r,onChange:y=>s(y.target.value),placeholder:"Create a secure password",required:!0,"data-testid":"input-bootstrap-password"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsx(he,{id:"confirmPassword",type:"password",value:i,onChange:y=>a(y.target.value),placeholder:"Confirm your password",required:!0,"data-testid":"input-bootstrap-confirm"})]}),l&&o.jsx("div",{className:"text-red-600 text-sm","data-testid":"text-bootstrap-error",children:l}),o.jsx(W,{type:"submit",className:"w-full",disabled:d,"data-testid":"button-bootstrap-create",children:d?"Creating Account...":"Create Admin Account"})]})})]})})}function uW({school:t,onSave:e,onCancel:n}){const[r,s]=p.useState(t.plan),[i,a]=p.useState(t.status),[l,c]=p.useState(t.maxTeachers),[d,h]=p.useState(t.maxStudents),f=()=>{e({plan:r,status:i,maxTeachers:l,maxStudents:d})};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs(ee,{className:"w-full max-w-md",children:[o.jsx(pe,{children:o.jsxs(ge,{children:["Edit School: ",t.name]})}),o.jsxs(te,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"plan",children:"Plan"}),o.jsxs("select",{id:"plan",value:r,onChange:m=>s(m.target.value),className:"w-full p-2 border rounded","data-testid":"select-edit-plan",children:[o.jsx("option",{value:"TRIAL",children:"Trial"}),o.jsx("option",{value:"TEACHER_MONTHLY",children:"Teacher Monthly"}),o.jsx("option",{value:"TEACHER_ANNUAL",children:"Teacher Annual"}),o.jsx("option",{value:"SMALL_TEAM_MONTHLY",children:"Small Team Monthly"}),o.jsx("option",{value:"SMALL_TEAM_ANNUAL",children:"Small Team Annual"}),o.jsx("option",{value:"SMALL_SCHOOL",children:"Small School"}),o.jsx("option",{value:"MEDIUM_SCHOOL",children:"Medium School"}),o.jsx("option",{value:"LARGE_SCHOOL",children:"Large School"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"status",children:"Status"}),o.jsxs("select",{id:"status",value:i,onChange:m=>a(m.target.value),className:"w-full p-2 border rounded","data-testid":"select-edit-status",children:[o.jsx("option",{value:"PENDING",children:"Pending"}),o.jsx("option",{value:"ACTIVE",children:"Active"}),o.jsx("option",{value:"CANCELLED",children:"Cancelled"}),o.jsx("option",{value:"EXPIRED",children:"Expired"})]})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"maxTeachers",children:"Max Teachers"}),o.jsx(he,{id:"maxTeachers",type:"number",value:l,onChange:m=>c(Number(m.target.value)),"data-testid":"input-edit-teachers"})]}),o.jsxs("div",{children:[o.jsx(ne,{htmlFor:"maxStudents",children:"Max Students"}),o.jsx(he,{id:"maxStudents",type:"number",value:d,onChange:m=>h(Number(m.target.value)),"data-testid":"input-edit-students"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(W,{onClick:f,"data-testid":"button-save-edits",children:[o.jsx(LL,{className:"w-4 h-4 mr-2"}),"Save"]}),o.jsxs(W,{variant:"outline",onClick:n,"data-testid":"button-cancel-edits",children:[o.jsx(nu,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})]})})}function dW(){const[t,e]=p.useState([]),[n,r]=p.useState([]),[s,i]=p.useState([]),[a,l]=p.useState(!1),[c,d]=p.useState(!1),[h,f]=p.useState(!0),[m,y]=p.useState(null),{toast:T}=Nt(),x=async()=>{try{const D=await Ne("GET","/api/admin/status");if(D.ok){const E=await D.json();d(!E.hasAdmins)}}catch{d(!0)}},w=async()=>{try{const[D,E,v]=await Promise.all([Ne("GET","/api/admin/schools"),Ne("GET","/api/admin/payments"),Ne("GET","/api/admin/events")]);if([D,E,v].some(C=>C.status===401)){l(!0);return}e(await D.json()),r(await E.json()),i(await v.json()),l(!1)}catch{l(!0)}finally{f(!1)}},b=async(D,E)=>{try{(await Ne("PATCH",`/api/admin/schools/${D}`,E)).ok?(T({title:"School Updated",description:"School details have been updated successfully."}),w(),y(null)):T({title:"Update Failed",description:"Failed to update school details.",variant:"destructive"})}catch{T({title:"Update Error",description:"An error occurred while updating the school.",variant:"destructive"})}},_=async D=>{if(prompt(` PERMANENT DELETE WARNING 

This will PERMANENTLY delete "${D.name}" and ALL associated data including:
 All teachers and users (${D.maxTeachers} max)
 All students and passes (${D.maxStudents} max)
 All payment records and subscription history
 All database entries (CASCADE DELETE)

Stripe subscription will be cancelled automatically.

Type the school name EXACTLY to confirm: "${D.name}"`)!==D.name){T({title:"Delete Cancelled",description:"School name confirmation did not match. No changes made."});return}try{const v=await fetch(`/api/admin/schools/${D.id}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(v.ok){const C=await v.json();T({title:"School Permanently Deleted",description:`${D.name} and all associated data have been permanently removed.`}),e(A=>A.filter(R=>R.id!==D.id)),console.log(` School deletion completed: ${C.id}`)}else{const C=await v.json().catch(()=>({error:"Unknown error"}));T({title:"Delete Failed",description:C.error==="not_found"?"School not found.":C.error==="bad_id"?"Invalid school ID format.":`Failed to delete school: ${C.detail||C.error}`,variant:"destructive"})}}catch{T({title:"Delete Error",description:"Network error occurred while deleting the school.",variant:"destructive"})}};if(p.useEffect(()=>{c||w()},[c]),p.useEffect(()=>{x()},[]),h)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});if(c)return o.jsx(cW,{onSuccess:()=>{d(!1),w()}});if(a)return o.jsx(lW,{onSuccess:w});const N=n.reduce((D,E)=>D+E.amountCents,0)/100,I=t.filter(D=>D.status==="ACTIVE").length,O=t.filter(D=>D.plan==="TRIAL").length;return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"PassPilot Usage Tracker"}),o.jsx(W,{variant:"outline",onClick:()=>Ne("POST","/api/admin/logout").then(()=>l(!0)),"data-testid":"button-logout",children:"Logout"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs(ee,{children:[o.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ge,{className:"text-sm font-medium",children:"Total Schools"}),o.jsx(un,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(te,{children:o.jsx("div",{className:"text-2xl font-bold","data-testid":"metric-total-schools",children:t.length})})]}),o.jsxs(ee,{children:[o.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ge,{className:"text-sm font-medium",children:"Active Schools"}),o.jsx(bL,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(te,{children:o.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"metric-active-schools",children:I})})]}),o.jsxs(ee,{children:[o.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ge,{className:"text-sm font-medium",children:"Trial Schools"}),o.jsx(Da,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(te,{children:o.jsx("div",{className:"text-2xl font-bold text-orange-600","data-testid":"metric-trial-schools",children:O})})]}),o.jsxs(ee,{children:[o.jsxs(pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ge,{className:"text-sm font-medium",children:"Total Revenue"}),o.jsx($v,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(te,{children:o.jsxs("div",{className:"text-2xl font-bold text-blue-600","data-testid":"metric-total-revenue",children:["$",N.toFixed(2)]})})]})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"All Schools"})}),o.jsx(te,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-2",children:"School"}),o.jsx("th",{className:"text-left p-2",children:"Admin Email"}),o.jsx("th",{className:"text-left p-2",children:"Plan"}),o.jsx("th",{className:"text-left p-2",children:"Status"}),o.jsx("th",{className:"text-left p-2",children:"Teachers"}),o.jsx("th",{className:"text-left p-2",children:"Students"}),o.jsx("th",{className:"text-left p-2",children:"Created"}),o.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),o.jsx("tbody",{children:t.map(D=>o.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[o.jsx("td",{className:"p-2 font-medium","data-testid":`school-name-${D.id}`,children:D.name}),o.jsx("td",{className:"p-2","data-testid":`school-email-${D.id}`,children:D.adminEmail}),o.jsx("td",{className:"p-2","data-testid":`school-plan-${D.id}`,children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.plan==="TRIAL"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:D.plan})}),o.jsx("td",{className:"p-2","data-testid":`school-status-${D.id}`,children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="ACTIVE"?"bg-green-100 text-green-800":D.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:D.status})}),o.jsx("td",{className:"p-2","data-testid":`school-teachers-${D.id}`,children:D.maxTeachers}),o.jsx("td",{className:"p-2","data-testid":`school-students-${D.id}`,children:D.maxStudents}),o.jsx("td",{className:"p-2","data-testid":`school-created-${D.id}`,children:new Date(D.createdAt).toLocaleDateString()}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{size:"sm",variant:"outline",onClick:()=>y(D),"data-testid":`button-edit-${D.id}`,children:o.jsx(Hg,{className:"w-4 h-4"})}),o.jsx(W,{size:"sm",variant:"outline",onClick:()=>_(D),className:"text-red-600 hover:text-red-700 hover:bg-red-50","data-testid":`button-delete-${D.id}`,children:""})]})})]},D.id))})]})})})]}),o.jsxs(ee,{children:[o.jsx(pe,{children:o.jsx(ge,{children:"Recent Payments"})}),o.jsx(te,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b",children:[o.jsx("th",{className:"text-left p-2",children:"Date"}),o.jsx("th",{className:"text-left p-2",children:"Amount"}),o.jsx("th",{className:"text-left p-2",children:"Plan"}),o.jsx("th",{className:"text-left p-2",children:"Status"})]})}),o.jsx("tbody",{children:n.slice(0,10).map(D=>o.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[o.jsx("td",{className:"p-2","data-testid":`payment-date-${D.id}`,children:new Date(D.createdAt).toLocaleDateString()}),o.jsxs("td",{className:"p-2 font-medium","data-testid":`payment-amount-${D.id}`,children:["$",(D.amountCents/100).toFixed(2)," ",D.currency.toUpperCase()]}),o.jsx("td",{className:"p-2","data-testid":`payment-plan-${D.id}`,children:D.plan}),o.jsx("td",{className:"p-2","data-testid":`payment-status-${D.id}`,children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="succeeded"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.status})})]},D.id))})]})})})]}),m&&o.jsx(uW,{school:m,onSave:D=>b(m.id,D),onCancel:()=>y(null)})]})})}function hW(){return o.jsxs(KO,{children:[o.jsx(Yn,{path:"/",component:o1}),o.jsx(Yn,{path:"/login",component:UH}),o.jsx(Yn,{path:"/register",component:eW}),o.jsx(Yn,{path:"/reset-password",component:tW}),o.jsx(Yn,{path:"/kiosk-demo",component:rW}),o.jsx(Yn,{path:"/kiosk",component:sW}),o.jsx(Yn,{path:"/guide",component:iW}),o.jsx(Yn,{path:"/features",component:oW}),o.jsx(Yn,{path:"/billing-success",component:aW}),o.jsx(Yn,{path:"/admin",component:dW}),o.jsx(Yn,{children:o.jsx(o1,{})})]})}function fW(){return o.jsx(mM,{client:Ue,children:o.jsx(cF,{children:o.jsxs(dF,{children:[o.jsx(T4,{}),o.jsx(hW,{})]})})})}class mW extends gr.Component{constructor(e){super(e),this.state={}}static getDerivedStateFromError(e){return{err:e}}render(){var e,n;return this.state.err?o.jsxs("pre",{style:{padding:16,fontFamily:"monospace",whiteSpace:"pre-wrap"},children:[String(((e=this.state.err)==null?void 0:e.message)||this.state.err),((n=this.state.err)==null?void 0:n.stack)&&`

`+this.state.err.stack]}):this.props.children}}function pW(){"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/"});t.addEventListener("updatefound",()=>{const n=t.installing;n&&n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&n.postMessage({type:"SKIP_WAITING"})})});let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())})}catch(t){console.error("SW registration failed",t)}})}pW();kb(document.getElementById("root")).render(o.jsx(mW,{children:o.jsx(fW,{})}));
